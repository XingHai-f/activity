/*! Build time: 12/4/2024, 2:47:50 PM
Version: 0.4.1
Env: production
 */
function _toConsumableArray2(r) { return _arrayWithoutHoles2(r) || _iterableToArray2(r) || _unsupportedIterableToArray2(r) || _nonIterableSpread2(); }
function _nonIterableSpread2() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray2(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles2(r) { if (Array.isArray(r)) return _arrayLikeToArray2(r); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof4(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _createForOfIteratorHelper2(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray2(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n4 = 0, F = function F() {}; return { s: F, n: function n() { return _n4 >= r.length ? { done: !0 } : { done: !1, value: r[_n4++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray2(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray2(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray2(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray2(r, a) : void 0; } }
function _arrayLikeToArray2(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty2(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty2(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof4(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof4(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof4(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof4(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof4(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _typeof4(o) { "@babel/helpers - typeof"; return _typeof4 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof4(o); }
var __defProp = Object.defineProperty;
var __defNormalProp = function __defNormalProp(obj, key, value) {
  return key in obj ? __defProp(obj, key, {
    enumerable: true,
    configurable: true,
    writable: true,
    value: value
  }) : obj[key] = value;
};
var __publicField = function __publicField(obj, key, value) {
  __defNormalProp(obj, _typeof4(key) !== "symbol" ? key + "" : key, value);
  return value;
};
(function (global2, factory) {
  (typeof exports === "undefined" ? "undefined" : _typeof4(exports)) === "object" && typeof module !== "undefined" ? module.exports = factory(require("react/jsx-runtime"), require("react")) : typeof define === "function" && define.amd ? define(["react/jsx-runtime", "react"], factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, global2.EraTasklist = factory(global2.jsxRuntime, global2.React));
})(this, function (jsxRuntime, React) {
  var _a2, _b, _c, _d, _e2, _f, _g;
  "use strict";
  var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
  function getDefaultExportFromCjs(x2) {
    return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, "default") ? x2["default"] : x2;
  }
  function getAugmentedNamespace(n2) {
    if (n2.__esModule) return n2;
    var f2 = n2["default"];
    if (typeof f2 == "function") {
      var a2 = function a3() {
        if (this instanceof a3) {
          return Reflect.construct(f2, arguments, this.constructor);
        }
        return f2.apply(this, arguments);
      };
      a2.prototype = f2.prototype;
    } else a2 = {};
    Object.defineProperty(a2, "__esModule", {
      value: true
    });
    Object.keys(n2).forEach(function (k2) {
      var d2 = Object.getOwnPropertyDescriptor(n2, k2);
      Object.defineProperty(a2, k2, d2.get ? d2 : {
        enumerable: true,
        get: function get() {
          return n2[k2];
        }
      });
    });
    return a2;
  }
  function baseTimes$1(n2, iteratee) {
    var index2 = -1,
      result2 = Array(n2);
    while (++index2 < n2) {
      result2[index2] = iteratee(index2);
    }
    return result2;
  }
  var _baseTimes = baseTimes$1;
  var freeGlobal$3 = _typeof4(commonjsGlobal) == "object" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
  var _freeGlobal = freeGlobal$3;
  var freeGlobal$2 = _freeGlobal;
  var freeSelf$1 = (typeof self === "undefined" ? "undefined" : _typeof4(self)) == "object" && self && self.Object === Object && self;
  var root$a = freeGlobal$2 || freeSelf$1 || Function("return this")();
  var _root = root$a;
  var root$9 = _root;
  var Symbol$8 = root$9.Symbol;
  var _Symbol = Symbol$8;
  var Symbol$7 = _Symbol;
  var objectProto$i = Object.prototype;
  var hasOwnProperty$e = objectProto$i.hasOwnProperty;
  var nativeObjectToString$3 = objectProto$i.toString;
  var symToStringTag$3 = Symbol$7 ? Symbol$7.toStringTag : void 0;
  function getRawTag$2(value) {
    var isOwn = hasOwnProperty$e.call(value, symToStringTag$3),
      tag = value[symToStringTag$3];
    try {
      value[symToStringTag$3] = void 0;
      var unmasked = true;
    } catch (e2) {}
    var result2 = nativeObjectToString$3.call(value);
    if (unmasked) {
      if (isOwn) {
        value[symToStringTag$3] = tag;
      } else {
        delete value[symToStringTag$3];
      }
    }
    return result2;
  }
  var _getRawTag = getRawTag$2;
  var objectProto$h = Object.prototype;
  var nativeObjectToString$2 = objectProto$h.toString;
  function objectToString$3(value) {
    return nativeObjectToString$2.call(value);
  }
  var _objectToString = objectToString$3;
  var Symbol$6 = _Symbol,
    getRawTag$1 = _getRawTag,
    objectToString$2 = _objectToString;
  var nullTag$1 = "[object Null]",
    undefinedTag$1 = "[object Undefined]";
  var symToStringTag$2 = Symbol$6 ? Symbol$6.toStringTag : void 0;
  function baseGetTag$7(value) {
    if (value == null) {
      return value === void 0 ? undefinedTag$1 : nullTag$1;
    }
    return symToStringTag$2 && symToStringTag$2 in Object(value) ? getRawTag$1(value) : objectToString$2(value);
  }
  var _baseGetTag = baseGetTag$7;
  function isObjectLike$9(value) {
    return value != null && _typeof4(value) == "object";
  }
  var isObjectLike_1 = isObjectLike$9;
  var baseGetTag$6 = _baseGetTag,
    isObjectLike$8 = isObjectLike_1;
  var argsTag$2 = "[object Arguments]";
  function baseIsArguments$1(value) {
    return isObjectLike$8(value) && baseGetTag$6(value) == argsTag$2;
  }
  var _baseIsArguments = baseIsArguments$1;
  var baseIsArguments = _baseIsArguments,
    isObjectLike$7 = isObjectLike_1;
  var objectProto$g = Object.prototype;
  var hasOwnProperty$d = objectProto$g.hasOwnProperty;
  var propertyIsEnumerable$1 = objectProto$g.propertyIsEnumerable;
  var isArguments$4 = baseIsArguments(function () {
    return arguments;
  }()) ? baseIsArguments : function (value) {
    return isObjectLike$7(value) && hasOwnProperty$d.call(value, "callee") && !propertyIsEnumerable$1.call(value, "callee");
  };
  var isArguments_1 = isArguments$4;
  var isArray$l = Array.isArray;
  var isArray_1 = isArray$l;
  var isBuffer$5 = {
    exports: {}
  };
  function stubFalse() {
    return false;
  }
  var stubFalse_1 = stubFalse;
  isBuffer$5.exports;
  (function (module2, exports2) {
    var root2 = _root,
      stubFalse2 = stubFalse_1;
    var freeExports = exports2 && !exports2.nodeType && exports2;
    var freeModule = freeExports && true && module2 && !module2.nodeType && module2;
    var moduleExports = freeModule && freeModule.exports === freeExports;
    var Buffer2 = moduleExports ? root2.Buffer : void 0;
    var nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : void 0;
    var isBuffer2 = nativeIsBuffer || stubFalse2;
    module2.exports = isBuffer2;
  })(isBuffer$5, isBuffer$5.exports);
  var isBufferExports = isBuffer$5.exports;
  var MAX_SAFE_INTEGER$1 = 9007199254740991;
  var reIsUint = /^(?:0|[1-9]\d*)$/;
  function isIndex$4(value, length) {
    var type2 = _typeof4(value);
    length = length == null ? MAX_SAFE_INTEGER$1 : length;
    return !!length && (type2 == "number" || type2 != "symbol" && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;
  }
  var _isIndex = isIndex$4;
  var MAX_SAFE_INTEGER = 9007199254740991;
  function isLength$3(value) {
    return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
  }
  var isLength_1 = isLength$3;
  var baseGetTag$5 = _baseGetTag,
    isLength$2 = isLength_1,
    isObjectLike$6 = isObjectLike_1;
  var argsTag$1 = "[object Arguments]",
    arrayTag$1 = "[object Array]",
    boolTag$2 = "[object Boolean]",
    dateTag$2 = "[object Date]",
    errorTag$1 = "[object Error]",
    funcTag$3 = "[object Function]",
    mapTag$4 = "[object Map]",
    numberTag$2 = "[object Number]",
    objectTag$3 = "[object Object]",
    regexpTag$2 = "[object RegExp]",
    setTag$4 = "[object Set]",
    stringTag$2 = "[object String]",
    weakMapTag$2 = "[object WeakMap]";
  var arrayBufferTag$2 = "[object ArrayBuffer]",
    dataViewTag$3 = "[object DataView]",
    float32Tag$2 = "[object Float32Array]",
    float64Tag$2 = "[object Float64Array]",
    int8Tag$2 = "[object Int8Array]",
    int16Tag$2 = "[object Int16Array]",
    int32Tag$2 = "[object Int32Array]",
    uint8Tag$2 = "[object Uint8Array]",
    uint8ClampedTag$2 = "[object Uint8ClampedArray]",
    uint16Tag$2 = "[object Uint16Array]",
    uint32Tag$2 = "[object Uint32Array]";
  var typedArrayTags = {};
  typedArrayTags[float32Tag$2] = typedArrayTags[float64Tag$2] = typedArrayTags[int8Tag$2] = typedArrayTags[int16Tag$2] = typedArrayTags[int32Tag$2] = typedArrayTags[uint8Tag$2] = typedArrayTags[uint8ClampedTag$2] = typedArrayTags[uint16Tag$2] = typedArrayTags[uint32Tag$2] = true;
  typedArrayTags[argsTag$1] = typedArrayTags[arrayTag$1] = typedArrayTags[arrayBufferTag$2] = typedArrayTags[boolTag$2] = typedArrayTags[dataViewTag$3] = typedArrayTags[dateTag$2] = typedArrayTags[errorTag$1] = typedArrayTags[funcTag$3] = typedArrayTags[mapTag$4] = typedArrayTags[numberTag$2] = typedArrayTags[objectTag$3] = typedArrayTags[regexpTag$2] = typedArrayTags[setTag$4] = typedArrayTags[stringTag$2] = typedArrayTags[weakMapTag$2] = false;
  function baseIsTypedArray$1(value) {
    return isObjectLike$6(value) && isLength$2(value.length) && !!typedArrayTags[baseGetTag$5(value)];
  }
  var _baseIsTypedArray = baseIsTypedArray$1;
  function baseUnary$3(func) {
    return function (value) {
      return func(value);
    };
  }
  var _baseUnary = baseUnary$3;
  var _nodeUtil = {
    exports: {}
  };
  _nodeUtil.exports;
  (function (module2, exports2) {
    var freeGlobal2 = _freeGlobal;
    var freeExports = exports2 && !exports2.nodeType && exports2;
    var freeModule = freeExports && true && module2 && !module2.nodeType && module2;
    var moduleExports = freeModule && freeModule.exports === freeExports;
    var freeProcess = moduleExports && freeGlobal2.process;
    var nodeUtil2 = function () {
      try {
        var types = freeModule && freeModule.require && freeModule.require("util").types;
        if (types) {
          return types;
        }
        return freeProcess && freeProcess.binding && freeProcess.binding("util");
      } catch (e2) {}
    }();
    module2.exports = nodeUtil2;
  })(_nodeUtil, _nodeUtil.exports);
  var _nodeUtilExports = _nodeUtil.exports;
  var baseIsTypedArray = _baseIsTypedArray,
    baseUnary$2 = _baseUnary,
    nodeUtil$2 = _nodeUtilExports;
  var nodeIsTypedArray = nodeUtil$2 && nodeUtil$2.isTypedArray;
  var isTypedArray$2 = nodeIsTypedArray ? baseUnary$2(nodeIsTypedArray) : baseIsTypedArray;
  var isTypedArray_1 = isTypedArray$2;
  var baseTimes = _baseTimes,
    isArguments$3 = isArguments_1,
    isArray$k = isArray_1,
    isBuffer$4 = isBufferExports,
    isIndex$3 = _isIndex,
    isTypedArray$1 = isTypedArray_1;
  var objectProto$f = Object.prototype;
  var hasOwnProperty$c = objectProto$f.hasOwnProperty;
  function arrayLikeKeys$2(value, inherited) {
    var isArr = isArray$k(value),
      isArg = !isArr && isArguments$3(value),
      isBuff = !isArr && !isArg && isBuffer$4(value),
      isType = !isArr && !isArg && !isBuff && isTypedArray$1(value),
      skipIndexes = isArr || isArg || isBuff || isType,
      result2 = skipIndexes ? baseTimes(value.length, String) : [],
      length = result2.length;
    for (var key in value) {
      if ((inherited || hasOwnProperty$c.call(value, key)) && !(skipIndexes && (
      // Safari 9 has enumerable `arguments.length` in strict mode.
      key == "length" ||
      // Node.js 0.10 has enumerable non-index properties on buffers.
      isBuff && (key == "offset" || key == "parent") ||
      // PhantomJS 2 has enumerable non-index properties on typed arrays.
      isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") ||
      // Skip index properties.
      isIndex$3(key, length)))) {
        result2.push(key);
      }
    }
    return result2;
  }
  var _arrayLikeKeys = arrayLikeKeys$2;
  var objectProto$e = Object.prototype;
  function isPrototype$3(value) {
    var Ctor = value && value.constructor,
      proto = typeof Ctor == "function" && Ctor.prototype || objectProto$e;
    return value === proto;
  }
  var _isPrototype = isPrototype$3;
  function overArg$2(func, transform) {
    return function (arg) {
      return func(transform(arg));
    };
  }
  var _overArg = overArg$2;
  var overArg$1 = _overArg;
  var nativeKeys$1 = overArg$1(Object.keys, Object);
  var _nativeKeys = nativeKeys$1;
  var isPrototype$2 = _isPrototype,
    nativeKeys = _nativeKeys;
  var objectProto$d = Object.prototype;
  var hasOwnProperty$b = objectProto$d.hasOwnProperty;
  function baseKeys$1(object) {
    if (!isPrototype$2(object)) {
      return nativeKeys(object);
    }
    var result2 = [];
    for (var key in Object(object)) {
      if (hasOwnProperty$b.call(object, key) && key != "constructor") {
        result2.push(key);
      }
    }
    return result2;
  }
  var _baseKeys = baseKeys$1;
  function isObject$f(value) {
    var type2 = _typeof4(value);
    return value != null && (type2 == "object" || type2 == "function");
  }
  var isObject_1$1 = isObject$f;
  var baseGetTag$4 = _baseGetTag,
    isObject$e = isObject_1$1;
  var asyncTag$1 = "[object AsyncFunction]",
    funcTag$2 = "[object Function]",
    genTag$2 = "[object GeneratorFunction]",
    proxyTag$1 = "[object Proxy]";
  function isFunction$4(value) {
    if (!isObject$e(value)) {
      return false;
    }
    var tag = baseGetTag$4(value);
    return tag == funcTag$2 || tag == genTag$2 || tag == asyncTag$1 || tag == proxyTag$1;
  }
  var isFunction_1 = isFunction$4;
  var isFunction$3 = isFunction_1,
    isLength$1 = isLength_1;
  function isArrayLike$4(value) {
    return value != null && isLength$1(value.length) && !isFunction$3(value);
  }
  var isArrayLike_1 = isArrayLike$4;
  var arrayLikeKeys$1 = _arrayLikeKeys,
    baseKeys = _baseKeys,
    isArrayLike$3 = isArrayLike_1;
  function keys$3(object) {
    return isArrayLike$3(object) ? arrayLikeKeys$1(object) : baseKeys(object);
  }
  var keys_1 = keys$3;
  var keys$4 = /* @__PURE__ */getDefaultExportFromCjs(keys_1);
  function converToUrlParam$1(obj) {
    var str = keys$4(obj).map(function (key) {
      return "".concat(key, "=").concat(obj[key]);
    }).join("&");
    return str;
  }
  function parseParamToObj$3(obj) {
    if (!obj) return;
    var str = obj.search;
    if (!str) {
      str = obj.hash;
    }
    var index2 = str.indexOf("?");
    str = str.substring(index2 + 1);
    var result2 = {};
    var paramArray = str.split("&");
    for (var i2 = 0, len = paramArray.length; i2 < len; i2++) {
      var pair = paramArray[i2].split("=");
      if (pair[1] === "") {
        pair.push("");
      }
      result2[pair[0]] = pair[1];
    }
    return result2;
  }
  function checkUrl$1(str) {
    if (!str) return false;
    var reg = /https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/;
    return reg.test(str);
  }
  function parseToHttps$1(url2) {
    if (!url2) return "";
    if (!/^(http:|https:)?\/\//.test(url2)) {
      return "https://".concat(url2);
    }
    return url2.replace(/^(http:|https:)?(?=\/\/)/i, "https:");
  }
  function getMetaTag$1(name) {
    var meta = document.head.querySelector("[name=".concat(name, "]"));
    if (meta) {
      return meta.content;
    }
    return "";
  }
  var url$1 = {
    converToUrlParam: converToUrlParam$1,
    parseParamToObj: parseParamToObj$3,
    checkUrl: checkUrl$1,
    parseToHttps: parseToHttps$1,
    getMetaTag: getMetaTag$1
  };
  function logger$3(key, value) {
    if (value === void 0) {
      value = 1;
    }
    var reportScript;
    var k2 = key.replace(/\./g, "-");
    var spmPrefix = url$1.getMetaTag("spm_prefix");
    var isBiliHttps2 = location.href.indexOf("bilihttps") === 0;
    if (!spmPrefix) {
      var meta = document.createElement("meta");
      meta.name = "spm_prefix";
      meta.content = "888.1";
      document.getElementsByTagName("head")[0].appendChild(meta);
    }
    if (!window.reportObserver) {
      window.reportMsgObj = {};
      window.reportConfig = {
        sample: 1,
        scrollTracker: false,
        msgObjects: "reportMsgObj",
        errorTracker: true
      };
      reportScript = document.createElement("script");
      reportScript.src = "".concat(isBiliHttps2 ? "bilihttps:" : "", "//s1.hdslb.com/bfs/seed/log/report/log-reporter.js");
      document.getElementsByTagName("body")[0].appendChild(reportScript);
    }
    var doReport = function doReport() {
      try {
        window.reportMsgObj && window.reportObserver && (window.reportMsgObj[k2] = value, window.reportObserver.forceCommit && window.reportObserver.forceCommit());
      } catch (error) {
        console.error("[logger]", error);
      }
    };
    if (reportScript) {
      reportScript.onload = doReport;
    } else {
      doReport();
    }
  }
  var freeGlobal = (typeof global === "undefined" ? "undefined" : _typeof4(global)) == "object" && global && global.Object === Object && global;
  var freeGlobal$1 = freeGlobal;
  var freeSelf = (typeof self === "undefined" ? "undefined" : _typeof4(self)) == "object" && self && self.Object === Object && self;
  var root$7 = freeGlobal$1 || freeSelf || Function("return this")();
  var root$8 = root$7;
  var Symbol$4 = root$8.Symbol;
  var Symbol$5 = Symbol$4;
  var objectProto$c = Object.prototype;
  var hasOwnProperty$a = objectProto$c.hasOwnProperty;
  var nativeObjectToString$1 = objectProto$c.toString;
  var symToStringTag$1 = Symbol$5 ? Symbol$5.toStringTag : void 0;
  function getRawTag(value) {
    var isOwn = hasOwnProperty$a.call(value, symToStringTag$1),
      tag = value[symToStringTag$1];
    try {
      value[symToStringTag$1] = void 0;
      var unmasked = true;
    } catch (e2) {}
    var result2 = nativeObjectToString$1.call(value);
    if (unmasked) {
      if (isOwn) {
        value[symToStringTag$1] = tag;
      } else {
        delete value[symToStringTag$1];
      }
    }
    return result2;
  }
  var objectProto$b = Object.prototype;
  var nativeObjectToString = objectProto$b.toString;
  function objectToString$1(value) {
    return nativeObjectToString.call(value);
  }
  var nullTag = "[object Null]",
    undefinedTag = "[object Undefined]";
  var symToStringTag = Symbol$5 ? Symbol$5.toStringTag : void 0;
  function baseGetTag$3(value) {
    if (value == null) {
      return value === void 0 ? undefinedTag : nullTag;
    }
    return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString$1(value);
  }
  function isObjectLike$5(value) {
    return value != null && _typeof4(value) == "object";
  }
  var symbolTag$3 = "[object Symbol]";
  function isSymbol$5(value) {
    return _typeof4(value) == "symbol" || isObjectLike$5(value) && baseGetTag$3(value) == symbolTag$3;
  }
  function arrayMap$3(array, iteratee) {
    var index2 = -1,
      length = array == null ? 0 : array.length,
      result2 = Array(length);
    while (++index2 < length) {
      result2[index2] = iteratee(array[index2], index2, array);
    }
    return result2;
  }
  var isArray$i = Array.isArray;
  var isArray$j = isArray$i;
  var INFINITY$3 = 1 / 0;
  var symbolProto$2 = Symbol$5 ? Symbol$5.prototype : void 0,
    symbolToString$1 = symbolProto$2 ? symbolProto$2.toString : void 0;
  function baseToString$2(value) {
    if (typeof value == "string") {
      return value;
    }
    if (isArray$j(value)) {
      return arrayMap$3(value, baseToString$2) + "";
    }
    if (isSymbol$5(value)) {
      return symbolToString$1 ? symbolToString$1.call(value) : "";
    }
    var result2 = value + "";
    return result2 == "0" && 1 / value == -INFINITY$3 ? "-0" : result2;
  }
  var reWhitespace = /\s/;
  function trimmedEndIndex(string) {
    var index2 = string.length;
    while (index2-- && reWhitespace.test(string.charAt(index2))) {}
    return index2;
  }
  var reTrimStart = /^\s+/;
  function baseTrim(string) {
    return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, "") : string;
  }
  function isObject$d(value) {
    var type2 = _typeof4(value);
    return value != null && (type2 == "object" || type2 == "function");
  }
  var NAN = 0 / 0;
  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
  var reIsBinary = /^0b[01]+$/i;
  var reIsOctal = /^0o[0-7]+$/i;
  var freeParseInt = parseInt;
  function toNumber(value) {
    if (typeof value == "number") {
      return value;
    }
    if (isSymbol$5(value)) {
      return NAN;
    }
    if (isObject$d(value)) {
      var other = typeof value.valueOf == "function" ? value.valueOf() : value;
      value = isObject$d(other) ? other + "" : other;
    }
    if (typeof value != "string") {
      return value === 0 ? value : +value;
    }
    value = baseTrim(value);
    var isBinary = reIsBinary.test(value);
    return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
  }
  var asyncTag = "[object AsyncFunction]",
    funcTag$1 = "[object Function]",
    genTag$1 = "[object GeneratorFunction]",
    proxyTag = "[object Proxy]";
  function isFunction$2(value) {
    if (!isObject$d(value)) {
      return false;
    }
    var tag = baseGetTag$3(value);
    return tag == funcTag$1 || tag == genTag$1 || tag == asyncTag || tag == proxyTag;
  }
  var coreJsData$2 = root$8["__core-js_shared__"];
  var coreJsData$3 = coreJsData$2;
  var maskSrcKey$1 = function () {
    var uid = /[^.]+$/.exec(coreJsData$3 && coreJsData$3.keys && coreJsData$3.keys.IE_PROTO || "");
    return uid ? "Symbol(src)_1." + uid : "";
  }();
  function isMasked$2(func) {
    return !!maskSrcKey$1 && maskSrcKey$1 in func;
  }
  var funcProto$4 = Function.prototype;
  var funcToString$4 = funcProto$4.toString;
  function toSource$3(func) {
    if (func != null) {
      try {
        return funcToString$4.call(func);
      } catch (e2) {}
      try {
        return func + "";
      } catch (e2) {}
    }
    return "";
  }
  var reRegExpChar$1 = /[\\^$.*+?()[\]{}|]/g;
  var reIsHostCtor$1 = /^\[object .+?Constructor\]$/;
  var funcProto$3 = Function.prototype,
    objectProto$a = Object.prototype;
  var funcToString$3 = funcProto$3.toString;
  var hasOwnProperty$9 = objectProto$a.hasOwnProperty;
  var reIsNative$1 = RegExp("^" + funcToString$3.call(hasOwnProperty$9).replace(reRegExpChar$1, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
  function baseIsNative$2(value) {
    if (!isObject$d(value) || isMasked$2(value)) {
      return false;
    }
    var pattern = isFunction$2(value) ? reIsNative$1 : reIsHostCtor$1;
    return pattern.test(toSource$3(value));
  }
  function getValue$2(object, key) {
    return object == null ? void 0 : object[key];
  }
  function getNative$8(object, key) {
    var value = getValue$2(object, key);
    return baseIsNative$2(value) ? value : void 0;
  }
  function eq$5(value, other) {
    return value === other || value !== value && other !== other;
  }
  var reIsDeepProp$1 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
    reIsPlainProp$1 = /^\w*$/;
  function isKey$2(value, object) {
    if (isArray$j(value)) {
      return false;
    }
    var type2 = _typeof4(value);
    if (type2 == "number" || type2 == "symbol" || type2 == "boolean" || value == null || isSymbol$5(value)) {
      return true;
    }
    return reIsPlainProp$1.test(value) || !reIsDeepProp$1.test(value) || object != null && value in Object(object);
  }
  var nativeCreate$5 = getNative$8(Object, "create");
  var nativeCreate$6 = nativeCreate$5;
  function hashClear$2() {
    this.__data__ = nativeCreate$6 ? nativeCreate$6(null) : {};
    this.size = 0;
  }
  function hashDelete$2(key) {
    var result2 = this.has(key) && delete this.__data__[key];
    this.size -= result2 ? 1 : 0;
    return result2;
  }
  var HASH_UNDEFINED$3 = "__lodash_hash_undefined__";
  var objectProto$9 = Object.prototype;
  var hasOwnProperty$8 = objectProto$9.hasOwnProperty;
  function hashGet$2(key) {
    var data = this.__data__;
    if (nativeCreate$6) {
      var result2 = data[key];
      return result2 === HASH_UNDEFINED$3 ? void 0 : result2;
    }
    return hasOwnProperty$8.call(data, key) ? data[key] : void 0;
  }
  var objectProto$8 = Object.prototype;
  var hasOwnProperty$7 = objectProto$8.hasOwnProperty;
  function hashHas$2(key) {
    var data = this.__data__;
    return nativeCreate$6 ? data[key] !== void 0 : hasOwnProperty$7.call(data, key);
  }
  var HASH_UNDEFINED$2 = "__lodash_hash_undefined__";
  function hashSet$2(key, value) {
    var data = this.__data__;
    this.size += this.has(key) ? 0 : 1;
    data[key] = nativeCreate$6 && value === void 0 ? HASH_UNDEFINED$2 : value;
    return this;
  }
  function Hash$2(entries) {
    var index2 = -1,
      length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  Hash$2.prototype.clear = hashClear$2;
  Hash$2.prototype["delete"] = hashDelete$2;
  Hash$2.prototype.get = hashGet$2;
  Hash$2.prototype.has = hashHas$2;
  Hash$2.prototype.set = hashSet$2;
  function listCacheClear$2() {
    this.__data__ = [];
    this.size = 0;
  }
  function assocIndexOf$5(array, key) {
    var length = array.length;
    while (length--) {
      if (eq$5(array[length][0], key)) {
        return length;
      }
    }
    return -1;
  }
  var arrayProto$1 = Array.prototype;
  var splice$1 = arrayProto$1.splice;
  function listCacheDelete$2(key) {
    var data = this.__data__,
      index2 = assocIndexOf$5(data, key);
    if (index2 < 0) {
      return false;
    }
    var lastIndex = data.length - 1;
    if (index2 == lastIndex) {
      data.pop();
    } else {
      splice$1.call(data, index2, 1);
    }
    --this.size;
    return true;
  }
  function listCacheGet$2(key) {
    var data = this.__data__,
      index2 = assocIndexOf$5(data, key);
    return index2 < 0 ? void 0 : data[index2][1];
  }
  function listCacheHas$2(key) {
    return assocIndexOf$5(this.__data__, key) > -1;
  }
  function listCacheSet$2(key, value) {
    var data = this.__data__,
      index2 = assocIndexOf$5(data, key);
    if (index2 < 0) {
      ++this.size;
      data.push([key, value]);
    } else {
      data[index2][1] = value;
    }
    return this;
  }
  function ListCache$5(entries) {
    var index2 = -1,
      length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  ListCache$5.prototype.clear = listCacheClear$2;
  ListCache$5.prototype["delete"] = listCacheDelete$2;
  ListCache$5.prototype.get = listCacheGet$2;
  ListCache$5.prototype.has = listCacheHas$2;
  ListCache$5.prototype.set = listCacheSet$2;
  var Map$5 = getNative$8(root$8, "Map");
  var Map$6 = Map$5;
  function mapCacheClear$2() {
    this.size = 0;
    this.__data__ = {
      "hash": new Hash$2(),
      "map": new (Map$6 || ListCache$5)(),
      "string": new Hash$2()
    };
  }
  function isKeyable$2(value) {
    var type2 = _typeof4(value);
    return type2 == "string" || type2 == "number" || type2 == "symbol" || type2 == "boolean" ? value !== "__proto__" : value === null;
  }
  function getMapData$5(map, key) {
    var data = map.__data__;
    return isKeyable$2(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
  }
  function mapCacheDelete$2(key) {
    var result2 = getMapData$5(this, key)["delete"](key);
    this.size -= result2 ? 1 : 0;
    return result2;
  }
  function mapCacheGet$2(key) {
    return getMapData$5(this, key).get(key);
  }
  function mapCacheHas$2(key) {
    return getMapData$5(this, key).has(key);
  }
  function mapCacheSet$2(key, value) {
    var data = getMapData$5(this, key),
      size = data.size;
    data.set(key, value);
    this.size += data.size == size ? 0 : 1;
    return this;
  }
  function MapCache$3(entries) {
    var index2 = -1,
      length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  MapCache$3.prototype.clear = mapCacheClear$2;
  MapCache$3.prototype["delete"] = mapCacheDelete$2;
  MapCache$3.prototype.get = mapCacheGet$2;
  MapCache$3.prototype.has = mapCacheHas$2;
  MapCache$3.prototype.set = mapCacheSet$2;
  var FUNC_ERROR_TEXT$3 = "Expected a function";
  function memoize$2(func, resolver) {
    if (typeof func != "function" || resolver != null && typeof resolver != "function") {
      throw new TypeError(FUNC_ERROR_TEXT$3);
    }
    var _memoized = function memoized() {
      var args = arguments,
        key = resolver ? resolver.apply(this, args) : args[0],
        cache = _memoized.cache;
      if (cache.has(key)) {
        return cache.get(key);
      }
      var result2 = func.apply(this, args);
      _memoized.cache = cache.set(key, result2) || cache;
      return result2;
    };
    _memoized.cache = new (memoize$2.Cache || MapCache$3)();
    return _memoized;
  }
  memoize$2.Cache = MapCache$3;
  var MAX_MEMOIZE_SIZE$1 = 500;
  function memoizeCapped$2(func) {
    var result2 = memoize$2(func, function (key) {
      if (cache.size === MAX_MEMOIZE_SIZE$1) {
        cache.clear();
      }
      return key;
    });
    var cache = result2.cache;
    return result2;
  }
  var rePropName$2 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
  var reEscapeChar$2 = /\\(\\)?/g;
  var stringToPath$3 = memoizeCapped$2(function (string) {
    var result2 = [];
    if (string.charCodeAt(0) === 46) {
      result2.push("");
    }
    string.replace(rePropName$2, function (match, number, quote2, subString) {
      result2.push(quote2 ? subString.replace(reEscapeChar$2, "$1") : number || match);
    });
    return result2;
  });
  var stringToPath$4 = stringToPath$3;
  function toString$3(value) {
    return value == null ? "" : baseToString$2(value);
  }
  function castPath$7(value, object) {
    if (isArray$j(value)) {
      return value;
    }
    return isKey$2(value, object) ? [value] : stringToPath$4(toString$3(value));
  }
  var INFINITY$2 = 1 / 0;
  function toKey$5(value) {
    if (typeof value == "string" || isSymbol$5(value)) {
      return value;
    }
    var result2 = value + "";
    return result2 == "0" && 1 / value == -INFINITY$2 ? "-0" : result2;
  }
  function baseGet$4(object, path) {
    path = castPath$7(path, object);
    var index2 = 0,
      length = path.length;
    while (object != null && index2 < length) {
      object = object[toKey$5(path[index2++])];
    }
    return index2 && index2 == length ? object : void 0;
  }
  function get$2(object, path, defaultValue) {
    var result2 = object == null ? void 0 : baseGet$4(object, path);
    return result2 === void 0 ? defaultValue : result2;
  }
  var now = function now() {
    return root$8.Date.now();
  };
  var now$1 = now;
  var FUNC_ERROR_TEXT$2 = "Expected a function";
  var nativeMax$1 = Math.max,
    nativeMin = Math.min;
  function debounce(func, wait, options) {
    var lastArgs,
      lastThis,
      maxWait,
      result2,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;
    if (typeof func != "function") {
      throw new TypeError(FUNC_ERROR_TEXT$2);
    }
    wait = toNumber(wait) || 0;
    if (isObject$d(options)) {
      leading = !!options.leading;
      maxing = "maxWait" in options;
      maxWait = maxing ? nativeMax$1(toNumber(options.maxWait) || 0, wait) : maxWait;
      trailing = "trailing" in options ? !!options.trailing : trailing;
    }
    function invokeFunc(time) {
      var args = lastArgs,
        thisArg = lastThis;
      lastArgs = lastThis = void 0;
      lastInvokeTime = time;
      result2 = func.apply(thisArg, args);
      return result2;
    }
    function leadingEdge(time) {
      lastInvokeTime = time;
      timerId = setTimeout(timerExpired, wait);
      return leading ? invokeFunc(time) : result2;
    }
    function remainingWait(time) {
      var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        timeWaiting = wait - timeSinceLastCall;
      return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
    }
    function shouldInvoke(time) {
      var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;
      return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
    }
    function timerExpired() {
      var time = now$1();
      if (shouldInvoke(time)) {
        return trailingEdge(time);
      }
      timerId = setTimeout(timerExpired, remainingWait(time));
    }
    function trailingEdge(time) {
      timerId = void 0;
      if (trailing && lastArgs) {
        return invokeFunc(time);
      }
      lastArgs = lastThis = void 0;
      return result2;
    }
    function cancel() {
      if (timerId !== void 0) {
        clearTimeout(timerId);
      }
      lastInvokeTime = 0;
      lastArgs = lastCallTime = lastThis = timerId = void 0;
    }
    function flush() {
      return timerId === void 0 ? result2 : trailingEdge(now$1());
    }
    function debounced() {
      var time = now$1(),
        isInvoking = shouldInvoke(time);
      lastArgs = arguments;
      lastThis = this;
      lastCallTime = time;
      if (isInvoking) {
        if (timerId === void 0) {
          return leadingEdge(lastCallTime);
        }
        if (maxing) {
          clearTimeout(timerId);
          timerId = setTimeout(timerExpired, wait);
          return invokeFunc(lastCallTime);
        }
      }
      if (timerId === void 0) {
        timerId = setTimeout(timerExpired, wait);
      }
      return result2;
    }
    debounced.cancel = cancel;
    debounced.flush = flush;
    return debounced;
  }
  function last$2(array) {
    var length = array == null ? 0 : array.length;
    return length ? array[length - 1] : void 0;
  }
  var FUNC_ERROR_TEXT$1 = "Expected a function";
  function throttle(func, wait, options) {
    var leading = true,
      trailing = true;
    if (typeof func != "function") {
      throw new TypeError(FUNC_ERROR_TEXT$1);
    }
    if (isObject$d(options)) {
      leading = "leading" in options ? !!options.leading : leading;
      trailing = "trailing" in options ? !!options.trailing : trailing;
    }
    return debounce(func, wait, {
      "leading": leading,
      "maxWait": wait,
      "trailing": trailing
    });
  }
  var activityName$1 = "activity-task-component";
  var isUat$4 = window.location.href.indexOf("uat-") >= 0;
  var isPre$2 = window.location.href.indexOf("pre-") >= 0;
  var envPrefix$2 = isUat$4 ? "uat-" : isPre$2 ? "pre-" : "";
  var actApiPrefix$2 = "".concat(location.protocol, "//").concat(envPrefix$2, "api.bilibili.com");
  var isAdmin = /\.*activity-template.bilibili.co$/g.test(window.document.domain) || /\.*wdm.bilibili.com$/g.test(window.document.domain);
  var h5Type = "h5";
  var dist$1 = {};
  Object.defineProperty(dist$1, "__esModule", {
    value: true
  });
  function isPromise(obj) {
    return !!obj && (_typeof4(obj) === "object" || typeof obj === "function") && typeof obj.then === "function";
  }
  var BiliEventEmitter = function () {
    function BiliEventEmitter2() {
      this.eventMap = {};
    }
    BiliEventEmitter2.prototype.once = function (type2, handler) {
      if (!type2 || !handler) {
        return false;
      }
      if (!this.eventMap[type2]) {
        this.eventMap[type2] = [];
      }
      this.eventMap[type2].push({
        type: type2,
        handler: handler,
        options: {
          once: true
        }
      });
    };
    BiliEventEmitter2.prototype.on = function (type2, handler) {
      if (!type2 || !handler) {
        return false;
      }
      if (!this.eventMap[type2]) {
        this.eventMap[type2] = [];
      }
      this.eventMap[type2].push({
        type: type2,
        handler: handler
      });
    };
    BiliEventEmitter2.prototype.off = function (type2, handler) {
      var collect = this.eventMap[type2];
      if (!Array.isArray(collect)) {
        return false;
      }
      if (!handler) {
        delete this.eventMap[type2];
      }
      var idx = collect.findIndex(function (target) {
        return handler === target.handler;
      });
      if (idx > -1) {
        collect.splice(idx, 1);
      }
    };
    BiliEventEmitter2.prototype.emit = function (type2, payload, callback) {
      var collect = this.eventMap[type2];
      if (!Array.isArray(collect)) {
        return false;
      }
      var processor = [];
      collect.forEach(function (evt, index2) {
        var feedback = evt.handler(payload);
        if (isPromise(feedback)) {
          processor.push(feedback);
        }
        if (evt.options && evt.options.once) {
          collect.splice(index2, 1);
        }
      });
      Promise.all(processor).then(function () {
        return callback ? callback() : null;
      })["catch"](console.warn);
    };
    return BiliEventEmitter2;
  }();
  dist$1.BiliEventEmitter = BiliEventEmitter;
  if (!window.BiliActEvents) {
    window.BiliActEvents = new BiliEventEmitter();
  }
  var _default = dist$1["default"] = window.BiliActEvents;
  var smoothscroll$1 = {
    exports: {}
  };
  (function (module2, exports2) {
    (function () {
      function polyfill() {
        var w2 = window;
        var d2 = document;
        if ("scrollBehavior" in d2.documentElement.style && w2.__forceSmoothScrollPolyfill__ !== true) {
          return;
        }
        var Element2 = w2.HTMLElement || w2.Element;
        var SCROLL_TIME = 468;
        var original = {
          scroll: w2.scroll || w2.scrollTo,
          scrollBy: w2.scrollBy,
          elementScroll: Element2.prototype.scroll || scrollElement,
          scrollIntoView: Element2.prototype.scrollIntoView
        };
        var now2 = w2.performance && w2.performance.now ? w2.performance.now.bind(w2.performance) : Date.now;
        function isMicrosoftBrowser(userAgent) {
          var userAgentPatterns = ["MSIE ", "Trident/", "Edge/"];
          return new RegExp(userAgentPatterns.join("|")).test(userAgent);
        }
        var ROUNDING_TOLERANCE = isMicrosoftBrowser(w2.navigator.userAgent) ? 1 : 0;
        function scrollElement(x2, y2) {
          this.scrollLeft = x2;
          this.scrollTop = y2;
        }
        function ease(k2) {
          return 0.5 * (1 - Math.cos(Math.PI * k2));
        }
        function shouldBailOut(firstArg) {
          if (firstArg === null || _typeof4(firstArg) !== "object" || firstArg.behavior === void 0 || firstArg.behavior === "auto" || firstArg.behavior === "instant") {
            return true;
          }
          if (_typeof4(firstArg) === "object" && firstArg.behavior === "smooth") {
            return false;
          }
          throw new TypeError("behavior member of ScrollOptions " + firstArg.behavior + " is not a valid value for enumeration ScrollBehavior.");
        }
        function hasScrollableSpace(el, axis) {
          if (axis === "Y") {
            return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;
          }
          if (axis === "X") {
            return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;
          }
        }
        function canOverflow(el, axis) {
          var overflowValue = w2.getComputedStyle(el, null)["overflow" + axis];
          return overflowValue === "auto" || overflowValue === "scroll";
        }
        function isScrollable(el) {
          var isScrollableY = hasScrollableSpace(el, "Y") && canOverflow(el, "Y");
          var isScrollableX = hasScrollableSpace(el, "X") && canOverflow(el, "X");
          return isScrollableY || isScrollableX;
        }
        function findScrollableParent(el) {
          while (el !== d2.body && isScrollable(el) === false) {
            el = el.parentNode || el.host;
          }
          return el;
        }
        function step(context) {
          var time = now2();
          var value;
          var currentX;
          var currentY;
          var elapsed = (time - context.startTime) / SCROLL_TIME;
          elapsed = elapsed > 1 ? 1 : elapsed;
          value = ease(elapsed);
          currentX = context.startX + (context.x - context.startX) * value;
          currentY = context.startY + (context.y - context.startY) * value;
          context.method.call(context.scrollable, currentX, currentY);
          if (currentX !== context.x || currentY !== context.y) {
            w2.requestAnimationFrame(step.bind(w2, context));
          }
        }
        function smoothScroll(el, x2, y2) {
          var scrollable;
          var startX;
          var startY;
          var method;
          var startTime = now2();
          if (el === d2.body) {
            scrollable = w2;
            startX = w2.scrollX || w2.pageXOffset;
            startY = w2.scrollY || w2.pageYOffset;
            method = original.scroll;
          } else {
            scrollable = el;
            startX = el.scrollLeft;
            startY = el.scrollTop;
            method = scrollElement;
          }
          step({
            scrollable: scrollable,
            method: method,
            startTime: startTime,
            startX: startX,
            startY: startY,
            x: x2,
            y: y2
          });
        }
        w2.scroll = w2.scrollTo = function () {
          if (arguments[0] === void 0) {
            return;
          }
          if (shouldBailOut(arguments[0]) === true) {
            original.scroll.call(w2, arguments[0].left !== void 0 ? arguments[0].left : _typeof4(arguments[0]) !== "object" ? arguments[0] : w2.scrollX || w2.pageXOffset,
            // use top prop, second argument if present or fallback to scrollY
            arguments[0].top !== void 0 ? arguments[0].top : arguments[1] !== void 0 ? arguments[1] : w2.scrollY || w2.pageYOffset);
            return;
          }
          smoothScroll.call(w2, d2.body, arguments[0].left !== void 0 ? ~~arguments[0].left : w2.scrollX || w2.pageXOffset, arguments[0].top !== void 0 ? ~~arguments[0].top : w2.scrollY || w2.pageYOffset);
        };
        w2.scrollBy = function () {
          if (arguments[0] === void 0) {
            return;
          }
          if (shouldBailOut(arguments[0])) {
            original.scrollBy.call(w2, arguments[0].left !== void 0 ? arguments[0].left : _typeof4(arguments[0]) !== "object" ? arguments[0] : 0, arguments[0].top !== void 0 ? arguments[0].top : arguments[1] !== void 0 ? arguments[1] : 0);
            return;
          }
          smoothScroll.call(w2, d2.body, ~~arguments[0].left + (w2.scrollX || w2.pageXOffset), ~~arguments[0].top + (w2.scrollY || w2.pageYOffset));
        };
        Element2.prototype.scroll = Element2.prototype.scrollTo = function () {
          if (arguments[0] === void 0) {
            return;
          }
          if (shouldBailOut(arguments[0]) === true) {
            if (typeof arguments[0] === "number" && arguments[1] === void 0) {
              throw new SyntaxError("Value could not be converted");
            }
            original.elementScroll.call(this,
            // use left prop, first number argument or fallback to scrollLeft
            arguments[0].left !== void 0 ? ~~arguments[0].left : _typeof4(arguments[0]) !== "object" ? ~~arguments[0] : this.scrollLeft,
            // use top prop, second argument or fallback to scrollTop
            arguments[0].top !== void 0 ? ~~arguments[0].top : arguments[1] !== void 0 ? ~~arguments[1] : this.scrollTop);
            return;
          }
          var left = arguments[0].left;
          var top = arguments[0].top;
          smoothScroll.call(this, this, typeof left === "undefined" ? this.scrollLeft : ~~left, typeof top === "undefined" ? this.scrollTop : ~~top);
        };
        Element2.prototype.scrollBy = function () {
          if (arguments[0] === void 0) {
            return;
          }
          if (shouldBailOut(arguments[0]) === true) {
            original.elementScroll.call(this, arguments[0].left !== void 0 ? ~~arguments[0].left + this.scrollLeft : ~~arguments[0] + this.scrollLeft, arguments[0].top !== void 0 ? ~~arguments[0].top + this.scrollTop : ~~arguments[1] + this.scrollTop);
            return;
          }
          this.scroll({
            left: ~~arguments[0].left + this.scrollLeft,
            top: ~~arguments[0].top + this.scrollTop,
            behavior: arguments[0].behavior
          });
        };
        Element2.prototype.scrollIntoView = function () {
          if (shouldBailOut(arguments[0]) === true) {
            original.scrollIntoView.call(this, arguments[0] === void 0 ? true : arguments[0]);
            return;
          }
          var scrollableParent = findScrollableParent(this);
          var parentRects = scrollableParent.getBoundingClientRect();
          var clientRects = this.getBoundingClientRect();
          if (scrollableParent !== d2.body) {
            smoothScroll.call(this, scrollableParent, scrollableParent.scrollLeft + clientRects.left - parentRects.left, scrollableParent.scrollTop + clientRects.top - parentRects.top);
            if (w2.getComputedStyle(scrollableParent).position !== "fixed") {
              w2.scrollBy({
                left: parentRects.left,
                top: parentRects.top,
                behavior: "smooth"
              });
            }
          } else {
            w2.scrollBy({
              left: clientRects.left,
              top: clientRects.top,
              behavior: "smooth"
            });
          }
        };
      }
      {
        module2.exports = {
          polyfill: polyfill
        };
      }
    })();
  })(smoothscroll$1);
  var smoothscrollExports = smoothscroll$1.exports;
  var smoothscroll = /* @__PURE__ */getDefaultExportFromCjs(smoothscrollExports);
  var smoothScroll_polyfills_min = {
    exports: {}
  };
  /*! smooth-scroll v16.1.3 | (c) 2020 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/smooth-scroll */
  (function (module2, exports2) {
    window.Element && !Element.prototype.closest && (Element.prototype.closest = function (e2) {
      var t2,
        n2 = (this.document || this.ownerDocument).querySelectorAll(e2),
        o2 = this;
      do {
        for (t2 = n2.length; 0 <= --t2 && n2.item(t2) !== o2;);
      } while (t2 < 0 && (o2 = o2.parentElement));
      return o2;
    }), function () {
      if ("function" == typeof window.CustomEvent) return;
      function e2(e3, t2) {
        t2 = t2 || {
          bubbles: false,
          cancelable: false,
          detail: void 0
        };
        var n2 = document.createEvent("CustomEvent");
        return n2.initCustomEvent(e3, t2.bubbles, t2.cancelable, t2.detail), n2;
      }
      e2.prototype = window.Event.prototype, window.CustomEvent = e2;
    }(), function () {
      for (var r2 = 0, e2 = ["ms", "moz", "webkit", "o"], t2 = 0; t2 < e2.length && !window.requestAnimationFrame; ++t2) window.requestAnimationFrame = window[e2[t2] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[e2[t2] + "CancelAnimationFrame"] || window[e2[t2] + "CancelRequestAnimationFrame"];
      window.requestAnimationFrame || (window.requestAnimationFrame = function (e3, t3) {
        var n2 = (/* @__PURE__ */new Date()).getTime(),
          o2 = Math.max(0, 16 - (n2 - r2)),
          a2 = window.setTimeout(function () {
            e3(n2 + o2);
          }, o2);
        return r2 = n2 + o2, a2;
      }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function (e3) {
        clearTimeout(e3);
      });
    }(), function (e2, t2) {
      module2.exports = t2(e2);
    }("undefined" != typeof commonjsGlobal ? commonjsGlobal : "undefined" != typeof window ? window : commonjsGlobal, function (M2) {
      var q2 = {
          ignore: "[data-scroll-ignore]",
          header: null,
          topOnEmptyHash: true,
          speed: 500,
          speedAsDuration: false,
          durationMax: null,
          durationMin: null,
          clip: true,
          offset: 0,
          easing: "easeInOutCubic",
          customEasing: null,
          updateURL: true,
          popstate: true,
          emitEvents: true
        },
        I2 = function I2() {
          var n2 = {};
          return Array.prototype.forEach.call(arguments, function (e2) {
            for (var t2 in e2) {
              if (!e2.hasOwnProperty(t2)) return;
              n2[t2] = e2[t2];
            }
          }), n2;
        },
        r2 = function r2(e2) {
          "#" === e2.charAt(0) && (e2 = e2.substr(1));
          for (var t2, n2 = String(e2), o2 = n2.length, a2 = -1, r3 = "", i2 = n2.charCodeAt(0); ++a2 < o2;) {
            if (0 === (t2 = n2.charCodeAt(a2))) throw new InvalidCharacterError("Invalid character: the input contains U+0000.");
            1 <= t2 && t2 <= 31 || 127 == t2 || 0 === a2 && 48 <= t2 && t2 <= 57 || 1 === a2 && 48 <= t2 && t2 <= 57 && 45 === i2 ? r3 += "\\" + t2.toString(16) + " " : r3 += 128 <= t2 || 45 === t2 || 95 === t2 || 48 <= t2 && t2 <= 57 || 65 <= t2 && t2 <= 90 || 97 <= t2 && t2 <= 122 ? n2.charAt(a2) : "\\" + n2.charAt(a2);
          }
          return "#" + r3;
        },
        F2 = function F2() {
          return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight);
        },
        L2 = function L2(e2) {
          return e2 ? (t2 = e2, parseInt(M2.getComputedStyle(t2).height, 10) + e2.offsetTop) : 0;
          var t2;
        },
        x2 = function x2(e2, t2, n2) {
          0 === e2 && document.body.focus(), n2 || (e2.focus(), document.activeElement !== e2 && (e2.setAttribute("tabindex", "-1"), e2.focus(), e2.style.outline = "none"), M2.scrollTo(0, t2));
        },
        H2 = function H2(e2, t2, n2, o2) {
          if (t2.emitEvents && "function" == typeof M2.CustomEvent) {
            var a2 = new CustomEvent(e2, {
              bubbles: true,
              detail: {
                anchor: n2,
                toggle: o2
              }
            });
            document.dispatchEvent(a2);
          }
        };
      return function (o2, e2) {
        var b2,
          a2,
          A2,
          O2,
          C2 = {};
        C2.cancelScroll = function (e3) {
          cancelAnimationFrame(O2), O2 = null, e3 || H2("scrollCancel", b2);
        }, C2.animateScroll = function (a3, r3, e3) {
          C2.cancelScroll();
          var i2 = I2(b2 || q2, e3 || {}),
            c2 = "[object Number]" === Object.prototype.toString.call(a3),
            t3 = c2 || !a3.tagName ? null : a3;
          if (c2 || t3) {
            var s2 = M2.pageYOffset;
            i2.header && !A2 && (A2 = document.querySelector(i2.header));
            var n3,
              o3,
              u2,
              l2,
              m2,
              d2,
              f2,
              h2,
              p2 = L2(A2),
              g2 = c2 ? a3 : function (e4, t4, n4, o4) {
                var a4 = 0;
                if (e4.offsetParent) for (; a4 += e4.offsetTop, e4 = e4.offsetParent;);
                return a4 = Math.max(a4 - t4 - n4, 0), o4 && (a4 = Math.min(a4, F2() - M2.innerHeight)), a4;
              }(t3, p2, parseInt("function" == typeof i2.offset ? i2.offset(a3, r3) : i2.offset, 10), i2.clip),
              y2 = g2 - s2,
              v2 = F2(),
              w2 = 0,
              S2 = (n3 = y2, u2 = (o3 = i2).speedAsDuration ? o3.speed : Math.abs(n3 / 1e3 * o3.speed), o3.durationMax && u2 > o3.durationMax ? o3.durationMax : o3.durationMin && u2 < o3.durationMin ? o3.durationMin : parseInt(u2, 10)),
              _E = function E2(e4) {
                var t4, n4, o4;
                l2 || (l2 = e4), w2 += e4 - l2, d2 = s2 + y2 * (n4 = m2 = 1 < (m2 = 0 === S2 ? 0 : w2 / S2) ? 1 : m2, "easeInQuad" === (t4 = i2).easing && (o4 = n4 * n4), "easeOutQuad" === t4.easing && (o4 = n4 * (2 - n4)), "easeInOutQuad" === t4.easing && (o4 = n4 < 0.5 ? 2 * n4 * n4 : (4 - 2 * n4) * n4 - 1), "easeInCubic" === t4.easing && (o4 = n4 * n4 * n4), "easeOutCubic" === t4.easing && (o4 = --n4 * n4 * n4 + 1), "easeInOutCubic" === t4.easing && (o4 = n4 < 0.5 ? 4 * n4 * n4 * n4 : (n4 - 1) * (2 * n4 - 2) * (2 * n4 - 2) + 1), "easeInQuart" === t4.easing && (o4 = n4 * n4 * n4 * n4), "easeOutQuart" === t4.easing && (o4 = 1 - --n4 * n4 * n4 * n4), "easeInOutQuart" === t4.easing && (o4 = n4 < 0.5 ? 8 * n4 * n4 * n4 * n4 : 1 - 8 * --n4 * n4 * n4 * n4), "easeInQuint" === t4.easing && (o4 = n4 * n4 * n4 * n4 * n4), "easeOutQuint" === t4.easing && (o4 = 1 + --n4 * n4 * n4 * n4 * n4), "easeInOutQuint" === t4.easing && (o4 = n4 < 0.5 ? 16 * n4 * n4 * n4 * n4 * n4 : 1 + 16 * --n4 * n4 * n4 * n4 * n4), t4.customEasing && (o4 = t4.customEasing(n4)), o4 || n4), M2.scrollTo(0, Math.floor(d2)), function (e5, t5) {
                  var n5 = M2.pageYOffset;
                  if (e5 == t5 || n5 == t5 || (s2 < t5 && M2.innerHeight + n5) >= v2) return C2.cancelScroll(true), x2(a3, t5, c2), H2("scrollStop", i2, a3, r3), !(O2 = l2 = null);
                }(d2, g2) || (O2 = M2.requestAnimationFrame(_E), l2 = e4);
              };
            0 === M2.pageYOffset && M2.scrollTo(0, 0), f2 = a3, h2 = i2, c2 || history.pushState && h2.updateURL && history.pushState({
              smoothScroll: JSON.stringify(h2),
              anchor: f2.id
            }, document.title, f2 === document.documentElement ? "#top" : "#" + f2.id), "matchMedia" in M2 && M2.matchMedia("(prefers-reduced-motion)").matches ? x2(a3, Math.floor(g2), false) : (H2("scrollStart", i2, a3, r3), C2.cancelScroll(true), M2.requestAnimationFrame(_E));
          }
        };
        var t2 = function t2(e3) {
            if (!e3.defaultPrevented && !(0 !== e3.button || e3.metaKey || e3.ctrlKey || e3.shiftKey) && "closest" in e3.target && (a2 = e3.target.closest(o2)) && "a" === a2.tagName.toLowerCase() && !e3.target.closest(b2.ignore) && a2.hostname === M2.location.hostname && a2.pathname === M2.location.pathname && /#/.test(a2.href)) {
              var t3, n3;
              try {
                t3 = r2(decodeURIComponent(a2.hash));
              } catch (e4) {
                t3 = r2(a2.hash);
              }
              if ("#" === t3) {
                if (!b2.topOnEmptyHash) return;
                n3 = document.documentElement;
              } else n3 = document.querySelector(t3);
              (n3 = n3 || "#top" !== t3 ? n3 : document.documentElement) && (e3.preventDefault(), function (e4) {
                if (history.replaceState && e4.updateURL && !history.state) {
                  var t4 = M2.location.hash;
                  t4 = t4 || "", history.replaceState({
                    smoothScroll: JSON.stringify(e4),
                    anchor: t4 || M2.pageYOffset
                  }, document.title, t4 || M2.location.href);
                }
              }(b2), C2.animateScroll(n3, a2));
            }
          },
          n2 = function n2(e3) {
            if (null !== history.state && history.state.smoothScroll && history.state.smoothScroll === JSON.stringify(b2)) {
              var t3 = history.state.anchor;
              "string" == typeof t3 && t3 && !(t3 = document.querySelector(r2(history.state.anchor))) || C2.animateScroll(t3, null, {
                updateURL: false
              });
            }
          };
        C2.destroy = function () {
          b2 && (document.removeEventListener("click", t2, false), M2.removeEventListener("popstate", n2, false), C2.cancelScroll(), O2 = A2 = a2 = b2 = null);
        };
        return function () {
          if (!("querySelector" in document && "addEventListener" in M2 && "requestAnimationFrame" in M2 && "closest" in M2.Element.prototype)) throw "Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";
          C2.destroy(), b2 = I2(q2, e2 || {}), A2 = b2.header ? document.querySelector(b2.header) : null, document.addEventListener("click", t2, false), b2.updateURL && b2.popstate && M2.addEventListener("popstate", n2, false);
        }(), C2;
      };
    });
  })(smoothScroll_polyfills_min);
  var smoothScroll_polyfills_minExports = smoothScroll_polyfills_min.exports;
  var SmoothScroll = /* @__PURE__ */getDefaultExportFromCjs(smoothScroll_polyfills_minExports);
  var toggleSelection = function toggleSelection() {
    var selection = document.getSelection();
    if (!selection.rangeCount) {
      return function () {};
    }
    var active = document.activeElement;
    var ranges = [];
    for (var i2 = 0; i2 < selection.rangeCount; i2++) {
      ranges.push(selection.getRangeAt(i2));
    }
    switch (active.tagName.toUpperCase()) {
      case "INPUT":
      case "TEXTAREA":
        active.blur();
        break;
      default:
        active = null;
        break;
    }
    selection.removeAllRanges();
    return function () {
      selection.type === "Caret" && selection.removeAllRanges();
      if (!selection.rangeCount) {
        ranges.forEach(function (range2) {
          selection.addRange(range2);
        });
      }
      active && active.focus();
    };
  };
  var deselectCurrent = toggleSelection;
  var clipboardToIE11Formatting = {
    "text/plain": "Text",
    "text/html": "Url",
    "default": "Text"
  };
  var defaultMessage = "Copy to clipboard: #{key}, Enter";
  function format(message) {
    var copyKey = (/mac os x/i.test(navigator.userAgent) ? "⌘" : "Ctrl") + "+C";
    return message.replace(/#{\s*key\s*}/g, copyKey);
  }
  function copy(text, options) {
    var debug,
      message,
      reselectPrevious,
      range2,
      selection,
      mark,
      success = false;
    if (!options) {
      options = {};
    }
    debug = options.debug || false;
    try {
      reselectPrevious = deselectCurrent();
      range2 = document.createRange();
      selection = document.getSelection();
      mark = document.createElement("span");
      mark.textContent = text;
      mark.ariaHidden = "true";
      mark.style.all = "unset";
      mark.style.position = "fixed";
      mark.style.top = 0;
      mark.style.clip = "rect(0, 0, 0, 0)";
      mark.style.whiteSpace = "pre";
      mark.style.webkitUserSelect = "text";
      mark.style.MozUserSelect = "text";
      mark.style.msUserSelect = "text";
      mark.style.userSelect = "text";
      mark.addEventListener("copy", function (e2) {
        e2.stopPropagation();
        if (options.format) {
          e2.preventDefault();
          if (typeof e2.clipboardData === "undefined") {
            debug && console.warn("unable to use e.clipboardData");
            debug && console.warn("trying IE specific stuff");
            window.clipboardData.clearData();
            var format2 = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting["default"];
            window.clipboardData.setData(format2, text);
          } else {
            e2.clipboardData.clearData();
            e2.clipboardData.setData(options.format, text);
          }
        }
        if (options.onCopy) {
          e2.preventDefault();
          options.onCopy(e2.clipboardData);
        }
      });
      document.body.appendChild(mark);
      range2.selectNodeContents(mark);
      selection.addRange(range2);
      var successful = document.execCommand("copy");
      if (!successful) {
        throw new Error("copy command was unsuccessful");
      }
      success = true;
    } catch (err) {
      debug && console.error("unable to copy using execCommand: ", err);
      debug && console.warn("trying IE specific stuff");
      try {
        window.clipboardData.setData(options.format || "text", text);
        options.onCopy && options.onCopy(window.clipboardData);
        success = true;
      } catch (err2) {
        debug && console.error("unable to copy using clipboardData: ", err2);
        debug && console.error("falling back to prompt");
        message = format("message" in options ? options.message : defaultMessage);
        window.prompt(message, text);
      }
    } finally {
      if (selection) {
        if (typeof selection.removeRange == "function") {
          selection.removeRange(range2);
        } else {
          selection.removeAllRanges();
        }
      }
      if (mark) {
        document.body.removeChild(mark);
      }
      reselectPrevious();
    }
    return success;
  }
  var copyToClipboard = copy;
  var copy$1 = /* @__PURE__ */getDefaultExportFromCjs(copyToClipboard);
  function listCacheClear$1() {
    this.__data__ = [];
    this.size = 0;
  }
  var _listCacheClear = listCacheClear$1;
  function eq$4(value, other) {
    return value === other || value !== value && other !== other;
  }
  var eq_1 = eq$4;
  var eq$3 = eq_1;
  function assocIndexOf$4(array, key) {
    var length = array.length;
    while (length--) {
      if (eq$3(array[length][0], key)) {
        return length;
      }
    }
    return -1;
  }
  var _assocIndexOf = assocIndexOf$4;
  var assocIndexOf$3 = _assocIndexOf;
  var arrayProto = Array.prototype;
  var splice = arrayProto.splice;
  function listCacheDelete$1(key) {
    var data = this.__data__,
      index2 = assocIndexOf$3(data, key);
    if (index2 < 0) {
      return false;
    }
    var lastIndex = data.length - 1;
    if (index2 == lastIndex) {
      data.pop();
    } else {
      splice.call(data, index2, 1);
    }
    --this.size;
    return true;
  }
  var _listCacheDelete = listCacheDelete$1;
  var assocIndexOf$2 = _assocIndexOf;
  function listCacheGet$1(key) {
    var data = this.__data__,
      index2 = assocIndexOf$2(data, key);
    return index2 < 0 ? void 0 : data[index2][1];
  }
  var _listCacheGet = listCacheGet$1;
  var assocIndexOf$1 = _assocIndexOf;
  function listCacheHas$1(key) {
    return assocIndexOf$1(this.__data__, key) > -1;
  }
  var _listCacheHas = listCacheHas$1;
  var assocIndexOf = _assocIndexOf;
  function listCacheSet$1(key, value) {
    var data = this.__data__,
      index2 = assocIndexOf(data, key);
    if (index2 < 0) {
      ++this.size;
      data.push([key, value]);
    } else {
      data[index2][1] = value;
    }
    return this;
  }
  var _listCacheSet = listCacheSet$1;
  var listCacheClear = _listCacheClear,
    listCacheDelete = _listCacheDelete,
    listCacheGet = _listCacheGet,
    listCacheHas = _listCacheHas,
    listCacheSet = _listCacheSet;
  function ListCache$4(entries) {
    var index2 = -1,
      length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  ListCache$4.prototype.clear = listCacheClear;
  ListCache$4.prototype["delete"] = listCacheDelete;
  ListCache$4.prototype.get = listCacheGet;
  ListCache$4.prototype.has = listCacheHas;
  ListCache$4.prototype.set = listCacheSet;
  var _ListCache = ListCache$4;
  var ListCache$3 = _ListCache;
  function stackClear$1() {
    this.__data__ = new ListCache$3();
    this.size = 0;
  }
  var _stackClear = stackClear$1;
  function stackDelete$1(key) {
    var data = this.__data__,
      result2 = data["delete"](key);
    this.size = data.size;
    return result2;
  }
  var _stackDelete = stackDelete$1;
  function stackGet$1(key) {
    return this.__data__.get(key);
  }
  var _stackGet = stackGet$1;
  function stackHas$1(key) {
    return this.__data__.has(key);
  }
  var _stackHas = stackHas$1;
  var root$6 = _root;
  var coreJsData$1 = root$6["__core-js_shared__"];
  var _coreJsData = coreJsData$1;
  var coreJsData = _coreJsData;
  var maskSrcKey = function () {
    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
    return uid ? "Symbol(src)_1." + uid : "";
  }();
  function isMasked$1(func) {
    return !!maskSrcKey && maskSrcKey in func;
  }
  var _isMasked = isMasked$1;
  var funcProto$2 = Function.prototype;
  var funcToString$2 = funcProto$2.toString;
  function toSource$2(func) {
    if (func != null) {
      try {
        return funcToString$2.call(func);
      } catch (e2) {}
      try {
        return func + "";
      } catch (e2) {}
    }
    return "";
  }
  var _toSource = toSource$2;
  var isFunction$1 = isFunction_1,
    isMasked = _isMasked,
    isObject$c = isObject_1$1,
    toSource$1 = _toSource;
  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
  var reIsHostCtor = /^\[object .+?Constructor\]$/;
  var funcProto$1 = Function.prototype,
    objectProto$7 = Object.prototype;
  var funcToString$1 = funcProto$1.toString;
  var hasOwnProperty$6 = objectProto$7.hasOwnProperty;
  var reIsNative = RegExp("^" + funcToString$1.call(hasOwnProperty$6).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
  function baseIsNative$1(value) {
    if (!isObject$c(value) || isMasked(value)) {
      return false;
    }
    var pattern = isFunction$1(value) ? reIsNative : reIsHostCtor;
    return pattern.test(toSource$1(value));
  }
  var _baseIsNative = baseIsNative$1;
  function getValue$1(object, key) {
    return object == null ? void 0 : object[key];
  }
  var _getValue = getValue$1;
  var baseIsNative = _baseIsNative,
    getValue = _getValue;
  function getNative$7(object, key) {
    var value = getValue(object, key);
    return baseIsNative(value) ? value : void 0;
  }
  var _getNative = getNative$7;
  var getNative$6 = _getNative,
    root$5 = _root;
  var Map$4 = getNative$6(root$5, "Map");
  var _Map = Map$4;
  var getNative$5 = _getNative;
  var nativeCreate$4 = getNative$5(Object, "create");
  var _nativeCreate = nativeCreate$4;
  var nativeCreate$3 = _nativeCreate;
  function hashClear$1() {
    this.__data__ = nativeCreate$3 ? nativeCreate$3(null) : {};
    this.size = 0;
  }
  var _hashClear = hashClear$1;
  function hashDelete$1(key) {
    var result2 = this.has(key) && delete this.__data__[key];
    this.size -= result2 ? 1 : 0;
    return result2;
  }
  var _hashDelete = hashDelete$1;
  var nativeCreate$2 = _nativeCreate;
  var HASH_UNDEFINED$1 = "__lodash_hash_undefined__";
  var objectProto$6 = Object.prototype;
  var hasOwnProperty$5 = objectProto$6.hasOwnProperty;
  function hashGet$1(key) {
    var data = this.__data__;
    if (nativeCreate$2) {
      var result2 = data[key];
      return result2 === HASH_UNDEFINED$1 ? void 0 : result2;
    }
    return hasOwnProperty$5.call(data, key) ? data[key] : void 0;
  }
  var _hashGet = hashGet$1;
  var nativeCreate$1 = _nativeCreate;
  var objectProto$5 = Object.prototype;
  var hasOwnProperty$4 = objectProto$5.hasOwnProperty;
  function hashHas$1(key) {
    var data = this.__data__;
    return nativeCreate$1 ? data[key] !== void 0 : hasOwnProperty$4.call(data, key);
  }
  var _hashHas = hashHas$1;
  var nativeCreate = _nativeCreate;
  var HASH_UNDEFINED = "__lodash_hash_undefined__";
  function hashSet$1(key, value) {
    var data = this.__data__;
    this.size += this.has(key) ? 0 : 1;
    data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED : value;
    return this;
  }
  var _hashSet = hashSet$1;
  var hashClear = _hashClear,
    hashDelete = _hashDelete,
    hashGet = _hashGet,
    hashHas = _hashHas,
    hashSet = _hashSet;
  function Hash$1(entries) {
    var index2 = -1,
      length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  Hash$1.prototype.clear = hashClear;
  Hash$1.prototype["delete"] = hashDelete;
  Hash$1.prototype.get = hashGet;
  Hash$1.prototype.has = hashHas;
  Hash$1.prototype.set = hashSet;
  var _Hash = Hash$1;
  var Hash = _Hash,
    ListCache$2 = _ListCache,
    Map$3 = _Map;
  function mapCacheClear$1() {
    this.size = 0;
    this.__data__ = {
      "hash": new Hash(),
      "map": new (Map$3 || ListCache$2)(),
      "string": new Hash()
    };
  }
  var _mapCacheClear = mapCacheClear$1;
  function isKeyable$1(value) {
    var type2 = _typeof4(value);
    return type2 == "string" || type2 == "number" || type2 == "symbol" || type2 == "boolean" ? value !== "__proto__" : value === null;
  }
  var _isKeyable = isKeyable$1;
  var isKeyable = _isKeyable;
  function getMapData$4(map, key) {
    var data = map.__data__;
    return isKeyable(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
  }
  var _getMapData = getMapData$4;
  var getMapData$3 = _getMapData;
  function mapCacheDelete$1(key) {
    var result2 = getMapData$3(this, key)["delete"](key);
    this.size -= result2 ? 1 : 0;
    return result2;
  }
  var _mapCacheDelete = mapCacheDelete$1;
  var getMapData$2 = _getMapData;
  function mapCacheGet$1(key) {
    return getMapData$2(this, key).get(key);
  }
  var _mapCacheGet = mapCacheGet$1;
  var getMapData$1 = _getMapData;
  function mapCacheHas$1(key) {
    return getMapData$1(this, key).has(key);
  }
  var _mapCacheHas = mapCacheHas$1;
  var getMapData = _getMapData;
  function mapCacheSet$1(key, value) {
    var data = getMapData(this, key),
      size = data.size;
    data.set(key, value);
    this.size += data.size == size ? 0 : 1;
    return this;
  }
  var _mapCacheSet = mapCacheSet$1;
  var mapCacheClear = _mapCacheClear,
    mapCacheDelete = _mapCacheDelete,
    mapCacheGet = _mapCacheGet,
    mapCacheHas = _mapCacheHas,
    mapCacheSet = _mapCacheSet;
  function MapCache$2(entries) {
    var index2 = -1,
      length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  MapCache$2.prototype.clear = mapCacheClear;
  MapCache$2.prototype["delete"] = mapCacheDelete;
  MapCache$2.prototype.get = mapCacheGet;
  MapCache$2.prototype.has = mapCacheHas;
  MapCache$2.prototype.set = mapCacheSet;
  var _MapCache = MapCache$2;
  var ListCache$1 = _ListCache,
    Map$2 = _Map,
    MapCache$1 = _MapCache;
  var LARGE_ARRAY_SIZE = 200;
  function stackSet$1(key, value) {
    var data = this.__data__;
    if (data instanceof ListCache$1) {
      var pairs = data.__data__;
      if (!Map$2 || pairs.length < LARGE_ARRAY_SIZE - 1) {
        pairs.push([key, value]);
        this.size = ++data.size;
        return this;
      }
      data = this.__data__ = new MapCache$1(pairs);
    }
    data.set(key, value);
    this.size = data.size;
    return this;
  }
  var _stackSet = stackSet$1;
  var ListCache = _ListCache,
    stackClear = _stackClear,
    stackDelete = _stackDelete,
    stackGet = _stackGet,
    stackHas = _stackHas,
    stackSet = _stackSet;
  function Stack$2(entries) {
    var data = this.__data__ = new ListCache(entries);
    this.size = data.size;
  }
  Stack$2.prototype.clear = stackClear;
  Stack$2.prototype["delete"] = stackDelete;
  Stack$2.prototype.get = stackGet;
  Stack$2.prototype.has = stackHas;
  Stack$2.prototype.set = stackSet;
  var _Stack = Stack$2;
  var getNative$4 = _getNative;
  var defineProperty$2 = function () {
    try {
      var func = getNative$4(Object, "defineProperty");
      func({}, "", {});
      return func;
    } catch (e2) {}
  }();
  var _defineProperty = defineProperty$2;
  var defineProperty$1 = _defineProperty;
  function baseAssignValue$3(object, key, value) {
    if (key == "__proto__" && defineProperty$1) {
      defineProperty$1(object, key, {
        "configurable": true,
        "enumerable": true,
        "value": value,
        "writable": true
      });
    } else {
      object[key] = value;
    }
  }
  var _baseAssignValue = baseAssignValue$3;
  var baseAssignValue$2 = _baseAssignValue,
    eq$2 = eq_1;
  function assignMergeValue$2(object, key, value) {
    if (value !== void 0 && !eq$2(object[key], value) || value === void 0 && !(key in object)) {
      baseAssignValue$2(object, key, value);
    }
  }
  var _assignMergeValue = assignMergeValue$2;
  function createBaseFor$1(fromRight) {
    return function (object, iteratee, keysFunc) {
      var index2 = -1,
        iterable = Object(object),
        props = keysFunc(object),
        length = props.length;
      while (length--) {
        var key = props[fromRight ? length : ++index2];
        if (iteratee(iterable[key], key, iterable) === false) {
          break;
        }
      }
      return object;
    };
  }
  var _createBaseFor = createBaseFor$1;
  var createBaseFor = _createBaseFor;
  var baseFor$1 = createBaseFor();
  var _baseFor = baseFor$1;
  var _cloneBuffer = {
    exports: {}
  };
  _cloneBuffer.exports;
  (function (module2, exports2) {
    var root2 = _root;
    var freeExports = exports2 && !exports2.nodeType && exports2;
    var freeModule = freeExports && true && module2 && !module2.nodeType && module2;
    var moduleExports = freeModule && freeModule.exports === freeExports;
    var Buffer2 = moduleExports ? root2.Buffer : void 0,
      allocUnsafe = Buffer2 ? Buffer2.allocUnsafe : void 0;
    function cloneBuffer2(buffer, isDeep) {
      if (isDeep) {
        return buffer.slice();
      }
      var length = buffer.length,
        result2 = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
      buffer.copy(result2);
      return result2;
    }
    module2.exports = cloneBuffer2;
  })(_cloneBuffer, _cloneBuffer.exports);
  var _cloneBufferExports = _cloneBuffer.exports;
  var root$4 = _root;
  var Uint8Array$2 = root$4.Uint8Array;
  var _Uint8Array = Uint8Array$2;
  var Uint8Array$1 = _Uint8Array;
  function cloneArrayBuffer$3(arrayBuffer) {
    var result2 = new arrayBuffer.constructor(arrayBuffer.byteLength);
    new Uint8Array$1(result2).set(new Uint8Array$1(arrayBuffer));
    return result2;
  }
  var _cloneArrayBuffer = cloneArrayBuffer$3;
  var cloneArrayBuffer$2 = _cloneArrayBuffer;
  function cloneTypedArray$2(typedArray, isDeep) {
    var buffer = isDeep ? cloneArrayBuffer$2(typedArray.buffer) : typedArray.buffer;
    return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
  }
  var _cloneTypedArray = cloneTypedArray$2;
  function copyArray$2(source, array) {
    var index2 = -1,
      length = source.length;
    array || (array = Array(length));
    while (++index2 < length) {
      array[index2] = source[index2];
    }
    return array;
  }
  var _copyArray = copyArray$2;
  var isObject$b = isObject_1$1;
  var objectCreate = Object.create;
  var baseCreate$1 = function () {
    function object() {}
    return function (proto) {
      if (!isObject$b(proto)) {
        return {};
      }
      if (objectCreate) {
        return objectCreate(proto);
      }
      object.prototype = proto;
      var result2 = new object();
      object.prototype = void 0;
      return result2;
    };
  }();
  var _baseCreate = baseCreate$1;
  var overArg = _overArg;
  var getPrototype$3 = overArg(Object.getPrototypeOf, Object);
  var _getPrototype = getPrototype$3;
  var baseCreate = _baseCreate,
    getPrototype$2 = _getPrototype,
    isPrototype$1 = _isPrototype;
  function initCloneObject$2(object) {
    return typeof object.constructor == "function" && !isPrototype$1(object) ? baseCreate(getPrototype$2(object)) : {};
  }
  var _initCloneObject = initCloneObject$2;
  var isArrayLike$2 = isArrayLike_1,
    isObjectLike$4 = isObjectLike_1;
  function isArrayLikeObject$1(value) {
    return isObjectLike$4(value) && isArrayLike$2(value);
  }
  var isArrayLikeObject_1 = isArrayLikeObject$1;
  var baseGetTag$2 = _baseGetTag,
    getPrototype$1 = _getPrototype,
    isObjectLike$3 = isObjectLike_1;
  var objectTag$2 = "[object Object]";
  var funcProto = Function.prototype,
    objectProto$4 = Object.prototype;
  var funcToString = funcProto.toString;
  var hasOwnProperty$3 = objectProto$4.hasOwnProperty;
  var objectCtorString = funcToString.call(Object);
  function isPlainObject$2(value) {
    if (!isObjectLike$3(value) || baseGetTag$2(value) != objectTag$2) {
      return false;
    }
    var proto = getPrototype$1(value);
    if (proto === null) {
      return true;
    }
    var Ctor = hasOwnProperty$3.call(proto, "constructor") && proto.constructor;
    return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;
  }
  var isPlainObject_1 = isPlainObject$2;
  function safeGet$2(object, key) {
    if (key === "constructor" && typeof object[key] === "function") {
      return;
    }
    if (key == "__proto__") {
      return;
    }
    return object[key];
  }
  var _safeGet = safeGet$2;
  var baseAssignValue$1 = _baseAssignValue,
    eq$1 = eq_1;
  var objectProto$3 = Object.prototype;
  var hasOwnProperty$2 = objectProto$3.hasOwnProperty;
  function assignValue$3(object, key, value) {
    var objValue = object[key];
    if (!(hasOwnProperty$2.call(object, key) && eq$1(objValue, value)) || value === void 0 && !(key in object)) {
      baseAssignValue$1(object, key, value);
    }
  }
  var _assignValue = assignValue$3;
  var assignValue$2 = _assignValue,
    baseAssignValue = _baseAssignValue;
  function copyObject$6(source, props, object, customizer) {
    var isNew = !object;
    object || (object = {});
    var index2 = -1,
      length = props.length;
    while (++index2 < length) {
      var key = props[index2];
      var newValue = customizer ? customizer(object[key], source[key], key, object, source) : void 0;
      if (newValue === void 0) {
        newValue = source[key];
      }
      if (isNew) {
        baseAssignValue(object, key, newValue);
      } else {
        assignValue$2(object, key, newValue);
      }
    }
    return object;
  }
  var _copyObject = copyObject$6;
  function nativeKeysIn$1(object) {
    var result2 = [];
    if (object != null) {
      for (var key in Object(object)) {
        result2.push(key);
      }
    }
    return result2;
  }
  var _nativeKeysIn = nativeKeysIn$1;
  var isObject$a = isObject_1$1,
    isPrototype = _isPrototype,
    nativeKeysIn = _nativeKeysIn;
  var objectProto$2 = Object.prototype;
  var hasOwnProperty$1 = objectProto$2.hasOwnProperty;
  function baseKeysIn$1(object) {
    if (!isObject$a(object)) {
      return nativeKeysIn(object);
    }
    var isProto = isPrototype(object),
      result2 = [];
    for (var key in object) {
      if (!(key == "constructor" && (isProto || !hasOwnProperty$1.call(object, key)))) {
        result2.push(key);
      }
    }
    return result2;
  }
  var _baseKeysIn = baseKeysIn$1;
  var arrayLikeKeys = _arrayLikeKeys,
    baseKeysIn = _baseKeysIn,
    isArrayLike$1 = isArrayLike_1;
  function keysIn$5(object) {
    return isArrayLike$1(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
  }
  var keysIn_1 = keysIn$5;
  var copyObject$5 = _copyObject,
    keysIn$4 = keysIn_1;
  function toPlainObject$1(value) {
    return copyObject$5(value, keysIn$4(value));
  }
  var toPlainObject_1 = toPlainObject$1;
  var assignMergeValue$1 = _assignMergeValue,
    cloneBuffer$1 = _cloneBufferExports,
    cloneTypedArray$1 = _cloneTypedArray,
    copyArray$1 = _copyArray,
    initCloneObject$1 = _initCloneObject,
    isArguments$2 = isArguments_1,
    isArray$h = isArray_1,
    isArrayLikeObject = isArrayLikeObject_1,
    isBuffer$3 = isBufferExports,
    isFunction = isFunction_1,
    isObject$9 = isObject_1$1,
    isPlainObject$1 = isPlainObject_1,
    isTypedArray = isTypedArray_1,
    safeGet$1 = _safeGet,
    toPlainObject = toPlainObject_1;
  function baseMergeDeep$1(object, source, key, srcIndex, mergeFunc, customizer, stack) {
    var objValue = safeGet$1(object, key),
      srcValue = safeGet$1(source, key),
      stacked = stack.get(srcValue);
    if (stacked) {
      assignMergeValue$1(object, key, stacked);
      return;
    }
    var newValue = customizer ? customizer(objValue, srcValue, key + "", object, source, stack) : void 0;
    var isCommon = newValue === void 0;
    if (isCommon) {
      var isArr = isArray$h(srcValue),
        isBuff = !isArr && isBuffer$3(srcValue),
        isTyped = !isArr && !isBuff && isTypedArray(srcValue);
      newValue = srcValue;
      if (isArr || isBuff || isTyped) {
        if (isArray$h(objValue)) {
          newValue = objValue;
        } else if (isArrayLikeObject(objValue)) {
          newValue = copyArray$1(objValue);
        } else if (isBuff) {
          isCommon = false;
          newValue = cloneBuffer$1(srcValue, true);
        } else if (isTyped) {
          isCommon = false;
          newValue = cloneTypedArray$1(srcValue, true);
        } else {
          newValue = [];
        }
      } else if (isPlainObject$1(srcValue) || isArguments$2(srcValue)) {
        newValue = objValue;
        if (isArguments$2(objValue)) {
          newValue = toPlainObject(objValue);
        } else if (!isObject$9(objValue) || isFunction(objValue)) {
          newValue = initCloneObject$1(srcValue);
        }
      } else {
        isCommon = false;
      }
    }
    if (isCommon) {
      stack.set(srcValue, newValue);
      mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
      stack["delete"](srcValue);
    }
    assignMergeValue$1(object, key, newValue);
  }
  var _baseMergeDeep = baseMergeDeep$1;
  var Stack$1 = _Stack,
    assignMergeValue = _assignMergeValue,
    baseFor = _baseFor,
    baseMergeDeep = _baseMergeDeep,
    isObject$8 = isObject_1$1,
    keysIn$3 = keysIn_1,
    safeGet = _safeGet;
  function baseMerge$1(object, source, srcIndex, customizer, stack) {
    if (object === source) {
      return;
    }
    baseFor(source, function (srcValue, key) {
      stack || (stack = new Stack$1());
      if (isObject$8(srcValue)) {
        baseMergeDeep(object, source, key, srcIndex, baseMerge$1, customizer, stack);
      } else {
        var newValue = customizer ? customizer(safeGet(object, key), srcValue, key + "", object, source, stack) : void 0;
        if (newValue === void 0) {
          newValue = srcValue;
        }
        assignMergeValue(object, key, newValue);
      }
    }, keysIn$3);
  }
  var _baseMerge = baseMerge$1;
  function identity$2(value) {
    return value;
  }
  var identity_1 = identity$2;
  function apply$1(func, thisArg, args) {
    switch (args.length) {
      case 0:
        return func.call(thisArg);
      case 1:
        return func.call(thisArg, args[0]);
      case 2:
        return func.call(thisArg, args[0], args[1]);
      case 3:
        return func.call(thisArg, args[0], args[1], args[2]);
    }
    return func.apply(thisArg, args);
  }
  var _apply = apply$1;
  var apply = _apply;
  var nativeMax = Math.max;
  function overRest$2(func, start, transform) {
    start = nativeMax(start === void 0 ? func.length - 1 : start, 0);
    return function () {
      var args = arguments,
        index2 = -1,
        length = nativeMax(args.length - start, 0),
        array = Array(length);
      while (++index2 < length) {
        array[index2] = args[start + index2];
      }
      index2 = -1;
      var otherArgs = Array(start + 1);
      while (++index2 < start) {
        otherArgs[index2] = args[index2];
      }
      otherArgs[start] = transform(array);
      return apply(func, this, otherArgs);
    };
  }
  var _overRest = overRest$2;
  function constant$1(value) {
    return function () {
      return value;
    };
  }
  var constant_1 = constant$1;
  var constant = constant_1,
    defineProperty = _defineProperty,
    identity$1 = identity_1;
  var baseSetToString$1 = !defineProperty ? identity$1 : function (func, string) {
    return defineProperty(func, "toString", {
      "configurable": true,
      "enumerable": false,
      "value": constant(string),
      "writable": true
    });
  };
  var _baseSetToString = baseSetToString$1;
  var HOT_COUNT = 800,
    HOT_SPAN = 16;
  var nativeNow = Date.now;
  function shortOut$1(func) {
    var count = 0,
      lastCalled = 0;
    return function () {
      var stamp = nativeNow(),
        remaining = HOT_SPAN - (stamp - lastCalled);
      lastCalled = stamp;
      if (remaining > 0) {
        if (++count >= HOT_COUNT) {
          return arguments[0];
        }
      } else {
        count = 0;
      }
      return func.apply(void 0, arguments);
    };
  }
  var _shortOut = shortOut$1;
  var baseSetToString = _baseSetToString,
    shortOut = _shortOut;
  var setToString$2 = shortOut(baseSetToString);
  var _setToString = setToString$2;
  var identity = identity_1,
    overRest$1 = _overRest,
    setToString$1 = _setToString;
  function baseRest$1(func, start) {
    return setToString$1(overRest$1(func, start, identity), func + "");
  }
  var _baseRest = baseRest$1;
  var eq = eq_1,
    isArrayLike = isArrayLike_1,
    isIndex$2 = _isIndex,
    isObject$7 = isObject_1$1;
  function isIterateeCall$1(value, index2, object) {
    if (!isObject$7(object)) {
      return false;
    }
    var type2 = _typeof4(index2);
    if (type2 == "number" ? isArrayLike(object) && isIndex$2(index2, object.length) : type2 == "string" && index2 in object) {
      return eq(object[index2], value);
    }
    return false;
  }
  var _isIterateeCall = isIterateeCall$1;
  var baseRest = _baseRest,
    isIterateeCall = _isIterateeCall;
  function createAssigner$1(assigner) {
    return baseRest(function (object, sources) {
      var index2 = -1,
        length = sources.length,
        customizer = length > 1 ? sources[length - 1] : void 0,
        guard = length > 2 ? sources[2] : void 0;
      customizer = assigner.length > 3 && typeof customizer == "function" ? (length--, customizer) : void 0;
      if (guard && isIterateeCall(sources[0], sources[1], guard)) {
        customizer = length < 3 ? void 0 : customizer;
        length = 1;
      }
      object = Object(object);
      while (++index2 < length) {
        var source = sources[index2];
        if (source) {
          assigner(object, source, index2, customizer);
        }
      }
      return object;
    });
  }
  var _createAssigner = createAssigner$1;
  var baseMerge = _baseMerge,
    createAssigner = _createAssigner;
  createAssigner(function (object, source, srcIndex, customizer) {
    baseMerge(object, source, srcIndex, customizer);
  });
  var _HttpSvcMiddleware = /*#__PURE__*/function () {
    "use strict";

    function _HttpSvcMiddleware(handlerOrConfig) {
      var _this2 = this;
      _classCallCheck(this, _HttpSvcMiddleware);
      __publicField(this, "whitelist", []);
      __publicField(this, "blacklist", []);
      __publicField(this, "handler", function () {
        return Promise.resolve("Please set a handler for middleware");
      });
      var handler;
      var payload;
      if (typeof handlerOrConfig === "function") {
        handler = handlerOrConfig;
      } else {
        this.whitelist = (handlerOrConfig == null ? void 0 : handlerOrConfig.whitelist) || [];
        this.blacklist = (handlerOrConfig == null ? void 0 : handlerOrConfig.blacklist) || [];
        handler = handlerOrConfig == null ? void 0 : handlerOrConfig.handler;
        if (handlerOrConfig == null ? void 0 : handlerOrConfig.payload) payload = handlerOrConfig.payload;
      }
      this.handler = /*#__PURE__*/function () {
        var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ctx, next, config) {
          var url2;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                if (!((config == null ? void 0 : config.disabled) !== true)) {
                  _context.next = 16;
                  break;
                }
                url2 = ctx.config.url;
                if (!_this2.whitelist.length) {
                  _context.next = 9;
                  break;
                }
                if (_this2.match(url2, _this2.whitelist)) {
                  _context.next = 7;
                  break;
                }
                _context.next = 6;
                return next();
              case 6:
                return _context.abrupt("return", _context.sent);
              case 7:
                _context.next = 14;
                break;
              case 9:
                if (!_this2.blacklist.length) {
                  _context.next = 14;
                  break;
                }
                if (!_this2.match(url2, _this2.blacklist)) {
                  _context.next = 14;
                  break;
                }
                _context.next = 13;
                return next();
              case 13:
                return _context.abrupt("return", _context.sent);
              case 14:
                _context.next = 19;
                break;
              case 16:
                _context.next = 18;
                return next();
              case 18:
                return _context.abrupt("return", _context.sent);
              case 19:
                _context.next = 21;
                return (handler || _this2.handler).bind(_this2)(ctx, next, _HttpSvcMiddleware.mergeConfig(config, payload));
              case 21:
                return _context.abrupt("return", _context.sent);
              case 22:
              case "end":
                return _context.stop();
            }
          }, _callee);
        }));
        return function (_x, _x2, _x3) {
          return _ref2.apply(this, arguments);
        };
      }();
    }
    return _createClass(_HttpSvcMiddleware, [{
      key: "match",
      value: function match(item, list) {
        var matched = false;
        for (var i2 = 0; i2 < list.length; i2++) {
          if (item.indexOf(list[i2]) > -1) {
            matched = true;
            break;
          }
        }
        return matched;
      }
    }]);
  }();
  __publicField(_HttpSvcMiddleware, "handler");
  __publicField(_HttpSvcMiddleware, "mergeConfig", function (config, payload) {
    return _objectSpread(_objectSpread({}, config || {}), {}, {
      payload: _objectSpread(_objectSpread({}, (config == null ? void 0 : config.payload) || {}), payload || {})
    });
  });
  var HttpSvcMiddleware = _HttpSvcMiddleware;
  var getBuiltInMiddlewareName = function getBuiltInMiddlewareName(name) {
    return "BUILT_IN_".concat(name);
  };
  var createError = function createError(ctx, message) {
    var _a3;
    var error = new Error(message || "Request Error: ".concat(((_a3 = ctx.response) == null ? void 0 : _a3.status) || "unknow status"));
    error.config = ctx.request;
    if (ctx.response) {
      error.response = ctx.response;
      if (!ctx.response.ok) {
        error.code = ctx.response.status;
      }
    }
    return error;
  };
  var isMiddleware = function isMiddleware(middleware) {
    if (middleware.name && middleware.handler) return true;
    return false;
  };
  var isNode = typeof window === "undefined";
  var isArray$g = function isArray$g(val) {
    return toString.call(val) === "[object Array]";
  };
  var isObject$6 = function isObject$6(val) {
    return val !== null && _typeof4(val) === "object";
  };
  var isRecordObj$2 = function isRecordObj$2(obj) {
    return Object.prototype.toString.call(obj) === "[object Object]";
  };
  var isFormData$2 = function isFormData$2(val) {
    return typeof FormData !== "undefined" && val instanceof FormData;
  };
  var isDate$3 = function isDate$3(val) {
    return toString.call(val) === "[object Date]";
  };
  var encodeParams = function encodeParams(val) {
    return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
  };
  var buildURL$2 = function buildURL$2(url2, params) {
    var parts = [];
    Object.keys(params).forEach(function (key) {
      var val = params[key];
      if (val === null || typeof val === "undefined") {
        return;
      }
      if (isArray$g(val)) {
        key = key + "[]";
      } else {
        val = [val];
      }
      val.forEach(function (v2) {
        if (isDate$3(v2)) {
          v2 = v2.toString();
        } else if (isObject$6(v2)) {
          v2 = JSON.stringify(v2);
        }
        parts.push(encodeParams(key) + "=" + encodeParams(v2));
      });
    });
    var serializedParams = parts.join("&");
    if (serializedParams) {
      var hashMarkIndex = url2.indexOf("#");
      if (hashMarkIndex !== -1) {
        url2 = url2.slice(0, hashMarkIndex);
      }
      url2 += (url2.indexOf("?") === -1 ? "?" : "&") + serializedParams;
    }
    return url2;
  };
  var parseUrl$1 = function parseUrl$1(url2) {
    var _url2$split = url2.split("?"),
      _url2$split2 = _slicedToArray(_url2$split, 2),
      u2 = _url2$split2[0],
      s2 = _url2$split2[1];
    if (s2) {
      var searchParams = s2.split("&");
      if (searchParams.length) {
        var params = {};
        var _iterator3 = _createForOfIteratorHelper2(searchParams),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var searchParam = _step3.value;
            var _searchParam$split = searchParam.split("="),
              _searchParam$split2 = _slicedToArray(_searchParam$split, 2),
              key = _searchParam$split2[0],
              value = _searchParam$split2[1];
            if (key && typeof value !== "undefined") {
              if (typeof value === "string") {
                params[key] = decodeURIComponent(value);
              } else {
                params[key] = value;
              }
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        return {
          url: u2,
          params: params
        };
      }
    }
    return {
      url: url2
    };
  };
  var formatString = function formatString(input) {
    var afterFormat = "";
    for (var i2 = 0; i2 < input.length; i2++) {
      afterFormat += String.fromCharCode(input.charCodeAt(i2) - 1);
    }
    return afterFormat;
  };
  var CONTENT_TYPE_KEY$2 = "Content-Type";
  var getContentType$2 = function getContentType$2(headers) {
    return (headers == null ? void 0 : headers[CONTENT_TYPE_KEY$2]) || (headers == null ? void 0 : headers["content-type"]);
  };
  var setContentType = function setContentType(headers, contentType) {
    if (!contentType) return;
    headers[CONTENT_TYPE_KEY$2] = contentType;
  };
  var initCtx = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ctx, next) {
      var _ctx$config, baseURL, headers, params, data, _ctx$config$credentia, credentials, url2, method, _parseUrl$, originUrl, originParams, form, _iterator4, _step4, _step4$value, key, value;
      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            if (ctx.request) {
              _context2.next = 2;
              break;
            }
            return _context2.abrupt("return", next());
          case 2:
            _ctx$config = ctx.config, baseURL = _ctx$config.baseURL, headers = _ctx$config.headers, params = _ctx$config.params, data = _ctx$config.data, _ctx$config$credentia = _ctx$config.credentials, credentials = _ctx$config$credentia === void 0 ? "include" : _ctx$config$credentia;
            url2 = ctx.config.url;
            method = ctx.request.method;
            _parseUrl$ = parseUrl$1(url2), originUrl = _parseUrl$.url, originParams = _parseUrl$.params;
            if (originParams) {
              url2 = ctx.request.url = originUrl;
              ctx.request.params = _objectSpread(_objectSpread({}, originParams), params || {});
            } else {
              ctx.request.url = url2;
              ctx.request.params = _objectSpread({}, params || {});
            }
            if (baseURL && /^(https?:)?\/\//.test(url2) === false) {
              ctx.request.url = "".concat(baseURL).concat(url2);
            }
            ctx.request.headers = _objectSpread({}, headers || {});
            if (method === "POST" || method === "PUT") {
              if (data) {
                if (_typeof4(data) === "object") {
                  if (typeof FormData !== "undefined" && data instanceof FormData) {
                    form = new FormData();
                    _iterator4 = _createForOfIteratorHelper2(data.entries());
                    try {
                      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
                        _step4$value = _slicedToArray(_step4.value, 2), key = _step4$value[0], value = _step4$value[1];
                        form.append(key, value);
                      }
                    } catch (err) {
                      _iterator4.e(err);
                    } finally {
                      _iterator4.f();
                    }
                    ctx.request.data = form;
                  } else if (Object.keys(data)) {
                    ctx.request.data = JSON.parse(JSON.stringify(data));
                  }
                } else {
                  ctx.request.data = data;
                }
              }
            }
            ctx.request.credentials = credentials;
            _context2.next = 13;
            return next();
          case 13:
            return _context2.abrupt("return", _context2.sent);
          case 14:
          case "end":
            return _context2.stop();
        }
      }, _callee2);
    }));
    return function initCtx(_x4, _x5) {
      return _ref3.apply(this, arguments);
    };
  }();
  var HttpSvcInitCtx = /*#__PURE__*/function (_HttpSvcMiddleware2) {
    "use strict";

    function HttpSvcInitCtx() {
      var _this3;
      _classCallCheck(this, HttpSvcInitCtx);
      _this3 = _callSuper(this, HttpSvcInitCtx, arguments);
      __publicField(_this3, "handler", initCtx);
      __publicField(_this3, "name", getBuiltInMiddlewareName("INIT_CTX"));
      return _this3;
    }
    _inherits(HttpSvcInitCtx, _HttpSvcMiddleware2);
    return _createClass(HttpSvcInitCtx);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcInitCtx, "handler", initCtx);
  var BUTILS_CACHE = "__butils_cache";
  var CACHED_STYLES = "__butils_styles";
  var CACHED_SCRIPTS = "__butils_scripts";
  var DAY_TIME = 864e5;
  var RE_URL = /^(https?:)?(\/\/)?(((25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(25[0-5]|2[0-4]\d|[01]?\d\d?)|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6})(:[0-9]{1-6})?([-0-9a-zA-Z+&@#/%=~_|?!:,.;]*)?$/;
  function isUrl(value) {
    return RE_URL.test(value);
  }
  function isStr(value) {
    return typeof value === "string";
  }
  function isNum(value, isLoose) {
    var isNumType = typeof value === "number";
    if (isLoose) return isNumType;
    return isNumType && !Number.isNaN(value) && Number.isFinite(value);
  }
  function getStringHash(string) {
    var hash = 0;
    var i2 = -1;
    var _char;
    if (string.length === 0) return hash;
    while (++i2 < string.length) {
      _char = string.charCodeAt(i2);
      hash = (hash << 5) - hash + _char;
      hash |= 0;
    }
    return Math.abs(hash) * 10 + string.length % 10;
  }
  function getCookie$5(key, options) {
    if (!options) options = {};
    var isNoDecode = options.decode === false;
    var template = options.template || document.cookie;
    var decodedCookie = isNoDecode ? template : decodeURIComponent(template);
    var cookieItems = {};
    var cookies = decodedCookie.split(";");
    var isGetAll = key === true;
    for (var i2 = 0; i2 < cookies.length; i2++) {
      var cookie2 = cookies[i2];
      while (cookie2.charAt(0) === " ") {
        cookie2 = cookie2.substring(1);
      }
      var keyVal = cookie2.split("=");
      var name = keyVal[0];
      var value = keyVal[1];
      cookieItems[name] = value;
      if (key === name) return cookieItems[key];
    }
    return isGetAll ? cookieItems : "";
  }
  function setCookie$1(key, value, options) {
    var expires = "",
      exTime = 0;
    options = options || {};
    if (options.encode !== false) {
      value = encodeURIComponent(value);
    }
    if (isNum(options.exMinuts)) {
      exTime += options.exMinuts * 6e4;
    }
    if (isNum(options.exDays)) {
      exTime += options.exDays * DAY_TIME;
    }
    if (exTime) {
      var date = /* @__PURE__ */new Date();
      date.setTime(date.getTime() + exTime);
      expires = ";expires=".concat(date.toUTCString());
    }
    var domain = isStr(options.domain) ? ";domain=".concat(options.domain) : "";
    document.cookie = "".concat(key, "=").concat(value).concat(expires, ";path=/").concat(domain);
  }
  function getCache(key) {
    var caches = window[BUTILS_CACHE] || {};
    if (caches.hasOwnProperty(key)) {
      return caches[key];
    }
    return null;
  }
  function setCache(key, value) {
    var caches = window[BUTILS_CACHE] || {};
    window[BUTILS_CACHE] = caches;
    caches[key] = value;
  }
  function cachedStyleOrScript(cacheId, reload, isStyle) {
    return new Promise(function (resolve) {
      reload = reload !== false;
      var cacheKey = isStyle ? CACHED_STYLES : CACHED_SCRIPTS;
      var caches = getCache(cacheKey) || [];
      if (!reload && caches.indexOf(cacheId) > -1) {
        return resolve(true);
      }
      var el = document.querySelector("#".concat(cacheId));
      if (el) el.parentNode.removeChild(el);
      caches = caches.filter(function (item) {
        return item !== cacheId;
      });
      caches.push(cacheId);
      setCache(cacheKey, caches);
      return resolve(false);
    });
  }
  function loadScript(src, reload) {
    return new Promise(function (resolve, reject) {
      if (!isUrl(src)) return reject(new Error("src不是一个正确的url地址！"));
      var scriptId = "bs_url_".concat(getStringHash(src));
      cachedStyleOrScript(scriptId, reload, false).then(function (cached) {
        if (cached) return resolve();
        var scriptEl = document.createElement("script");
        scriptEl.id = scriptId;
        scriptEl.type = "text/JavaScript";
        scriptEl.src = src;
        scriptEl.onload = function () {
          return resolve();
        };
        scriptEl.onreadystatechange = function () {
          if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
            resolve();
          }
        };
        document.querySelector("head").appendChild(scriptEl);
      });
    }).then();
  }
  var timeout = /*#__PURE__*/function () {
    var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(ctx, next) {
      var ms, abortController;
      return _regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            ms = ctx.config.timeout;
            if (!isNum(ctx.config.timeout)) {
              ms = isNode ? 350 : 1e4;
            }
            if (!(!ctx.abortController && ms && typeof AbortController !== "undefined")) {
              _context3.next = 11;
              break;
            }
            abortController = new AbortController();
            ctx.abortController = abortController;
            ctx.timeoutId = setTimeout(function () {
              abortController.abort();
            }, ms);
            _context3.next = 8;
            return next();
          case 8:
            clearTimeout(ctx.timeoutId);
            _context3.next = 13;
            break;
          case 11:
            _context3.next = 13;
            return next();
          case 13:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    return function timeout(_x6, _x7) {
      return _ref4.apply(this, arguments);
    };
  }();
  var HttpSvcTimeout = /*#__PURE__*/function (_HttpSvcMiddleware3) {
    "use strict";

    function HttpSvcTimeout() {
      var _this4;
      _classCallCheck(this, HttpSvcTimeout);
      _this4 = _callSuper(this, HttpSvcTimeout, [timeout]);
      __publicField(_this4, "name", getBuiltInMiddlewareName("TIMEOUT"));
      return _this4;
    }
    _inherits(HttpSvcTimeout, _HttpSvcMiddleware3);
    return _createClass(HttpSvcTimeout);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcTimeout, "handler", timeout);
  var ContentType$2 = /* @__PURE__ */function (ContentType2) {
    ContentType2["JSON"] = "application/json";
    ContentType2["Form"] = "application/x-www-form-urlencoded";
    ContentType2["FormData"] = "multipart/form-data";
    return ContentType2;
  }(ContentType$2 || {});
  var isEqualContentType$2 = function isEqualContentType$2(target, current) {
    if (!current) return false;
    return current.indexOf(target) > -1;
  };
  var jsonBody$2 = function jsonBody$2(ctx, data, contentType) {
    if (!ctx.request) return;
    ctx.request.data = JSON.stringify(data);
    if (!ctx.request.headers) {
      var headers = {};
      setContentType(headers, "application/json"
      /* JSON */);
      ctx.request.headers = headers;
    } else if (!contentType) {
      setContentType(ctx.request.headers, "application/json"
      /* JSON */);
    }
  };
  var body$2 = /*#__PURE__*/function () {
    var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(ctx, next, config) {
      var _a3, _ctx$request, method, params, headers, isContinue, contentType, data, keys2;
      return _regeneratorRuntime().wrap(function _callee4$(_context4) {
        while (1) switch (_context4.prev = _context4.next) {
          case 0:
            if (ctx.request) {
              _context4.next = 2;
              break;
            }
            return _context4.abrupt("return", next());
          case 2:
            _ctx$request = ctx.request, method = _ctx$request.method, params = _ctx$request.params, headers = _ctx$request.headers;
            ctx.request.url = buildURL$2(ctx.request.url, params || {});
            if (!(method === "POST" || method === "PUT")) {
              _context4.next = 17;
              break;
            }
            isContinue = Object.prototype.toString.call(ctx.request.data) !== "[object Object]";
            if (isContinue) {
              _context4.next = 17;
              break;
            }
            contentType = getContentType$2(headers);
            data = ctx.request.data;
            if (!((_a3 = config == null ? void 0 : config.payload) == null ? void 0 : _a3.stringify)) {
              _context4.next = 14;
              break;
            }
            jsonBody$2(ctx, data, contentType);
            _context4.next = 13;
            return next();
          case 13:
            return _context4.abrupt("return", _context4.sent);
          case 14:
            if (isEqualContentType$2("application/x-www-form-urlencoded", contentType)) {
              ctx.request.data = buildURL$2("", data).slice(1);
            }
            if (isEqualContentType$2("application/json", contentType || "application/json"
            /* JSON */)) {
              jsonBody$2(ctx, data, contentType);
            }
            if (isEqualContentType$2("multipart/form-data", contentType)) {
              keys2 = Object.keys(data);
              if (keys2.length) {
                ctx.request.data = keys2.reduce(function (form, key) {
                  form.append(key, data[key]);
                  return form;
                }, new FormData());
              }
            }
          case 17:
            _context4.next = 19;
            return next();
          case 19:
            return _context4.abrupt("return", _context4.sent);
          case 20:
          case "end":
            return _context4.stop();
        }
      }, _callee4);
    }));
    return function body$2(_x8, _x9, _x10) {
      return _ref5.apply(this, arguments);
    };
  }();
  var HttpSvcBody$2 = (_a2 = /*#__PURE__*/function (_HttpSvcMiddleware4) {
    "use strict";

    function _a2() {
      var _this5;
      _classCallCheck(this, _a2);
      _this5 = _callSuper(this, _a2, [body$2]);
      __publicField(_this5, "name", getBuiltInMiddlewareName("BODY"));
      return _this5;
    }
    _inherits(_a2, _HttpSvcMiddleware4);
    return _createClass(_a2);
  }(HttpSvcMiddleware), __publicField(_a2, "handler", body$2), _a2);
  var csrf$2 = /*#__PURE__*/function () {
    var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(ctx, next, config) {
      var _ctx$request2, method, data, headers, payload, csrf2, csrfGetted, getCsrf, key, setCsrf, contentType;
      return _regeneratorRuntime().wrap(function _callee5$(_context5) {
        while (1) switch (_context5.prev = _context5.next) {
          case 0:
            if (ctx.request) {
              _context5.next = 2;
              break;
            }
            return _context5.abrupt("return", next());
          case 2:
            _ctx$request2 = ctx.request, method = _ctx$request2.method, data = _ctx$request2.data, headers = _ctx$request2.headers;
            payload = (config == null ? void 0 : config.payload) || {};
            csrf2 = "";
            csrfGetted = false;
            getCsrf = function getCsrf() {
              if (csrf2 || csrfGetted) return;
              try {
                if (!isNode) {
                  csrf2 = getCookie$5("bili_jct", {
                    decode: false
                  });
                } else {
                  csrf2 = getCookie$5("bili_jct", {
                    template: (headers == null ? void 0 : headers["cookie"]) || (headers == null ? void 0 : headers["Cookie"]) || "_",
                    decode: false
                  });
                }
                csrfGetted = true;
              } catch (error) {
                if (!isNode) {
                  console.warn(error);
                }
              }
            };
            key = payload.key || "csrf";
            setCsrf = function setCsrf(pos) {
              getCsrf();
              if (!csrf2 || !ctx.request) return;
              if (pos === "params") {
                if (!ctx.request.params) {
                  ctx.request.params = _defineProperty2({}, key, csrf2);
                } else {
                  ctx.request.params[key] = csrf2;
                }
                return;
              }
              if (!data) {
                return;
              }
              switch (true) {
                case isFormData$2(data):
                  data.append(key, csrf2);
                  break;
                case isRecordObj$2(data):
                  data[key] = csrf2;
                  break;
              }
            };
            if (method === "GET") {
              if (payload.params === true) {
                setCsrf("params");
              }
            } else if (method === "POST" || method === "PUT") {
              contentType = getContentType$2(headers) || "";
              if (typeof payload.data === "undefined" && typeof payload.params === "undefined") {
                if (!contentType) {
                  if (typeof data === "undefined" || isRecordObj$2(data)) {
                    setCsrf("params");
                  } else {
                    setCsrf("data");
                  }
                } else if (isEqualContentType$2(ContentType$2.JSON, contentType)) {
                  setCsrf("params");
                } else {
                  setCsrf("data");
                }
              } else {
                if (payload.params) {
                  setCsrf("params");
                }
                if (payload.data) {
                  if (typeof data === "undefined") {
                    if (isEqualContentType$2(ContentType$2.FormData, contentType)) {
                      ctx.request.data = new FormData();
                    } else {
                      ctx.request.data = {};
                    }
                  }
                  setCsrf("data");
                }
              }
            }
            _context5.next = 12;
            return next();
          case 12:
            return _context5.abrupt("return", _context5.sent);
          case 13:
          case "end":
            return _context5.stop();
        }
      }, _callee5);
    }));
    return function csrf$2(_x11, _x12, _x13) {
      return _ref6.apply(this, arguments);
    };
  }();
  var HttpSvcCsrf$2 = (_b = /*#__PURE__*/function (_HttpSvcMiddleware5) {
    "use strict";

    function _b() {
      var _this6;
      _classCallCheck(this, _b);
      _this6 = _callSuper(this, _b, [csrf$2]);
      __publicField(_this6, "name", getBuiltInMiddlewareName("CSRF"));
      return _this6;
    }
    _inherits(_b, _HttpSvcMiddleware5);
    return _createClass(_b);
  }(HttpSvcMiddleware), __publicField(_b, "handler", csrf$2), _b);
  var fetch$3 = /*#__PURE__*/function () {
    var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(ctx, next) {
      var _a3, _ctx$request3, url2, method, headers, credentials, body2;
      return _regeneratorRuntime().wrap(function _callee6$(_context6) {
        while (1) switch (_context6.prev = _context6.next) {
          case 0:
            if (!isNode) {
              _context6.next = 2;
              break;
            }
            throw new Error("When you are in a Node environment, please use server-side fetch middleware.");
          case 2:
            if (window.fetch) {
              _context6.next = 4;
              break;
            }
            throw new Error("When you are in a non-modern browser, please manually polyfill fetch.");
          case 4:
            if (ctx.request) {
              _context6.next = 8;
              break;
            }
            _context6.next = 7;
            return next();
          case 7:
            return _context6.abrupt("return", _context6.sent);
          case 8:
            if (!ctx.response) {
              _context6.next = 12;
              break;
            }
            _context6.next = 11;
            return next();
          case 11:
            return _context6.abrupt("return", _context6.sent);
          case 12:
            _ctx$request3 = ctx.request, url2 = _ctx$request3.url, method = _ctx$request3.method, headers = _ctx$request3.headers, credentials = _ctx$request3.credentials;
            body2 = ctx.request.data;
            _context6.next = 16;
            return window.fetch(url2, {
              method: method,
              body: body2,
              headers: headers,
              credentials: credentials,
              signal: (_a3 = ctx.abortController) == null ? void 0 : _a3.signal
            });
          case 16:
            ctx.response = _context6.sent;
            _context6.next = 19;
            return next();
          case 19:
            return _context6.abrupt("return", _context6.sent);
          case 20:
          case "end":
            return _context6.stop();
        }
      }, _callee6);
    }));
    return function fetch$3(_x14, _x15) {
      return _ref7.apply(this, arguments);
    };
  }();
  var HttpSvcFetch = /*#__PURE__*/function (_HttpSvcMiddleware6) {
    "use strict";

    function HttpSvcFetch() {
      var _this7;
      _classCallCheck(this, HttpSvcFetch);
      _this7 = _callSuper(this, HttpSvcFetch, arguments);
      __publicField(_this7, "handler", fetch$3);
      __publicField(_this7, "name", getBuiltInMiddlewareName("FETCH"));
      return _this7;
    }
    _inherits(HttpSvcFetch, _HttpSvcMiddleware6);
    return _createClass(HttpSvcFetch);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcFetch, "handler", fetch$3);
  var resData = /*#__PURE__*/function () {
    var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(ctx, next, config) {
      var _a3, _b2, responseType;
      return _regeneratorRuntime().wrap(function _callee7$(_context7) {
        while (1) switch (_context7.prev = _context7.next) {
          case 0:
            _context7.next = 2;
            return next();
          case 2:
            if (!((_a3 = ctx.response) == null ? void 0 : _a3.ok)) {
              _context7.next = 14;
              break;
            }
            if (!(typeof ctx.response.data === "undefined")) {
              _context7.next = 14;
              break;
            }
            _context7.prev = 4;
            responseType = ((_b2 = config == null ? void 0 : config.payload) == null ? void 0 : _b2.type) || "json";
            _context7.next = 8;
            return ctx.response[responseType]();
          case 8:
            ctx.response.data = _context7.sent;
            _context7.next = 14;
            break;
          case 11:
            _context7.prev = 11;
            _context7.t0 = _context7["catch"](4);
            console.warn(_context7.t0);
          case 14:
          case "end":
            return _context7.stop();
        }
      }, _callee7, null, [[4, 11]]);
    }));
    return function resData(_x16, _x17, _x18) {
      return _ref8.apply(this, arguments);
    };
  }();
  var HttpSvcResData = /*#__PURE__*/function (_HttpSvcMiddleware7) {
    "use strict";

    function HttpSvcResData() {
      var _this8;
      _classCallCheck(this, HttpSvcResData);
      _this8 = _callSuper(this, HttpSvcResData, [resData]);
      __publicField(_this8, "name", getBuiltInMiddlewareName("RES_DATA"));
      return _this8;
    }
    _inherits(HttpSvcResData, _HttpSvcMiddleware7);
    return _createClass(HttpSvcResData);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcResData, "handler", resData);
  var spray = /*#__PURE__*/function () {
    var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(ctx, next) {
      return _regeneratorRuntime().wrap(function _callee8$(_context8) {
        while (1) switch (_context8.prev = _context8.next) {
          case 0:
            _context8.next = 2;
            return next();
          case 2:
          case "end":
            return _context8.stop();
        }
      }, _callee8);
    }));
    return function spray(_x19, _x20) {
      return _ref9.apply(this, arguments);
    };
  }();
  var HttpSvcSprayMiddleware = /*#__PURE__*/function (_HttpSvcMiddleware8) {
    "use strict";

    function HttpSvcSprayMiddleware(handler, payload) {
      var _this9;
      _classCallCheck(this, HttpSvcSprayMiddleware);
      _this9 = _callSuper(this, HttpSvcSprayMiddleware);
      __publicField(_this9, "name", getBuiltInMiddlewareName("SPRAY"));
      _this9.handler = /*#__PURE__*/function () {
        var _ref10 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(ctx, next) {
          return _regeneratorRuntime().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                _context9.next = 2;
                return handler(ctx, next, {
                  payload: payload
                });
              case 2:
                return _context9.abrupt("return", _context9.sent);
              case 3:
              case "end":
                return _context9.stop();
            }
          }, _callee9);
        }));
        return function (_x21, _x22) {
          return _ref10.apply(this, arguments);
        };
      }();
      return _this9;
    }
    _inherits(HttpSvcSprayMiddleware, _HttpSvcMiddleware8);
    return _createClass(HttpSvcSprayMiddleware);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcSprayMiddleware, "handler", spray);
  var retry = /*#__PURE__*/function () {
    var _ref11 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(ctx, next, config) {
      var _a3, requestFn, _ref12, times, condition, onRetry, isDone, doRetry, isMeetTheCondition;
      return _regeneratorRuntime().wrap(function _callee11$(_context11) {
        while (1) switch (_context11.prev = _context11.next) {
          case 0:
            requestFn = (_a3 = ctx.request) == null ? void 0 : _a3["function"];
            _ref12 = (config == null ? void 0 : config.payload) || {
              times: 0
            }, times = _ref12.times, condition = _ref12.condition, onRetry = _ref12.onRetry;
            isDone = function isDone() {
              return !times || ctx.retry === times;
            };
            doRetry = /*#__PURE__*/function () {
              var _ref13 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(extra) {
                var _a4, newConfig;
                return _regeneratorRuntime().wrap(function _callee10$(_context10) {
                  while (1) switch (_context10.prev = _context10.next) {
                    case 0:
                      if (requestFn) {
                        _context10.next = 2;
                        break;
                      }
                      throw createError(ctx, "Missing request function");
                    case 2:
                      if (!(isDone() && !((_a4 = config == null ? void 0 : config.payload) == null ? void 0 : _a4.runtimeShortCircuit))) {
                        _context10.next = 4;
                        break;
                      }
                      throw createError(ctx);
                    case 4:
                      ctx.retry = ctx.retry ? ctx.retry + 1 : 1;
                      _context10.prev = 5;
                      if (!onRetry) {
                        _context10.next = 11;
                        break;
                      }
                      _context10.next = 9;
                      return onRetry(ctx.config, extra);
                    case 9:
                      newConfig = _context10.sent;
                      if (newConfig) {
                        ctx.config = newConfig;
                      }
                    case 11:
                      if (ctx.response) delete ctx.response;
                      _context10.next = 14;
                      return requestFn(ctx);
                    case 14:
                      _context10.next = 19;
                      break;
                    case 16:
                      _context10.prev = 16;
                      _context10.t0 = _context10["catch"](5);
                      throw createError(ctx, _context10.t0.message);
                    case 19:
                    case "end":
                      return _context10.stop();
                  }
                }, _callee10, null, [[5, 16]]);
              }));
              return function doRetry(_x26) {
                return _ref13.apply(this, arguments);
              };
            }();
            _context11.prev = 4;
            _context11.next = 7;
            return next();
          case 7:
            _context11.next = 16;
            break;
          case 9:
            _context11.prev = 9;
            _context11.t0 = _context11["catch"](4);
            if (!isDone()) {
              _context11.next = 13;
              break;
            }
            throw createError(ctx, _context11.t0 == null ? void 0 : _context11.t0.message);
          case 13:
            _context11.next = 15;
            return doRetry();
          case 15:
            return _context11.abrupt("return");
          case 16:
            if (!condition) {
              _context11.next = 24;
              break;
            }
            _context11.next = 19;
            return condition(ctx.response);
          case 19:
            isMeetTheCondition = _context11.sent;
            if (!isMeetTheCondition) {
              _context11.next = 24;
              break;
            }
            _context11.next = 23;
            return doRetry(isMeetTheCondition);
          case 23:
            return _context11.abrupt("return");
          case 24:
            if (!(!ctx.response || !ctx.response.ok)) {
              _context11.next = 27;
              break;
            }
            _context11.next = 27;
            return doRetry();
          case 27:
          case "end":
            return _context11.stop();
        }
      }, _callee11, null, [[4, 9]]);
    }));
    return function retry(_x23, _x24, _x25) {
      return _ref11.apply(this, arguments);
    };
  }();
  var HttpSvcRetry = /*#__PURE__*/function (_HttpSvcMiddleware9) {
    "use strict";

    function HttpSvcRetry() {
      var _this10;
      _classCallCheck(this, HttpSvcRetry);
      _this10 = _callSuper(this, HttpSvcRetry, arguments);
      __publicField(_this10, "name", getBuiltInMiddlewareName("RETRY"));
      __publicField(_this10, "handler", retry);
      return _this10;
    }
    _inherits(HttpSvcRetry, _HttpSvcMiddleware9);
    return _createClass(HttpSvcRetry);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcRetry, "handler", retry);
  var isFetching = false;
  var TICKET_COOKIE_KEY = "bili_ticket";
  var TICKET_COOKIE_KEY_EXP = "bili_ticket_expires";
  var BEFORE_UPDATE_MINUTES = 30;
  var LOCAL_STORAGE_KEY = "wbi_img_urls";
  var detectTicketAndWbi = /*#__PURE__*/function () {
    var _ref14 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(ctx) {
      var _a3, biliTicket, wbiImgUrl, wbiSubUrl, _ref15, _ref16, _split, _split2, isTicketExpired;
      return _regeneratorRuntime().wrap(function _callee13$(_context13) {
        while (1) switch (_context13.prev = _context13.next) {
          case 0:
            biliTicket = getCookie$5(TICKET_COOKIE_KEY, {
              decode: false
            });
            wbiImgUrl = "";
            wbiSubUrl = "";
            if (window == null ? void 0 : window.UNIFY_HTTP_WBI_CONFIG) {
              _ref15 = ((_a3 = window.UNIFY_HTTP_WBI_CONFIG) == null ? void 0 : _a3.split("-")) || [];
              _ref16 = _slicedToArray(_ref15, 2);
              wbiImgUrl = _ref16[0];
              wbiSubUrl = _ref16[1];
            } else {
              _split = (localStorage.getItem(LOCAL_STORAGE_KEY) || "").split("-");
              _split2 = _slicedToArray(_split, 2);
              wbiImgUrl = _split2[0];
              wbiSubUrl = _split2[1];
            }
            isTicketExpired = isExpired();
            if (!(isTicketExpired || !biliTicket || !wbiImgUrl || !wbiSubUrl)) {
              _context13.next = 9;
              break;
            }
            if (!isFetching) {
              _context13.next = 8;
              break;
            }
            return _context13.abrupt("return");
          case 8:
            ctx.useAsyncRequest(/*#__PURE__*/function () {
              var _ref17 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(req) {
                var _a4, _b2, api, response;
                return _regeneratorRuntime().wrap(function _callee12$(_context12) {
                  while (1) switch (_context12.prev = _context12.next) {
                    case 0:
                      _context12.prev = 0;
                      isFetching = true;
                      _context12.next = 4;
                      return buildTicketURL();
                    case 4:
                      api = _context12.sent;
                      _context12.next = 7;
                      return req({
                        url: api,
                        method: "POST",
                        credentials: "include"
                      });
                    case 7:
                      response = _context12.sent;
                      if ((response == null ? void 0 : response.code) === 0 && ((_a4 = response.data) == null ? void 0 : _a4.ticket) && ((_b2 = response.data) == null ? void 0 : _b2.nav)) {
                        setTicketAndNavInLocalStorage(response.data);
                      }
                    case 9:
                      _context12.prev = 9;
                      isFetching = false;
                      return _context12.finish(9);
                    case 12:
                    case "end":
                      return _context12.stop();
                  }
                }, _callee12, null, [[0,, 9, 12]]);
              }));
              return function (_x28) {
                return _ref17.apply(this, arguments);
              };
            }());
          case 9:
          case "end":
            return _context13.stop();
        }
      }, _callee13);
    }));
    return function detectTicketAndWbi(_x27) {
      return _ref14.apply(this, arguments);
    };
  }();
  var isExpired = function isExpired() {
    var biliTicketExp = getCookie$5(TICKET_COOKIE_KEY_EXP, {
      decode: false
    });
    var thresholdMilliseconds = BEFORE_UPDATE_MINUTES * 60 * 1e3;
    var currentTime = (/* @__PURE__ */new Date()).getTime();
    return biliTicketExp * 1e3 - currentTime <= thresholdMilliseconds || biliTicketExp * 1e3 < currentTime;
  };
  var setTicketInCookie = function setTicketInCookie(key, value, ttl) {
    var _a3;
    if ((_a3 = window == null ? void 0 : window.biliBridgePc) == null ? void 0 : _a3.callNative) {
      window.biliBridgePc.callNative("auth/setCookies", [{
        name: key,
        value: value,
        expirationDate: Math.ceil(Date.now() / 1e3) + ttl,
        isExpiredRemove: true
      }]);
      return;
    }
    setCookie$1(key, value, {
      domain: ".bilibili.com",
      exMinuts: ttl / 60
    });
  };
  var setTicketAndNavInLocalStorage = function setTicketAndNavInLocalStorage(data) {
    var ticket = data.ticket,
      nav = data.nav,
      ttl = data.ttl,
      created_at = data.created_at;
    setTicketInCookie(TICKET_COOKIE_KEY, ticket, ttl);
    setTicketInCookie(TICKET_COOKIE_KEY_EXP, String(created_at + ttl), ttl);
    window.UNIFY_HTTP_WBI_CONFIG = "".concat(nav.img, "-").concat(nav.sub);
    localStorage.setItem(LOCAL_STORAGE_KEY, "".concat(nav.img, "-").concat(nav.sub));
  };
  var buildTicketURL = /*#__PURE__*/function () {
    var _ref18 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {
      var ts, key, hamc, sign, api;
      return _regeneratorRuntime().wrap(function _callee14$(_context14) {
        while (1) switch (_context14.prev = _context14.next) {
          case 0:
            ts = Math.floor((/* @__PURE__ */new Date()).getTime() / 1e3);
            key = "YhxToH[2q";
            _context14.next = 4;
            return loadScript("//s1.hdslb.com/bfs/static/jinkela/long/unify-http-request/forticket.min.js");
          case 4:
            if (window.CryptoJS) {
              _context14.next = 6;
              break;
            }
            throw new Error("CryptoJS is not found");
          case 6:
            if (window.CryptoJS.HmacSHA256) {
              _context14.next = 8;
              break;
            }
            throw new Error("CryptoJS.HmacSHA256 is not found");
          case 8:
            if (window.CryptoJS.enc) {
              _context14.next = 10;
              break;
            }
            throw new Error("CryptoJS.enc is not found");
          case 10:
            hamc = window.CryptoJS.HmacSHA256("ts".concat(ts), formatString(key));
            sign = window.CryptoJS.enc.Hex.stringify(hamc);
            _context14.next = 14;
            return buildURL$2("//api.bilibili.com/bapis/bilibili.api.ticket.v1.Ticket/GenWebTicket", {
              key_id: "ec02",
              hexsign: sign,
              "context[ts]": ts,
              csrf: getCookie$5("bili_jct", {
                decode: false
              })
            });
          case 14:
            api = _context14.sent;
            return _context14.abrupt("return", api);
          case 16:
          case "end":
            return _context14.stop();
        }
      }, _callee14);
    }));
    return function buildTicketURL() {
      return _ref18.apply(this, arguments);
    };
  }();
  var updateTicketAndWbi = /*#__PURE__*/function () {
    var _ref19 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(ctx, next) {
      var _a3, _ctx$request4, method, params;
      return _regeneratorRuntime().wrap(function _callee15$(_context15) {
        while (1) switch (_context15.prev = _context15.next) {
          case 0:
            if (!(typeof window === "undefined")) {
              _context15.next = 4;
              break;
            }
            _context15.next = 3;
            return next();
          case 3:
            return _context15.abrupt("return", _context15.sent);
          case 4:
            if (ctx.request) {
              _ctx$request4 = ctx.request, method = _ctx$request4.method, params = _ctx$request4.params;
              if (!(params == null ? void 0 : params.web_location) && method === "GET") {
                ctx.request.params = _objectSpread(_objectSpread({}, ctx.request.params || {}), {}, {
                  web_location: ((_a3 = document.getElementsByTagName("meta")["spm_prefix"]) == null ? void 0 : _a3.content) || "0.0"
                });
              }
            }
            try {
              detectTicketAndWbi(ctx);
            } catch (error) {
              console.log("[updateTicketAndWbi]", error);
            }
            _context15.next = 8;
            return next();
          case 8:
          case "end":
            return _context15.stop();
        }
      }, _callee15);
    }));
    return function updateTicketAndWbi(_x29, _x30) {
      return _ref19.apply(this, arguments);
    };
  }();
  var HttpSvcTicketWbiUpdate = /*#__PURE__*/function (_HttpSvcMiddleware10) {
    "use strict";

    function HttpSvcTicketWbiUpdate() {
      var _this11;
      _classCallCheck(this, HttpSvcTicketWbiUpdate);
      _this11 = _callSuper(this, HttpSvcTicketWbiUpdate, [updateTicketAndWbi]);
      __publicField(_this11, "name", getBuiltInMiddlewareName("TICKET_WBI"));
      return _this11;
    }
    _inherits(HttpSvcTicketWbiUpdate, _HttpSvcMiddleware10);
    return _createClass(HttpSvcTicketWbiUpdate);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcTicketWbiUpdate, "handler", updateTicketAndWbi);
  var HttpSvcControl = /*#__PURE__*/_createClass(function HttpSvcControl(httpSvc) {
    "use strict";

    _classCallCheck(this, HttpSvcControl);
    this.httpSvc = httpSvc;
  });
  var ConfigControl = /*#__PURE__*/function (_HttpSvcControl) {
    "use strict";

    function ConfigControl() {
      _classCallCheck(this, ConfigControl);
      return _callSuper(this, ConfigControl, arguments);
    }
    _inherits(ConfigControl, _HttpSvcControl);
    return _createClass(ConfigControl, [{
      key: "provide",
      value: function provide() {
        var _this12 = this;
        var ctx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var provider = {
          inject: function inject(key, value) {
            _this12.inject(ctx, key, value);
            return provider;
          },
          disable: function disable(key) {
            _this12.disable(ctx, key);
            return provider;
          },
          get: function get() {
            return ctx;
          }
        };
        return provider;
      }
    }, {
      key: "inject",
      value: function inject(ctx, name, config) {
        ctx[name] = config;
      }
    }, {
      key: "disable",
      value: function disable(ctx, name) {
        ctx[name] = _objectSpread(_objectSpread({}, ctx[name] || {}), {}, {
          disabled: true
        });
      }
    }, {
      key: "get",
      value: function get(ctx, name) {
        return ctx[name] || {};
      }
    }]);
  }(HttpSvcControl);
  var BUILT_IN_MIDDLEWARE = {
    INIT_CTX: getBuiltInMiddlewareName("INIT_CTX"),
    TIMEOUT: getBuiltInMiddlewareName("TIMEOUT"),
    BODY: getBuiltInMiddlewareName("BODY"),
    CSRF: getBuiltInMiddlewareName("CSRF"),
    FETCH: getBuiltInMiddlewareName("FETCH"),
    RETRY: getBuiltInMiddlewareName("RETRY"),
    SPRAY: getBuiltInMiddlewareName("SPRAY"),
    RES_DATA: getBuiltInMiddlewareName("RES_DATA"),
    RES_EXTRACT: getBuiltInMiddlewareName("RES_EXTRACT"),
    TICKET_WBI: getBuiltInMiddlewareName("TICKET_WBI"),
    LOG: getBuiltInMiddlewareName("LOG"),
    CACHE: getBuiltInMiddlewareName("CACHE")
  };
  var ORDER_PRIFIX = "$ORDER_";
  var AssembleDispatcher = /*#__PURE__*/function () {
    "use strict";

    function AssembleDispatcher(control) {
      _classCallCheck(this, AssembleDispatcher);
      __publicField(this, "middlewares", []);
      __publicField(this, "middlewareConfigCtxProvider");
      this.control = control;
      this.middlewareConfigCtxProvider = this.control.httpSvc.configCtrl.provide();
    }
    return _createClass(AssembleDispatcher, [{
      key: "with",
      value: function _with(middleware, payload) {
        if (!middleware) return this;
        if (typeof middleware === "string") {
          this.middlewares.push({
            name: "".concat(ORDER_PRIFIX).concat(middleware),
            handler: HttpSvcSprayMiddleware.handler
          });
          if (payload) {
            this.inject(middleware, payload);
          }
        } else if (typeof middleware === "function") {
          this.middlewares.push(new HttpSvcSprayMiddleware(middleware, payload));
        } else if (isMiddleware(middleware)) {
          this.middlewares.push(middleware);
          if (payload) {
            this.inject(middleware.name, payload);
          }
        }
        return this;
      }
    }, {
      key: "inject",
      value: function inject(name, payload) {
        this.middlewareConfigCtxProvider.inject(name, {
          payload: payload
        });
        return this;
      }
    }, {
      key: "disable",
      value: function disable(name) {
        this.middlewareConfigCtxProvider.disable(name);
        return this;
      }
    }, {
      key: "request",
      value: function request(config) {
        var fn2 = this.control.compose(this.middlewares);
        return this.control.httpSvc.requestCtrl.request(config, this.middlewareConfigCtxProvider.get(), fn2);
      }
    }]);
  }();
  var AssembleControl = /*#__PURE__*/function (_HttpSvcControl2) {
    "use strict";

    function AssembleControl() {
      var _this13;
      _classCallCheck(this, AssembleControl);
      _this13 = _callSuper(this, AssembleControl, arguments);
      __publicField(_this13, "middlewares", []);
      return _this13;
    }
    _inherits(AssembleControl, _HttpSvcControl2);
    return _createClass(AssembleControl, [{
      key: "alreadyExistsIdx",
      value: function alreadyExistsIdx(middlewareName) {
        return this.middlewares.findIndex(function (m2) {
          return m2.name === middlewareName;
        });
      }
    }, {
      key: "register",
      value: function register(middlewares) {
        var _this14 = this;
        if (Array.isArray(middlewares)) {
          var reset = false;
          middlewares.forEach(function (m2) {
            if (isMiddleware(m2)) {
              reset = true;
              var idx = _this14.alreadyExistsIdx(m2.name);
              if (idx > -1) {
                _this14.middlewares[idx] = m2;
              } else {
                _this14.middlewares.push(m2);
              }
            }
          });
          if (reset) {
            this.httpSvc.requestCtrl.reset();
          }
        }
      }
    }, {
      key: "setup",
      value: function setup() {
        return new AssembleDispatcher(this);
      }
    }, {
      key: "disable",
      value: function disable(middlewareName) {
        return this.setup().disable(middlewareName);
      }
    }, {
      key: "with",
      value: function _with(middleware, payload) {
        return this.setup()["with"](middleware, payload);
      }
    }, {
      key: "compose",
      value: function compose(middlewares) {
        var _this15 = this;
        var list1 = _toConsumableArray2(this.middlewares);
        var list2 = [];
        var builtInOverride = _defineProperty2(_defineProperty2(_defineProperty2({}, BUILT_IN_MIDDLEWARE.RETRY, null), BUILT_IN_MIDDLEWARE.BODY, null), BUILT_IN_MIDDLEWARE.RES_DATA, null);
        var builtInNames = Object.keys(builtInOverride);
        var unique = {};
        (middlewares || []).forEach(function (m2) {
          if (isMiddleware(m2)) {
            var middlewareName = m2.name;
            if (builtInNames.includes(middlewareName)) {
              if (!builtInOverride[middlewareName]) {
                builtInOverride[middlewareName] = m2;
              }
            } else {
              if (middlewareName.startsWith(ORDER_PRIFIX)) {
                middlewareName = middlewareName.substring(ORDER_PRIFIX.length);
                if (!unique[middlewareName] && !(middlewareName in builtInOverride)) {
                  var globalMiddlewareIndex = list1.findIndex(function (m22) {
                    return m22.name === middlewareName;
                  });
                  if (globalMiddlewareIndex > -1) {
                    var realM = list1[globalMiddlewareIndex];
                    list1.splice(globalMiddlewareIndex, 1);
                    unique[middlewareName] = realM;
                    list2.push(realM);
                  }
                }
              } else {
                if (BUILT_IN_MIDDLEWARE.SPRAY === middlewareName) {
                  list2.push(m2);
                } else if (!unique[middlewareName]) {
                  unique[middlewareName] = m2;
                  list2.push(m2);
                }
              }
            }
          }
        });
        var list = [];
        list1.forEach(function (m2) {
          if (builtInNames.includes(m2.name)) {
            if (!builtInOverride[m2.name]) {
              builtInOverride[m2.name] = m2;
            }
          } else if (!unique[m2.name]) {
            list.push(m2);
          }
        });
        list.push.apply(list, list2);
        var middlewareList = [builtInOverride[BUILT_IN_MIDDLEWARE.RETRY] || new HttpSvcRetry(), new HttpSvcInitCtx()].concat(list, [builtInOverride[BUILT_IN_MIDDLEWARE.RES_DATA] || new HttpSvcResData(), builtInOverride[BUILT_IN_MIDDLEWARE.BODY] || new HttpSvcBody$2(), new HttpSvcTimeout(), this.httpSvc.fetch]);
        return /*#__PURE__*/function () {
          var _ref20 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(context) {
            var _a3, _b2, index2, configCtrl, debug, disableResExtract, dispatch, _dispatch;
            return _regeneratorRuntime().wrap(function _callee17$(_context17) {
              while (1) switch (_context17.prev = _context17.next) {
                case 0:
                  _dispatch = function _dispatch3() {
                    _dispatch = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(i2) {
                      var middleware;
                      return _regeneratorRuntime().wrap(function _callee16$(_context16) {
                        while (1) switch (_context16.prev = _context16.next) {
                          case 0:
                            if (!(i2 === middlewareList.length)) {
                              _context16.next = 2;
                              break;
                            }
                            return _context16.abrupt("return");
                          case 2:
                            if (!(i2 <= index2)) {
                              _context16.next = 4;
                              break;
                            }
                            throw createError(context, "The next() called multiple times");
                          case 4:
                            index2 = i2;
                            middleware = middlewareList[index2];
                            if (middleware) {
                              _context16.next = 8;
                              break;
                            }
                            throw createError(context, "Middleware is not exist");
                          case 8:
                            _context16.next = 10;
                            return middleware.handler(context, dispatch.bind(null, i2 + 1), configCtrl.get(context.middleware, middleware.name));
                          case 10:
                          case "end":
                            return _context16.stop();
                        }
                      }, _callee16);
                    }));
                    return _dispatch.apply(this, arguments);
                  };
                  dispatch = function _dispatch2(_x32) {
                    return _dispatch.apply(this, arguments);
                  };
                  index2 = -1;
                  configCtrl = _this15.httpSvc.configCtrl;
                  debug = configCtrl.get(context.middleware, "DEBUG").payload;
                  _context17.next = 7;
                  return dispatch(0);
                case 7:
                  if (!debug) {
                    _context17.next = 9;
                    break;
                  }
                  return _context17.abrupt("return", context);
                case 9:
                  disableResExtract = configCtrl.get(context.middleware, BUILT_IN_MIDDLEWARE.RES_EXTRACT).disabled;
                  if (!(!disableResExtract && ((_a3 = context.response) == null ? void 0 : _a3.ok))) {
                    _context17.next = 12;
                    break;
                  }
                  return _context17.abrupt("return", ((_b2 = context.response) == null ? void 0 : _b2.data) || null);
                case 12:
                  return _context17.abrupt("return", context.response);
                case 13:
                case "end":
                  return _context17.stop();
              }
            }, _callee17);
          }));
          return function (_x31) {
            return _ref20.apply(this, arguments);
          };
        }();
      }
    }]);
  }(HttpSvcControl);
  var RequestControl = /*#__PURE__*/function (_HttpSvcControl3) {
    "use strict";

    function RequestControl() {
      var _this16;
      _classCallCheck(this, RequestControl);
      _this16 = _callSuper(this, RequestControl, arguments);
      __publicField(_this16, "fn", null);
      return _this16;
    }
    _inherits(RequestControl, _HttpSvcControl3);
    return _createClass(RequestControl, [{
      key: "request",
      value: function () {
        var _request = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(config) {
          var middlewareCtx,
            fn2,
            _args18 = arguments;
          return _regeneratorRuntime().wrap(function _callee18$(_context18) {
            while (1) switch (_context18.prev = _context18.next) {
              case 0:
                middlewareCtx = _args18.length > 1 && _args18[1] !== undefined ? _args18[1] : {};
                fn2 = _args18.length > 2 ? _args18[2] : undefined;
                if (!fn2) {
                  if (!this.fn) {
                    this.generateRequestFunction();
                  }
                  fn2 = this.fn;
                }
                _context18.next = 5;
                return fn2(this.createContext(config, middlewareCtx, fn2));
              case 5:
                return _context18.abrupt("return", _context18.sent);
              case 6:
              case "end":
                return _context18.stop();
            }
          }, _callee18, this);
        }));
        function request(_x33) {
          return _request.apply(this, arguments);
        }
        return request;
      }()
    }, {
      key: "generateRequestFunction",
      value: function generateRequestFunction() {
        this.fn = this.httpSvc.assembleCtrl.compose();
      }
    }, {
      key: "reset",
      value: function reset() {
        this.fn = null;
      }
    }, {
      key: "useAsyncRequest",
      get: function get() {
        var _this17 = this;
        return function (asyncRequest, config) {
          var inst = _this17.httpSvc.create(config);
          asyncRequest(inst.request.bind(inst));
        };
      }
    }, {
      key: "createContext",
      value: function createContext(config) {
        var middleware = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var requestFn = arguments.length > 2 ? arguments[2] : undefined;
        var url2 = config.url,
          method = config.method;
        var ctx = {
          config: _objectSpread({
            baseURL: this.httpSvc.baseURL
          }, config),
          useAsyncRequest: this.useAsyncRequest,
          middleware: middleware,
          request: {
            url: url2,
            method: (method || "get").toUpperCase(),
            "function": requestFn
          }
        };
        return ctx;
      }
    }]);
  }(HttpSvcControl);
  var HttpService$1 = /*#__PURE__*/function () {
    "use strict";

    function HttpService$1(initConfig) {
      _classCallCheck(this, HttpService$1);
      __publicField(this, "fetch");
      __publicField(this, "assembleCtrl", new AssembleControl(this));
      __publicField(this, "configCtrl", new ConfigControl(this));
      __publicField(this, "requestCtrl", new RequestControl(this));
      __publicField(this, "baseURL", "//api.domain.com");
      if (initConfig) {
        if (Array.isArray(initConfig)) {
          this.fetch = new HttpSvcFetch();
          this.register(initConfig);
        } else {
          var middlewares = initConfig.middlewares,
            fetch2 = initConfig.fetch,
            baseURL = initConfig.baseURL;
          this.fetch = fetch2 || new HttpSvcFetch();
          this.register(middlewares || []);
          if (baseURL) this.baseURL = baseURL;
        }
      } else {
        this.fetch = new HttpSvcFetch();
        this.register([]);
      }
    }
    return _createClass(HttpService$1, [{
      key: "register",
      value: function register(middlewares) {
        this.assembleCtrl.register(middlewares);
      }
    }, {
      key: "request",
      value: function request(config) {
        return this.requestCtrl.request(config);
      }
    }, {
      key: "disable",
      value: function disable(middlewareName) {
        return this.assembleCtrl.disable(middlewareName);
      }
    }, {
      key: "with",
      value: function _with(middleware, payload) {
        return this.assembleCtrl["with"](middleware, payload);
      }
    }, {
      key: "setFetch",
      value: function setFetch(fetch2) {
        this.fetch = fetch2;
        this.requestCtrl.reset();
      }
    }, {
      key: "create",
      value: function create(config) {
        return new HttpService$1(_objectSpread({
          fetch: this.fetch
        }, config || {}));
      }
    }]);
  }();
  var HttpService = /*#__PURE__*/function (_HttpService$) {
    "use strict";

    function HttpService(initConfig) {
      var _this18;
      _classCallCheck(this, HttpService);
      var baseURL = "//api.bilibili.com";
      var commonMiddlewares = [new HttpSvcTicketWbiUpdate(), new HttpSvcCsrf$2()];
      if (initConfig) {
        var middlewares = [];
        var isArr = Array.isArray(initConfig);
        (isArr ? initConfig : initConfig.middlewares || []).forEach(function (m2) {
          var idx = commonMiddlewares.findIndex(function (cm) {
            return m2.name === cm.name;
          });
          if (idx > -1) {
            commonMiddlewares.splice(idx, 1);
          }
          middlewares.push(m2);
        });
        _this18 = _callSuper(this, HttpService, [{
          fetch: isArr ? void 0 : initConfig.fetch,
          baseURL: !isArr && initConfig.baseURL || baseURL,
          middlewares: [].concat(commonMiddlewares, middlewares)
        }]);
      } else {
        _this18 = _callSuper(this, HttpService, [{
          baseURL: baseURL,
          middlewares: [].concat(commonMiddlewares)
        }]);
      }
      return _assertThisInitialized(_this18);
    }
    _inherits(HttpService, _HttpService$);
    return _createClass(HttpService);
  }(HttpService$1);
  var k$2 = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof commonjsGlobal != "undefined" ? commonjsGlobal : typeof self != "undefined" ? self : {};
  (function () {
    (function (l2) {
      (function (h2) {
        var d2 = {
          searchParams: "URLSearchParams" in l2,
          iterable: "Symbol" in l2 && "iterator" in Symbol,
          blob: "FileReader" in l2 && "Blob" in l2 && function () {
            try {
              return new Blob(), true;
            } catch (e2) {
              return false;
            }
          }(),
          formData: "FormData" in l2,
          arrayBuffer: "ArrayBuffer" in l2
        };
        function D2(e2) {
          return e2 && DataView.prototype.isPrototypeOf(e2);
        }
        if (d2.arrayBuffer) var v2 = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"],
          _2 = ArrayBuffer.isView || function (e2) {
            return e2 && v2.indexOf(Object.prototype.toString.call(e2)) > -1;
          };
        function w2(e2) {
          if (typeof e2 != "string" && (e2 = String(e2)), /[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e2)) throw new TypeError("Invalid character in header field name");
          return e2.toLowerCase();
        }
        function m2(e2) {
          return typeof e2 != "string" && (e2 = String(e2)), e2;
        }
        function O2(e2) {
          var t2 = {
            next: function next() {
              var a2 = e2.shift();
              return {
                done: a2 === void 0,
                value: a2
              };
            }
          };
          return d2.iterable && (t2[Symbol.iterator] = function () {
            return t2;
          }), t2;
        }
        function u2(e2) {
          this.map = {}, e2 instanceof u2 ? e2.forEach(function (t2, a2) {
            this.append(a2, t2);
          }, this) : Array.isArray(e2) ? e2.forEach(function (t2) {
            this.append(t2[0], t2[1]);
          }, this) : e2 && Object.getOwnPropertyNames(e2).forEach(function (t2) {
            this.append(t2, e2[t2]);
          }, this);
        }
        u2.prototype.append = function (e2, t2) {
          e2 = w2(e2), t2 = m2(t2);
          var a2 = this.map[e2];
          this.map[e2] = a2 ? a2 + ", " + t2 : t2;
        }, u2.prototype["delete"] = function (e2) {
          delete this.map[w2(e2)];
        }, u2.prototype.get = function (e2) {
          return e2 = w2(e2), this.has(e2) ? this.map[e2] : null;
        }, u2.prototype.has = function (e2) {
          return this.map.hasOwnProperty(w2(e2));
        }, u2.prototype.set = function (e2, t2) {
          this.map[w2(e2)] = m2(t2);
        }, u2.prototype.forEach = function (e2, t2) {
          for (var a2 in this.map) this.map.hasOwnProperty(a2) && e2.call(t2, this.map[a2], a2, this);
        }, u2.prototype.keys = function () {
          var e2 = [];
          return this.forEach(function (t2, a2) {
            e2.push(a2);
          }), O2(e2);
        }, u2.prototype.values = function () {
          var e2 = [];
          return this.forEach(function (t2) {
            e2.push(t2);
          }), O2(e2);
        }, u2.prototype.entries = function () {
          var e2 = [];
          return this.forEach(function (t2, a2) {
            e2.push([a2, t2]);
          }), O2(e2);
        }, d2.iterable && (u2.prototype[Symbol.iterator] = u2.prototype.entries);
        function A2(e2) {
          if (e2.bodyUsed) return Promise.reject(new TypeError("Already read"));
          e2.bodyUsed = true;
        }
        function g2(e2) {
          return new Promise(function (t2, a2) {
            e2.onload = function () {
              t2(e2.result);
            }, e2.onerror = function () {
              a2(e2.error);
            };
          });
        }
        function B2(e2) {
          var t2 = new FileReader(),
            a2 = g2(t2);
          return t2.readAsArrayBuffer(e2), a2;
        }
        function P2(e2) {
          var t2 = new FileReader(),
            a2 = g2(t2);
          return t2.readAsText(e2), a2;
        }
        function S2(e2) {
          for (var t2 = new Uint8Array(e2), a2 = new Array(t2.length), p2 = 0; p2 < t2.length; p2++) a2[p2] = String.fromCharCode(t2[p2]);
          return a2.join("");
        }
        function j2(e2) {
          if (e2.slice) return e2.slice(0);
          var t2 = new Uint8Array(e2.byteLength);
          return t2.set(new Uint8Array(e2)), t2.buffer;
        }
        function r2() {
          return this.bodyUsed = false, this._initBody = function (e2) {
            this._bodyInit = e2, e2 ? typeof e2 == "string" ? this._bodyText = e2 : d2.blob && Blob.prototype.isPrototypeOf(e2) ? this._bodyBlob = e2 : d2.formData && FormData.prototype.isPrototypeOf(e2) ? this._bodyFormData = e2 : d2.searchParams && URLSearchParams.prototype.isPrototypeOf(e2) ? this._bodyText = e2.toString() : d2.arrayBuffer && d2.blob && D2(e2) ? (this._bodyArrayBuffer = j2(e2.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : d2.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(e2) || _2(e2)) ? this._bodyArrayBuffer = j2(e2) : this._bodyText = e2 = Object.prototype.toString.call(e2) : this._bodyText = "", this.headers.get("content-type") || (typeof e2 == "string" ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : d2.searchParams && URLSearchParams.prototype.isPrototypeOf(e2) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"));
          }, d2.blob && (this.blob = function () {
            var e2 = A2(this);
            if (e2) return e2;
            if (this._bodyBlob) return Promise.resolve(this._bodyBlob);
            if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));
            if (this._bodyFormData) throw new Error("could not read FormData body as blob");
            return Promise.resolve(new Blob([this._bodyText]));
          }, this.arrayBuffer = function () {
            return this._bodyArrayBuffer ? A2(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(B2);
          }), this.text = function () {
            var e2 = A2(this);
            if (e2) return e2;
            if (this._bodyBlob) return P2(this._bodyBlob);
            if (this._bodyArrayBuffer) return Promise.resolve(S2(this._bodyArrayBuffer));
            if (this._bodyFormData) throw new Error("could not read FormData body as text");
            return Promise.resolve(this._bodyText);
          }, d2.formData && (this.formData = function () {
            return this.text().then(s2);
          }), this.json = function () {
            return this.text().then(JSON.parse);
          }, this;
        }
        var o2 = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
        function i2(e2) {
          var t2 = e2.toUpperCase();
          return o2.indexOf(t2) > -1 ? t2 : e2;
        }
        function n2(e2, t2) {
          t2 = t2 || {};
          var a2 = t2.body;
          if (e2 instanceof n2) {
            if (e2.bodyUsed) throw new TypeError("Already read");
            this.url = e2.url, this.credentials = e2.credentials, t2.headers || (this.headers = new u2(e2.headers)), this.method = e2.method, this.mode = e2.mode, this.signal = e2.signal, !a2 && e2._bodyInit != null && (a2 = e2._bodyInit, e2.bodyUsed = true);
          } else this.url = String(e2);
          if (this.credentials = t2.credentials || this.credentials || "same-origin", (t2.headers || !this.headers) && (this.headers = new u2(t2.headers)), this.method = i2(t2.method || this.method || "GET"), this.mode = t2.mode || this.mode || null, this.signal = t2.signal || this.signal, this.referrer = null, (this.method === "GET" || this.method === "HEAD") && a2) throw new TypeError("Body not allowed for GET or HEAD requests");
          this._initBody(a2);
        }
        n2.prototype.clone = function () {
          return new n2(this, {
            body: this._bodyInit
          });
        };
        function s2(e2) {
          var t2 = new FormData();
          return e2.trim().split("&").forEach(function (a2) {
            if (a2) {
              var p2 = a2.split("="),
                y2 = p2.shift().replace(/\+/g, " "),
                f2 = p2.join("=").replace(/\+/g, " ");
              t2.append(decodeURIComponent(y2), decodeURIComponent(f2));
            }
          }), t2;
        }
        function c2(e2) {
          var t2 = new u2(),
            a2 = e2.replace(/\r?\n[\t ]+/g, " ");
          return a2.split(/\r?\n/).forEach(function (p2) {
            var y2 = p2.split(":"),
              f2 = y2.shift().trim();
            if (f2) {
              var L2 = y2.join(":").trim();
              t2.append(f2, L2);
            }
          }), t2;
        }
        r2.call(n2.prototype);
        function b2(e2, t2) {
          t2 || (t2 = {}), this.type = "default", this.status = t2.status === void 0 ? 200 : t2.status, this.ok = this.status >= 200 && this.status < 300, this.statusText = "statusText" in t2 ? t2.statusText : "OK", this.headers = new u2(t2.headers), this.url = t2.url || "", this._initBody(e2);
        }
        r2.call(b2.prototype), b2.prototype.clone = function () {
          return new b2(this._bodyInit, {
            status: this.status,
            statusText: this.statusText,
            headers: new u2(this.headers),
            url: this.url
          });
        }, b2.error = function () {
          var e2 = new b2(null, {
            status: 0,
            statusText: ""
          });
          return e2.type = "error", e2;
        };
        var E2 = [301, 302, 303, 307, 308];
        b2.redirect = function (e2, t2) {
          if (E2.indexOf(t2) === -1) throw new RangeError("Invalid status code");
          return new b2(null, {
            status: t2,
            headers: {
              location: e2
            }
          });
        }, h2.DOMException = l2.DOMException;
        try {
          new h2.DOMException();
        } catch (e2) {
          h2.DOMException = function (t2, a2) {
            this.message = t2, this.name = a2;
            var p2 = Error(t2);
            this.stack = p2.stack;
          }, h2.DOMException.prototype = Object.create(Error.prototype), h2.DOMException.prototype.constructor = h2.DOMException;
        }
        function T2(e2, t2) {
          return new Promise(function (a2, p2) {
            var y2 = new n2(e2, t2);
            if (y2.signal && y2.signal.aborted) return p2(new h2.DOMException("Aborted", "AbortError"));
            var f2 = new XMLHttpRequest();
            function L2() {
              f2.abort();
            }
            f2.onload = function () {
              var R2 = {
                status: f2.status,
                statusText: f2.statusText,
                headers: c2(f2.getAllResponseHeaders() || "")
              };
              R2.url = "responseURL" in f2 ? f2.responseURL : R2.headers.get("X-Request-URL");
              var x2 = "response" in f2 ? f2.response : f2.responseText;
              a2(new b2(x2, R2));
            }, f2.onerror = function () {
              p2(new TypeError("Network request failed"));
            }, f2.ontimeout = function () {
              p2(new TypeError("Network request failed"));
            }, f2.onabort = function () {
              p2(new h2.DOMException("Aborted", "AbortError"));
            }, f2.open(y2.method, y2.url, true), y2.credentials === "include" ? f2.withCredentials = true : y2.credentials === "omit" && (f2.withCredentials = false), "responseType" in f2 && d2.blob && (f2.responseType = "blob"), y2.headers.forEach(function (R2, x2) {
              f2.setRequestHeader(x2, R2);
            }), y2.signal && (y2.signal.addEventListener("abort", L2), f2.onreadystatechange = function () {
              f2.readyState === 4 && y2.signal.removeEventListener("abort", L2);
            }), f2.send(typeof y2._bodyInit == "undefined" ? null : y2._bodyInit);
          });
        }
        return T2.polyfill = true, l2.fetch || (l2.fetch = T2, l2.Headers = u2, l2.Request = n2, l2.Response = b2), h2.Headers = u2, h2.Request = n2, h2.Response = b2, h2.fetch = T2, Object.defineProperty(h2, "__esModule", {
          value: true
        }), h2;
      })({});
    })(typeof self != "undefined" ? self : k$2);
  })();
  (function (l2) {
    l2();
  })(function () {
    function l2(r2, o2) {
      if (!(r2 instanceof o2)) throw new TypeError("Cannot call a class as a function");
    }
    function h2(r2, o2) {
      for (var i2 = 0; i2 < o2.length; i2++) {
        var n2 = o2[i2];
        n2.enumerable = n2.enumerable || false, n2.configurable = true, "value" in n2 && (n2.writable = true), Object.defineProperty(r2, n2.key, n2);
      }
    }
    function d2(r2, o2, i2) {
      return o2 && h2(r2.prototype, o2), i2 && h2(r2, i2), Object.defineProperty(r2, "prototype", {
        writable: false
      }), r2;
    }
    function D2(r2, o2) {
      if (typeof o2 != "function" && o2 !== null) throw new TypeError("Super expression must either be null or a function");
      r2.prototype = Object.create(o2 && o2.prototype, {
        constructor: {
          value: r2,
          writable: true,
          configurable: true
        }
      }), Object.defineProperty(r2, "prototype", {
        writable: false
      }), o2 && _2(r2, o2);
    }
    function v2(r2) {
      return v2 = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (i2) {
        return i2.__proto__ || Object.getPrototypeOf(i2);
      }, v2(r2);
    }
    function _2(r2, o2) {
      return _2 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (n2, s2) {
        return n2.__proto__ = s2, n2;
      }, _2(r2, o2);
    }
    function w2() {
      if (typeof Reflect == "undefined" || !Reflect.construct || Reflect.construct.sham) return false;
      if (typeof Proxy == "function") return true;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), true;
      } catch (r2) {
        return false;
      }
    }
    function m2(r2) {
      if (r2 === void 0) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return r2;
    }
    function O2(r2, o2) {
      if (o2 && (_typeof4(o2) == "object" || typeof o2 == "function")) return o2;
      if (o2 !== void 0) throw new TypeError("Derived constructors may only return object or undefined");
      return m2(r2);
    }
    function u2(r2) {
      var o2 = w2();
      return function () {
        var n2 = v2(r2),
          s2;
        if (o2) {
          var c2 = v2(this).constructor;
          s2 = Reflect.construct(n2, arguments, c2);
        } else s2 = n2.apply(this, arguments);
        return O2(this, s2);
      };
    }
    function A2(r2, o2) {
      for (; !Object.prototype.hasOwnProperty.call(r2, o2) && (r2 = v2(r2), r2 !== null););
      return r2;
    }
    function g2() {
      return typeof Reflect != "undefined" && Reflect.get ? g2 = Reflect.get.bind() : g2 = function g2(o2, i2, n2) {
        var s2 = A2(o2, i2);
        if (!!s2) {
          var c2 = Object.getOwnPropertyDescriptor(s2, i2);
          return c2.get ? c2.get.call(arguments.length < 3 ? o2 : n2) : c2.value;
        }
      }, g2.apply(this, arguments);
    }
    var B2 = function () {
        function r2() {
          l2(this, r2), Object.defineProperty(this, "listeners", {
            value: {},
            writable: true,
            configurable: true
          });
        }
        return d2(r2, [{
          key: "addEventListener",
          value: function value(i2, n2, s2) {
            i2 in this.listeners || (this.listeners[i2] = []), this.listeners[i2].push({
              callback: n2,
              options: s2
            });
          }
        }, {
          key: "removeEventListener",
          value: function value(i2, n2) {
            if (i2 in this.listeners) {
              for (var s2 = this.listeners[i2], c2 = 0, b2 = s2.length; c2 < b2; c2++) if (s2[c2].callback === n2) {
                s2.splice(c2, 1);
                return;
              }
            }
          }
        }, {
          key: "dispatchEvent",
          value: function value(i2) {
            var _this19 = this;
            if (i2.type in this.listeners) {
              var _loop = function _loop() {
                  E2 = s2[c2];
                  try {
                    E2.callback.call(_this19, i2);
                  } catch (T2) {
                    Promise.resolve().then(function () {
                      throw T2;
                    });
                  }
                  E2.options && E2.options.once && _this19.removeEventListener(i2.type, E2.callback);
                },
                E2;
              for (var n2 = this.listeners[i2.type], s2 = n2.slice(), c2 = 0, b2 = s2.length; c2 < b2; c2++) {
                _loop();
              }
              return !i2.defaultPrevented;
            }
          }
        }]), r2;
      }(),
      P2 = function (r2) {
        D2(i2, r2);
        var o2 = u2(i2);
        function i2() {
          var n2;
          return l2(this, i2), n2 = o2.call(this), n2.listeners || B2.call(m2(n2)), Object.defineProperty(m2(n2), "aborted", {
            value: false,
            writable: true,
            configurable: true
          }), Object.defineProperty(m2(n2), "onabort", {
            value: null,
            writable: true,
            configurable: true
          }), Object.defineProperty(m2(n2), "reason", {
            value: void 0,
            writable: true,
            configurable: true
          }), n2;
        }
        return d2(i2, [{
          key: "toString",
          value: function value() {
            return "[object AbortSignal]";
          }
        }, {
          key: "dispatchEvent",
          value: function value(s2) {
            s2.type === "abort" && (this.aborted = true, typeof this.onabort == "function" && this.onabort.call(this, s2)), g2(v2(i2.prototype), "dispatchEvent", this).call(this, s2);
          }
        }]), i2;
      }(B2),
      S2 = function () {
        function r2() {
          l2(this, r2), Object.defineProperty(this, "signal", {
            value: new P2(),
            writable: true,
            configurable: true
          });
        }
        return d2(r2, [{
          key: "abort",
          value: function value(i2) {
            var n2;
            try {
              n2 = new Event("abort");
            } catch (c2) {
              typeof document != "undefined" ? document.createEvent ? (n2 = document.createEvent("Event"), n2.initEvent("abort", false, false)) : (n2 = document.createEventObject(), n2.type = "abort") : n2 = {
                type: "abort",
                bubbles: false,
                cancelable: false
              };
            }
            var s2 = i2;
            if (s2 === void 0) if (typeof document == "undefined") s2 = new Error("This operation was aborted"), s2.name = "AbortError";else try {
              s2 = new DOMException("signal is aborted without reason");
            } catch (c2) {
              s2 = new Error("This operation was aborted"), s2.name = "AbortError";
            }
            this.signal.reason = s2, this.signal.dispatchEvent(n2);
          }
        }, {
          key: "toString",
          value: function value() {
            return "[object AbortController]";
          }
        }]), r2;
      }();
    typeof Symbol != "undefined" && Symbol.toStringTag && (S2.prototype[Symbol.toStringTag] = "AbortController", P2.prototype[Symbol.toStringTag] = "AbortSignal");
    function j2(r2) {
      return r2.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL ? (console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"), true) : typeof r2.Request == "function" && !r2.Request.prototype.hasOwnProperty("signal") || !r2.AbortController;
    }
    (function (r2) {
      !j2(r2) || (r2.AbortController = S2, r2.AbortSignal = P2);
    })(typeof self != "undefined" ? self : k$2);
  });
  /*!
   * @bilibili/js-bridge (v2.1.18)
   * 哔哩哔哩webview容器内H5页面与APP客户端交互JSB接入包
   * 构建时间：10/28/2024, 12:09:54 PM
   */
  function e$2(e2, i2) {
    (null == i2 || i2 > e2.length) && (i2 = e2.length);
    for (var a2 = 0, t2 = Array(i2); a2 < i2; a2++) t2[a2] = e2[a2];
    return t2;
  }
  function i$2(e2, i2, a2) {
    return (i2 = function (e3) {
      var i3 = function (e4, i4) {
        if ("object" != _typeof4(e4) || !e4) return e4;
        var a3 = e4[Symbol.toPrimitive];
        if (void 0 !== a3) {
          var t2 = a3.call(e4, i4 || "default");
          if ("object" != _typeof4(t2)) return t2;
          throw new TypeError("@@toPrimitive must return a primitive value.");
        }
        return ("string" === i4 ? String : Number)(e4);
      }(e3, "string");
      return "symbol" == _typeof4(i3) ? i3 : i3 + "";
    }(i2)) in e2 ? Object.defineProperty(e2, i2, {
      value: a2,
      enumerable: true,
      configurable: true,
      writable: true
    }) : e2[i2] = a2, e2;
  }
  function a$3(e2, i2) {
    var a2 = Object.keys(e2);
    if (Object.getOwnPropertySymbols) {
      var t2 = Object.getOwnPropertySymbols(e2);
      i2 && (t2 = t2.filter(function (i3) {
        return Object.getOwnPropertyDescriptor(e2, i3).enumerable;
      })), a2.push.apply(a2, t2);
    }
    return a2;
  }
  function t$2(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = null != arguments[t2] ? arguments[t2] : {};
      t2 % 2 ? a$3(Object(n2), true).forEach(function (a2) {
        i$2(e2, a2, n2[a2]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : a$3(Object(n2)).forEach(function (i2) {
        Object.defineProperty(e2, i2, Object.getOwnPropertyDescriptor(n2, i2));
      });
    }
    return e2;
  }
  function n$2(i2) {
    return function (i3) {
      if (Array.isArray(i3)) return e$2(i3);
    }(i2) || function (e2) {
      if ("undefined" != typeof Symbol && null != e2[Symbol.iterator] || null != e2["@@iterator"]) return Array.from(e2);
    }(i2) || function (i3, a2) {
      if (i3) {
        if ("string" == typeof i3) return e$2(i3, a2);
        var t2 = {}.toString.call(i3).slice(8, -1);
        return "Object" === t2 && i3.constructor && (t2 = i3.constructor.name), "Map" === t2 || "Set" === t2 ? Array.from(i3) : "Arguments" === t2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t2) ? e$2(i3, a2) : void 0;
      }
    }(i2) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function r$2(e2) {
    return (r$2 = "function" == typeof Symbol && "symbol" == _typeof4(Symbol.iterator) ? function (e3) {
      return _typeof4(e3);
    } : function (e3) {
      return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : _typeof4(e3);
    })(e2);
  }
  var s$2,
    l$2,
    o$3 = "object" === ("undefined" == typeof window ? "undefined" : r$2(window)) ? window : null,
    c$2 = function c$2(e2, i2) {
      if (!i2) return true;
      if (e2 === i2) return false;
      for (var a2 = e2.replace(/-[a-z]*/, ".-1").split("."), t2 = i2.replace(/-[a-z]*/, ".-1").split("."), n2 = Math.max(a2.length, t2.length), r2 = 0; r2 < n2; r2++) {
        var s2 = parseInt(a2[r2], 10) || 0,
          l2 = parseInt(t2[r2], 10) || 0;
        if (s2 > l2) return true;
        if (s2 < l2) return false;
      }
      return false;
    };
  if (o$3 && (o$3.BiliJsBridge || (o$3.BiliJsBridge = {
    jsbVersion: "2.1.18",
    sendTasks: [],
    sendTasksV2: [],
    callbacks: [],
    biliInject: null,
    biliInjectV2: null,
    selfCallbackId: 1,
    newVersion: false,
    inited: false,
    initedV2: false,
    noBiliInject: false,
    noBiliInjectV2: false,
    jsbV2Apis: [],
    appSupportApis: [],
    msgCallbacks: {},
    jsbCallbacks: {},
    listenersMap: {},
    msgListener: null,
    msgListenerV: "2.1.18",
    cbReceivedV1: "2.1.18",
    cbReceivedV2: "2.1.18",
    bbVersion: "2.1.18"
  }), c$2("2.1.18", o$3.BiliJsBridge.jsbVersion) && (o$3.BiliJsBridge.jsbVersion = "2.1.18"), ["msgCallbacks", "jsbCallbacks", "listenersMap"].forEach(function (e2) {
    o$3.BiliJsBridge[e2] || (o$3.BiliJsBridge[e2] = {});
  }), !o$3.selfBrowser)) {
    o$3.selfBrowser = {
      version: (l$2 = navigator.userAgent, {
        mobile: /AppleWebKit.*Mobile.*/i.test(l$2),
        ios: /\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(l$2),
        android: /Android/i.test(l$2) || /Linux/i.test(l$2),
        windowsphone: /Windows Phone/i.test(l$2),
        iPhone: /iPhone/i.test(l$2),
        iPad: /iPad/i.test(l$2),
        webApp: !/Safari/i.test(l$2),
        MicroMessenger: /MicroMessenger/i.test(l$2),
        weibo: /Weibo/i.test(l$2),
        uc: /UCBrowser/i.test(l$2),
        qq: /MQQBrowser/i.test(l$2),
        baidu: /Baidu/i.test(l$2),
        mqq: /QQ\/([\d.]+)/i.test(l$2),
        mbaidu: /baiduboxapp/i.test(l$2),
        iqiyi: /iqiyi/i.test(l$2),
        QQLive: /QQLive/i.test(l$2),
        Safari: (s$2 = navigator.userAgent, !(!/ OS \d/.test(s$2) || ~s$2.indexOf("CriOS") || s$2.indexOf("Mozilla") || !/Safari\/[\d.]+$/.test(s$2))),
        Youku: /youku/i.test(l$2),
        chrome: /CriOS/i.test(l$2),
        CMDC: /CMDC/i.test(l$2),
        BiliApp: /BiliApp|BiliComic|hikari/i.test(l$2),
        BiliMallSDK: /mallSdkVersion/i.test(l$2),
        BiliHikari: /hikari/i.test(l$2),
        bStar: /bstar_/i.test(l$2)
      }),
      language: (navigator.browserLanguage || navigator.language).toLowerCase()
    };
  }
  var d$2 = o$3 ? navigator.userAgent : null,
    f$2 = !!o$3 && /BiliApp|BiliComic|hikari/i.test(d$2),
    b$1 = !!o$3 && /wbType\/common/i.test(d$2),
    p$2 = false,
    g$1 = function g$1(e2) {
      var i2 = e2.reject,
        a2 = e2.listener,
        t2 = e2.remove;
      if (b$1) return false;
      t2 || (i2 || a2 || function () {})({
        code: 103,
        msg: "not support",
        down: false,
        data: null
      });
      return true;
    },
    m$1 = function m$1(e2, i2, a2, t2) {
      var n2 = o$3.BiliJsBridge.callbacks.findIndex(function (i3) {
        return i3.callbackId === +e2;
      });
      if (n2 >= 0) {
        var r2 = o$3.BiliJsBridge.callbacks[n2];
        if ("global.import" === r2.method && (o$3.BiliJsBridge.appSupportApis = []), "function" == typeof r2.callback) {
          var s2 = a2 || i2;
          if (r2.callback(s2), r2.messageWindow) {
            a2 instanceof Error && (s2 = {
              code: a2.code || 105,
              msg: a2.message,
              data: a2.data,
              stack: a2.stack
            });
            var l2 = JSON.stringify({
              iframeCallbackId: r2.callbackId,
              jsbReceiveArgs: s2
            });
            r2.messageWindow.postMessage(l2, "*");
          }
        }
        t2 && "global.registerChannel" !== r2.method && (o$3.BiliJsBridge.callbacks.splice(n2, 1), r2.messageWindow && r2.messageWindow.postMessage(JSON.stringify({
          iframeRemoveId: r2.callbackId
        }), "*"));
      }
    };
  function B$1(e2) {
    var i2,
      a2 = o$3.BiliJsBridge,
      n2 = a2.biliInject,
      r2 = a2.biliInjectV2,
      s2 = a2.cbReceivedV1,
      l2 = a2.cbReceivedV2;
    !n2 || n2.biliCallbackReceived && !c$2("2.1.18", s2) || (n2.biliCallbackReceived = m$1, o$3.BiliJsBridge.cbReceivedV1 = "2.1.18"), !r2 || r2.biliCallbackReceived && !c$2("2.1.18", l2) || (r2.biliCallbackReceived = function (e3, i3, a3) {
      return m$1(e3, i3, a3, true);
    }, o$3.BiliJsBridge.cbReceivedV2 = "2.1.18");
    var d2 = e2.isApiV2,
      f2 = [];
    for (var u2 in e2) Object.prototype.hasOwnProperty.call(e2, u2) && "function" == typeof e2[u2] && "callback" !== u2 && (f2.push({
      method: e2.method,
      callback: e2[u2],
      callbackId: o$3.BiliJsBridge.selfCallbackId,
      callbackName: u2,
      messageWindow: e2.messageWindow
    }), e2[u2] = "", e2.data[u2 + "CallbackId"] = o$3.BiliJsBridge.selfCallbackId++);
    if (f2.push({
      method: e2.method,
      eventKey: e2.data && e2.data.key,
      callback: e2.callback,
      callbackId: o$3.BiliJsBridge.selfCallbackId,
      callbackName: "callback",
      messageWindow: e2.messageWindow
    }), (i2 = o$3.BiliJsBridge.callbacks).push.apply(i2, f2), e2.iframeMessageId && e2.messageWindow) {
      var b2 = JSON.stringify({
        iframeMessageId: e2.iframeMessageId,
        callbacks: f2.map(function (e3) {
          return {
            callbackId: e3.callbackId,
            callbackName: e3.callbackName
          };
        })
      });
      e2.messageWindow.postMessage(b2, "*");
    }
    var p2 = function p2() {},
      g2 = function g2() {};
    if (n2 && "function" == typeof n2.postMessage && (p2 = n2.postMessage.bind(n2)), r2 && "function" == typeof r2.postMessage && (g2 = r2.postMessage.bind(r2)), d2) {
      if ("global.unregisterChannel" === e2.method) {
        var B2 = e2.callback(),
          k2 = o$3.BiliJsBridge.callbacks.findIndex(function (i3) {
            return i3.eventKey === e2.data.key && i3.callback === B2;
          });
        if (k2 > -1) {
          var v2 = o$3.BiliJsBridge.callbacks[k2];
          e2.data.callbackId = v2.callbackId, o$3.BiliJsBridge.callbacks.splice(k2, 1), v2.messageWindow && v2.messageWindow.postMessage(JSON.stringify({
            iframeRemoveId: v2.callbackId
          }), "*");
        }
      }
      g2(JSON.stringify(t$2(t$2({
        method: e2.method,
        data: e2.data
      }, e2.key && {
        key: e2.key
      }), {}, {
        callbackId: o$3.BiliJsBridge.selfCallbackId++
      })));
    } else o$3.selfBrowser.version.android ? p2(JSON.stringify({
      method: e2.method,
      data: Object.assign(e2.data, {
        callbackId: o$3.BiliJsBridge.selfCallbackId++
      })
    })) : p2({
      method: e2.method,
      data: JSON.stringify(Object.assign(e2.data, {
        callbackId: o$3.BiliJsBridge.selfCallbackId++
      }))
    });
  }
  function k$1(e2) {
    return new Promise(function (i2, a2) {
      if (e2()) i2();else var t2 = 0,
        n2 = setInterval(function () {
          t2++, e2() && (i2(), clearInterval(n2)), t2 >= 20 && (a2(), clearInterval(n2));
        }, 500);
    });
  }
  function v$1() {
    return o$3 && (o$3.biliInject || o$3.webkit && o$3.webkit.messageHandlers && o$3.webkit.messageHandlers.biliInject);
  }
  function h$1() {
    return o$3 && (o$3.biliInjectV2 || o$3.webkit && o$3.webkit.messageHandlers && o$3.webkit.messageHandlers.biliInjectV2);
  }
  function y$1(e2) {
    if ("global.import" === e2.method && (o$3.BiliJsBridge.appSupportApis = []), (e2 = e2 || {}).data = e2.data || {}, !e2.method) throw new Error("no method");
    o$3.BiliJsBridge.inited ? o$3.BiliJsBridge.newVersion && B$1(e2) : o$3.BiliJsBridge.noBiliInject || o$3.BiliJsBridge.sendTasks.push(e2);
  }
  function J$1(e2) {
    e2 && e2.method && w$1(e2.method).then(function (i2) {
      i2 && y$1(e2);
    });
  }
  function w$1(e2) {
    return new Promise(function (i2) {
      var a2 = o$3.BiliJsBridge.appSupportApis;
      a2 && a2.length ? i2(a2.includes(e2)) : y$1({
        method: "global.getAllSupport",
        callback: function callback(a3) {
          a3 && a3.length && (o$3.BiliJsBridge.appSupportApis = a3), i2((o$3.BiliJsBridge.appSupportApis || []).includes(e2));
        }
      });
    });
  }
  function I$1() {
    var e2 = [];
    [].forEach.call(arguments, function (i2) {
      i2 instanceof Array ? e2 = e2.concat(i2) : "string" == typeof i2 && e2.push(i2);
    }), w$1("global.import").then(function (i2) {
      i2 && e2.forEach(function (e3) {
        y$1({
          method: "global.import",
          data: {
            namespace: e3
          }
        });
      });
    });
  }
  function j$1(e2) {
    void 0 === e2.data && (e2.data = {}), o$3.BiliJsBridge.biliInjectV2 ? B$1(e2) : o$3.BiliJsBridge.noBiliInjectV2 || o$3.BiliJsBridge.sendTasksV2.push(e2);
  }
  function C$1(e2, i2) {
    return new Promise(function (a2, t2) {
      K$1({
        method: e2,
        params: i2,
        resolve: a2,
        reject: t2
      }) || j$1({
        method: e2,
        data: i2,
        isApiV2: true,
        callback: function callback(e3) {
          e3 && 0 === e3.code ? a2(e3) : t2(e3);
        }
      });
    });
  }
  function S$1(e2) {
    return new Promise(function (i2) {
      var a2 = o$3.BiliJsBridge.jsbV2Apis;
      a2 && a2.length ? i2(a2.includes(e2)) : C$1("global.getAllSupport").then(function (a3) {
        var t2 = a3.data.methods;
        t2 && t2.length && (o$3.BiliJsBridge.jsbV2Apis = t2), i2((o$3.BiliJsBridge.jsbV2Apis || []).includes(e2));
      })["catch"](function () {
        return i2(false);
      });
    });
  }
  function V$1(e2) {
    if (e2.data) {
      var i2 = {};
      try {
        i2 = JSON.parse(e2.data);
      } catch (p2) {}
      if (i2 && (i2.iframeMessageId || i2.iframeCallbackId || i2.iframeRemoveId)) {
        var a2 = i2.iframeMessageId,
          r2 = o$3.BiliJsBridge.msgCallbacks[a2];
        if (r2) return "function" == typeof r2 && r2(i2), void delete o$3.BiliJsBridge.msgCallbacks[i2.iframeMessageId];
        if (i2.iframeCallbackId) {
          var s2 = o$3.BiliJsBridge.jsbCallbacks[i2.iframeCallbackId];
          "function" == typeof s2 && s2(i2.jsbReceiveArgs);
        } else if (i2.iframeRemoveId) delete o$3.BiliJsBridge.jsbCallbacks[i2.iframeRemoveId];else if (i2.method) {
          var l2 = e2.source,
            c2 = i2.method.replace(/^bili_jsb_/, ""),
            d2 = i2.option || {};
          switch (d2.messageWindow = l2, d2.iframeMessageId = a2, c2) {
            case "isSupport":
            case "canIUse":
              ("isSupport" === c2 ? w$1 : S$1)(i2.api).then(function (e3) {
                l2.postMessage(JSON.stringify(t$2(t$2({}, i2), {}, {
                  support: e3
                })), "*");
              })["catch"](function () {
                l2.postMessage(JSON.stringify(t$2(t$2({}, i2), {}, {
                  support: false
                })), "*");
              });
              break;
            case "callNative":
            case "callNativeSafe":
              for (var f2 in d2) "jsbCallbackFn" === d2[f2] && (d2[f2] = function () {});
              "callNative" === c2 ? y$1(d2) : J$1(d2);
              break;
            case "importNameSpace":
              I$1.apply(void 0, n$2(i2.namespaces)), l2.postMessage(JSON.stringify(t$2({}, i2)), "*");
              break;
            case "useNative":
              d2.callback = function () {}, j$1(d2);
              break;
            case "addChannel":
              var u2 = d2.callback;
              d2.callback = function () {}, o$3.BiliJsBridge.listenersMap[u2] = {
                key: d2.data.key,
                listener: d2.callback
              }, j$1(d2);
              break;
            case "removeChannel":
              var b2 = o$3.BiliJsBridge.listenersMap[d2.callback];
              if (!b2) return;
              d2.callback = function () {
                return b2.listener;
              }, j$1(d2);
          }
        }
      }
    }
  }
  if (o$3) {
    var M$1 = o$3.BiliJsBridge,
      O$1 = M$1.msgListener,
      A$1 = M$1.msgListenerV;
    O$1 && !c$2("2.1.18", A$1) || (O$1 && window.removeEventListener("message", O$1), window.addEventListener("message", V$1), o$3.BiliJsBridge.msgListener = V$1, o$3.BiliJsBridge.msgListenerV = "2.1.18");
  }
  var N$1 = function N$1(e2) {
      return p$2 ? Promise.resolve() : (p$2 = true, "function" == typeof e2 && (g$1 = e2), Promise.all([k$1(v$1).then(function () {
        o$3.BiliJsBridge.biliInject = v$1(), o$3.BiliJsBridge.newVersion = true, o$3.BiliJsBridge.sendTasks.forEach(function (e3) {
          return B$1(e3);
        }), o$3.BiliJsBridge.sendTasks = [];
      })["catch"](function () {
        o$3.BiliJsBridge.noBiliInject = true;
      })["finally"](function () {
        o$3.BiliJsBridge.inited = true;
      }), k$1(h$1).then(function () {
        o$3.BiliJsBridge.biliInjectV2 = h$1(), o$3.BiliJsBridge.sendTasksV2.forEach(function (e3) {
          return B$1(e3);
        }), o$3.BiliJsBridge.sendTasksV2 = [];
      })["catch"](function () {
        o$3.BiliJsBridge.noBiliInjectV2 = true;
      })["finally"](function () {
        o$3.BiliJsBridge.initedV2 = true;
      })]));
    },
    P$1 = w$1,
    W$1 = y$1,
    R$1 = J$1,
    E$1 = I$1,
    L = S$1,
    T$1 = C$1,
    x$1 = function x$1(e2, i2, a2) {
      K$1({
        event: e2,
        listener: i2,
        params: a2
      }) || j$1({
        method: "global.registerChannel",
        key: e2,
        data: t$2({
          key: e2
        }, a2),
        isApiV2: true,
        callback: i2
      });
    },
    Q$1 = function Q$1(e2, i2) {
      K$1({
        event: e2,
        listener: i2,
        remove: true
      }) || j$1({
        method: "global.unregisterChannel",
        key: e2,
        data: {
          key: e2
        },
        isApiV2: true,
        callback: function callback() {
          return i2;
        }
      });
    },
    D$1 = v$1,
    U$1 = h$1;
  if (o$3 && window !== window.parent && window.top) {
    var q$1 = function q$1(e2, i2) {
      e2.method = "bili_jsb_".concat(e2.method), e2.iframeMessageId = Math.random(), o$3.BiliJsBridge.msgCallbacks[e2.iframeMessageId] = i2 || function () {}, window.top.postMessage(JSON.stringify(e2), "*");
    };
    N$1 = function N$1(e2) {
      return "function" == typeof e2 && (g$1 = e2), Promise.resolve();
    }, P$1 = function P$1(e2) {
      return new Promise(function (i2) {
        q$1({
          method: "isSupport",
          api: e2
        }, function (e3) {
          var a2 = e3.support;
          return i2(a2);
        });
      });
    };
    var H$1 = function H$1(e2, i2) {
      var a2 = t$2({}, i2);
      for (var n2 in a2) "function" == typeof a2[n2] && (a2[n2] = "jsbCallbackFn");
      q$1({
        method: e2,
        option: a2
      }, function (e3) {
        (e3.callbacks || []).forEach(function (e4) {
          o$3.BiliJsBridge.jsbCallbacks[e4.callbackId] = i2[e4.callbackName];
        });
      });
    };
    W$1 = function W$1(e2) {
      return H$1("callNative", e2);
    }, R$1 = function R$1(e2) {
      return H$1("callNativeSafe", e2);
    }, E$1 = function E$1() {
      for (var e2 = arguments.length, i2 = new Array(e2), a2 = 0; a2 < e2; a2++) i2[a2] = arguments[a2];
      return q$1({
        method: "importNameSpace",
        namespaces: i2
      });
    }, L = function L(e2) {
      return new Promise(function (i2) {
        q$1({
          method: "canIUse",
          api: e2
        }, function (e3) {
          var a2 = e3.support;
          return i2(a2);
        });
      });
    }, T$1 = function T$1(e2, i2) {
      return new Promise(function (a2, t2) {
        K$1({
          method: e2,
          params: i2,
          resolve: a2,
          reject: t2
        }) || q$1({
          method: "useNative",
          option: {
            method: e2,
            data: i2,
            isApiV2: true,
            callback: "jsbCallbackFn"
          }
        }, function (e3) {
          var i3 = e3.callbacks[0].callbackId;
          o$3.BiliJsBridge.jsbCallbacks[i3] = function (e4) {
            e4 && 0 === e4.code ? a2(e4) : t2(e4);
          };
        });
      });
    }, x$1 = function x$1(e2, i2, a2) {
      if (!K$1({
        event: e2,
        listener: i2,
        params: a2
      })) {
        var n2 = Math.random();
        o$3.BiliJsBridge.listenersMap[n2] = {
          key: e2,
          listener: i2
        };
        var r2 = {
          method: "global.registerChannel",
          key: e2,
          data: t$2({
            key: e2
          }, a2),
          isApiV2: true,
          callback: n2
        };
        q$1({
          method: "addChannel",
          option: r2
        }, function (e3) {
          var a3 = e3.callbacks[0].callbackId;
          o$3.BiliJsBridge.jsbCallbacks[a3] = i2;
        });
      }
    }, Q$1 = function Q$1(e2, i2) {
      if (!K$1({
        event: e2,
        listener: i2,
        remove: true
      })) {
        var a2 = Object.keys(o$3.BiliJsBridge.listenersMap).find(function (a3) {
          var t3 = o$3.BiliJsBridge.listenersMap[a3];
          return t3.key === e2 && t3.listener === i2;
        });
        if (a2) {
          var t2 = {
            method: "global.unregisterChannel",
            key: e2,
            data: {
              key: e2
            },
            isApiV2: true,
            callback: a2
          };
          delete o$3.BiliJsBridge.listenersMap[a2], q$1({
            method: "removeChannel",
            option: t2
          }, function (e3) {
            var i3 = e3.callbacks[0].callbackId;
            o$3.BiliJsBridge.jsbCallbacks[i3] = function () {};
          });
        }
      }
    }, D$1 = U$1 = function U$1() {
      return true;
    };
  }
  var _$1 = {
    inBiliApp: f$2,
    jsbVersion: "2.1.18",
    isWbTypeCommon: b$1,
    initEnv: N$1,
    isSupport: P$1,
    callNative: W$1,
    callNativeSafe: R$1,
    importNameSpace: E$1,
    isNewJsBridge: D$1,
    isBiliInjectV2: U$1,
    canIUse: L,
    useNative: T$1,
    addChannel: x$1,
    removeChannel: Q$1
  };
  function K$1(e2) {
    return g$1(t$2({
      biliBridge: _$1,
      inBiliApp: f$2,
      jsbVersion: "2.1.18",
      isWbTypeCommon: b$1,
      isSupport: P$1,
      callNative: W$1,
      callNativeSafe: R$1,
      importNameSpace: E$1
    }, e2));
  }
  !o$3 || o$3.biliBridge && !c$2("2.1.18", o$3.BiliJsBridge.bbVersion) || (o$3.biliBridge = _$1, o$3.BiliJsBridge.bbVersion = "2.1.18");
  var replace$1 = String.prototype.replace;
  var percentTwenties$1 = /%20/g;
  var Format$1 = {
    RFC1738: "RFC1738",
    RFC3986: "RFC3986"
  };
  var formats$7 = {
    "default": Format$1.RFC3986,
    formatters: {
      RFC1738: function RFC1738(value) {
        return replace$1.call(value, percentTwenties$1, "+");
      },
      RFC3986: function RFC3986(value) {
        return String(value);
      }
    },
    RFC1738: Format$1.RFC1738,
    RFC3986: Format$1.RFC3986
  };
  var formats$6 = formats$7;
  var has$6 = Object.prototype.hasOwnProperty;
  var isArray$f = Array.isArray;
  var hexTable$1 = function () {
    var array = [];
    for (var i2 = 0; i2 < 256; ++i2) {
      array.push("%" + ((i2 < 16 ? "0" : "") + i2.toString(16)).toUpperCase());
    }
    return array;
  }();
  var compactQueue$1 = function compactQueue2(queue) {
    while (queue.length > 1) {
      var item = queue.pop();
      var obj = item.obj[item.prop];
      if (isArray$f(obj)) {
        var compacted = [];
        for (var j2 = 0; j2 < obj.length; ++j2) {
          if (typeof obj[j2] !== "undefined") {
            compacted.push(obj[j2]);
          }
        }
        item.obj[item.prop] = compacted;
      }
    }
  };
  var arrayToObject$1 = function arrayToObject2(source, options) {
    var obj = options && options.plainObjects ? /* @__PURE__ */Object.create(null) : {};
    for (var i2 = 0; i2 < source.length; ++i2) {
      if (typeof source[i2] !== "undefined") {
        obj[i2] = source[i2];
      }
    }
    return obj;
  };
  var merge$1 = function merge2(target, source, options) {
    if (!source) {
      return target;
    }
    if (_typeof4(source) !== "object") {
      if (isArray$f(target)) {
        target.push(source);
      } else if (target && _typeof4(target) === "object") {
        if (options && (options.plainObjects || options.allowPrototypes) || !has$6.call(Object.prototype, source)) {
          target[source] = true;
        }
      } else {
        return [target, source];
      }
      return target;
    }
    if (!target || _typeof4(target) !== "object") {
      return [target].concat(source);
    }
    var mergeTarget = target;
    if (isArray$f(target) && !isArray$f(source)) {
      mergeTarget = arrayToObject$1(target, options);
    }
    if (isArray$f(target) && isArray$f(source)) {
      source.forEach(function (item, i2) {
        if (has$6.call(target, i2)) {
          var targetItem = target[i2];
          if (targetItem && _typeof4(targetItem) === "object" && item && _typeof4(item) === "object") {
            target[i2] = merge2(targetItem, item, options);
          } else {
            target.push(item);
          }
        } else {
          target[i2] = item;
        }
      });
      return target;
    }
    return Object.keys(source).reduce(function (acc, key) {
      var value = source[key];
      if (has$6.call(acc, key)) {
        acc[key] = merge2(acc[key], value, options);
      } else {
        acc[key] = value;
      }
      return acc;
    }, mergeTarget);
  };
  var assign$1 = function assignSingleSource(target, source) {
    return Object.keys(source).reduce(function (acc, key) {
      acc[key] = source[key];
      return acc;
    }, target);
  };
  var decode$3 = function decode$3(str, decoder, charset) {
    var strWithoutPlus = str.replace(/\+/g, " ");
    if (charset === "iso-8859-1") {
      return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);
    }
    try {
      return decodeURIComponent(strWithoutPlus);
    } catch (e2) {
      return strWithoutPlus;
    }
  };
  var encode$4 = function encode2(str, defaultEncoder, charset, kind, format2) {
    if (str.length === 0) {
      return str;
    }
    var string = str;
    if (_typeof4(str) === "symbol") {
      string = Symbol.prototype.toString.call(str);
    } else if (typeof str !== "string") {
      string = String(str);
    }
    if (charset === "iso-8859-1") {
      return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {
        return "%26%23" + parseInt($0.slice(2), 16) + "%3B";
      });
    }
    var out = "";
    for (var i2 = 0; i2 < string.length; ++i2) {
      var c2 = string.charCodeAt(i2);
      if (c2 === 45 || c2 === 46 || c2 === 95 || c2 === 126 || c2 >= 48 && c2 <= 57 || c2 >= 65 && c2 <= 90 || c2 >= 97 && c2 <= 122 || format2 === formats$6.RFC1738 && (c2 === 40 || c2 === 41)) {
        out += string.charAt(i2);
        continue;
      }
      if (c2 < 128) {
        out = out + hexTable$1[c2];
        continue;
      }
      if (c2 < 2048) {
        out = out + (hexTable$1[192 | c2 >> 6] + hexTable$1[128 | c2 & 63]);
        continue;
      }
      if (c2 < 55296 || c2 >= 57344) {
        out = out + (hexTable$1[224 | c2 >> 12] + hexTable$1[128 | c2 >> 6 & 63] + hexTable$1[128 | c2 & 63]);
        continue;
      }
      i2 += 1;
      c2 = 65536 + ((c2 & 1023) << 10 | string.charCodeAt(i2) & 1023);
      out += hexTable$1[240 | c2 >> 18] + hexTable$1[128 | c2 >> 12 & 63] + hexTable$1[128 | c2 >> 6 & 63] + hexTable$1[128 | c2 & 63];
    }
    return out;
  };
  var compact$1 = function compact2(value) {
    var queue = [{
      obj: {
        o: value
      },
      prop: "o"
    }];
    var refs = [];
    for (var i2 = 0; i2 < queue.length; ++i2) {
      var item = queue[i2];
      var obj = item.obj[item.prop];
      var keys2 = Object.keys(obj);
      for (var j2 = 0; j2 < keys2.length; ++j2) {
        var key = keys2[j2];
        var val = obj[key];
        if (_typeof4(val) === "object" && val !== null && refs.indexOf(val) === -1) {
          queue.push({
            obj: obj,
            prop: key
          });
          refs.push(val);
        }
      }
    }
    compactQueue$1(queue);
    return value;
  };
  var isRegExp$2 = function isRegExp2(obj) {
    return Object.prototype.toString.call(obj) === "[object RegExp]";
  };
  var isBuffer$2 = function isBuffer2(obj) {
    if (!obj || _typeof4(obj) !== "object") {
      return false;
    }
    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));
  };
  var combine$1 = function combine2(a2, b2) {
    return [].concat(a2, b2);
  };
  var maybeMap$1 = function maybeMap2(val, fn2) {
    if (isArray$f(val)) {
      var mapped = [];
      for (var i2 = 0; i2 < val.length; i2 += 1) {
        mapped.push(fn2(val[i2]));
      }
      return mapped;
    }
    return fn2(val);
  };
  var utils$a = {
    arrayToObject: arrayToObject$1,
    assign: assign$1,
    combine: combine$1,
    compact: compact$1,
    decode: decode$3,
    encode: encode$4,
    isBuffer: isBuffer$2,
    isRegExp: isRegExp$2,
    maybeMap: maybeMap$1,
    merge: merge$1
  };
  var utils$9 = utils$a;
  var formats$5 = formats$7;
  var has$5 = Object.prototype.hasOwnProperty;
  var arrayPrefixGenerators$1 = {
    brackets: function brackets(prefix) {
      return prefix + "[]";
    },
    comma: "comma",
    indices: function indices(prefix, key) {
      return prefix + "[" + key + "]";
    },
    repeat: function repeat(prefix) {
      return prefix;
    }
  };
  var isArray$e = Array.isArray;
  var split = String.prototype.split;
  var push$1 = Array.prototype.push;
  var pushToArray$1 = function pushToArray$1(arr2, valueOrArray) {
    push$1.apply(arr2, isArray$e(valueOrArray) ? valueOrArray : [valueOrArray]);
  };
  var toISO$1 = Date.prototype.toISOString;
  var defaultFormat$1 = formats$5["default"];
  var defaults$3 = {
    addQueryPrefix: false,
    allowDots: false,
    charset: "utf-8",
    charsetSentinel: false,
    delimiter: "&",
    encode: true,
    encoder: utils$9.encode,
    encodeValuesOnly: false,
    format: defaultFormat$1,
    formatter: formats$5.formatters[defaultFormat$1],
    // deprecated
    indices: false,
    serializeDate: function serializeDate(date) {
      return toISO$1.call(date);
    },
    skipNulls: false,
    strictNullHandling: false
  };
  var isNonNullishPrimitive$1 = function isNonNullishPrimitive2(v2) {
    return typeof v2 === "string" || typeof v2 === "number" || typeof v2 === "boolean" || _typeof4(v2) === "symbol" || typeof v2 === "bigint";
  };
  var stringify$5 = function stringify2(object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, format2, formatter, encodeValuesOnly, charset) {
    var obj = object;
    if (typeof filter === "function") {
      obj = filter(prefix, obj);
    } else if (obj instanceof Date) {
      obj = serializeDate(obj);
    } else if (generateArrayPrefix === "comma" && isArray$e(obj)) {
      obj = utils$9.maybeMap(obj, function (value2) {
        if (value2 instanceof Date) {
          return serializeDate(value2);
        }
        return value2;
      });
    }
    if (obj === null) {
      if (strictNullHandling) {
        return encoder && !encodeValuesOnly ? encoder(prefix, defaults$3.encoder, charset, "key", format2) : prefix;
      }
      obj = "";
    }
    if (isNonNullishPrimitive$1(obj) || utils$9.isBuffer(obj)) {
      if (encoder) {
        var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults$3.encoder, charset, "key", format2);
        if (generateArrayPrefix === "comma" && encodeValuesOnly) {
          var valuesArray = split.call(String(obj), ",");
          var valuesJoined = "";
          for (var i2 = 0; i2 < valuesArray.length; ++i2) {
            valuesJoined += (i2 === 0 ? "" : ",") + formatter(encoder(valuesArray[i2], defaults$3.encoder, charset, "value", format2));
          }
          return [formatter(keyValue) + "=" + valuesJoined];
        }
        return [formatter(keyValue) + "=" + formatter(encoder(obj, defaults$3.encoder, charset, "value", format2))];
      }
      return [formatter(prefix) + "=" + formatter(String(obj))];
    }
    var values = [];
    if (typeof obj === "undefined") {
      return values;
    }
    var objKeys;
    if (generateArrayPrefix === "comma" && isArray$e(obj)) {
      objKeys = [{
        value: obj.length > 0 ? obj.join(",") || null : void 0
      }];
    } else if (isArray$e(filter)) {
      objKeys = filter;
    } else {
      var keys2 = Object.keys(obj);
      objKeys = sort ? keys2.sort(sort) : keys2;
    }
    for (var j2 = 0; j2 < objKeys.length; ++j2) {
      var key = objKeys[j2];
      var value = _typeof4(key) === "object" && typeof key.value !== "undefined" ? key.value : obj[key];
      if (skipNulls && value === null) {
        continue;
      }
      var keyPrefix = isArray$e(obj) ? typeof generateArrayPrefix === "function" ? generateArrayPrefix(prefix, key) : prefix : prefix + (allowDots ? "." + key : "[" + key + "]");
      pushToArray$1(values, stringify2(value, keyPrefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, format2, formatter, encodeValuesOnly, charset));
    }
    return values;
  };
  var normalizeStringifyOptions$1 = function normalizeStringifyOptions2(opts) {
    if (!opts) {
      return defaults$3;
    }
    if (opts.encoder !== null && typeof opts.encoder !== "undefined" && typeof opts.encoder !== "function") {
      throw new TypeError("Encoder has to be a function.");
    }
    var charset = opts.charset || defaults$3.charset;
    if (typeof opts.charset !== "undefined" && opts.charset !== "utf-8" && opts.charset !== "iso-8859-1") {
      throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
    }
    var format2 = formats$5["default"];
    if (typeof opts.format !== "undefined") {
      if (!has$5.call(formats$5.formatters, opts.format)) {
        throw new TypeError("Unknown format option provided.");
      }
      format2 = opts.format;
    }
    var formatter = formats$5.formatters[format2];
    var filter = defaults$3.filter;
    if (typeof opts.filter === "function" || isArray$e(opts.filter)) {
      filter = opts.filter;
    }
    return {
      addQueryPrefix: typeof opts.addQueryPrefix === "boolean" ? opts.addQueryPrefix : defaults$3.addQueryPrefix,
      allowDots: typeof opts.allowDots === "undefined" ? defaults$3.allowDots : !!opts.allowDots,
      charset: charset,
      charsetSentinel: typeof opts.charsetSentinel === "boolean" ? opts.charsetSentinel : defaults$3.charsetSentinel,
      delimiter: typeof opts.delimiter === "undefined" ? defaults$3.delimiter : opts.delimiter,
      encode: typeof opts.encode === "boolean" ? opts.encode : defaults$3.encode,
      encoder: typeof opts.encoder === "function" ? opts.encoder : defaults$3.encoder,
      encodeValuesOnly: typeof opts.encodeValuesOnly === "boolean" ? opts.encodeValuesOnly : defaults$3.encodeValuesOnly,
      filter: filter,
      format: format2,
      formatter: formatter,
      serializeDate: typeof opts.serializeDate === "function" ? opts.serializeDate : defaults$3.serializeDate,
      skipNulls: typeof opts.skipNulls === "boolean" ? opts.skipNulls : defaults$3.skipNulls,
      sort: typeof opts.sort === "function" ? opts.sort : null,
      strictNullHandling: typeof opts.strictNullHandling === "boolean" ? opts.strictNullHandling : defaults$3.strictNullHandling
    };
  };
  var stringify_1$1 = function stringify_1$1(object, opts) {
    var obj = object;
    var options = normalizeStringifyOptions$1(opts);
    var objKeys;
    var filter;
    if (typeof options.filter === "function") {
      filter = options.filter;
      obj = filter("", obj);
    } else if (isArray$e(options.filter)) {
      filter = options.filter;
      objKeys = filter;
    }
    var keys2 = [];
    if (_typeof4(obj) !== "object" || obj === null) {
      return "";
    }
    var arrayFormat;
    if (opts && opts.arrayFormat in arrayPrefixGenerators$1) {
      arrayFormat = opts.arrayFormat;
    } else if (opts && "indices" in opts) {
      arrayFormat = opts.indices ? "indices" : "repeat";
    } else {
      arrayFormat = "indices";
    }
    var generateArrayPrefix = arrayPrefixGenerators$1[arrayFormat];
    if (!objKeys) {
      objKeys = Object.keys(obj);
    }
    if (options.sort) {
      objKeys.sort(options.sort);
    }
    for (var i2 = 0; i2 < objKeys.length; ++i2) {
      var key = objKeys[i2];
      if (options.skipNulls && obj[key] === null) {
        continue;
      }
      pushToArray$1(keys2, stringify$5(obj[key], key, generateArrayPrefix, options.strictNullHandling, options.skipNulls, options.encode ? options.encoder : null, options.filter, options.sort, options.allowDots, options.serializeDate, options.format, options.formatter, options.encodeValuesOnly, options.charset));
    }
    var joined = keys2.join(options.delimiter);
    var prefix = options.addQueryPrefix === true ? "?" : "";
    if (options.charsetSentinel) {
      if (options.charset === "iso-8859-1") {
        prefix += "utf8=%26%2310003%3B&";
      } else {
        prefix += "utf8=%E2%9C%93&";
      }
    }
    return joined.length > 0 ? prefix + joined : "";
  };
  var utils$8 = utils$a;
  var has$4 = Object.prototype.hasOwnProperty;
  var isArray$d = Array.isArray;
  var defaults$2 = {
    allowDots: false,
    allowPrototypes: false,
    arrayLimit: 20,
    charset: "utf-8",
    charsetSentinel: false,
    comma: false,
    decoder: utils$8.decode,
    delimiter: "&",
    depth: 5,
    ignoreQueryPrefix: false,
    interpretNumericEntities: false,
    parameterLimit: 1e3,
    parseArrays: true,
    plainObjects: false,
    strictNullHandling: false
  };
  var interpretNumericEntities$1 = function interpretNumericEntities$1(str) {
    return str.replace(/&#(\d+);/g, function ($0, numberStr) {
      return String.fromCharCode(parseInt(numberStr, 10));
    });
  };
  var parseArrayValue$1 = function parseArrayValue$1(val, options) {
    if (val && typeof val === "string" && options.comma && val.indexOf(",") > -1) {
      return val.split(",");
    }
    return val;
  };
  var isoSentinel$1 = "utf8=%26%2310003%3B";
  var charsetSentinel$1 = "utf8=%E2%9C%93";
  var parseValues$1 = function parseQueryStringValues(str, options) {
    var obj = {};
    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\?/, "") : str;
    var limit2 = options.parameterLimit === Infinity ? void 0 : options.parameterLimit;
    var parts = cleanStr.split(options.delimiter, limit2);
    var skipIndex = -1;
    var i2;
    var charset = options.charset;
    if (options.charsetSentinel) {
      for (i2 = 0; i2 < parts.length; ++i2) {
        if (parts[i2].indexOf("utf8=") === 0) {
          if (parts[i2] === charsetSentinel$1) {
            charset = "utf-8";
          } else if (parts[i2] === isoSentinel$1) {
            charset = "iso-8859-1";
          }
          skipIndex = i2;
          i2 = parts.length;
        }
      }
    }
    for (i2 = 0; i2 < parts.length; ++i2) {
      if (i2 === skipIndex) {
        continue;
      }
      var part = parts[i2];
      var bracketEqualsPos = part.indexOf("]=");
      var pos = bracketEqualsPos === -1 ? part.indexOf("=") : bracketEqualsPos + 1;
      var key, val;
      if (pos === -1) {
        key = options.decoder(part, defaults$2.decoder, charset, "key");
        val = options.strictNullHandling ? null : "";
      } else {
        key = options.decoder(part.slice(0, pos), defaults$2.decoder, charset, "key");
        val = utils$8.maybeMap(parseArrayValue$1(part.slice(pos + 1), options), function (encodedVal) {
          return options.decoder(encodedVal, defaults$2.decoder, charset, "value");
        });
      }
      if (val && options.interpretNumericEntities && charset === "iso-8859-1") {
        val = interpretNumericEntities$1(val);
      }
      if (part.indexOf("[]=") > -1) {
        val = isArray$d(val) ? [val] : val;
      }
      if (has$4.call(obj, key)) {
        obj[key] = utils$8.combine(obj[key], val);
      } else {
        obj[key] = val;
      }
    }
    return obj;
  };
  var parseObject$1 = function parseObject$1(chain, val, options, valuesParsed) {
    var leaf = valuesParsed ? val : parseArrayValue$1(val, options);
    for (var i2 = chain.length - 1; i2 >= 0; --i2) {
      var obj;
      var root2 = chain[i2];
      if (root2 === "[]" && options.parseArrays) {
        obj = [].concat(leaf);
      } else {
        obj = options.plainObjects ? /* @__PURE__ */Object.create(null) : {};
        var cleanRoot = root2.charAt(0) === "[" && root2.charAt(root2.length - 1) === "]" ? root2.slice(1, -1) : root2;
        var index2 = parseInt(cleanRoot, 10);
        if (!options.parseArrays && cleanRoot === "") {
          obj = {
            0: leaf
          };
        } else if (!isNaN(index2) && root2 !== cleanRoot && String(index2) === cleanRoot && index2 >= 0 && options.parseArrays && index2 <= options.arrayLimit) {
          obj = [];
          obj[index2] = leaf;
        } else if (cleanRoot !== "__proto__") {
          obj[cleanRoot] = leaf;
        }
      }
      leaf = obj;
    }
    return leaf;
  };
  var parseKeys$1 = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {
    if (!givenKey) {
      return;
    }
    var key = options.allowDots ? givenKey.replace(/\.([^.[]+)/g, "[$1]") : givenKey;
    var brackets = /(\[[^[\]]*])/;
    var child = /(\[[^[\]]*])/g;
    var segment = options.depth > 0 && brackets.exec(key);
    var parent2 = segment ? key.slice(0, segment.index) : key;
    var keys2 = [];
    if (parent2) {
      if (!options.plainObjects && has$4.call(Object.prototype, parent2)) {
        if (!options.allowPrototypes) {
          return;
        }
      }
      keys2.push(parent2);
    }
    var i2 = 0;
    while (options.depth > 0 && (segment = child.exec(key)) !== null && i2 < options.depth) {
      i2 += 1;
      if (!options.plainObjects && has$4.call(Object.prototype, segment[1].slice(1, -1))) {
        if (!options.allowPrototypes) {
          return;
        }
      }
      keys2.push(segment[1]);
    }
    if (segment) {
      keys2.push("[" + key.slice(segment.index) + "]");
    }
    return parseObject$1(keys2, val, options, valuesParsed);
  };
  var normalizeParseOptions$1 = function normalizeParseOptions2(opts) {
    if (!opts) {
      return defaults$2;
    }
    if (opts.decoder !== null && opts.decoder !== void 0 && typeof opts.decoder !== "function") {
      throw new TypeError("Decoder has to be a function.");
    }
    if (typeof opts.charset !== "undefined" && opts.charset !== "utf-8" && opts.charset !== "iso-8859-1") {
      throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
    }
    var charset = typeof opts.charset === "undefined" ? defaults$2.charset : opts.charset;
    return {
      allowDots: typeof opts.allowDots === "undefined" ? defaults$2.allowDots : !!opts.allowDots,
      allowPrototypes: typeof opts.allowPrototypes === "boolean" ? opts.allowPrototypes : defaults$2.allowPrototypes,
      arrayLimit: typeof opts.arrayLimit === "number" ? opts.arrayLimit : defaults$2.arrayLimit,
      charset: charset,
      charsetSentinel: typeof opts.charsetSentinel === "boolean" ? opts.charsetSentinel : defaults$2.charsetSentinel,
      comma: typeof opts.comma === "boolean" ? opts.comma : defaults$2.comma,
      decoder: typeof opts.decoder === "function" ? opts.decoder : defaults$2.decoder,
      delimiter: typeof opts.delimiter === "string" || utils$8.isRegExp(opts.delimiter) ? opts.delimiter : defaults$2.delimiter,
      // eslint-disable-next-line no-implicit-coercion, no-extra-parens
      depth: typeof opts.depth === "number" || opts.depth === false ? +opts.depth : defaults$2.depth,
      ignoreQueryPrefix: opts.ignoreQueryPrefix === true,
      interpretNumericEntities: typeof opts.interpretNumericEntities === "boolean" ? opts.interpretNumericEntities : defaults$2.interpretNumericEntities,
      parameterLimit: typeof opts.parameterLimit === "number" ? opts.parameterLimit : defaults$2.parameterLimit,
      parseArrays: opts.parseArrays !== false,
      plainObjects: typeof opts.plainObjects === "boolean" ? opts.plainObjects : defaults$2.plainObjects,
      strictNullHandling: typeof opts.strictNullHandling === "boolean" ? opts.strictNullHandling : defaults$2.strictNullHandling
    };
  };
  var parse$4 = function parse$4(str, opts) {
    var options = normalizeParseOptions$1(opts);
    if (str === "" || str === null || typeof str === "undefined") {
      return options.plainObjects ? /* @__PURE__ */Object.create(null) : {};
    }
    var tempObj = typeof str === "string" ? parseValues$1(str, options) : str;
    var obj = options.plainObjects ? /* @__PURE__ */Object.create(null) : {};
    var keys2 = Object.keys(tempObj);
    for (var i2 = 0; i2 < keys2.length; ++i2) {
      var key = keys2[i2];
      var newObj = parseKeys$1(key, tempObj[key], options, typeof str === "string");
      obj = utils$8.merge(obj, newObj, options);
    }
    return utils$8.compact(obj);
  };
  var stringify$4 = stringify_1$1;
  var parse$3 = parse$4;
  var formats$4 = formats$7;
  var lib$2 = {
    formats: formats$4,
    parse: parse$3,
    stringify: stringify$4
  };
  var qs$1 = /* @__PURE__ */getDefaultExportFromCjs(lib$2);
  var IS_NODE$1 = typeof window === "undefined";
  var IS_ANDROID$1 = IS_NODE$1 ? true : /android/i.test(window.navigator.userAgent);
  var CONTENT_TYPE_KEY$1 = "Content-Type";
  var ContentType$1 = /* @__PURE__ */function (ContentType2) {
    ContentType2["JSON"] = "application/json";
    ContentType2["Form"] = "application/x-www-form-urlencoded";
    ContentType2["FormData"] = "multipart/form-data";
    return ContentType2;
  }(ContentType$1 || {});
  var BridgeMethod$1 = /* @__PURE__ */function (BridgeMethod2) {
    BridgeMethod2["Request"] = "net.request";
    BridgeMethod2["RequestV2"] = "net.requestV2";
    BridgeMethod2["RequestWithSign"] = "net.requestWithSign";
    BridgeMethod2["RequestWithSignV2"] = "net.requestWithSignV2";
    BridgeMethod2["GetCsrf"] = "net.getCsrf";
    BridgeMethod2["UploadImage"] = "net.uploadImage";
    BridgeMethod2["UploadImageV2"] = "net.uploadImageV2";
    BridgeMethod2["GetContainerInfo"] = "global.getContainerInfo";
    return BridgeMethod2;
  }(BridgeMethod$1 || {});
  var AppMiddlewareName$1 = /* @__PURE__ */function (AppMiddlewareName2) {
    AppMiddlewareName2["Runtime"] = "APP_RUNTIME";
    AppMiddlewareName2["Csrf"] = "BUILT_IN_CSRF";
    AppMiddlewareName2["Body"] = "BUILT_IN_BODY";
    AppMiddlewareName2["AppFetch"] = "APP_FETCH";
    return AppMiddlewareName2;
  }(AppMiddlewareName$1 || {});
  var getCookie$4 = function getCookie$4(key, from) {
    var result2 = "";
    if (IS_NODE$1 && !from) {
      return result2;
    }
    var cookies = from || document.cookie;
    if (!cookies) {
      return result2;
    }
    var arr2 = cookies.split(";");
    var reg = new RegExp("^".concat(key, "="));
    for (var i2 = 0; i2 < arr2.length; i2++) {
      var tmp = arr2[i2].trim();
      if (reg.test(tmp)) {
        result2 = tmp.split("=")[1];
        break;
      }
    }
    return result2;
  };
  var getMiddlewarePayloadFromCtx$1 = function getMiddlewarePayloadFromCtx$1(ctx, name) {
    var _a3;
    return ((_a3 = ctx.middleware[name]) == null ? void 0 : _a3.payload) || {};
  };
  var setMiddlewarePayloadToCtx$1 = function setMiddlewarePayloadToCtx$1(ctx, name, payload) {
    ctx.middleware[name] = {
      payload: payload
    };
  };
  var getContentType$1 = function getContentType$1(headers) {
    return (headers == null ? void 0 : headers[CONTENT_TYPE_KEY$1]) || (headers == null ? void 0 : headers["content-type"]);
  };
  var getContentTypeFromData$1 = function getContentTypeFromData$1(data) {
    if (isFormData$1(data)) {
      return ContentType$1.FormData;
    }
    if (isRecordObj$1(data)) {
      return ContentType$1.JSON;
    }
    return "";
  };
  var isArray$c = function isArray$c(val) {
    return toString.call(val) === "[object Array]";
  };
  var isObject$5 = function isObject$5(val) {
    return val !== null && _typeof4(val) === "object";
  };
  var isRecordObj$1 = function isRecordObj$1(obj) {
    return Object.prototype.toString.call(obj) === "[object Object]";
  };
  var isDate$2 = function isDate$2(val) {
    return toString.call(val) === "[object Date]";
  };
  var isFormData$1 = function isFormData$1(val) {
    return typeof FormData !== "undefined" && val instanceof FormData;
  };
  var isBlob$1 = function isBlob$1(val) {
    return toString.call(val) === "[object Blob]" || toString.call(val) === "[object File]";
  };
  var isBase64$1 = function isBase64$1(val) {
    return val && typeof val === "string" && val.indexOf("base64") !== -1 && /^data:/.test(val);
  };
  var blob2Base64$1 = function blob2Base64$1(blob) {
    return new Promise(function (resolve) {
      var reader = new FileReader();
      reader.onload = function (event2) {
        var _a3;
        resolve((_a3 = event2.target) == null ? void 0 : _a3.result);
      };
      reader.readAsDataURL(blob);
    });
  };
  var encode$3 = function encode$3(val) {
    return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
  };
  function forEach$1(obj, fn2) {
    if (obj === null || typeof obj === "undefined") {
      return;
    }
    if (_typeof4(obj) !== "object") {
      obj = [obj];
    }
    if (isArray$c(obj)) {
      for (var i2 = 0, l2 = obj.length; i2 < l2; i2++) {
        fn2.call(null, obj[i2], i2, obj);
      }
    } else {
      for (var _key2 in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, _key2)) {
          fn2.call(null, obj[_key2], _key2, obj);
        }
      }
    }
  }
  var paramSerializer$1 = function paramSerializer$1(dataObj, runtime2) {
    var parts = [];
    var useQS = !IS_ANDROID$1 && ((runtime2 == null ? void 0 : runtime2.version) === 6 || (runtime2 == null ? void 0 : runtime2.version) === 7);
    if (useQS) {
      return qs$1.stringify(dataObj);
    }
    forEach$1(dataObj, function serialize(val, key) {
      if (val === null || typeof val === "undefined") {
        return;
      }
      if (isArray$c(val)) {
        key = key + "[]";
      } else {
        val = [val];
      }
      forEach$1(val, function parseValue2(v2) {
        if (isDate$2(v2)) {
          v2 = v2.toISOString();
        } else if (isObject$5(v2)) {
          v2 = JSON.stringify(v2);
        }
        if ((runtime2 == null ? void 0 : runtime2.version) === 1 && /^(pwd|password|seccode)/.test(key)) {
          parts.push(encode$3(key) + "=" + v2);
        } else {
          parts.push(encode$3(key) + "=" + encode$3(v2));
        }
      });
    });
    return parts.sort(function (a2, b2) {
      return a2 > b2 ? 1 : -1;
    }).join("&");
  };
  var buildURL$1 = function buildURL$1(url2, params, runtime2) {
    var serializedParams = paramSerializer$1(params, runtime2);
    if (!url2) return serializedParams;
    if (serializedParams) {
      var hashMarkIndex = url2.indexOf("#");
      if (hashMarkIndex !== -1) {
        url2 = url2.slice(0, hashMarkIndex);
      }
      url2 += (url2.indexOf("?") === -1 ? "?" : "&") + serializedParams;
    }
    if ((runtime2 == null ? void 0 : runtime2.version) && !/^http/.test(url2)) {
      url2 = "".concat(IS_NODE$1 ? "http:" : window.location.protocol, "//").concat(url2).replace("////", "//");
    }
    return url2;
  };
  var form2obj$1 = function form2obj$1(form) {
    var obj = {};
    var _iterator5 = _createForOfIteratorHelper2(form.entries()),
      _step5;
    try {
      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
        var _step5$value = _slicedToArray(_step5.value, 2),
          _key3 = _step5$value[0],
          value = _step5$value[1];
        obj[_key3] = value;
      }
    } catch (err) {
      _iterator5.e(err);
    } finally {
      _iterator5.f();
    }
    return obj;
  };
  var obj2form$1 = function obj2form$1(obj) {
    var form = new FormData();
    for (var _key4 in obj) {
      form.append(_key4, obj[_key4]);
    }
    return form;
  };
  var setWindowRuntime$1 = function setWindowRuntime$1(runtime2) {
    window.__HTTP_SVC_APP_RUNTIME__ = runtime2;
  };
  var getWindowRuntime$1 = function getWindowRuntime$1() {
    if (IS_NODE$1) return null;
    return window.__HTTP_SVC_APP_RUNTIME__ || null;
  };
  var execRuntime$1 = /*#__PURE__*/function () {
    var _ref21 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26() {
      var version2, device, bridgeIsV1, bridgeIsV2, bridgeIsV3, bridgeIsV4, bridgeIsV5, bridgeIsV6, bridgeIsV7, result2, _parseUA, _detectBridgeIsV1, _detectBridgeIsV2, _detectBridgeIsV3, _detectBridgeIsV4, _detectBridgeIsV5, _detectBridgeIsV6, _detectBridgeIsV7;
      return _regeneratorRuntime().wrap(function _callee26$(_context26) {
        while (1) switch (_context26.prev = _context26.next) {
          case 0:
            version2 = 0;
            device = "";
            bridgeIsV1 = false;
            bridgeIsV2 = false;
            bridgeIsV3 = false;
            bridgeIsV4 = false;
            bridgeIsV5 = false;
            bridgeIsV6 = false;
            bridgeIsV7 = false;
            result2 = {
              version: 0,
              uaDevice: "",
              uaVersion: 0,
              isMainApp: false,
              isWbTypeCommon: b$1
            };
            if (!(IS_NODE$1 || !f$2)) {
              _context26.next = 12;
              break;
            }
            return _context26.abrupt("return", result2);
          case 12:
            if (!getWindowRuntime$1()) {
              _context26.next = 14;
              break;
            }
            return _context26.abrupt("return", getWindowRuntime$1());
          case 14:
            _parseUA = function _parseUA() {
              window.navigator.userAgent.split(" ").forEach(function (item) {
                if (/^biliapp/i.test(item)) {
                  version2 = +item.split("/")[1];
                } else if (/^mobi_app/i.test(item)) {
                  device = item.split("/")[1];
                } else if (/^bilicomic/i.test(item)) {
                  version2 = +item.split("/")[1];
                }
              });
            };
            _detectBridgeIsV1 = /*#__PURE__*/function () {
              var _ref22 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {
                var disableV1;
                return _regeneratorRuntime().wrap(function _callee19$(_context19) {
                  while (1) switch (_context19.prev = _context19.next) {
                    case 0:
                      bridgeIsV1 = device === "android_i" ||
                      // 哔哩哔哩 Android 国际版
                      device === "android_comic" && version2 >= 214e5;
                      disableV1 = device === "iphone" && version2 < 8930 ||
                      // 哔哩哔哩 iOS 版
                      device === "ipad" && version2 < 12350 ||
                      // 哔哩哔哩 iPad 版
                      device === "iphone_b" && version2 < 8110;
                      if (!disableV1) {
                        _context19.next = 5;
                        break;
                      }
                      bridgeIsV1 = false;
                      return _context19.abrupt("return");
                    case 5:
                      _context19.next = 7;
                      return P$1(BridgeMethod$1.Request);
                    case 7:
                      bridgeIsV1 = _context19.sent;
                    case 8:
                    case "end":
                      return _context19.stop();
                  }
                }, _callee19);
              }));
              return function _detectBridgeIsV1() {
                return _ref22.apply(this, arguments);
              };
            }();
            _detectBridgeIsV2 = /*#__PURE__*/function () {
              var _ref23 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20() {
                return _regeneratorRuntime().wrap(function _callee20$(_context20) {
                  while (1) switch (_context20.prev = _context20.next) {
                    case 0:
                      bridgeIsV2 = device === "bstar_i" && version2 >= 1e6 ||
                      // iOS 新国际版
                      device === "ios_bbs" || device === "UNKNOWN" ||
                      // 必剪 hot-fix
                      device === "bstar_a" && version2 >= 1000013 ||
                      // Android 新国际版
                      device === "iphone_i" && version2 >= 1e4 ||
                      // iOS 旧国际版
                      device === "android_i" && version2 >= 2050400 ||
                      // Android 旧国际版
                      device === "android" && version2 > 551e4 ||
                      // 哔哩哔哩 Android
                      device === "android_b" && version2 >= 535e4 ||
                      // 哔哩哔哩 Android 概念版
                      device === "iphone" && version2 > 8960 ||
                      // 哔哩哔哩 iOS 版
                      device === "ipad" && version2 > 12300 ||
                      // 哔哩哔哩 iPad 版
                      device === "iphone_b" && version2 > 8990 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "android_comic" && version2 >= 2161e4 ||
                      // 哔哩哔哩漫画 Android
                      device === "android_bbs" && version2 >= 1000200;
                      if (!bridgeIsV2) {
                        _context20.next = 5;
                        break;
                      }
                      _context20.next = 4;
                      return P$1(BridgeMethod$1.Request);
                    case 4:
                      bridgeIsV2 = _context20.sent;
                    case 5:
                    case "end":
                      return _context20.stop();
                  }
                }, _callee20);
              }));
              return function _detectBridgeIsV2() {
                return _ref23.apply(this, arguments);
              };
            }();
            _detectBridgeIsV3 = /*#__PURE__*/function () {
              var _ref24 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {
                return _regeneratorRuntime().wrap(function _callee21$(_context21) {
                  while (1) switch (_context21.prev = _context21.next) {
                    case 0:
                      if (!IS_ANDROID$1) {
                        _context21.next = 2;
                        break;
                      }
                      return _context21.abrupt("return");
                    case 2:
                      if (!(device !== "iphone_comic" && device !== "ipad_comic")) {
                        _context21.next = 4;
                        break;
                      }
                      return _context21.abrupt("return");
                    case 4:
                      bridgeIsV3 = true;
                      _context21.next = 7;
                      return P$1(BridgeMethod$1.RequestWithSign);
                    case 7:
                      bridgeIsV3 = _context21.sent;
                    case 8:
                    case "end":
                      return _context21.stop();
                  }
                }, _callee21);
              }));
              return function _detectBridgeIsV3() {
                return _ref24.apply(this, arguments);
              };
            }();
            _detectBridgeIsV4 = /*#__PURE__*/function () {
              var _ref25 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {
                return _regeneratorRuntime().wrap(function _callee22$(_context22) {
                  while (1) switch (_context22.prev = _context22.next) {
                    case 0:
                      bridgeIsV4 = device === "iphone" && version2 > 1e4 ||
                      // 哔哩哔哩 iOS 版
                      device === "iphone_i" && version2 >= 1e4 ||
                      // 哔哩哔哩 iOS 国际版
                      device === "iphone_b" && version2 > 9360 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "ipad" && version2 > 12390 ||
                      // 哔哩哔哩 iPad 版
                      device === "android" && version2 >= 601e4 ||
                      // 哔哩哔哩 Android
                      device === "android_b" && version2 >= 541e4 ||
                      // 哔哩哔哩 Android 概念版
                      device === "android_bbs" && version2 >= 1000200;
                      if (!bridgeIsV4) {
                        _context22.next = 5;
                        break;
                      }
                      _context22.next = 4;
                      return P$1(BridgeMethod$1.RequestWithSign);
                    case 4:
                      bridgeIsV4 = _context22.sent;
                    case 5:
                    case "end":
                      return _context22.stop();
                  }
                }, _callee22);
              }));
              return function _detectBridgeIsV4() {
                return _ref25.apply(this, arguments);
              };
            }();
            _detectBridgeIsV5 = /*#__PURE__*/function () {
              var _ref26 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23() {
                return _regeneratorRuntime().wrap(function _callee23$(_context23) {
                  while (1) switch (_context23.prev = _context23.next) {
                    case 0:
                      bridgeIsV5 = device === "android" && version2 >= 6060100 && version2 <= 6060210;
                      if (!bridgeIsV5) {
                        _context23.next = 5;
                        break;
                      }
                      _context23.next = 4;
                      return P$1(BridgeMethod$1.RequestWithSign);
                    case 4:
                      bridgeIsV5 = _context23.sent;
                    case 5:
                    case "end":
                      return _context23.stop();
                  }
                }, _callee23);
              }));
              return function _detectBridgeIsV5() {
                return _ref26.apply(this, arguments);
              };
            }();
            _detectBridgeIsV6 = /*#__PURE__*/function () {
              var _ref27 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24() {
                return _regeneratorRuntime().wrap(function _callee24$(_context24) {
                  while (1) switch (_context24.prev = _context24.next) {
                    case 0:
                      bridgeIsV6 = device === "android" && version2 >= 6070600 ||
                      // 哔哩哔哩 Android 版
                      device === "android_b" && version2 >= 6070520 ||
                      // 哔哩哔哩 Android 概念版
                      device === "bstar_a" && version2 >= 1041e3 ||
                      // 新 Android 国际版
                      device === "bstar_i" && version2 >= 1041e3 ||
                      // 新 iOS 国际版
                      device === "iphone" && version2 >= 10180 ||
                      // 哔哩哔哩 iOS 版
                      device === "iphone_b" && version2 >= 10182 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "ipad" && version2 >= 12391;
                      if (!bridgeIsV6) {
                        _context24.next = 5;
                        break;
                      }
                      _context24.next = 4;
                      return P$1(BridgeMethod$1.RequestV2);
                    case 4:
                      bridgeIsV6 = _context24.sent;
                    case 5:
                    case "end":
                      return _context24.stop();
                  }
                }, _callee24);
              }));
              return function _detectBridgeIsV6() {
                return _ref27.apply(this, arguments);
              };
            }();
            _detectBridgeIsV7 = /*#__PURE__*/function () {
              var _ref28 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25() {
                return _regeneratorRuntime().wrap(function _callee25$(_context25) {
                  while (1) switch (_context25.prev = _context25.next) {
                    case 0:
                      bridgeIsV7 = device === "harmony" ||
                      // Huawei 鸿蒙
                      device === "pangu_android" ||
                      // 盘古 android
                      device === "pangu_ios" ||
                      // 盘古 iOS
                      device === "android_tv_yst" ||
                      // Android TV
                      device === "android_hd" ||
                      // Android HD 版
                      device === "ios_hikari" ||
                      // 光呆ios
                      device === "android_hikari" ||
                      // 光呆安卓
                      device === "android_tv_bst" ||
                      // Android 百世通
                      device === "iphone" && version2 >= 10030 ||
                      // 哔哩哔哩 iOS 版
                      device === "iphone_b" && version2 >= 10030 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "iphone_i" && version2 >= 7e7 ||
                      // 哔哩哔哩 iOS 国际版
                      device === "ipad" && version2 >= 12420 ||
                      // 哔哩哔哩 iPad 版
                      device === "biliLink" && version2 >= 506e4 ||
                      // iOS 直播姬 APP
                      device === "biliLink_Android" && version2 >= 5070020;
                      if (!bridgeIsV7) {
                        _context25.next = 5;
                        break;
                      }
                      _context25.next = 4;
                      return P$1(BridgeMethod$1.RequestV2);
                    case 4:
                      bridgeIsV7 = _context25.sent;
                    case 5:
                    case "end":
                      return _context25.stop();
                  }
                }, _callee25);
              }));
              return function _detectBridgeIsV7() {
                return _ref28.apply(this, arguments);
              };
            }();
            _parseUA();
            _context26.next = 25;
            return _detectBridgeIsV7();
          case 25:
            _context26.next = 27;
            return _detectBridgeIsV6();
          case 27:
            _context26.next = 29;
            return _detectBridgeIsV5();
          case 29:
            _context26.next = 31;
            return _detectBridgeIsV4();
          case 31:
            _context26.next = 33;
            return _detectBridgeIsV3();
          case 33:
            _context26.next = 35;
            return _detectBridgeIsV2();
          case 35:
            _context26.next = 37;
            return _detectBridgeIsV1();
          case 37:
            if (bridgeIsV1) {
              result2.version = 1;
            }
            if (bridgeIsV2) {
              result2.version = 2;
            }
            if (bridgeIsV3) {
              result2.version = 3;
            }
            if (bridgeIsV4) {
              result2.version = 4;
            }
            if (bridgeIsV5) {
              result2.version = 5;
            }
            if (bridgeIsV6) {
              result2.version = 6;
            }
            if (bridgeIsV7) {
              result2.version = 7;
            }
            result2.isMainApp = ["iphone", "iphone_b", "ipad", "android", "android_b", "harmony"].indexOf(device) !== -1;
            result2.uaDevice = device;
            result2.uaVersion = version2;
            setWindowRuntime$1(result2);
            return _context26.abrupt("return", result2);
          case 49:
          case "end":
            return _context26.stop();
        }
      }, _callee26);
    }));
    return function execRuntime$1() {
      return _ref21.apply(this, arguments);
    };
  }();
  var runtime$1 = /*#__PURE__*/function () {
    var _ref29 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(ctx, next) {
      return _regeneratorRuntime().wrap(function _callee27$(_context27) {
        while (1) switch (_context27.prev = _context27.next) {
          case 0:
            _context27.t0 = setMiddlewarePayloadToCtx$1;
            _context27.t1 = ctx;
            _context27.t2 = AppMiddlewareName$1.Runtime;
            _context27.next = 5;
            return execRuntime$1();
          case 5:
            _context27.t3 = _context27.sent;
            (0, _context27.t0)(_context27.t1, _context27.t2, _context27.t3);
            _context27.next = 9;
            return next();
          case 9:
            return _context27.abrupt("return", _context27.sent);
          case 10:
          case "end":
            return _context27.stop();
        }
      }, _callee27);
    }));
    return function runtime$1(_x34, _x35) {
      return _ref29.apply(this, arguments);
    };
  }();
  var HttpSvcRuntime$1 = (_c = /*#__PURE__*/function (_HttpSvcMiddleware11) {
    "use strict";

    function _c() {
      var _this20;
      _classCallCheck(this, _c);
      _this20 = _callSuper(this, _c, arguments);
      __publicField(_this20, "handler", runtime$1);
      __publicField(_this20, "name", AppMiddlewareName$1.Runtime);
      return _this20;
    }
    _inherits(_c, _HttpSvcMiddleware11);
    return _createClass(_c);
  }(HttpSvcMiddleware), __publicField(_c, "handler", runtime$1), _c);
  var jsonBody$1 = function jsonBody$1(ctx, data, contentType) {
    if (!ctx.request) return;
    ctx.request.data = JSON.stringify(data);
    if (!ctx.request.headers) {
      ctx.request.headers = _defineProperty2({}, CONTENT_TYPE_KEY$1, ContentType$1.JSON);
    } else if (!contentType) {
      ctx.request.headers[CONTENT_TYPE_KEY$1] = ContentType$1.JSON;
    }
  };
  var isEqualContentType$1 = function isEqualContentType$1(target, current) {
    if (!current) return false;
    return current.indexOf(target) > -1;
  };
  var updatePayload$1 = function updatePayload$1(ctx, rawData) {
    var payload = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Body);
    setMiddlewarePayloadToCtx$1(ctx, AppMiddlewareName$1.Body, _objectSpread(_objectSpread({}, payload || {}), {}, {
      rawData: rawData
    }));
  };
  function getDeviceInfo$1(injectDeviceInfo) {
    return new Promise(function (resolve) {
      if (IS_NODE$1) {
        resolve({});
        return;
      }
      if (!f$2) {
        resolve({
          buvid: getCookie$4("buvid3")
        });
        return;
      }
      P$1(BridgeMethod$1.GetContainerInfo).then(function (support) {
        if (support) {
          if (b$1) {
            T$1("global.getContainerInfo", {}).then(function (res) {
              if (res.code !== 0) return resolve({});
              var info = res.data || {};
              var result2 = _objectSpread(_objectSpread({}, info), {}, {
                device_id: info.fingerprint,
                build: info.build,
                buvid: info.buvid,
                device_name: info.deviceName ? decodeURIComponent(info.deviceName) : "",
                device_platform: IS_ANDROID$1 ? info.devicePlatform : info.modelName,
                local_id: info.buvid,
                bili_local_id: info.localFingerprint
              });
              if (injectDeviceInfo === true || !isArray$c(injectDeviceInfo)) {
                resolve(result2);
                return;
              }
              var append = {};
              injectDeviceInfo.forEach(function (key) {
                if (result2[key]) {
                  append[key] = result2[key];
                }
              });
              resolve(append);
            });
            return;
          }
          W$1({
            method: BridgeMethod$1.GetContainerInfo,
            callback: function callback(info) {
              var result2 = _objectSpread(_objectSpread({}, info), {}, {
                device_id: info.fingerprint,
                build: info.build,
                buvid: info.buvid,
                device_name: decodeURIComponent(info.deviceName),
                device_platform: IS_ANDROID$1 ? info.devicePlatform : info.modelName,
                local_id: info.buvid,
                bili_local_id: info.localFingerprint
              });
              if (injectDeviceInfo === true || !isArray$c(injectDeviceInfo)) {
                resolve(result2);
                return;
              }
              var append = {};
              injectDeviceInfo.forEach(function (key) {
                if (result2[key]) {
                  append[key] = result2[key];
                }
              });
              resolve(append);
            }
          });
        } else {
          resolve({});
        }
      })["catch"](function () {
        resolve({});
      });
    });
  }
  var body$1 = /*#__PURE__*/function () {
    var _ref30 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(ctx, next, config) {
      var _ctx$request5, method, params, headers, data, runtime2, _ref31, stringify2, noTsParams, injectDeviceInfo, suppData, isContinue, rawData, contentType, raw2, cloneFormData, raw;
      return _regeneratorRuntime().wrap(function _callee28$(_context28) {
        while (1) switch (_context28.prev = _context28.next) {
          case 0:
            if (ctx.request) {
              _context28.next = 2;
              break;
            }
            return _context28.abrupt("return", next());
          case 2:
            _ctx$request5 = ctx.request, method = _ctx$request5.method, params = _ctx$request5.params, headers = _ctx$request5.headers, data = _ctx$request5.data;
            runtime2 = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Runtime);
            _ref31 = (config == null ? void 0 : config.payload) || {}, stringify2 = _ref31.stringify, noTsParams = _ref31.noTsParams, injectDeviceInfo = _ref31.injectDeviceInfo;
            suppData = {};
            if (IS_NODE$1) {
              _context28.next = 15;
              break;
            }
            if (!injectDeviceInfo) {
              _context28.next = 14;
              break;
            }
            _context28.t0 = Object;
            _context28.t1 = suppData;
            _context28.next = 12;
            return getDeviceInfo$1(injectDeviceInfo);
          case 12:
            _context28.t2 = _context28.sent;
            _context28.t0.assign.call(_context28.t0, _context28.t1, _context28.t2);
          case 14:
            if (f$2 && D$1()) {
              Object.assign(headers, {
                Accept: "application/json, text/plain, */*"
              }, runtime2.version ? {
                Referer: window.location.href,
                "User-Agent": window.navigator.userAgent
              } : {});
              if ((runtime2.version === 6 || runtime2.version === 7) && noTsParams !== true) {
                suppData.ts = Date.now() / 1e3 | 0;
              }
              if (!IS_ANDROID$1 && runtime2.version === 4 && method === "POST") {
                suppData._bridge_v4_fixed_ = "1";
              }
            }
          case 15:
            if (method === "GET") {
              if (params) {
                Object.assign(params, suppData);
              } else {
                ctx.request.params = _objectSpread({}, suppData);
              }
            }
            ctx.request.url = buildURL$1(ctx.request.url, Object.assign(params || {}, method === "GET" && suppData || {}), runtime2);
            if (!(method === "POST")) {
              _context28.next = 51;
              break;
            }
            isContinue = !["[object Object]", "[object FormData]"].includes(Object.prototype.toString.call(data));
            if (isContinue) {
              _context28.next = 51;
              break;
            }
            rawData = data;
            contentType = getContentType$1(headers);
            if (!isFormData$1(rawData)) {
              _context28.next = 43;
              break;
            }
            raw2 = _objectSpread(_objectSpread({}, form2obj$1(rawData)), suppData);
            if (runtime2.version) {
              _context28.next = 32;
              break;
            }
            cloneFormData = new FormData();
            Object.keys(raw2).forEach(function (k2) {
              cloneFormData.append(k2, raw2[k2]);
            });
            ctx.request.data = cloneFormData;
            updatePayload$1(ctx, cloneFormData);
            _context28.next = 31;
            return next();
          case 31:
            return _context28.abrupt("return", _context28.sent);
          case 32:
            updatePayload$1(ctx, raw2);
            if (!stringify2) {
              _context28.next = 38;
              break;
            }
            jsonBody$1(ctx, raw2, ContentType$1.JSON);
            _context28.next = 37;
            return next();
          case 37:
            return _context28.abrupt("return", _context28.sent);
          case 38:
            if (!contentType) {
              if (ctx.request.headers) {
                ctx.request.headers[CONTENT_TYPE_KEY$1] = ContentType$1.FormData;
              } else {
                ctx.request.headers = _defineProperty2({}, CONTENT_TYPE_KEY$1, ContentType$1.FormData);
              }
            }
            ctx.request.data = paramSerializer$1(raw2, runtime2);
            _context28.next = 42;
            return next();
          case 42:
            return _context28.abrupt("return", _context28.sent);
          case 43:
            raw = _objectSpread(_objectSpread({}, rawData), suppData);
            updatePayload$1(ctx, raw);
            if (!stringify2) {
              _context28.next = 50;
              break;
            }
            jsonBody$1(ctx, raw, ContentType$1.JSON);
            _context28.next = 49;
            return next();
          case 49:
            return _context28.abrupt("return", _context28.sent);
          case 50:
            if (isEqualContentType$1(ContentType$1.Form, contentType)) {
              ctx.request.data = paramSerializer$1(raw, runtime2);
            } else if (isEqualContentType$1(ContentType$1.JSON, contentType || ContentType$1.JSON)) {
              jsonBody$1(ctx, raw, contentType);
            }
          case 51:
            _context28.next = 53;
            return next();
          case 53:
            return _context28.abrupt("return", _context28.sent);
          case 54:
          case "end":
            return _context28.stop();
        }
      }, _callee28);
    }));
    return function body$1(_x36, _x37, _x38) {
      return _ref30.apply(this, arguments);
    };
  }();
  var HttpSvcBody$1 = (_d = /*#__PURE__*/function (_HttpSvcMiddleware12) {
    "use strict";

    function _d() {
      var _this21;
      _classCallCheck(this, _d);
      _this21 = _callSuper(this, _d, [body$1]);
      __publicField(_this21, "name", AppMiddlewareName$1.Body);
      return _this21;
    }
    _inherits(_d, _HttpSvcMiddleware12);
    return _createClass(_d);
  }(HttpSvcMiddleware), __publicField(_d, "handler", body$1), _d);
  var getCsrfToken$1 = function getCsrfToken$1(from) {
    return new Promise(function (resolve) {
      var token2 = getCookie$4("bili_jct", IS_NODE$1 ? from || "_" : "");
      if (!f$2) {
        resolve(token2);
        return;
      }
      P$1(BridgeMethod$1.GetCsrf).then(function (support) {
        if (!support) {
          resolve(token2);
          return;
        }
        if (b$1) {
          T$1(BridgeMethod$1.GetCsrf, {}).then(function (res) {
            if (res.code !== 0) return resolve(token2);
            return resolve(res.data.csrf || "");
          });
          return;
        }
        W$1({
          method: BridgeMethod$1.GetCsrf,
          callback: function callback(info) {
            resolve((info == null ? void 0 : info.csrf) || "");
          }
        });
      });
    });
  };
  var csrf$1 = /*#__PURE__*/function () {
    var _ref32 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(ctx, next, config) {
      var _a3, _b2, _c2, _d2, _ctx$request6, method, data, headers, runtime2, csrf2, def, paramsFlag, dataFlag, contentType, isJsonPost, _key5;
      return _regeneratorRuntime().wrap(function _callee29$(_context29) {
        while (1) switch (_context29.prev = _context29.next) {
          case 0:
            if (ctx.request) {
              _context29.next = 2;
              break;
            }
            return _context29.abrupt("return", next());
          case 2:
            _ctx$request6 = ctx.request, method = _ctx$request6.method, data = _ctx$request6.data, headers = _ctx$request6.headers;
            runtime2 = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Runtime);
            csrf2 = "";
            def = runtime2.version !== 2 && runtime2.version !== 3;
            paramsFlag = false;
            dataFlag = false;
            if (method === "GET") {
              if (((_a3 = config == null ? void 0 : config.payload) == null ? void 0 : _a3.params) || def) {
                paramsFlag = true;
              }
            } else if (method === "POST") {
              contentType = getContentType$1(headers) || (data ? getContentTypeFromData$1(data) : ContentType$1.JSON);
              isJsonPost = isEqualContentType$1(ContentType$1.JSON, contentType);
              if ((_b2 = config == null ? void 0 : config.payload) == null ? void 0 : _b2.params) {
                paramsFlag = true;
              } else if (isJsonPost) {
                paramsFlag = true;
              }
              if ((_c2 = config == null ? void 0 : config.payload) == null ? void 0 : _c2.data) {
                dataFlag = true;
              } else if (!isJsonPost) {
                dataFlag = true;
              }
            }
            if (!(paramsFlag || dataFlag)) {
              _context29.next = 13;
              break;
            }
            _context29.next = 12;
            return getCsrfToken$1((headers == null ? void 0 : headers["cookie"]) || (headers == null ? void 0 : headers["Cookie"]));
          case 12:
            csrf2 = _context29.sent;
          case 13:
            if (csrf2) {
              if (config == null ? void 0 : config.payload) {
                config.payload.cache = csrf2;
              } else {
                setMiddlewarePayloadToCtx$1(ctx, AppMiddlewareName$1.Csrf, {
                  cache: csrf2
                });
              }
              _key5 = ((_d2 = config == null ? void 0 : config.payload) == null ? void 0 : _d2.key) || "csrf";
              if (paramsFlag) {
                if (ctx.request.params) {
                  ctx.request.params[_key5] = csrf2;
                } else {
                  ctx.request.params = _defineProperty2({}, _key5, csrf2);
                }
              }
              if (dataFlag && data) {
                if (isFormData$1(data)) {
                  data.append(_key5, csrf2);
                } else {
                  if (data) {
                    data[_key5] = csrf2;
                  } else {
                    ctx.request.data = _defineProperty2({}, _key5, csrf2);
                  }
                }
              }
            }
            _context29.next = 16;
            return next();
          case 16:
            return _context29.abrupt("return", _context29.sent);
          case 17:
          case "end":
            return _context29.stop();
        }
      }, _callee29);
    }));
    return function csrf$1(_x39, _x40, _x41) {
      return _ref32.apply(this, arguments);
    };
  }();
  var HttpSvcCsrf$1 = (_e2 = /*#__PURE__*/function (_HttpSvcMiddleware13) {
    "use strict";

    function _e2() {
      var _this22;
      _classCallCheck(this, _e2);
      _this22 = _callSuper(this, _e2, arguments);
      __publicField(_this22, "handler", csrf$1);
      __publicField(_this22, "name", AppMiddlewareName$1.Csrf);
      return _this22;
    }
    _inherits(_e2, _HttpSvcMiddleware13);
    return _createClass(_e2);
  }(HttpSvcMiddleware), __publicField(_e2, "handler", csrf$1), _e2);
  var execSupport$1 = /*#__PURE__*/function () {
    var _ref33 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30() {
      var result2;
      return _regeneratorRuntime().wrap(function _callee30$(_context30) {
        while (1) switch (_context30.prev = _context30.next) {
          case 0:
            result2 = {
              v1: false,
              v2: false
            };
            if (!(IS_NODE$1 || !f$2 || !D$1())) {
              _context30.next = 3;
              break;
            }
            return _context30.abrupt("return", result2);
          case 3:
            if (!window.__HTTP_SVC_APP_UPLOAD_SUPPORT__) {
              _context30.next = 5;
              break;
            }
            return _context30.abrupt("return", window.__HTTP_SVC_APP_UPLOAD_SUPPORT__);
          case 5:
            if (IS_ANDROID$1) {
              _context30.next = 9;
              break;
            }
            _context30.next = 8;
            return P$1(BridgeMethod$1.UploadImage);
          case 8:
            result2.v1 = _context30.sent;
          case 9:
            _context30.next = 11;
            return P$1(BridgeMethod$1.UploadImageV2);
          case 11:
            result2.v2 = _context30.sent;
            window.__HTTP_SVC_APP_UPLOAD_SUPPORT__ = result2;
            return _context30.abrupt("return", result2);
          case 14:
          case "end":
            return _context30.stop();
        }
      }, _callee30);
    }));
    return function execSupport$1() {
      return _ref33.apply(this, arguments);
    };
  }();
  var parseData$1 = /*#__PURE__*/function () {
    var _ref34 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31(data, bridgeMethod) {
      var fileKey, fileName, fileValue, dataObj;
      return _regeneratorRuntime().wrap(function _callee31$(_context31) {
        while (1) switch (_context31.prev = _context31.next) {
          case 0:
            fileKey = "";
            fileName = "";
            fileValue = "";
            dataObj = {};
            Object.keys(data).forEach(function (key) {
              var val = data[key];
              if (isBlob$1(val) || isBase64$1(val)) {
                fileKey = key;
                fileValue = val;
                if (isBlob$1(fileValue)) {
                  fileName = fileValue.name || "";
                } else {
                  fileName = "upload.".concat(fileValue.substring("data:image/".length, fileValue.indexOf(";base64")));
                }
              } else {
                dataObj[key] = val;
              }
            });
            if (fileKey) {
              _context31.next = 7;
              break;
            }
            return _context31.abrupt("return", null);
          case 7:
            if (!(fileKey !== "file" && bridgeMethod === BridgeMethod$1.UploadImage && !b$1)) {
              _context31.next = 9;
              break;
            }
            return _context31.abrupt("return", null);
          case 9:
            if (!isBlob$1(fileValue)) {
              _context31.next = 13;
              break;
            }
            _context31.next = 12;
            return blob2Base64$1(fileValue);
          case 12:
            fileValue = _context31.sent;
          case 13:
            return _context31.abrupt("return", {
              fileKey: fileKey,
              fileName: fileName,
              fileValue: fileValue,
              dataObj: dataObj
            });
          case 14:
          case "end":
            return _context31.stop();
        }
      }, _callee31);
    }));
    return function parseData$1(_x42, _x43) {
      return _ref34.apply(this, arguments);
    };
  }();
  var callNativeUpload$1 = /*#__PURE__*/function () {
    var _ref35 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32(bridgeMethod, uploadData) {
      return _regeneratorRuntime().wrap(function _callee32$(_context32) {
        while (1) switch (_context32.prev = _context32.next) {
          case 0:
            return _context32.abrupt("return", new Promise(function (resolve, reject) {
              var handleData = function handleData(data) {
                if (typeof data === "string") {
                  return resolve(new Response(null, {
                    statusText: data,
                    status: 444,
                    headers: {}
                  }));
                }
                var response = data.response,
                  httpStatus = data.httpStatus;
                if (httpStatus < 200 || httpStatus >= 400) {
                  var statusText = "";
                  try {
                    var res = JSON.parse(response);
                    statusText = res.message || response;
                  } catch (_unused7) {
                    statusText = response;
                  }
                  resolve(new Response(null, {
                    statusText: statusText,
                    status: httpStatus,
                    headers: data.headers || {}
                  }));
                  return;
                }
                resolve(new Response(response, {
                  status: httpStatus,
                  headers: data.headers || {}
                }));
              };
              if (b$1) {
                T$1(bridgeMethod, uploadData).then(function (res) {
                  if (res.code !== 0) {
                    reject(new Error(res.message || "Request error, The callback status is not ok! code: ".concat(res.code)));
                    return;
                  }
                  handleData(res.data);
                });
                return;
              }
              W$1({
                method: bridgeMethod,
                data: uploadData,
                callback: function callback(status, message) {
                  if (status !== "ok") {
                    reject(new Error(message || "Request callback status is not ok!"));
                  }
                },
                onLoad: function onLoad(data) {
                  handleData(data);
                }
              });
            }));
          case 1:
          case "end":
            return _context32.stop();
        }
      }, _callee32);
    }));
    return function callNativeUpload$1(_x44, _x45) {
      return _ref35.apply(this, arguments);
    };
  }();
  var appUpload$1 = /*#__PURE__*/function () {
    var _ref36 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33(ctx) {
      var _ctx$request7, url2, _headers, support, bridgeMethod, _getMiddlewarePayload, rawData, uploadData, result2;
      return _regeneratorRuntime().wrap(function _callee33$(_context33) {
        while (1) switch (_context33.prev = _context33.next) {
          case 0:
            if (!IS_NODE$1) {
              _context33.next = 2;
              break;
            }
            throw new Error("When you are in a Node environment, please use server-side fetch middleware.");
          case 2:
            if (!(ctx.request && f$2)) {
              _context33.next = 29;
              break;
            }
            _ctx$request7 = ctx.request, url2 = _ctx$request7.url, _headers = _ctx$request7.headers;
            _context33.next = 6;
            return execSupport$1();
          case 6:
            support = _context33.sent;
            bridgeMethod = b$1 ? BridgeMethod$1.UploadImage : support.v2 ? BridgeMethod$1.UploadImageV2 : support.v1 ? BridgeMethod$1.UploadImage : "";
            if (!bridgeMethod) {
              _context33.next = 29;
              break;
            }
            _getMiddlewarePayload = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Body), rawData = _getMiddlewarePayload.rawData;
            uploadData = {
              url: url2,
              base64Data: "",
              header: Object.assign({
                "Content-Type": ContentType$1.Form
              }, _headers || {})
            };
            _context33.prev = 11;
            _context33.next = 14;
            return parseData$1(rawData || ctx.request.data, bridgeMethod);
          case 14:
            result2 = _context33.sent;
            _context33.next = 20;
            break;
          case 17:
            _context33.prev = 17;
            _context33.t0 = _context33["catch"](11);
            result2 = null;
          case 20:
            if (!result2) {
              _context33.next = 29;
              break;
            }
            uploadData.fileName = result2.fileName;
            uploadData.name = result2.fileKey;
            uploadData.base64Data = result2.fileValue;
            uploadData.formData = result2.dataObj;
            _context33.next = 27;
            return callNativeUpload$1(bridgeMethod, uploadData);
          case 27:
            ctx.response = _context33.sent;
            return _context33.abrupt("return", true);
          case 29:
            return _context33.abrupt("return", false);
          case 30:
          case "end":
            return _context33.stop();
        }
      }, _callee33, null, [[11, 17]]);
    }));
    return function appUpload$1(_x46) {
      return _ref36.apply(this, arguments);
    };
  }();
  var getBridgeMethod$1 = function getBridgeMethod$1(request2, runtime2, payload) {
    var contentType = getContentType$1(request2.headers) || ContentType$1.JSON;
    var isJsonPost = request2.method === "POST" && contentType === ContentType$1.JSON;
    if (isJsonPost) {
      if (runtime2.version < 6) {
        return "";
      }
      if (b$1) {
        return BridgeMethod$1.Request;
      }
      return BridgeMethod$1.RequestV2;
    }
    if (payload.auth === "app") {
      if (runtime2.version < 3) {
        return BridgeMethod$1.Request;
      }
      if (runtime2.version < 6) {
        return BridgeMethod$1.RequestWithSign;
      }
      if (b$1) {
        return BridgeMethod$1.RequestWithSign;
      }
      return BridgeMethod$1.RequestWithSignV2;
    }
    if (payload.auth === "web") {
      if (b$1) {
        return BridgeMethod$1.Request;
      }
      var isOldMainApp = runtime2.version < 6 && runtime2.isMainApp;
      if (isOldMainApp && !IS_ANDROID$1) {
        return "";
      }
      if (runtime2.version < 3) {
        return BridgeMethod$1.Request;
      }
      if (runtime2.version < 6) {
        return BridgeMethod$1.RequestWithSign;
      }
      return BridgeMethod$1.RequestV2;
    }
    if (runtime2.version < 3) {
      return BridgeMethod$1.Request;
    }
    if (runtime2.version < 6) {
      return BridgeMethod$1.RequestWithSign;
    }
    if (b$1) {
      return BridgeMethod$1.RequestWithSign;
    }
    return BridgeMethod$1.RequestWithSignV2;
  };
  var appFetch$1 = /*#__PURE__*/function () {
    var _ref37 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(bridgeMethod, ctx, runtime2, payload) {
      return _regeneratorRuntime().wrap(function _callee34$(_context34) {
        while (1) switch (_context34.prev = _context34.next) {
          case 0:
            return _context34.abrupt("return", new Promise(function (resolve, reject) {
              var _ctx$request8 = ctx.request,
                data = _ctx$request8.data,
                method = _ctx$request8.method,
                url2 = _ctx$request8.url,
                headers = _ctx$request8.headers,
                params = _ctx$request8.params;
              var connectData = {
                method: method,
                url: url2,
                timeout: (ctx.config.timeout || 0) / 1e3,
                header: headers
              };
              if (bridgeMethod === BridgeMethod$1.Request) {
                connectData.policy = payload.auth === "web" ? "0" : "1";
                if (b$1) {
                  connectData.policy = Number(connectData.policy);
                }
              }
              var csrfPayload = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Csrf);
              if (runtime2.version < 6 && (csrfPayload == null ? void 0 : csrfPayload.cache)) {
                connectData.csrfKey = csrfPayload.cache;
              }
              if (b$1) {
                connectData.data = data || "";
              } else {
                if (bridgeMethod === BridgeMethod$1.RequestWithSign) {
                  if (method === "GET") {
                    connectData.params = params;
                  } else {
                    var _getMiddlewarePayload2 = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Body),
                      rawData = _getMiddlewarePayload2.rawData;
                    connectData.params = rawData || {};
                  }
                } else if (method === "POST") {
                  connectData.data = data;
                }
              }
              var handleData = function handleData(data2) {
                if (typeof data2 === "string") {
                  return resolve(new Response(null, {
                    statusText: data2,
                    status: 444,
                    headers: {}
                  }));
                }
                var response = data2.response;
                var httpStatus = data2.httpStatus;
                if (httpStatus < 200 || httpStatus >= 400) {
                  var statusText = "";
                  try {
                    var data3 = JSON.parse(response);
                    statusText = data3.message || response;
                  } catch (_unused9) {
                    statusText = response;
                  }
                  if (httpStatus > 599 || httpStatus < 200) {
                    statusText = "[Status: ".concat(httpStatus, "] ").concat(statusText);
                    httpStatus = 444;
                  }
                  resolve(new Response(null, {
                    statusText: statusText,
                    status: httpStatus,
                    headers: data2.headers || {}
                  }));
                  return;
                }
                resolve(new Response(response, {
                  status: httpStatus,
                  headers: data2.headers || {}
                }));
              };
              if (b$1) {
                T$1(bridgeMethod, connectData).then(function (res) {
                  if (res.code !== 0) {
                    reject(new Error(res.message || "Request $".concat(connectData.method, ":\"").concat(connectData.url, "\" error, The callback status is not ok! code: ").concat(res.code)));
                    return;
                  }
                  handleData(res.data);
                })["catch"](function (err) {
                  reject(err);
                });
                return;
              }
              W$1({
                method: bridgeMethod,
                data: connectData,
                callback: function callback(status, message) {
                  if (status !== "ok") {
                    reject(new Error(message || "Request $".concat(connectData.method, ":\"").concat(connectData.url, "\" error, The callback status is not ok!")));
                  }
                },
                onLoad: function onLoad(data2) {
                  handleData(data2);
                }
              });
            }));
          case 1:
          case "end":
            return _context34.stop();
        }
      }, _callee34);
    }));
    return function appFetch$1(_x47, _x48, _x49, _x50) {
      return _ref37.apply(this, arguments);
    };
  }();
  var fetch$2 = /*#__PURE__*/function () {
    var _ref38 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(ctx, next, config) {
      var _a3, _b2, _ctx$request9, url2, method, headers, credentials, upload, uploadWork, runtime2, bridgeMethod, body2, _getMiddlewarePayload3, rawData, contentType;
      return _regeneratorRuntime().wrap(function _callee35$(_context35) {
        while (1) switch (_context35.prev = _context35.next) {
          case 0:
            if (!IS_NODE$1) {
              _context35.next = 2;
              break;
            }
            throw new Error("When you are in a Node environment, please use server-side fetch middleware.");
          case 2:
            if (ctx.request) {
              _context35.next = 6;
              break;
            }
            _context35.next = 5;
            return next();
          case 5:
            return _context35.abrupt("return", _context35.sent);
          case 6:
            if (!ctx.response) {
              _context35.next = 10;
              break;
            }
            _context35.next = 9;
            return next();
          case 9:
            return _context35.abrupt("return", _context35.sent);
          case 10:
            _ctx$request9 = ctx.request, url2 = _ctx$request9.url, method = _ctx$request9.method, headers = _ctx$request9.headers, credentials = _ctx$request9.credentials;
            upload = (_a3 = config == null ? void 0 : config.payload) == null ? void 0 : _a3.upload;
            if (!(f$2 && D$1())) {
              _context35.next = 33;
              break;
            }
            if (!upload) {
              _context35.next = 23;
              break;
            }
            _context35.next = 16;
            return appUpload$1(ctx);
          case 16:
            uploadWork = _context35.sent;
            if (!uploadWork) {
              _context35.next = 21;
              break;
            }
            _context35.next = 20;
            return next();
          case 20:
            return _context35.abrupt("return", _context35.sent);
          case 21:
            _context35.next = 33;
            break;
          case 23:
            runtime2 = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Runtime);
            if (!(runtime2 == null ? void 0 : runtime2.version)) {
              _context35.next = 33;
              break;
            }
            bridgeMethod = getBridgeMethod$1(ctx.request, runtime2, (config == null ? void 0 : config.payload) || {});
            if (!bridgeMethod) {
              _context35.next = 33;
              break;
            }
            _context35.next = 29;
            return appFetch$1(bridgeMethod, ctx, runtime2, (config == null ? void 0 : config.payload) || {});
          case 29:
            ctx.response = _context35.sent;
            _context35.next = 32;
            return next();
          case 32:
            return _context35.abrupt("return", _context35.sent);
          case 33:
            if (window.fetch) {
              _context35.next = 35;
              break;
            }
            throw new Error("When you are in a non-modern browser, please manually polyfill fetch.");
          case 35:
            body2 = ctx.request.data;
            _getMiddlewarePayload3 = getMiddlewarePayloadFromCtx$1(ctx, AppMiddlewareName$1.Body), rawData = _getMiddlewarePayload3.rawData;
            contentType = getContentType$1(headers);
            if (contentType === ContentType$1.FormData && rawData) {
              body2 = obj2form$1(rawData);
            }
            _context35.next = 41;
            return window.fetch(url2, {
              method: method,
              body: body2,
              headers: headers,
              credentials: credentials,
              signal: (_b2 = ctx.abortController) == null ? void 0 : _b2.signal
            });
          case 41:
            ctx.response = _context35.sent;
            _context35.next = 44;
            return next();
          case 44:
            return _context35.abrupt("return", _context35.sent);
          case 45:
          case "end":
            return _context35.stop();
        }
      }, _callee35);
    }));
    return function fetch$2(_x51, _x52, _x53) {
      return _ref38.apply(this, arguments);
    };
  }();
  var HttpSvcAppFetch$1 = (_f = /*#__PURE__*/function (_HttpSvcMiddleware14) {
    "use strict";

    function _f(payload) {
      var _this23;
      _classCallCheck(this, _f);
      _this23 = _callSuper(this, _f, [{
        handler: fetch$2,
        payload: payload
      }]);
      __publicField(_this23, "name", AppMiddlewareName$1.AppFetch);
      return _this23;
    }
    _inherits(_f, _HttpSvcMiddleware14);
    return _createClass(_f);
  }(HttpSvcMiddleware), __publicField(_f, "handler", fetch$2), _f);
  N$1();
  var IS_UAT = location.hostname.includes("uat-") || location.search.includes("_apiEnv_=uat");
  var IS_PRE = location.hostname.includes("pre-") || location.search.includes("_apiEnv_=pre");
  var origin = "".concat(location.protocol, "//").concat(IS_UAT ? "uat-" : IS_PRE ? "pre-" : "", "activity-template.bilibili.co");
  var managerOrigin = "//".concat(IS_UAT ? "uat-" : IS_PRE ? "pre-" : "", "manager.bilibili.co");
  new HttpService({
    baseURL: origin
  });
  new HttpService({
    baseURL: managerOrigin
  });
  new HttpService([{
    name: "SET_DEFAULT_HEADERS",
    handler: function handler(ctx, next) {
      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36() {
        var _ctx$request10, method, _headers2, _key6;
        return _regeneratorRuntime().wrap(function _callee36$(_context36) {
          while (1) switch (_context36.prev = _context36.next) {
            case 0:
              if (ctx.request) {
                _ctx$request10 = ctx.request, method = _ctx$request10.method, _headers2 = _ctx$request10.headers;
                if (method === "POST") {
                  _key6 = "Content-Type";
                  ctx.request.headers = _objectSpread(_objectSpread({}, _headers2 || {}), {}, _defineProperty2({}, _key6, (_headers2 == null ? void 0 : _headers2[_key6]) || "application/x-www-form-urlencoded"));
                }
              }
              _context36.next = 3;
              return next();
            case 3:
            case "end":
              return _context36.stop();
          }
        }, _callee36);
      }))();
    }
  }]);
  var baseRequest = new HttpService({
    fetch: new HttpSvcAppFetch$1(),
    middlewares: [new HttpSvcRuntime$1(), new HttpSvcCsrf$1(), new HttpSvcBody$1()]
  });
  var request$2 = /*#__PURE__*/function () {
    var _ref39 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(params) {
      var res;
      return _regeneratorRuntime().wrap(function _callee37$(_context37) {
        while (1) switch (_context37.prev = _context37.next) {
          case 0:
            _context37.next = 2;
            return baseRequest.request(params);
          case 2:
            res = _context37.sent;
            if (!("_ts_rpc_return_" in res)) {
              _context37.next = 7;
              break;
            }
            if (!(res._ts_rpc_return_.code === 0)) {
              _context37.next = 6;
              break;
            }
            return _context37.abrupt("return", res._ts_rpc_return_.data);
          case 6:
            throw res;
          case 7:
            if (!(res.code !== 0)) {
              _context37.next = 9;
              break;
            }
            throw res;
          case 9:
            return _context37.abrupt("return", res.data);
          case 10:
          case "end":
            return _context37.stop();
        }
      }, _callee37);
    }));
    return function request$2(_x54) {
      return _ref39.apply(this, arguments);
    };
  }();
  var promiseUtil = {
    sleep: function sleep(ms) {
      return new Promise(function (resolve) {
        setTimeout(resolve, ms);
      });
    },
    /**
     * @param {promise|function} defer
     */
    interflow: function interflow(defer) {
      if (typeof defer === "function") {
        return function () {
          return defer.apply(void 0, arguments).then(function (res) {
            return [null, res];
          }, function (err) {
            return [err, null];
          });
        };
      }
      return defer.then(function (res) {
        return [null, res];
      }, function (err) {
        return [err, null];
      });
    },
    retry: function retry(cb, options) {
      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38() {
        var mergedOptions, i2, _yield$promiseUtil$in, _yield$promiseUtil$in2, err, res;
        return _regeneratorRuntime().wrap(function _callee38$(_context38) {
          while (1) switch (_context38.prev = _context38.next) {
            case 0:
              mergedOptions = _objectSpread({
                count: 2,
                time: 1e3
              }, options);
              if (!(mergedOptions.count < 1)) {
                _context38.next = 4;
                break;
              }
              console.warn("%c promiseUtil.retry() %c options.count 不能小于1", "padding: 0px; background: rgba(100, 207, 255, 0.4); border-radius: 3px", "background: transparent");
              throw new Error("options.count 不能小于1");
            case 4:
              i2 = 0;
            case 5:
              if (!(i2 <= mergedOptions.count)) {
                _context38.next = 25;
                break;
              }
              _context38.next = 8;
              return promiseUtil.interflow(cb());
            case 8:
              _yield$promiseUtil$in = _context38.sent;
              _yield$promiseUtil$in2 = _slicedToArray(_yield$promiseUtil$in, 2);
              err = _yield$promiseUtil$in2[0];
              res = _yield$promiseUtil$in2[1];
              if (err) {
                _context38.next = 14;
                break;
              }
              return _context38.abrupt("return", res);
            case 14:
              if (!(i2 === mergedOptions.count)) {
                _context38.next = 20;
                break;
              }
              if (!err) {
                _context38.next = 19;
                break;
              }
              throw err;
            case 19:
              return _context38.abrupt("return", res);
            case 20:
              _context38.next = 22;
              return promiseUtil.sleep(mergedOptions.time);
            case 22:
              i2++;
              _context38.next = 5;
              break;
            case 25:
            case "end":
              return _context38.stop();
          }
        }, _callee38);
      }))();
    }
  };
  function arrayMap$2(array, iteratee) {
    var index2 = -1,
      length = array == null ? 0 : array.length,
      result2 = Array(length);
    while (++index2 < length) {
      result2[index2] = iteratee(array[index2], index2, array);
    }
    return result2;
  }
  var _arrayMap = arrayMap$2;
  function arrayEach$1(array, iteratee) {
    var index2 = -1,
      length = array == null ? 0 : array.length;
    while (++index2 < length) {
      if (iteratee(array[index2], index2, array) === false) {
        break;
      }
    }
    return array;
  }
  var _arrayEach = arrayEach$1;
  var copyObject$4 = _copyObject,
    keys$2 = keys_1;
  function baseAssign$1(object, source) {
    return object && copyObject$4(source, keys$2(source), object);
  }
  var _baseAssign = baseAssign$1;
  var copyObject$3 = _copyObject,
    keysIn$2 = keysIn_1;
  function baseAssignIn$1(object, source) {
    return object && copyObject$3(source, keysIn$2(source), object);
  }
  var _baseAssignIn = baseAssignIn$1;
  function arrayFilter$1(array, predicate) {
    var index2 = -1,
      length = array == null ? 0 : array.length,
      resIndex = 0,
      result2 = [];
    while (++index2 < length) {
      var value = array[index2];
      if (predicate(value, index2, array)) {
        result2[resIndex++] = value;
      }
    }
    return result2;
  }
  var _arrayFilter = arrayFilter$1;
  function stubArray$2() {
    return [];
  }
  var stubArray_1 = stubArray$2;
  var arrayFilter = _arrayFilter,
    stubArray$1 = stubArray_1;
  var objectProto$1 = Object.prototype;
  var propertyIsEnumerable = objectProto$1.propertyIsEnumerable;
  var nativeGetSymbols$1 = Object.getOwnPropertySymbols;
  var getSymbols$3 = !nativeGetSymbols$1 ? stubArray$1 : function (object) {
    if (object == null) {
      return [];
    }
    object = Object(object);
    return arrayFilter(nativeGetSymbols$1(object), function (symbol) {
      return propertyIsEnumerable.call(object, symbol);
    });
  };
  var _getSymbols = getSymbols$3;
  var copyObject$2 = _copyObject,
    getSymbols$2 = _getSymbols;
  function copySymbols$1(source, object) {
    return copyObject$2(source, getSymbols$2(source), object);
  }
  var _copySymbols = copySymbols$1;
  function arrayPush$3(array, values) {
    var index2 = -1,
      length = values.length,
      offset = array.length;
    while (++index2 < length) {
      array[offset + index2] = values[index2];
    }
    return array;
  }
  var _arrayPush = arrayPush$3;
  var arrayPush$2 = _arrayPush,
    getPrototype = _getPrototype,
    getSymbols$1 = _getSymbols,
    stubArray = stubArray_1;
  var nativeGetSymbols = Object.getOwnPropertySymbols;
  var getSymbolsIn$2 = !nativeGetSymbols ? stubArray : function (object) {
    var result2 = [];
    while (object) {
      arrayPush$2(result2, getSymbols$1(object));
      object = getPrototype(object);
    }
    return result2;
  };
  var _getSymbolsIn = getSymbolsIn$2;
  var copyObject$1 = _copyObject,
    getSymbolsIn$1 = _getSymbolsIn;
  function copySymbolsIn$1(source, object) {
    return copyObject$1(source, getSymbolsIn$1(source), object);
  }
  var _copySymbolsIn = copySymbolsIn$1;
  var arrayPush$1 = _arrayPush,
    isArray$b = isArray_1;
  function baseGetAllKeys$2(object, keysFunc, symbolsFunc) {
    var result2 = keysFunc(object);
    return isArray$b(object) ? result2 : arrayPush$1(result2, symbolsFunc(object));
  }
  var _baseGetAllKeys = baseGetAllKeys$2;
  var baseGetAllKeys$1 = _baseGetAllKeys,
    getSymbols = _getSymbols,
    keys$1 = keys_1;
  function getAllKeys$1(object) {
    return baseGetAllKeys$1(object, keys$1, getSymbols);
  }
  var _getAllKeys = getAllKeys$1;
  var baseGetAllKeys = _baseGetAllKeys,
    getSymbolsIn = _getSymbolsIn,
    keysIn$1 = keysIn_1;
  function getAllKeysIn$2(object) {
    return baseGetAllKeys(object, keysIn$1, getSymbolsIn);
  }
  var _getAllKeysIn = getAllKeysIn$2;
  var getNative$3 = _getNative,
    root$3 = _root;
  var DataView$2 = getNative$3(root$3, "DataView");
  var _DataView = DataView$2;
  var getNative$2 = _getNative,
    root$2 = _root;
  var Promise$2 = getNative$2(root$2, "Promise");
  var _Promise = Promise$2;
  var getNative$1 = _getNative,
    root$1 = _root;
  var Set$2 = getNative$1(root$1, "Set");
  var _Set = Set$2;
  var getNative = _getNative,
    root = _root;
  var WeakMap$2 = getNative(root, "WeakMap");
  var _WeakMap = WeakMap$2;
  var DataView$1 = _DataView,
    Map$1 = _Map,
    Promise$1 = _Promise,
    Set$1 = _Set,
    WeakMap$1 = _WeakMap,
    baseGetTag$1 = _baseGetTag,
    toSource = _toSource;
  var mapTag$3 = "[object Map]",
    objectTag$1 = "[object Object]",
    promiseTag = "[object Promise]",
    setTag$3 = "[object Set]",
    weakMapTag$1 = "[object WeakMap]";
  var dataViewTag$2 = "[object DataView]";
  var dataViewCtorString = toSource(DataView$1),
    mapCtorString = toSource(Map$1),
    promiseCtorString = toSource(Promise$1),
    setCtorString = toSource(Set$1),
    weakMapCtorString = toSource(WeakMap$1);
  var getTag$3 = baseGetTag$1;
  if (DataView$1 && getTag$3(new DataView$1(new ArrayBuffer(1))) != dataViewTag$2 || Map$1 && getTag$3(new Map$1()) != mapTag$3 || Promise$1 && getTag$3(Promise$1.resolve()) != promiseTag || Set$1 && getTag$3(new Set$1()) != setTag$3 || WeakMap$1 && getTag$3(new WeakMap$1()) != weakMapTag$1) {
    getTag$3 = function getTag$3(value) {
      var result2 = baseGetTag$1(value),
        Ctor = result2 == objectTag$1 ? value.constructor : void 0,
        ctorString = Ctor ? toSource(Ctor) : "";
      if (ctorString) {
        switch (ctorString) {
          case dataViewCtorString:
            return dataViewTag$2;
          case mapCtorString:
            return mapTag$3;
          case promiseCtorString:
            return promiseTag;
          case setCtorString:
            return setTag$3;
          case weakMapCtorString:
            return weakMapTag$1;
        }
      }
      return result2;
    };
  }
  var _getTag = getTag$3;
  var objectProto = Object.prototype;
  var hasOwnProperty = objectProto.hasOwnProperty;
  function initCloneArray$1(array) {
    var length = array.length,
      result2 = new array.constructor(length);
    if (length && typeof array[0] == "string" && hasOwnProperty.call(array, "index")) {
      result2.index = array.index;
      result2.input = array.input;
    }
    return result2;
  }
  var _initCloneArray = initCloneArray$1;
  var cloneArrayBuffer$1 = _cloneArrayBuffer;
  function cloneDataView$1(dataView, isDeep) {
    var buffer = isDeep ? cloneArrayBuffer$1(dataView.buffer) : dataView.buffer;
    return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
  }
  var _cloneDataView = cloneDataView$1;
  var reFlags = /\w*$/;
  function cloneRegExp$1(regexp) {
    var result2 = new regexp.constructor(regexp.source, reFlags.exec(regexp));
    result2.lastIndex = regexp.lastIndex;
    return result2;
  }
  var _cloneRegExp = cloneRegExp$1;
  var Symbol$3 = _Symbol;
  var symbolProto$1 = Symbol$3 ? Symbol$3.prototype : void 0,
    symbolValueOf = symbolProto$1 ? symbolProto$1.valueOf : void 0;
  function cloneSymbol$1(symbol) {
    return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
  }
  var _cloneSymbol = cloneSymbol$1;
  var cloneArrayBuffer = _cloneArrayBuffer,
    cloneDataView = _cloneDataView,
    cloneRegExp = _cloneRegExp,
    cloneSymbol = _cloneSymbol,
    cloneTypedArray = _cloneTypedArray;
  var boolTag$1 = "[object Boolean]",
    dateTag$1 = "[object Date]",
    mapTag$2 = "[object Map]",
    numberTag$1 = "[object Number]",
    regexpTag$1 = "[object RegExp]",
    setTag$2 = "[object Set]",
    stringTag$1 = "[object String]",
    symbolTag$2 = "[object Symbol]";
  var arrayBufferTag$1 = "[object ArrayBuffer]",
    dataViewTag$1 = "[object DataView]",
    float32Tag$1 = "[object Float32Array]",
    float64Tag$1 = "[object Float64Array]",
    int8Tag$1 = "[object Int8Array]",
    int16Tag$1 = "[object Int16Array]",
    int32Tag$1 = "[object Int32Array]",
    uint8Tag$1 = "[object Uint8Array]",
    uint8ClampedTag$1 = "[object Uint8ClampedArray]",
    uint16Tag$1 = "[object Uint16Array]",
    uint32Tag$1 = "[object Uint32Array]";
  function initCloneByTag$1(object, tag, isDeep) {
    var Ctor = object.constructor;
    switch (tag) {
      case arrayBufferTag$1:
        return cloneArrayBuffer(object);
      case boolTag$1:
      case dateTag$1:
        return new Ctor(+object);
      case dataViewTag$1:
        return cloneDataView(object, isDeep);
      case float32Tag$1:
      case float64Tag$1:
      case int8Tag$1:
      case int16Tag$1:
      case int32Tag$1:
      case uint8Tag$1:
      case uint8ClampedTag$1:
      case uint16Tag$1:
      case uint32Tag$1:
        return cloneTypedArray(object, isDeep);
      case mapTag$2:
        return new Ctor();
      case numberTag$1:
      case stringTag$1:
        return new Ctor(object);
      case regexpTag$1:
        return cloneRegExp(object);
      case setTag$2:
        return new Ctor();
      case symbolTag$2:
        return cloneSymbol(object);
    }
  }
  var _initCloneByTag = initCloneByTag$1;
  var getTag$2 = _getTag,
    isObjectLike$2 = isObjectLike_1;
  var mapTag$1 = "[object Map]";
  function baseIsMap$1(value) {
    return isObjectLike$2(value) && getTag$2(value) == mapTag$1;
  }
  var _baseIsMap = baseIsMap$1;
  var baseIsMap = _baseIsMap,
    baseUnary$1 = _baseUnary,
    nodeUtil$1 = _nodeUtilExports;
  var nodeIsMap = nodeUtil$1 && nodeUtil$1.isMap;
  var isMap$2 = nodeIsMap ? baseUnary$1(nodeIsMap) : baseIsMap;
  var isMap_1 = isMap$2;
  var getTag$1 = _getTag,
    isObjectLike$1 = isObjectLike_1;
  var setTag$1 = "[object Set]";
  function baseIsSet$1(value) {
    return isObjectLike$1(value) && getTag$1(value) == setTag$1;
  }
  var _baseIsSet = baseIsSet$1;
  var baseIsSet = _baseIsSet,
    baseUnary = _baseUnary,
    nodeUtil = _nodeUtilExports;
  var nodeIsSet = nodeUtil && nodeUtil.isSet;
  var isSet$2 = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;
  var isSet_1 = isSet$2;
  var Stack = _Stack,
    arrayEach = _arrayEach,
    assignValue$1 = _assignValue,
    baseAssign = _baseAssign,
    baseAssignIn = _baseAssignIn,
    cloneBuffer = _cloneBufferExports,
    copyArray = _copyArray,
    copySymbols = _copySymbols,
    copySymbolsIn = _copySymbolsIn,
    getAllKeys = _getAllKeys,
    getAllKeysIn$1 = _getAllKeysIn,
    getTag = _getTag,
    initCloneArray = _initCloneArray,
    initCloneByTag = _initCloneByTag,
    initCloneObject = _initCloneObject,
    isArray$a = isArray_1,
    isBuffer$1 = isBufferExports,
    isMap$1 = isMap_1,
    isObject$4 = isObject_1$1,
    isSet$1 = isSet_1,
    keys = keys_1,
    keysIn = keysIn_1;
  var CLONE_DEEP_FLAG$1 = 1,
    CLONE_FLAT_FLAG$1 = 2,
    CLONE_SYMBOLS_FLAG$1 = 4;
  var argsTag = "[object Arguments]",
    arrayTag = "[object Array]",
    boolTag = "[object Boolean]",
    dateTag = "[object Date]",
    errorTag = "[object Error]",
    funcTag = "[object Function]",
    genTag = "[object GeneratorFunction]",
    mapTag = "[object Map]",
    numberTag = "[object Number]",
    objectTag = "[object Object]",
    regexpTag = "[object RegExp]",
    setTag = "[object Set]",
    stringTag = "[object String]",
    symbolTag$1 = "[object Symbol]",
    weakMapTag = "[object WeakMap]";
  var arrayBufferTag = "[object ArrayBuffer]",
    dataViewTag = "[object DataView]",
    float32Tag = "[object Float32Array]",
    float64Tag = "[object Float64Array]",
    int8Tag = "[object Int8Array]",
    int16Tag = "[object Int16Array]",
    int32Tag = "[object Int32Array]",
    uint8Tag = "[object Uint8Array]",
    uint8ClampedTag = "[object Uint8ClampedArray]",
    uint16Tag = "[object Uint16Array]",
    uint32Tag = "[object Uint32Array]";
  var cloneableTags = {};
  cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag$1] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
  cloneableTags[errorTag] = cloneableTags[funcTag] = cloneableTags[weakMapTag] = false;
  function baseClone$1(value, bitmask, customizer, key, object, stack) {
    var result2,
      isDeep = bitmask & CLONE_DEEP_FLAG$1,
      isFlat = bitmask & CLONE_FLAT_FLAG$1,
      isFull = bitmask & CLONE_SYMBOLS_FLAG$1;
    if (customizer) {
      result2 = object ? customizer(value, key, object, stack) : customizer(value);
    }
    if (result2 !== void 0) {
      return result2;
    }
    if (!isObject$4(value)) {
      return value;
    }
    var isArr = isArray$a(value);
    if (isArr) {
      result2 = initCloneArray(value);
      if (!isDeep) {
        return copyArray(value, result2);
      }
    } else {
      var tag = getTag(value),
        isFunc = tag == funcTag || tag == genTag;
      if (isBuffer$1(value)) {
        return cloneBuffer(value, isDeep);
      }
      if (tag == objectTag || tag == argsTag || isFunc && !object) {
        result2 = isFlat || isFunc ? {} : initCloneObject(value);
        if (!isDeep) {
          return isFlat ? copySymbolsIn(value, baseAssignIn(result2, value)) : copySymbols(value, baseAssign(result2, value));
        }
      } else {
        if (!cloneableTags[tag]) {
          return object ? value : {};
        }
        result2 = initCloneByTag(value, tag, isDeep);
      }
    }
    stack || (stack = new Stack());
    var stacked = stack.get(value);
    if (stacked) {
      return stacked;
    }
    stack.set(value, result2);
    if (isSet$1(value)) {
      value.forEach(function (subValue) {
        result2.add(baseClone$1(subValue, bitmask, customizer, subValue, value, stack));
      });
    } else if (isMap$1(value)) {
      value.forEach(function (subValue, key2) {
        result2.set(key2, baseClone$1(subValue, bitmask, customizer, key2, value, stack));
      });
    }
    var keysFunc = isFull ? isFlat ? getAllKeysIn$1 : getAllKeys : isFlat ? keysIn : keys;
    var props = isArr ? void 0 : keysFunc(value);
    arrayEach(props || value, function (subValue, key2) {
      if (props) {
        key2 = subValue;
        subValue = value[key2];
      }
      assignValue$1(result2, key2, baseClone$1(subValue, bitmask, customizer, key2, value, stack));
    });
    return result2;
  }
  var _baseClone = baseClone$1;
  var baseGetTag = _baseGetTag,
    isObjectLike = isObjectLike_1;
  var symbolTag = "[object Symbol]";
  function isSymbol$4(value) {
    return _typeof4(value) == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
  }
  var isSymbol_1 = isSymbol$4;
  var isArray$9 = isArray_1,
    isSymbol$3 = isSymbol_1;
  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
    reIsPlainProp = /^\w*$/;
  function isKey$1(value, object) {
    if (isArray$9(value)) {
      return false;
    }
    var type2 = _typeof4(value);
    if (type2 == "number" || type2 == "symbol" || type2 == "boolean" || value == null || isSymbol$3(value)) {
      return true;
    }
    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
  }
  var _isKey = isKey$1;
  var MapCache = _MapCache;
  var FUNC_ERROR_TEXT = "Expected a function";
  function memoize$1(func, resolver) {
    if (typeof func != "function" || resolver != null && typeof resolver != "function") {
      throw new TypeError(FUNC_ERROR_TEXT);
    }
    var _memoized2 = function memoized() {
      var args = arguments,
        key = resolver ? resolver.apply(this, args) : args[0],
        cache = _memoized2.cache;
      if (cache.has(key)) {
        return cache.get(key);
      }
      var result2 = func.apply(this, args);
      _memoized2.cache = cache.set(key, result2) || cache;
      return result2;
    };
    _memoized2.cache = new (memoize$1.Cache || MapCache)();
    return _memoized2;
  }
  memoize$1.Cache = MapCache;
  var memoize_1 = memoize$1;
  var memoize = memoize_1;
  var MAX_MEMOIZE_SIZE = 500;
  function memoizeCapped$1(func) {
    var result2 = memoize(func, function (key) {
      if (cache.size === MAX_MEMOIZE_SIZE) {
        cache.clear();
      }
      return key;
    });
    var cache = result2.cache;
    return result2;
  }
  var _memoizeCapped = memoizeCapped$1;
  var memoizeCapped = _memoizeCapped;
  var rePropName$1 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
  var reEscapeChar$1 = /\\(\\)?/g;
  var stringToPath$2 = memoizeCapped(function (string) {
    var result2 = [];
    if (string.charCodeAt(0) === 46) {
      result2.push("");
    }
    string.replace(rePropName$1, function (match, number, quote2, subString) {
      result2.push(quote2 ? subString.replace(reEscapeChar$1, "$1") : number || match);
    });
    return result2;
  });
  var _stringToPath = stringToPath$2;
  var Symbol$2 = _Symbol,
    arrayMap$1 = _arrayMap,
    isArray$8 = isArray_1,
    isSymbol$2 = isSymbol_1;
  var INFINITY$1 = 1 / 0;
  var symbolProto = Symbol$2 ? Symbol$2.prototype : void 0,
    symbolToString = symbolProto ? symbolProto.toString : void 0;
  function baseToString$1(value) {
    if (typeof value == "string") {
      return value;
    }
    if (isArray$8(value)) {
      return arrayMap$1(value, baseToString$1) + "";
    }
    if (isSymbol$2(value)) {
      return symbolToString ? symbolToString.call(value) : "";
    }
    var result2 = value + "";
    return result2 == "0" && 1 / value == -INFINITY$1 ? "-0" : result2;
  }
  var _baseToString = baseToString$1;
  var baseToString = _baseToString;
  function toString$2(value) {
    return value == null ? "" : baseToString(value);
  }
  var toString_1 = toString$2;
  var isArray$7 = isArray_1,
    isKey = _isKey,
    stringToPath$1 = _stringToPath,
    toString$1 = toString_1;
  function castPath$6(value, object) {
    if (isArray$7(value)) {
      return value;
    }
    return isKey(value, object) ? [value] : stringToPath$1(toString$1(value));
  }
  var _castPath = castPath$6;
  function last$1(array) {
    var length = array == null ? 0 : array.length;
    return length ? array[length - 1] : void 0;
  }
  var last_1 = last$1;
  var isSymbol$1 = isSymbol_1;
  var INFINITY = 1 / 0;
  function toKey$4(value) {
    if (typeof value == "string" || isSymbol$1(value)) {
      return value;
    }
    var result2 = value + "";
    return result2 == "0" && 1 / value == -INFINITY ? "-0" : result2;
  }
  var _toKey = toKey$4;
  var castPath$5 = _castPath,
    toKey$3 = _toKey;
  function baseGet$3(object, path) {
    path = castPath$5(path, object);
    var index2 = 0,
      length = path.length;
    while (object != null && index2 < length) {
      object = object[toKey$3(path[index2++])];
    }
    return index2 && index2 == length ? object : void 0;
  }
  var _baseGet = baseGet$3;
  function baseSlice$1(array, start, end) {
    var index2 = -1,
      length = array.length;
    if (start < 0) {
      start = -start > length ? 0 : length + start;
    }
    end = end > length ? length : end;
    if (end < 0) {
      end += length;
    }
    length = start > end ? 0 : end - start >>> 0;
    start >>>= 0;
    var result2 = Array(length);
    while (++index2 < length) {
      result2[index2] = array[index2 + start];
    }
    return result2;
  }
  var _baseSlice = baseSlice$1;
  var baseGet$2 = _baseGet,
    baseSlice = _baseSlice;
  function parent$1(object, path) {
    return path.length < 2 ? object : baseGet$2(object, baseSlice(path, 0, -1));
  }
  var _parent = parent$1;
  var castPath$4 = _castPath,
    last = last_1,
    parent = _parent,
    toKey$2 = _toKey;
  function baseUnset$1(object, path) {
    path = castPath$4(path, object);
    object = parent(object, path);
    return object == null || delete object[toKey$2(last(path))];
  }
  var _baseUnset = baseUnset$1;
  var isPlainObject = isPlainObject_1;
  function customOmitClone$1(value) {
    return isPlainObject(value) ? void 0 : value;
  }
  var _customOmitClone = customOmitClone$1;
  var Symbol$1 = _Symbol,
    isArguments$1 = isArguments_1,
    isArray$6 = isArray_1;
  var spreadableSymbol = Symbol$1 ? Symbol$1.isConcatSpreadable : void 0;
  function isFlattenable$1(value) {
    return isArray$6(value) || isArguments$1(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);
  }
  var _isFlattenable = isFlattenable$1;
  var arrayPush = _arrayPush,
    isFlattenable = _isFlattenable;
  function baseFlatten$1(array, depth, predicate, isStrict, result2) {
    var index2 = -1,
      length = array.length;
    predicate || (predicate = isFlattenable);
    result2 || (result2 = []);
    while (++index2 < length) {
      var value = array[index2];
      if (depth > 0 && predicate(value)) {
        if (depth > 1) {
          baseFlatten$1(value, depth - 1, predicate, isStrict, result2);
        } else {
          arrayPush(result2, value);
        }
      } else if (!isStrict) {
        result2[result2.length] = value;
      }
    }
    return result2;
  }
  var _baseFlatten = baseFlatten$1;
  var baseFlatten = _baseFlatten;
  function flatten$1(array) {
    var length = array == null ? 0 : array.length;
    return length ? baseFlatten(array, 1) : [];
  }
  var flatten_1 = flatten$1;
  var flatten = flatten_1,
    overRest = _overRest,
    setToString = _setToString;
  function flatRest$2(func) {
    return setToString(overRest(func, void 0, flatten), func + "");
  }
  var _flatRest = flatRest$2;
  var arrayMap = _arrayMap,
    baseClone = _baseClone,
    baseUnset = _baseUnset,
    castPath$3 = _castPath,
    copyObject = _copyObject,
    customOmitClone = _customOmitClone,
    flatRest$1 = _flatRest,
    getAllKeysIn = _getAllKeysIn;
  var CLONE_DEEP_FLAG = 1,
    CLONE_FLAT_FLAG = 2,
    CLONE_SYMBOLS_FLAG = 4;
  flatRest$1(function (object, paths) {
    var result2 = {};
    if (object == null) {
      return result2;
    }
    var isDeep = false;
    paths = arrayMap(paths, function (path) {
      path = castPath$3(path, object);
      isDeep || (isDeep = path.length > 1);
      return path;
    });
    copyObject(object, getAllKeysIn(object), result2);
    if (isDeep) {
      result2 = baseClone(result2, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);
    }
    var length = paths.length;
    while (length--) {
      baseUnset(result2, paths[length]);
    }
    return result2;
  });
  var assignValue = _assignValue,
    castPath$2 = _castPath,
    isIndex$1 = _isIndex,
    isObject$3 = isObject_1$1,
    toKey$1 = _toKey;
  function baseSet$1(object, path, value, customizer) {
    if (!isObject$3(object)) {
      return object;
    }
    path = castPath$2(path, object);
    var index2 = -1,
      length = path.length,
      lastIndex = length - 1,
      nested = object;
    while (nested != null && ++index2 < length) {
      var key = toKey$1(path[index2]),
        newValue = value;
      if (key === "__proto__" || key === "constructor" || key === "prototype") {
        return object;
      }
      if (index2 != lastIndex) {
        var objValue = nested[key];
        newValue = customizer ? customizer(objValue, key, nested) : void 0;
        if (newValue === void 0) {
          newValue = isObject$3(objValue) ? objValue : isIndex$1(path[index2 + 1]) ? [] : {};
        }
      }
      assignValue(nested, key, newValue);
      nested = nested[key];
    }
    return object;
  }
  var _baseSet = baseSet$1;
  var baseGet$1 = _baseGet,
    baseSet = _baseSet,
    castPath$1 = _castPath;
  function basePickBy$1(object, paths, predicate) {
    var index2 = -1,
      length = paths.length,
      result2 = {};
    while (++index2 < length) {
      var path = paths[index2],
        value = baseGet$1(object, path);
      if (predicate(value, path)) {
        baseSet(result2, castPath$1(path, object), value);
      }
    }
    return result2;
  }
  var _basePickBy = basePickBy$1;
  function baseHasIn$1(object, key) {
    return object != null && key in Object(object);
  }
  var _baseHasIn = baseHasIn$1;
  var castPath = _castPath,
    isArguments = isArguments_1,
    isArray$5 = isArray_1,
    isIndex = _isIndex,
    isLength = isLength_1,
    toKey = _toKey;
  function hasPath$1(object, path, hasFunc) {
    path = castPath(path, object);
    var index2 = -1,
      length = path.length,
      result2 = false;
    while (++index2 < length) {
      var key = toKey(path[index2]);
      if (!(result2 = object != null && hasFunc(object, key))) {
        break;
      }
      object = object[key];
    }
    if (result2 || ++index2 != length) {
      return result2;
    }
    length = object == null ? 0 : object.length;
    return !!length && isLength(length) && isIndex(key, length) && (isArray$5(object) || isArguments(object));
  }
  var _hasPath = hasPath$1;
  var baseHasIn = _baseHasIn,
    hasPath = _hasPath;
  function hasIn$1(object, path) {
    return object != null && hasPath(object, path, baseHasIn);
  }
  var hasIn_1 = hasIn$1;
  var basePickBy = _basePickBy,
    hasIn = hasIn_1;
  function basePick$1(object, paths) {
    return basePickBy(object, paths, function (value, path) {
      return hasIn(object, path);
    });
  }
  var _basePick = basePick$1;
  var basePick = _basePick,
    flatRest = _flatRest;
  flatRest(function (object, paths) {
    return object == null ? {} : basePick(object, paths);
  });
  var dateUtil = {
    // 解决在 safari 中，某些时间字符串生成时间失败的问题
    convertDateStr: function convertDateStr(dateStr) {
      return dateStr.replace(/-/g, "/");
    },
    "new": function _new(time) {
      if (typeof time === "string") {
        return new Date(dateUtil.convertDateStr(time));
      }
      return new Date(time);
    },
    format: function format(date, format2) {
      if (!dateUtil.isValid(date)) {
        console.error(new Error("无效的 date 对象"));
        return format2;
      }
      var formatMap = {
        YYYY: function YYYY() {
          return String(date.getFullYear());
        },
        YY: function YY() {
          return formatMap.YYYY().slice(2, 4);
        },
        MM: function MM() {
          return formatMap.M().padStart(2, "0");
        },
        M: function M() {
          return String(date.getMonth() + 1);
        },
        DD: function DD() {
          return formatMap.D().padStart(2, "0");
        },
        D: function D() {
          return String(date.getDate());
        },
        HH: function HH() {
          return formatMap.H().padStart(2, "0");
        },
        H: function H() {
          return String(date.getHours());
        },
        mm: function mm() {
          return formatMap.m().padStart(2, "0");
        },
        m: function m() {
          return String(date.getMinutes());
        },
        ss: function ss() {
          return formatMap.s().padStart(2, "0");
        },
        s: function s() {
          return String(date.getSeconds());
        }
      };
      return Object.keys(formatMap).reduce(function (res, key) {
        var regexp = new RegExp(key, "g");
        return res.replace(regexp, formatMap[key]());
      }, format2);
    },
    isValid: function isValid(date) {
      return date instanceof Date && !Number.isNaN(date.getTime());
    },
    startOf: function startOf(date, unit) {
      var dateCopy = new Date(date);
      var unitMap = {
        millisecond: function millisecond() {
          dateCopy.setMilliseconds(0);
        },
        second: function second() {
          dateCopy.setSeconds(0);
        },
        minute: function minute() {
          dateCopy.setMinutes(0);
        },
        hour: function hour() {
          dateCopy.setHours(0);
        },
        day: function day() {
          dateCopy.setDate(1);
        }
      };
      var weekUnitMap = {
        millisecond: unitMap.millisecond,
        second: unitMap.second,
        minute: unitMap.minute,
        hour: unitMap.hour,
        week: function week() {
          var dayIndex = dateCopy.getDay();
          var diff = (dayIndex === 0 ? 7 : dayIndex) - 1;
          dateCopy.setDate(dateCopy.getDate() - diff);
        }
      };
      if (unit === "week") {
        for (var _key7 in weekUnitMap) {
          weekUnitMap[_key7]();
        }
      } else {
        for (var _key8 in unitMap) {
          if (_key8 === unit) {
            break;
          }
          unitMap[_key8]();
        }
      }
      return dateCopy;
    },
    endOf: function endOf(date, unit) {
      var dateCopy = new Date(date);
      var unitMap = {
        millisecond: function millisecond() {
          dateCopy.setMilliseconds(999);
        },
        second: function second() {
          dateCopy.setSeconds(59);
        },
        minute: function minute() {
          dateCopy.setMinutes(59);
        },
        hour: function hour() {
          dateCopy.setHours(23);
        },
        day: function day() {
          var tempDate = new Date(dateCopy.getFullYear(), dateCopy.getMonth() + 1, 0);
          dateCopy.setDate(tempDate.getDate());
        }
      };
      var weekUnitMap = {
        millisecond: unitMap.millisecond,
        second: unitMap.second,
        minute: unitMap.minute,
        hour: unitMap.hour,
        week: function week() {
          var dayIndex = dateCopy.getDay();
          var diff = 7 - (dayIndex === 0 ? 7 : dayIndex);
          dateCopy.setDate(dateCopy.getDate() + diff);
        }
      };
      if (unit === "week") {
        for (var _key9 in weekUnitMap) {
          weekUnitMap[_key9]();
        }
      } else {
        for (var _key10 in unitMap) {
          if (_key10 === unit) {
            break;
          }
          unitMap[_key10]();
        }
      }
      return dateCopy;
    },
    add: function add(date, value, unit) {
      var dateCopy = new Date(date);
      var unitStrMap = {
        second: "seconds",
        minute: "minutes",
        hour: "hours",
        day: "days",
        week: "weeks",
        month: "months"
      };
      unit = unitStrMap[unit] || unit;
      var unitMap = {
        seconds: function seconds() {
          dateCopy.setSeconds(dateCopy.getSeconds() + value);
        },
        minutes: function minutes() {
          dateCopy.setMinutes(dateCopy.getMinutes() + value);
        },
        hours: function hours() {
          dateCopy.setHours(dateCopy.getHours() + value);
        },
        days: function days() {
          dateCopy.setDate(dateCopy.getDate() + value);
        },
        weeks: function weeks() {
          dateCopy.setDate(dateCopy.getDate() + value * 7);
        },
        months: function months() {
          dateCopy.setMonth(dateCopy.getMonth() + value);
        }
      };
      unitMap[unit]();
      return dateCopy;
    }
  };
  N$1();
  function e$1(e2, t2) {
    if (null == e2) return {};
    var n2 = {};
    for (var r2 in e2) if ({}.hasOwnProperty.call(e2, r2)) {
      if (t2.includes(r2)) continue;
      n2[r2] = e2[r2];
    }
    return n2;
  }
  function t$1(e2, t2, n2, r2, a2, i2, o2) {
    try {
      var s2 = e2[i2](o2),
        u2 = s2.value;
    } catch (e3) {
      return void n2(e3);
    }
    s2.done ? t2(u2) : Promise.resolve(u2).then(r2, a2);
  }
  function n$1(e2) {
    return function () {
      var n2 = this,
        r2 = arguments;
      return new Promise(function (a2, i2) {
        var o2 = e2.apply(n2, r2);
        function s2(e3) {
          t$1(o2, a2, i2, s2, u2, "next", e3);
        }
        function u2(e3) {
          t$1(o2, a2, i2, s2, u2, "throw", e3);
        }
        s2(void 0);
      });
    };
  }
  var r$1 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
  function a$2(e2) {
    return e2 && e2.__esModule && Object.prototype.hasOwnProperty.call(e2, "default") ? e2["default"] : e2;
  }
  function i$1(e2, t2) {
    return e2(t2 = {
      exports: {}
    }, t2.exports), t2.exports;
  }
  var o$2 = i$1(function (e2) {
    function t2(n2) {
      return e2.exports = t2 = "function" == typeof Symbol && "symbol" == _typeof4(Symbol.iterator) ? function (e3) {
        return _typeof4(e3);
      } : function (e3) {
        return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : _typeof4(e3);
      }, e2.exports.__esModule = true, e2.exports["default"] = e2.exports, t2(n2);
    }
    e2.exports = t2, e2.exports.__esModule = true, e2.exports["default"] = e2.exports;
  });
  a$2(o$2);
  var s$1 = i$1(function (e2) {
    var t2 = o$2["default"];
    function n2() {
      e2.exports = n2 = function n2() {
        return a2;
      }, e2.exports.__esModule = true, e2.exports["default"] = e2.exports;
      var r2,
        a2 = {},
        i2 = Object.prototype,
        o2 = i2.hasOwnProperty,
        s2 = Object.defineProperty || function (e3, t3, n3) {
          e3[t3] = n3.value;
        },
        u2 = "function" == typeof Symbol ? Symbol : {},
        c2 = u2.iterator || "@@iterator",
        l2 = u2.asyncIterator || "@@asyncIterator",
        f2 = u2.toStringTag || "@@toStringTag";
      function p2(e3, t3, n3) {
        return Object.defineProperty(e3, t3, {
          value: n3,
          enumerable: true,
          configurable: true,
          writable: true
        }), e3[t3];
      }
      try {
        p2({}, "");
      } catch (r3) {
        p2 = function p2(e3, t3, n3) {
          return e3[t3] = n3;
        };
      }
      function d2(e3, t3, n3, r3) {
        var a3 = Object.create((t3 && t3.prototype instanceof I2 ? t3 : I2).prototype),
          i3 = new M2(r3 || []);
        return s2(a3, "_invoke", {
          value: x2(e3, n3, i3)
        }), a3;
      }
      function v2(e3, t3, n3) {
        try {
          return {
            type: "normal",
            arg: e3.call(t3, n3)
          };
        } catch (e4) {
          return {
            type: "throw",
            arg: e4
          };
        }
      }
      a2.wrap = d2;
      var _2 = "suspendedStart",
        h2 = "suspendedYield",
        m2 = "executing",
        b2 = "completed",
        g2 = {};
      function I2() {}
      function y2() {}
      function P2() {}
      var w2 = {};
      p2(w2, c2, function () {
        return this;
      });
      var L2 = Object.getPrototypeOf,
        O2 = L2 && L2(L2(R2([])));
      O2 && O2 !== i2 && o2.call(O2, c2) && (w2 = O2);
      var E2 = P2.prototype = I2.prototype = Object.create(w2);
      function k2(e3) {
        ["next", "throw", "return"].forEach(function (t3) {
          p2(e3, t3, function (e4) {
            return this._invoke(t3, e4);
          });
        });
      }
      function A2(e3, n3) {
        function r3(a4, i3, s3, u3) {
          var c3 = v2(e3[a4], e3, i3);
          if ("throw" !== c3.type) {
            var l3 = c3.arg,
              f3 = l3.value;
            return f3 && "object" == t2(f3) && o2.call(f3, "__await") ? n3.resolve(f3.__await).then(function (e4) {
              r3("next", e4, s3, u3);
            }, function (e4) {
              r3("throw", e4, s3, u3);
            }) : n3.resolve(f3).then(function (e4) {
              l3.value = e4, s3(l3);
            }, function (e4) {
              return r3("throw", e4, s3, u3);
            });
          }
          u3(c3.arg);
        }
        var a3;
        s2(this, "_invoke", {
          value: function value(e4, t3) {
            function i3() {
              return new n3(function (n4, a4) {
                r3(e4, t3, n4, a4);
              });
            }
            return a3 = a3 ? a3.then(i3, i3) : i3();
          }
        });
      }
      function x2(e3, t3, n3) {
        var a3 = _2;
        return function (i3, o3) {
          if (a3 === m2) throw Error("Generator is already running");
          if (a3 === b2) {
            if ("throw" === i3) throw o3;
            return {
              value: r2,
              done: true
            };
          }
          for (n3.method = i3, n3.arg = o3;;) {
            var s3 = n3.delegate;
            if (s3) {
              var u3 = N2(s3, n3);
              if (u3) {
                if (u3 === g2) continue;
                return u3;
              }
            }
            if ("next" === n3.method) n3.sent = n3._sent = n3.arg;else if ("throw" === n3.method) {
              if (a3 === _2) throw a3 = b2, n3.arg;
              n3.dispatchException(n3.arg);
            } else "return" === n3.method && n3.abrupt("return", n3.arg);
            a3 = m2;
            var c3 = v2(e3, t3, n3);
            if ("normal" === c3.type) {
              if (a3 = n3.done ? b2 : h2, c3.arg === g2) continue;
              return {
                value: c3.arg,
                done: n3.done
              };
            }
            "throw" === c3.type && (a3 = b2, n3.method = "throw", n3.arg = c3.arg);
          }
        };
      }
      function N2(e3, t3) {
        var n3 = t3.method,
          a3 = e3.iterator[n3];
        if (a3 === r2) return t3.delegate = null, "throw" === n3 && e3.iterator["return"] && (t3.method = "return", t3.arg = r2, N2(e3, t3), "throw" === t3.method) || "return" !== n3 && (t3.method = "throw", t3.arg = new TypeError("The iterator does not provide a '" + n3 + "' method")), g2;
        var i3 = v2(a3, e3.iterator, t3.arg);
        if ("throw" === i3.type) return t3.method = "throw", t3.arg = i3.arg, t3.delegate = null, g2;
        var o3 = i3.arg;
        return o3 ? o3.done ? (t3[e3.resultName] = o3.value, t3.next = e3.nextLoc, "return" !== t3.method && (t3.method = "next", t3.arg = r2), t3.delegate = null, g2) : o3 : (t3.method = "throw", t3.arg = new TypeError("iterator result is not an object"), t3.delegate = null, g2);
      }
      function S2(e3) {
        var t3 = {
          tryLoc: e3[0]
        };
        1 in e3 && (t3.catchLoc = e3[1]), 2 in e3 && (t3.finallyLoc = e3[2], t3.afterLoc = e3[3]), this.tryEntries.push(t3);
      }
      function C2(e3) {
        var t3 = e3.completion || {};
        t3.type = "normal", delete t3.arg, e3.completion = t3;
      }
      function M2(e3) {
        this.tryEntries = [{
          tryLoc: "root"
        }], e3.forEach(S2, this), this.reset(true);
      }
      function R2(e3) {
        if (e3 || "" === e3) {
          var n3 = e3[c2];
          if (n3) return n3.call(e3);
          if ("function" == typeof e3.next) return e3;
          if (!isNaN(e3.length)) {
            var a3 = -1,
              i3 = function t3() {
                for (; ++a3 < e3.length;) if (o2.call(e3, a3)) return t3.value = e3[a3], t3.done = false, t3;
                return t3.value = r2, t3.done = true, t3;
              };
            return i3.next = i3;
          }
        }
        throw new TypeError(t2(e3) + " is not iterable");
      }
      return y2.prototype = P2, s2(E2, "constructor", {
        value: P2,
        configurable: true
      }), s2(P2, "constructor", {
        value: y2,
        configurable: true
      }), y2.displayName = p2(P2, f2, "GeneratorFunction"), a2.isGeneratorFunction = function (e3) {
        var t3 = "function" == typeof e3 && e3.constructor;
        return !!t3 && (t3 === y2 || "GeneratorFunction" === (t3.displayName || t3.name));
      }, a2.mark = function (e3) {
        return Object.setPrototypeOf ? Object.setPrototypeOf(e3, P2) : (e3.__proto__ = P2, p2(e3, f2, "GeneratorFunction")), e3.prototype = Object.create(E2), e3;
      }, a2.awrap = function (e3) {
        return {
          __await: e3
        };
      }, k2(A2.prototype), p2(A2.prototype, l2, function () {
        return this;
      }), a2.AsyncIterator = A2, a2.async = function (e3, t3, n3, r3, i3) {
        void 0 === i3 && (i3 = Promise);
        var o3 = new A2(d2(e3, t3, n3, r3), i3);
        return a2.isGeneratorFunction(t3) ? o3 : o3.next().then(function (e4) {
          return e4.done ? e4.value : o3.next();
        });
      }, k2(E2), p2(E2, f2, "Generator"), p2(E2, c2, function () {
        return this;
      }), p2(E2, "toString", function () {
        return "[object Generator]";
      }), a2.keys = function (e3) {
        var t3 = Object(e3),
          n3 = [];
        for (var r3 in t3) n3.push(r3);
        return n3.reverse(), function e4() {
          for (; n3.length;) {
            var r4 = n3.pop();
            if (r4 in t3) return e4.value = r4, e4.done = false, e4;
          }
          return e4.done = true, e4;
        };
      }, a2.values = R2, M2.prototype = {
        constructor: M2,
        reset: function reset(e3) {
          if (this.prev = 0, this.next = 0, this.sent = this._sent = r2, this.done = false, this.delegate = null, this.method = "next", this.arg = r2, this.tryEntries.forEach(C2), !e3) for (var t3 in this) "t" === t3.charAt(0) && o2.call(this, t3) && !isNaN(+t3.slice(1)) && (this[t3] = r2);
        },
        stop: function stop() {
          this.done = true;
          var e3 = this.tryEntries[0].completion;
          if ("throw" === e3.type) throw e3.arg;
          return this.rval;
        },
        dispatchException: function dispatchException(e3) {
          if (this.done) throw e3;
          var t3 = this;
          function n3(n4, a4) {
            return s3.type = "throw", s3.arg = e3, t3.next = n4, a4 && (t3.method = "next", t3.arg = r2), !!a4;
          }
          for (var a3 = this.tryEntries.length - 1; a3 >= 0; --a3) {
            var i3 = this.tryEntries[a3],
              s3 = i3.completion;
            if ("root" === i3.tryLoc) return n3("end");
            if (i3.tryLoc <= this.prev) {
              var u3 = o2.call(i3, "catchLoc"),
                c3 = o2.call(i3, "finallyLoc");
              if (u3 && c3) {
                if (this.prev < i3.catchLoc) return n3(i3.catchLoc, true);
                if (this.prev < i3.finallyLoc) return n3(i3.finallyLoc);
              } else if (u3) {
                if (this.prev < i3.catchLoc) return n3(i3.catchLoc, true);
              } else {
                if (!c3) throw Error("try statement without catch or finally");
                if (this.prev < i3.finallyLoc) return n3(i3.finallyLoc);
              }
            }
          }
        },
        abrupt: function abrupt(e3, t3) {
          for (var n3 = this.tryEntries.length - 1; n3 >= 0; --n3) {
            var r3 = this.tryEntries[n3];
            if (r3.tryLoc <= this.prev && o2.call(r3, "finallyLoc") && this.prev < r3.finallyLoc) {
              var a3 = r3;
              break;
            }
          }
          a3 && ("break" === e3 || "continue" === e3) && a3.tryLoc <= t3 && t3 <= a3.finallyLoc && (a3 = null);
          var i3 = a3 ? a3.completion : {};
          return i3.type = e3, i3.arg = t3, a3 ? (this.method = "next", this.next = a3.finallyLoc, g2) : this.complete(i3);
        },
        complete: function complete(e3, t3) {
          if ("throw" === e3.type) throw e3.arg;
          return "break" === e3.type || "continue" === e3.type ? this.next = e3.arg : "return" === e3.type ? (this.rval = this.arg = e3.arg, this.method = "return", this.next = "end") : "normal" === e3.type && t3 && (this.next = t3), g2;
        },
        finish: function finish(e3) {
          for (var t3 = this.tryEntries.length - 1; t3 >= 0; --t3) {
            var n3 = this.tryEntries[t3];
            if (n3.finallyLoc === e3) return this.complete(n3.completion, n3.afterLoc), C2(n3), g2;
          }
        },
        "catch": function _catch(e3) {
          for (var t3 = this.tryEntries.length - 1; t3 >= 0; --t3) {
            var n3 = this.tryEntries[t3];
            if (n3.tryLoc === e3) {
              var r3 = n3.completion;
              if ("throw" === r3.type) {
                var a3 = r3.arg;
                C2(n3);
              }
              return a3;
            }
          }
          throw Error("illegal catch attempt");
        },
        delegateYield: function delegateYield(e3, t3, n3) {
          return this.delegate = {
            iterator: R2(e3),
            resultName: t3,
            nextLoc: n3
          }, "next" === this.method && (this.arg = r2), g2;
        }
      }, a2;
    }
    e2.exports = n2, e2.exports.__esModule = true, e2.exports["default"] = e2.exports;
  });
  a$2(s$1);
  var u$2 = s$1(),
    c$1 = u$2;
  try {
    regeneratorRuntime = u$2;
  } catch (e2) {
    "object" == (typeof globalThis === "undefined" ? "undefined" : _typeof4(globalThis)) ? globalThis.regeneratorRuntime = u$2 : Function("r", "regeneratorRuntime = r")(u$2);
  }
  var l$1 = function l$1(e2, t2) {
    return Object.prototype.hasOwnProperty.call(e2, t2);
  };
  function f$1(e2, t2, n2) {
    for (var r2 = Reflect.ownKeys(t2), a2 = Object.defineProperty, i2 = Object.getOwnPropertyDescriptor, o2 = 0; o2 < r2.length; o2++) {
      var s2 = r2[o2];
      l$1(e2, s2) || n2 && l$1(n2, s2) || a2(e2, s2, i2(t2, s2));
    }
  }
  function p$1(e2, t2) {
    return {
      enumerable: !(1 & e2),
      configurable: !(2 & e2),
      writable: !(4 & e2),
      value: t2
    };
  }
  function d$1(e2, t2, n2) {
    Object.defineProperty(e2, t2, p$1(1, n2));
  }
  var v = "3.0.8",
    _ = "__awesome",
    h = self[_] = self[_] || {},
    m = h[v] = h[v] || {};
  function b(e2, t2, n2) {
    try {
      Object.defineProperty(n2, e2, p$1(0, t2));
    } catch (r2) {
      n2[e2] = t2;
    }
    return t2;
  }
  function g(e2, t2) {
    var n2 = e2.global,
      r2 = e2.target,
      a2 = e2.forced,
      i2 = n2 ? m[n2] : m,
      o2 = i2[r2] = i2[r2] || b(r2, {}, i2);
    if (o2) for (var s2 in t2) {
      var u2 = t2[s2],
        c2 = o2[s2];
      if (!a2 && void 0 !== c2) {
        if (_typeof4(u2) == _typeof4(c2)) continue;
        f$1(u2, c2);
      }
      if ((e2.sham || u2 && u2.sham || c2 && c2.sham) && d$1(u2, "sham", true), "function" == typeof u2) {
        var p2,
          v2 = null != (p2 = e2.name) ? p2 : s2;
        l$1(u2, "name") && u2.name === v2 || d$1(u2, "name", v2);
      }
      d$1(o2, s2, u2);
    }
    return o2;
  }
  function I(e2, t2) {
    return m[e2] = m[e2] || b(e2, void 0 !== t2 ? t2 : {}, m);
  }
  function y() {
    return I("appConfig", {
      enableDebug: false,
      enableMemory: true
    });
  }
  function P(e2) {
    g({
      target: "appConfig",
      forced: true
    }, e2);
  }
  function w(e2, t2) {
    return t2 instanceof Promise ? t2.then(function (t3) {
      return null != e2 && e2.success && (null == e2 || e2.success(t3)), null != e2 && e2.callback && (null == e2 || e2.callback(t3)), Promise.resolve(t3);
    }) : (null != e2 && e2.success && (null == e2 || e2.success(t2)), null != e2 && e2.callback && (null == e2 || e2.callback(t2)), t2);
  }
  function O(e2, t2) {
    var n2 = y(),
      r2 = "undefined" != typeof console;
    n2.warnHandler ? n2.warnHandler.call(null, e2, t2) : r2 && n2.enableDebug && console.error("[" + t2 + " warn]: " + e2);
  }
  function E(e2, t2, n2) {
    var r2 = y();
    "undefined" != typeof console && r2.enableDebug && console.info("%c [" + t2 + " tip]: " + e2, "color: #FB7299", null != n2 ? n2 : "");
  }
  var k = function k(e2, t2) {
    return function (n2) {
      return new Promise(function (r2, a2) {
        var i2;
        n2 = n2 || {};
        t2 = Object.assign({
          resolveFn: "callback",
          rejectFn: "fail"
        }, t2);
        var o2 = t2.resolveFn,
          s2 = t2.rejectFn,
          u2 = n2[o2],
          c2 = n2[s2];
        n2 = Object.assign(n2, ((i2 = {})[o2] = function (e3) {
          r2(e3), null == u2 || u2(e3);
        }, i2[s2] = function (e3) {
          a2(e3), null == c2 || c2(e3);
        }, i2)), e2(n2);
      });
    };
  };
  /*!
   * @bilibili/js-bridge (v2.1.18)
   * 哔哩哔哩webview容器内H5页面与APP客户端交互JSB接入包
   * 构建时间：10/28/2024, 12:09:54 PM
   */
  function A(e2, t2) {
    (null == t2 || t2 > e2.length) && (t2 = e2.length);
    for (var n2 = 0, r2 = Array(t2); n2 < t2; n2++) r2[n2] = e2[n2];
    return r2;
  }
  function x(e2, t2, n2) {
    return (t2 = function (e3) {
      var t3 = function (e4) {
        if ("object" != _typeof4(e4) || !e4) return e4;
        var t4 = e4[Symbol.toPrimitive];
        if (void 0 !== t4) {
          var n3 = t4.call(e4, "string");
          if ("object" != _typeof4(n3)) return n3;
          throw new TypeError("@@toPrimitive must return a primitive value.");
        }
        return String(e4);
      }(e3);
      return "symbol" == _typeof4(t3) ? t3 : t3 + "";
    }(t2)) in e2 ? Object.defineProperty(e2, t2, {
      value: n2,
      enumerable: true,
      configurable: true,
      writable: true
    }) : e2[t2] = n2, e2;
  }
  function N(e2, t2) {
    var n2 = Object.keys(e2);
    if (Object.getOwnPropertySymbols) {
      var r2 = Object.getOwnPropertySymbols(e2);
      t2 && (r2 = r2.filter(function (t3) {
        return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
      })), n2.push.apply(n2, r2);
    }
    return n2;
  }
  function S(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = null != arguments[t2] ? arguments[t2] : {};
      t2 % 2 ? N(Object(n2), true).forEach(function (t3) {
        x(e2, t3, n2[t3]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : N(Object(n2)).forEach(function (t3) {
        Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
      });
    }
    return e2;
  }
  function C(e2) {
    return function (e3) {
      if (Array.isArray(e3)) return A(e3);
    }(e2) || function (e3) {
      if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"]) return Array.from(e3);
    }(e2) || function (e3, t2) {
      if (e3) {
        if ("string" == typeof e3) return A(e3, t2);
        var n2 = {}.toString.call(e3).slice(8, -1);
        return "Object" === n2 && e3.constructor && (n2 = e3.constructor.name), "Map" === n2 || "Set" === n2 ? Array.from(e3) : "Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? A(e3, t2) : void 0;
      }
    }(e2) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function M(e2) {
    return (M = "function" == typeof Symbol && "symbol" == _typeof4(Symbol.iterator) ? function (e3) {
      return _typeof4(e3);
    } : function (e3) {
      return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : _typeof4(e3);
    })(e2);
  }
  var R,
    B,
    T = "object" === ("undefined" == typeof window ? "undefined" : M(window)) ? window : null,
    W = function W(e2, t2) {
      if (!t2) return true;
      if (e2 === t2) return false;
      for (var n2 = e2.replace(/-[a-z]*/, ".-1").split("."), r2 = t2.replace(/-[a-z]*/, ".-1").split("."), a2 = Math.max(n2.length, r2.length), i2 = 0; i2 < a2; i2++) {
        var o2 = parseInt(n2[i2], 10) || 0,
          s2 = parseInt(r2[i2], 10) || 0;
        if (o2 > s2) return true;
        if (o2 < s2) return false;
      }
      return false;
    };
  T && (T.BiliJsBridge || (T.BiliJsBridge = {
    jsbVersion: "2.1.18",
    sendTasks: [],
    sendTasksV2: [],
    callbacks: [],
    biliInject: null,
    biliInjectV2: null,
    selfCallbackId: 1,
    newVersion: false,
    inited: false,
    initedV2: false,
    noBiliInject: false,
    noBiliInjectV2: false,
    jsbV2Apis: [],
    appSupportApis: [],
    msgCallbacks: {},
    jsbCallbacks: {},
    listenersMap: {},
    msgListener: null,
    msgListenerV: "2.1.18",
    cbReceivedV1: "2.1.18",
    cbReceivedV2: "2.1.18",
    bbVersion: "2.1.18"
  }), W("2.1.18", T.BiliJsBridge.jsbVersion) && (T.BiliJsBridge.jsbVersion = "2.1.18"), ["msgCallbacks", "jsbCallbacks", "listenersMap"].forEach(function (e2) {
    T.BiliJsBridge[e2] || (T.BiliJsBridge[e2] = {});
  }), !T.selfBrowser) && (T.selfBrowser = {
    version: (B = navigator.userAgent, {
      mobile: /AppleWebKit.*Mobile.*/i.test(B),
      ios: /\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(B),
      android: /Android/i.test(B) || /Linux/i.test(B),
      windowsphone: /Windows Phone/i.test(B),
      iPhone: /iPhone/i.test(B),
      iPad: /iPad/i.test(B),
      webApp: !/Safari/i.test(B),
      MicroMessenger: /MicroMessenger/i.test(B),
      weibo: /Weibo/i.test(B),
      uc: /UCBrowser/i.test(B),
      qq: /MQQBrowser/i.test(B),
      baidu: /Baidu/i.test(B),
      mqq: /QQ\/([\d.]+)/i.test(B),
      mbaidu: /baiduboxapp/i.test(B),
      iqiyi: /iqiyi/i.test(B),
      QQLive: /QQLive/i.test(B),
      Safari: (R = navigator.userAgent, !(!/ OS \d/.test(R) || ~R.indexOf("CriOS") || R.indexOf("Mozilla") || !/Safari\/[\d.]+$/.test(R))),
      Youku: /youku/i.test(B),
      chrome: /CriOS/i.test(B),
      CMDC: /CMDC/i.test(B),
      BiliApp: /BiliApp|BiliComic|hikari/i.test(B),
      BiliMallSDK: /mallSdkVersion/i.test(B),
      BiliHikari: /hikari/i.test(B),
      bStar: /bstar_/i.test(B)
    }),
    language: (navigator.browserLanguage || navigator.language).toLowerCase()
  });
  var V = T ? navigator.userAgent : null,
    j = !!T && /BiliApp|BiliComic|hikari/i.test(V),
    F = !!T && /wbType\/common/i.test(V),
    Y = false,
    J = function J(e2) {
      return !F && (e2.remove || (e2.reject || e2.listener || function () {})({
        code: 103,
        msg: "not support",
        down: false,
        data: null
      }), true);
    },
    K = function K(e2, t2, n2, r2) {
      var a2 = T.BiliJsBridge.callbacks.findIndex(function (t3) {
        return t3.callbackId === +e2;
      });
      if (a2 >= 0) {
        var i2 = T.BiliJsBridge.callbacks[a2];
        if ("global.import" === i2.method && (T.BiliJsBridge.appSupportApis = []), "function" == typeof i2.callback) {
          var o2 = n2 || t2;
          if (i2.callback(o2), i2.messageWindow) {
            n2 instanceof Error && (o2 = {
              code: n2.code || 105,
              msg: n2.message,
              data: n2.data,
              stack: n2.stack
            });
            var s2 = JSON.stringify({
              iframeCallbackId: i2.callbackId,
              jsbReceiveArgs: o2
            });
            i2.messageWindow.postMessage(s2, "*");
          }
        }
        r2 && "global.registerChannel" !== i2.method && (T.BiliJsBridge.callbacks.splice(a2, 1), i2.messageWindow && i2.messageWindow.postMessage(JSON.stringify({
          iframeRemoveId: i2.callbackId
        }), "*"));
      }
    };
  function U(e2) {
    var t2,
      n2 = T.BiliJsBridge,
      r2 = n2.biliInject,
      a2 = n2.biliInjectV2,
      i2 = n2.cbReceivedV2;
    !r2 || r2.biliCallbackReceived && !W("2.1.18", n2.cbReceivedV1) || (r2.biliCallbackReceived = K, T.BiliJsBridge.cbReceivedV1 = "2.1.18"), !a2 || a2.biliCallbackReceived && !W("2.1.18", i2) || (a2.biliCallbackReceived = function (e3, t3, n3) {
      return K(e3, t3, n3, true);
    }, T.BiliJsBridge.cbReceivedV2 = "2.1.18");
    var o2 = e2.isApiV2,
      s2 = [];
    for (var u2 in e2) Object.prototype.hasOwnProperty.call(e2, u2) && "function" == typeof e2[u2] && "callback" !== u2 && (s2.push({
      method: e2.method,
      callback: e2[u2],
      callbackId: T.BiliJsBridge.selfCallbackId,
      callbackName: u2,
      messageWindow: e2.messageWindow
    }), e2[u2] = "", e2.data[u2 + "CallbackId"] = T.BiliJsBridge.selfCallbackId++);
    if (s2.push({
      method: e2.method,
      eventKey: e2.data && e2.data.key,
      callback: e2.callback,
      callbackId: T.BiliJsBridge.selfCallbackId,
      callbackName: "callback",
      messageWindow: e2.messageWindow
    }), (t2 = T.BiliJsBridge.callbacks).push.apply(t2, s2), e2.iframeMessageId && e2.messageWindow) {
      var c2 = JSON.stringify({
        iframeMessageId: e2.iframeMessageId,
        callbacks: s2.map(function (e3) {
          return {
            callbackId: e3.callbackId,
            callbackName: e3.callbackName
          };
        })
      });
      e2.messageWindow.postMessage(c2, "*");
    }
    var l2 = function l2() {},
      f2 = function f2() {};
    if (r2 && "function" == typeof r2.postMessage && (l2 = r2.postMessage.bind(r2)), a2 && "function" == typeof a2.postMessage && (f2 = a2.postMessage.bind(a2)), o2) {
      if ("global.unregisterChannel" === e2.method) {
        var p2 = e2.callback(),
          d2 = T.BiliJsBridge.callbacks.findIndex(function (t3) {
            return t3.eventKey === e2.data.key && t3.callback === p2;
          });
        if (d2 > -1) {
          var v2 = T.BiliJsBridge.callbacks[d2];
          e2.data.callbackId = v2.callbackId, T.BiliJsBridge.callbacks.splice(d2, 1), v2.messageWindow && v2.messageWindow.postMessage(JSON.stringify({
            iframeRemoveId: v2.callbackId
          }), "*");
        }
      }
      f2(JSON.stringify(S(S({
        method: e2.method,
        data: e2.data
      }, e2.key && {
        key: e2.key
      }), {}, {
        callbackId: T.BiliJsBridge.selfCallbackId++
      })));
    } else l2(T.selfBrowser.version.android ? JSON.stringify({
      method: e2.method,
      data: Object.assign(e2.data, {
        callbackId: T.BiliJsBridge.selfCallbackId++
      })
    }) : {
      method: e2.method,
      data: JSON.stringify(Object.assign(e2.data, {
        callbackId: T.BiliJsBridge.selfCallbackId++
      }))
    });
  }
  function H(e2) {
    return new Promise(function (t2, n2) {
      if (e2()) t2();else var r2 = 0,
        a2 = setInterval(function () {
          r2++, e2() && (t2(), clearInterval(a2)), r2 >= 20 && (n2(), clearInterval(a2));
        }, 500);
    });
  }
  function q() {
    return T && (T.biliInject || T.webkit && T.webkit.messageHandlers && T.webkit.messageHandlers.biliInject);
  }
  function G() {
    return T && (T.biliInjectV2 || T.webkit && T.webkit.messageHandlers && T.webkit.messageHandlers.biliInjectV2);
  }
  function D(e2) {
    if ("global.import" === e2.method && (T.BiliJsBridge.appSupportApis = []), (e2 = e2 || {}).data = e2.data || {}, !e2.method) throw new Error("no method");
    T.BiliJsBridge.inited ? T.BiliJsBridge.newVersion && U(e2) : T.BiliJsBridge.noBiliInject || T.BiliJsBridge.sendTasks.push(e2);
  }
  function z(e2) {
    e2 && e2.method && Q(e2.method).then(function (t2) {
      t2 && D(e2);
    });
  }
  function Q(e2) {
    return new Promise(function (t2) {
      var n2 = T.BiliJsBridge.appSupportApis;
      n2 && n2.length ? t2(n2.includes(e2)) : D({
        method: "global.getAllSupport",
        callback: function callback(n3) {
          n3 && n3.length && (T.BiliJsBridge.appSupportApis = n3), t2((T.BiliJsBridge.appSupportApis || []).includes(e2));
        }
      });
    });
  }
  function $() {
    var e2 = [];
    [].forEach.call(arguments, function (t2) {
      t2 instanceof Array ? e2 = e2.concat(t2) : "string" == typeof t2 && e2.push(t2);
    }), Q("global.import").then(function (t2) {
      t2 && e2.forEach(function (e3) {
        D({
          method: "global.import",
          data: {
            namespace: e3
          }
        });
      });
    });
  }
  function X(e2) {
    void 0 === e2.data && (e2.data = {}), T.BiliJsBridge.biliInjectV2 ? U(e2) : T.BiliJsBridge.noBiliInjectV2 || T.BiliJsBridge.sendTasksV2.push(e2);
  }
  function Z(e2, t2) {
    return new Promise(function (n2, r2) {
      be({
        method: e2,
        params: t2,
        resolve: n2,
        reject: r2
      }) || X({
        method: e2,
        data: t2,
        isApiV2: true,
        callback: function callback(e3) {
          e3 && 0 === e3.code ? n2(e3) : r2(e3);
        }
      });
    });
  }
  function ee(e2) {
    return new Promise(function (t2) {
      var n2 = T.BiliJsBridge.jsbV2Apis;
      n2 && n2.length ? t2(n2.includes(e2)) : Z("global.getAllSupport").then(function (n3) {
        var r2 = n3.data.methods;
        r2 && r2.length && (T.BiliJsBridge.jsbV2Apis = r2), t2((T.BiliJsBridge.jsbV2Apis || []).includes(e2));
      })["catch"](function () {
        return t2(false);
      });
    });
  }
  function te(e2) {
    if (e2.data) {
      var t2 = {};
      try {
        t2 = JSON.parse(e2.data);
      } catch (e3) {}
      if (t2 && (t2.iframeMessageId || t2.iframeCallbackId || t2.iframeRemoveId)) {
        var n2 = t2.iframeMessageId,
          r2 = T.BiliJsBridge.msgCallbacks[n2];
        if (r2) return "function" == typeof r2 && r2(t2), void delete T.BiliJsBridge.msgCallbacks[t2.iframeMessageId];
        if (t2.iframeCallbackId) {
          var a2 = T.BiliJsBridge.jsbCallbacks[t2.iframeCallbackId];
          "function" == typeof a2 && a2(t2.jsbReceiveArgs);
        } else if (t2.iframeRemoveId) delete T.BiliJsBridge.jsbCallbacks[t2.iframeRemoveId];else if (t2.method) {
          var i2 = e2.source,
            o2 = t2.method.replace(/^bili_jsb_/, ""),
            s2 = t2.option || {};
          switch (s2.messageWindow = i2, s2.iframeMessageId = n2, o2) {
            case "isSupport":
            case "canIUse":
              ("isSupport" === o2 ? Q : ee)(t2.api).then(function (e3) {
                i2.postMessage(JSON.stringify(S(S({}, t2), {}, {
                  support: e3
                })), "*");
              })["catch"](function () {
                i2.postMessage(JSON.stringify(S(S({}, t2), {}, {
                  support: false
                })), "*");
              });
              break;
            case "callNative":
            case "callNativeSafe":
              for (var u2 in s2) "jsbCallbackFn" === s2[u2] && (s2[u2] = function () {});
              "callNative" === o2 ? D(s2) : z(s2);
              break;
            case "importNameSpace":
              $.apply(void 0, C(t2.namespaces)), i2.postMessage(JSON.stringify(S({}, t2)), "*");
              break;
            case "useNative":
              s2.callback = function () {}, X(s2);
              break;
            case "addChannel":
              var c2 = s2.callback;
              s2.callback = function () {}, T.BiliJsBridge.listenersMap[c2] = {
                key: s2.data.key,
                listener: s2.callback
              }, X(s2);
              break;
            case "removeChannel":
              var l2 = T.BiliJsBridge.listenersMap[s2.callback];
              if (!l2) return;
              s2.callback = function () {
                return l2.listener;
              }, X(s2);
          }
        }
      }
    }
  }
  if (T) {
    var ne = T.BiliJsBridge,
      re = ne.msgListener;
    re && !W("2.1.18", ne.msgListenerV) || (re && window.removeEventListener("message", re), window.addEventListener("message", te), T.BiliJsBridge.msgListener = te, T.BiliJsBridge.msgListenerV = "2.1.18");
  }
  var ae = function ae(e2) {
      return Y ? Promise.resolve() : (Y = true, "function" == typeof e2 && (J = e2), Promise.all([H(q).then(function () {
        T.BiliJsBridge.biliInject = q(), T.BiliJsBridge.newVersion = true, T.BiliJsBridge.sendTasks.forEach(function (e3) {
          return U(e3);
        }), T.BiliJsBridge.sendTasks = [];
      })["catch"](function () {
        T.BiliJsBridge.noBiliInject = true;
      })["finally"](function () {
        T.BiliJsBridge.inited = true;
      }), H(G).then(function () {
        T.BiliJsBridge.biliInjectV2 = G(), T.BiliJsBridge.sendTasksV2.forEach(function (e3) {
          return U(e3);
        }), T.BiliJsBridge.sendTasksV2 = [];
      })["catch"](function () {
        T.BiliJsBridge.noBiliInjectV2 = true;
      })["finally"](function () {
        T.BiliJsBridge.initedV2 = true;
      })]));
    },
    ie = Q,
    oe = D,
    se = z,
    ue = $,
    ce = ee,
    le = Z,
    fe = function fe(e2, t2, n2) {
      be({
        event: e2,
        listener: t2,
        params: n2
      }) || X({
        method: "global.registerChannel",
        key: e2,
        data: S({
          key: e2
        }, n2),
        isApiV2: true,
        callback: t2
      });
    },
    pe = function pe(e2, t2) {
      be({
        event: e2,
        listener: t2,
        remove: true
      }) || X({
        method: "global.unregisterChannel",
        key: e2,
        data: {
          key: e2
        },
        isApiV2: true,
        callback: function callback() {
          return t2;
        }
      });
    },
    de = q,
    ve = G;
  if (T && window !== window.parent && window.top) {
    var _e = function _e(e2, t2) {
      e2.method = "bili_jsb_".concat(e2.method), e2.iframeMessageId = Math.random(), T.BiliJsBridge.msgCallbacks[e2.iframeMessageId] = t2 || function () {}, window.top.postMessage(JSON.stringify(e2), "*");
    };
    ae = function ae(e2) {
      return "function" == typeof e2 && (J = e2), Promise.resolve();
    }, ie = function ie(e2) {
      return new Promise(function (t2) {
        _e({
          method: "isSupport",
          api: e2
        }, function (e3) {
          return t2(e3.support);
        });
      });
    };
    var he = function he(e2, t2) {
      var n2 = S({}, t2);
      for (var r2 in n2) "function" == typeof n2[r2] && (n2[r2] = "jsbCallbackFn");
      _e({
        method: e2,
        option: n2
      }, function (e3) {
        (e3.callbacks || []).forEach(function (e4) {
          T.BiliJsBridge.jsbCallbacks[e4.callbackId] = t2[e4.callbackName];
        });
      });
    };
    oe = function oe(e2) {
      return he("callNative", e2);
    }, se = function se(e2) {
      return he("callNativeSafe", e2);
    }, ue = function ue() {
      for (var e2 = arguments.length, t2 = new Array(e2), n2 = 0; n2 < e2; n2++) t2[n2] = arguments[n2];
      return _e({
        method: "importNameSpace",
        namespaces: t2
      });
    }, ce = function ce(e2) {
      return new Promise(function (t2) {
        _e({
          method: "canIUse",
          api: e2
        }, function (e3) {
          return t2(e3.support);
        });
      });
    }, le = function le(e2, t2) {
      return new Promise(function (n2, r2) {
        be({
          method: e2,
          params: t2,
          resolve: n2,
          reject: r2
        }) || _e({
          method: "useNative",
          option: {
            method: e2,
            data: t2,
            isApiV2: true,
            callback: "jsbCallbackFn"
          }
        }, function (e3) {
          T.BiliJsBridge.jsbCallbacks[e3.callbacks[0].callbackId] = function (e4) {
            e4 && 0 === e4.code ? n2(e4) : r2(e4);
          };
        });
      });
    }, fe = function fe(e2, t2, n2) {
      if (!be({
        event: e2,
        listener: t2,
        params: n2
      })) {
        var r2 = Math.random();
        T.BiliJsBridge.listenersMap[r2] = {
          key: e2,
          listener: t2
        };
        var a2 = {
          method: "global.registerChannel",
          key: e2,
          data: S({
            key: e2
          }, n2),
          isApiV2: true,
          callback: r2
        };
        _e({
          method: "addChannel",
          option: a2
        }, function (e3) {
          T.BiliJsBridge.jsbCallbacks[e3.callbacks[0].callbackId] = t2;
        });
      }
    }, pe = function pe(e2, t2) {
      if (!be({
        event: e2,
        listener: t2,
        remove: true
      })) {
        var n2 = Object.keys(T.BiliJsBridge.listenersMap).find(function (n3) {
          var r3 = T.BiliJsBridge.listenersMap[n3];
          return r3.key === e2 && r3.listener === t2;
        });
        if (n2) {
          var r2 = {
            method: "global.unregisterChannel",
            key: e2,
            data: {
              key: e2
            },
            isApiV2: true,
            callback: n2
          };
          delete T.BiliJsBridge.listenersMap[n2], _e({
            method: "removeChannel",
            option: r2
          }, function (e3) {
            T.BiliJsBridge.jsbCallbacks[e3.callbacks[0].callbackId] = function () {};
          });
        }
      }
    }, de = ve = function ve() {
      return true;
    };
  }
  var me = {
    inBiliApp: j,
    jsbVersion: "2.1.18",
    isWbTypeCommon: F,
    initEnv: ae,
    isSupport: ie,
    callNative: oe,
    callNativeSafe: se,
    importNameSpace: ue,
    isNewJsBridge: de,
    isBiliInjectV2: ve,
    canIUse: ce,
    useNative: le,
    addChannel: fe,
    removeChannel: pe
  };
  function be(e2) {
    return J(S({
      biliBridge: me,
      inBiliApp: j,
      jsbVersion: "2.1.18",
      isWbTypeCommon: F,
      isSupport: ie,
      callNative: oe,
      callNativeSafe: se,
      importNameSpace: ue
    }, e2));
  }
  !T || T.biliBridge && !W("2.1.18", T.BiliJsBridge.bbVersion) || (T.biliBridge = me, T.BiliJsBridge.bbVersion = "2.1.18");
  var ge = ["success", "fail"],
    Ie = function Ie(t2) {
      return function (n2) {
        var r2,
          a2 = n2.success,
          i2 = n2.fail,
          o2 = e$1(n2, ge);
        return k(oe)({
          method: null != (r2 = null == t2 ? void 0 : t2.method) ? r2 : "global.import",
          data: o2,
          callback: function callback(e2) {
            null == a2 || a2(e2);
          },
          fail: function fail(e2) {
            return null == i2 ? void 0 : i2(e2);
          }
        });
      };
    };
  function ye(e2, t2) {
    e2 = e2.toString().split("."), t2 = t2.toString().split(".");
    for (var n2 = Math.max(e2.length, t2.length); e2.length < n2;) e2.push("0");
    for (; t2.length < n2;) t2.push("0");
    for (var r2 = 0; r2 < n2; r2++) {
      var a2 = parseInt(e2[r2]),
        i2 = parseInt(t2[r2]);
      if (a2 > i2) return 1;
      if (a2 < i2) return -1;
    }
    return 0;
  }
  var Pe = function Pe(e2) {
      var t2;
      if (void 0 === e2 && (e2 = 4107), null != (t2 = window.browser) && t2.app_version) try {
        var n2,
          r2 = null == (n2 = window.browser) ? void 0 : n2.app_version.split(".");
        return ye(parseInt(r2[r2.length - 1]), e2) > -1;
      } catch (e3) {}
      return false;
    },
    we = "--- This API does not support using in {{env}}.",
    Le = we.replace(/{{env}}/, "half-h5"),
    Oe = we.replace(/{{env}}/, "full-h5"),
    Ee = we.replace(/{{env}}/, "the current environment"),
    ke = "--- {{app}} version is too low, please upgrade to the latest version.".replace(/{{app}}/, "pcLink"),
    Ae = I("appCached", {
      state: /* @__PURE__ */new WeakMap()
    }),
    xe = function xe(e2, t2, n2) {
      var r2 = Ae.state.get(e2);
      if (void 0 !== r2 || (Ae.state.set(e2, r2 = /* @__PURE__ */new Map()), void 0 !== n2)) {
        var a2 = r2.get(t2);
        if (void 0 === a2) {
          if (void 0 === n2) return;
          r2.set(t2, a2 = n2);
        }
        return a2;
      }
    },
    Ne = function Ne(e2, t2) {
      return function (e3, t3) {
        return void 0 !== xe(e3, t3);
      }(e2, t2) && Ae.state["delete"](e2);
    };
  function Se(e2) {
    return void 0 === e2 && (e2 = {
      name: "anonymous"
    }), function (t2, n2) {
      return function (r2) {
        if (!t2.name && !e2.name) {
          var a2 = "Please don't use anonymous functions.";
          throw O(a2, "memory"), new Error(a2);
        }
        if ("enabled" in e2 || (e2.enabled = y().enableMemory), e2.enabled) {
          var i2 = e2.ns + "_" + [JSON.stringify(null != r2 ? r2 : {})].join(""),
            o2 = function (e3, t3) {
              return xe(e3, t3);
            }(t2, i2);
          return void 0 !== o2 && E((e2.name || t2.name) + " API hit cache.", "memory", o2), void 0 === o2 && (o2 = function (e3, t3, n3) {
            return xe(t3, n3, e3);
          }(n2.apply(t2, [r2]), t2, i2)), w(r2, o2);
        }
        return n2.apply(t2, [r2]);
      };
    };
  }
  var Ce = function Ce(e2) {
    return Pe() ? vt(e2) : Promise.reject(ke);
  };
  function Me() {
    return Me = Object.assign ? Object.assign.bind() : function (e2) {
      for (var t2 = 1; t2 < arguments.length; t2++) {
        var n2 = arguments[t2];
        for (var r2 in n2) ({}).hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
      }
      return e2;
    }, Me.apply(null, arguments);
  }
  function Re(e2) {
    var t2,
      n2,
      r2,
      a2 = Me({}, e2.params);
    Object.keys(a2).forEach(function (e3) {
      "function" == typeof a2[e3] && (a2[e3] = "function");
    }), null == (t2 = window) || null == (t2 = t2.__MIRROR_REPORT__) || t2.techReportPb({
      type: "custom",
      eventId: "awesome.api.pv",
      msg: {
        method: e2.method,
        params: e2.params,
        env: null == (n2 = self.__awesome) || null == (n2 = n2.reportConfig) ? void 0 : n2.env,
        appInfo: null == (r2 = self.__awesome) || null == (r2 = r2.reportConfig) ? void 0 : r2.appInfo
      },
      otherSpmId: "444.208"
    });
  }
  var Be = "WEBROOMBRIDGELISTENERTYPE",
    Te = "WEBROOMBRIDGEPOSTMESSAGE",
    We = "WEBROOMBRIDGEONMESSAGE",
    Ve = function e2() {
      var t2 = this;
      if (this.callbacks = [], this.queen = [], this.hasInit = false, this.targetWindow = null, this.initing = false, this.init = n$1(c$1.mark(function e3() {
        var n2, r2, a2, i2, o2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (!t2.hasInit && !t2.initing) {
                e4.next = 2;
                break;
              }
              return e4.abrupt("return");
            case 2:
              return t2.initing = true, e4.next = 5, t2.getTargetWindow();
            case 5:
              for (window.addEventListener("message", function (e5) {
                var n3 = e5.data || {};
                if ("string" == typeof n3 && ("string" != typeof n3 || -1 !== n3.indexOf(We))) try {
                  var r3 = JSON.parse(n3);
                  if (r3.type !== We) return;
                  t2.onMessage(r3);
                } catch (e6) {
                  console.error(e6);
                }
              }); t2.queen.length > 0;) n2 = t2.queen.shift(), a2 = n2.params, i2 = n2.callbackId, o2 = n2.type, "checkPCRoom" === (r2 = n2.method) ? t2.onMessage({
                type: Te,
                callbackId: i2,
                data: {
                  isPCRoom: true
                },
                code: 0
              }) : t2.postMessage(r2, i2, a2, o2);
              t2.hasInit = true, t2.initing = false;
            case 9:
            case "end":
              return e4.stop();
          }
        }, e3);
      })), this.callWebRoom = function () {
        var e3 = n$1(c$1.mark(function e4(n2, r2) {
          var a2;
          return c$1.wrap(function (e5) {
            for (;;) switch (e5.prev = e5.next) {
              case 0:
                return void 0 === r2 && (r2 = {}), Re({
                  method: "callWebRoom",
                  params: {
                    method: n2,
                    params: r2
                  }
                }), a2 = t2.generateCallbackId(), t2.hasInit ? t2.postMessage(n2, a2, r2, Te) : (t2.queen.push({
                  method: n2,
                  params: r2,
                  type: Te,
                  callbackId: a2
                }), t2.init()), e5.abrupt("return", new Promise(function (e6, r3) {
                  t2.callbacks.push({
                    id: a2,
                    method: n2,
                    type: Te,
                    cb: {
                      resolve: e6,
                      reject: r3
                    }
                  });
                }));
              case 5:
              case "end":
                return e5.stop();
            }
          }, e4);
        }));
        return function (t3, n2) {
          return e3.apply(this, arguments);
        };
      }(), this.onMessage = function (e3) {
        var n2 = e3.callbackId,
          r2 = e3.data,
          a2 = e3.code,
          i2 = e3.message,
          o2 = t2.callbacks.findIndex(function (e4) {
            return e4.id === n2;
          });
        if (-1 !== o2) {
          var s2,
            u2,
            c2,
            l2 = t2.callbacks[o2];
          if (0 !== a2) l2.type === Te && (null == l2 || null == (s2 = l2.cb) || s2.reject({
            code: a2,
            data: r2,
            message: i2 || "error"
          }));else if (l2.type === Te) null == l2 || null == (u2 = l2.cb) || u2.resolve(r2);else null == l2 || null == (c2 = l2.cb) || c2.func(r2);
          l2.type === Te && t2.callbacks.splice(o2, 1);
        }
      }, this.postMessage = function (e3, n2, r2, a2) {
        t2.targetWindow && t2.targetWindow.postMessage(JSON.stringify({
          method: e3,
          callbackId: n2,
          params: r2,
          type: a2
        }), "*");
      }, this.addWebRoomListener = function (e3, n2, r2) {
        Re({
          method: "addWebRoomListener",
          params: {
            method: e3,
            listener: n2,
            params: r2
          }
        });
        var a2 = t2.generateCallbackId();
        t2.hasInit ? t2.postMessage(e3, a2, r2, Be) : (t2.queen.push({
          callbackId: a2,
          method: e3,
          params: r2,
          callback: n2,
          type: Be
        }), t2.init()), t2.callbacks.push({
          id: a2,
          method: e3,
          type: Be,
          cb: {
            func: n2
          }
        });
      }, this.removeWebRoomListener = function (e3, n2) {
        Re({
          method: "removeWebRoomListener",
          params: {
            method: e3,
            listener: n2
          }
        });
        var r2 = t2.callbacks.findIndex(function (t3) {
          var r3;
          return (null == (r3 = t3.cb) ? void 0 : r3.func) === n2 && t3.method === e3;
        });
        if (-1 !== r2) {
          var a2 = t2.callbacks.splice(r2, 1);
          t2.callWebRoom("removeListener", {
            callbackId: a2[0].callbackId
          });
        }
      }, this.generateCallbackId = function () {
        return (/* @__PURE__ */new Date()).getTime() + "" + Math.floor(1e5 * Math.random());
      }, this.getTargetWindow = function () {
        return new Promise(function (e3, n2) {
          if (t2.targetWindow) return t2.targetWindow;
          var _r2 = function r2(n3) {
            var a3 = n3.data || {};
            "string" == typeof a3 && -1 !== a3.indexOf(We) && (t2.targetWindow = n3.source, window.removeEventListener("message", _r2), e3(true));
          };
          window.addEventListener("message", _r2);
          var a2 = 0;
          try {
            for (var i2 = window; a2 < 5 && i2 !== i2.parent;) a2++, (i2 = i2.parent).postMessage(JSON.stringify({
              method: "checkPCRoom",
              callbackId: t2.generateCallbackId(),
              params: {},
              type: Te
            }), "*");
          } catch (e4) {
            n2(e4);
          }
          setTimeout(function () {
            window.removeEventListener("message", _r2), t2.targetWindow || (n2("timeout"), console.log("getTargetWindow timeout"));
          }, 200);
        });
      }, "object" == _typeof4(e2._instance)) return e2._instance;
      this.init(), e2._instance = this;
    };
  Ve._instance = null;
  var je = new Ve(),
    Fe = je.callWebRoom,
    Ye = je.addWebRoomListener;
  je.removeWebRoomListener;
  function Ke() {
    return Se({
      ns: "os",
      name: "getEnvSync"
    })(Ke, function () {
      var e2,
        t2 = navigator.userAgent,
        n2 = RegExp(/BiliApp/).test(t2),
        r2 = n2 && RegExp(/biliLink/).test(t2),
        a2 = n2 && !r2,
        i2 = RegExp(/pc_app\/livehime/).test(t2) || (null == (e2 = window) || null == (e2 = e2.browser) || null == (e2 = e2.version) ? void 0 : e2.pc_link);
      return a2 && Qe.PINK || r2 && Qe.BLINK || i2 && Qe.PC_LINK || qe(true) && Qe.PC_ROOM || qe(false) && Qe.PC_MF_ROOM || Qe.UNKNOWN;
    })();
  }
  function Ue() {
    return He.apply(this, arguments);
  }
  function He() {
    return (He = n$1(c$1.mark(function e2() {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return e3.abrupt("return", Se({
              ns: "os",
              name: "getEnvAsync"
            })(Ue, n$1(c$1.mark(function e4() {
              var t2, n2, r2, a2, i2, o2;
              return c$1.wrap(function (e5) {
                for (;;) switch (e5.prev = e5.next) {
                  case 0:
                    if (n2 = navigator.userAgent, r2 = RegExp(/BiliApp/).test(n2), a2 = r2 && RegExp(/biliLink/).test(n2), i2 = r2 && !a2, o2 = RegExp(/pc_app\/livehime/).test(n2) || (null == (t2 = window) || null == (t2 = t2.browser) || null == (t2 = t2.version) ? void 0 : t2.pc_link), e5.t2 = i2 && Qe.PINK || a2 && Qe.BLINK || o2 && Qe.PC_LINK, e5.t2) {
                      e5.next = 13;
                      break;
                    }
                    return e5.next = 9, Ge(true);
                  case 9:
                    if (e5.t3 = e5.sent, !e5.t3) {
                      e5.next = 12;
                      break;
                    }
                    e5.t3 = Qe.PC_ROOM;
                  case 12:
                    e5.t2 = e5.t3;
                  case 13:
                    if (e5.t1 = e5.t2, e5.t1) {
                      e5.next = 16;
                      break;
                    }
                    e5.t1 = qe(false) && Qe.PC_MF_ROOM;
                  case 16:
                    if (e5.t0 = e5.t1, e5.t0) {
                      e5.next = 19;
                      break;
                    }
                    e5.t0 = Qe.UNKNOWN;
                  case 19:
                    return e5.abrupt("return", e5.t0);
                  case 20:
                  case "end":
                    return e5.stop();
                }
              }, e4);
            })))());
          case 1:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function qe(e2) {
    var t2;
    if (!e2) return !(null == (t2 = window) || null == (t2 = t2.BilibiliLive) || !t2.INIT_TIME);
    var n2 = 1,
      r2 = window,
      a2 = false;
    try {
      for (; r2 !== window.top && n2 < 5;) {
        var i2;
        if (null != (i2 = r2) && null != (i2 = i2.parent) && null != (i2 = i2.BilibiliLive) && i2.INIT_TIME) {
          a2 = true;
          break;
        }
        r2 = r2.parent, n2++;
      }
    } catch (e3) {
      O('If the iframe subpage has cross domain, you need to set the document in<head> domain = "live.bilibili.com".', "getEnvSync");
    }
    return a2;
  }
  function Ge(e2) {
    return De.apply(this, arguments);
  }
  function De() {
    return (De = n$1(c$1.mark(function e2(t2) {
      var n2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            if (t2) {
              e3.next = 2;
              break;
            }
            return e3.abrupt("return", !(null == (n2 = window) || null == (n2 = n2.BilibiliLive) || !n2.INIT_TIME));
          case 2:
            if (window !== window.top) {
              e3.next = 4;
              break;
            }
            return e3.abrupt("return", false);
          case 4:
            return e3.abrupt("return", new Promise(function (e4) {
              var t3 = false;
              Fe("checkPCRoom").then(function (n3) {
                t3 = true, e4(null == n3 ? void 0 : n3.isPCRoom);
              })["catch"](function () {
                t3 = true, e4(false);
              }), setTimeout(function () {
                t3 || (e4(false), console.log("checkPCRoomAsync timeout"));
              }, 200);
            }));
          case 5:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  var ze,
    Qe = function (e2) {
      return e2[e2.PINK = 1] = "PINK", e2[e2.BLINK = 2] = "BLINK", e2[e2.PC_LINK = 3] = "PC_LINK", e2[e2.PC_ROOM = 4] = "PC_ROOM", e2[e2.PC_MF_ROOM = 5] = "PC_MF_ROOM", e2[e2.UNKNOWN = -1] = "UNKNOWN", e2;
    }({}),
    $e = ((ze = {
      H5RegExp: /phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/
    }).is = function (e2, t2, n2) {
      return void 0 === t2 && (t2 = "i"), void 0 === n2 && (n2 = navigator.userAgent), new RegExp(e2, t2).test(n2);
    }, ze.isIOS = function () {
      return Se({
        ns: "os",
        name: "isIOS"
      })($e.isIOS, function () {
        return $e.is(/iphone|ipad|ipod/);
      })();
    }, ze.isIphone = function () {
      return Se({
        ns: "os",
        name: "isIphone"
      })($e.isIphone, function () {
        return $e.is(/iphone/);
      })();
    }, ze.isIpad = function () {
      return Se({
        ns: "os",
        name: "isIpad"
      })($e.isIpad, function () {
        return $e.is(/ipad/);
      })();
    }, ze.isAndroid = function () {
      return Se({
        ns: "os",
        name: "isAndroid"
      })($e.isAndroid, $e.is)(/android/);
    }, ze.isApp = function () {
      return Se({
        ns: "os",
        name: "isApp"
      })($e.isApp, $e.is)(/BiliApp/);
    }, ze.isPC = function () {
      return Se({
        ns: "os",
        name: "isPC"
      })($e.isPC, function () {
        return !$e.is($e.H5RegExp) && !$e.is(/BiliApp/);
      })();
    }, ze.isPcApp = function () {
      return Se({
        ns: "os",
        name: "isPcApp"
      })($e.isPcApp, function () {
        try {
          var e2;
          return "object" == _typeof4(null == (e2 = window) || null == (e2 = e2.top) ? void 0 : e2.biliBridgePc);
        } catch (e3) {
          return false;
        }
      })();
    }, ze.isH5 = function () {
      return Se({
        ns: "os",
        name: "isH5"
      })($e.isH5, function () {
        return $e.is($e.H5RegExp);
      })();
    }, ze.isHarmonyOS = function () {
      return Se({
        ns: "os",
        name: "isHarmonyOS"
      })($e.isHarmonyOS, function () {
        return $e.is(/Harmony/) && $e.is(/ArkWeb/);
      })();
    }, ze),
    Xe = function (e2) {
      return e2.isIOS = "isIOS", e2.isIphone = "isIphone", e2.isIpad = "isIpad", e2.isAndroid = "isAndroid", e2.isApp = "isApp", e2.isPC = "isPC", e2.isPcApp = "isPcApp", e2.isH5 = "isH5", e2.isHarmonyOS = "isHarmonyOS", e2;
    }({});
  function Ze() {
    return {
      is: $e.is,
      get isIOS() {
        return $e[Xe.isIOS]();
      },
      get isIphone() {
        return $e[Xe.isIphone]();
      },
      get isIpad() {
        return $e[Xe.isIpad]();
      },
      get isAndroid() {
        return $e[Xe.isAndroid]();
      },
      get isApp() {
        return $e[Xe.isApp]();
      },
      get isPC() {
        return $e[Xe.isPC]();
      },
      get isPcApp() {
        return $e[Xe.isPcApp]();
      },
      get isH5() {
        return $e[Xe.isH5]();
      },
      get isHarmonyOS() {
        return $e[Xe.isHarmonyOS]();
      }
    };
  }
  function et(e2, t2) {
    return arguments.length < 2 ? m[e2] : m[e2] && m[e2][t2];
  }
  var _tt = function tt() {
    var e2 = Ze(),
      t2 = e2.isH5,
      n2 = e2.isPC,
      r2 = e2.isPcApp,
      a2 = e2.isApp,
      i2 = Ke(),
      o2 = Qe.PC_ROOM === i2,
      s2 = Qe.PC_LINK === i2;
    return "function" == typeof _tt && (_tt = {
      version: {
        WEB: (t2 || n2) && !r2 && !o2 && !s2 && !a2,
        PC_APP: r2,
        PC_ROOM: n2 && o2,
        PC_LINK: s2,
        NATIVE: a2
      }
    }), _tt;
  };
  function nt(e2) {
    var t2 = e2.namespace,
      n2 = e2.method,
      r2 = e2.useNative,
      a2 = e2.usePolyfill,
      i2 = void 0 !== a2 && a2;
    return function (e3) {
      if (Re({
        method: n2,
        params: e3
      }), true === self.__AWESOME_API_POLYFILL_COMPILER__ && false !== i2) for (var a3 = et.call(null, "POLYFILL"), o2 = function o2(e4) {
          var t3;
          E("use " + n2 + " polyfill in " + e4.method + ".", "polyfill");
          var r3 = null == a3 || null == (t3 = a3[e4.method]) ? void 0 : t3[n2];
          return "function" != typeof r3 ? Promise.reject("--- The current environment is missing {{method}} polyfill.".replace(/{{method}}/, n2) + " please check whether it has been imported.") : Promise.resolve().then(function () {
            return null == r3 ? void 0 : r3(e4.data);
          });
        }, s2 = ("function" == typeof _tt ? _tt() : _tt).version, u2 = Object.keys(s2).reverse(), c2 = u2.length - 1; c2;) {
        var l2 = u2[c2];
        if (s2[l2] && (true === i2 || i2 && i2.includes(l2))) return o2({
          method: l2,
          data: e3
        });
        c2--;
      }
      if (r2) {
        var f2 = n2 ? et.call(null, t2, n2) : et.call(null, t2);
        return void 0 === f2 && (null == r2 || r2.call(r2), f2 = n2 ? et.call(null, t2, n2) : et.call(null, t2)), "function" == typeof f2 ? f2.call(null, e3) : f2;
      }
      throw new Error(Ee);
    };
  }
  function rt(e2, t2) {
    return function () {
      for (var n2 = arguments.length, r2 = new Array(n2), a2 = 0; a2 < n2; a2++) r2[a2] = arguments[a2];
      return e2.apply(t2, r2);
    };
  }
  function at() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      isSupport: vt
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      isSupport: Ce
    });
  }
  var it = function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "isSupport",
              useNative: at
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  }();
  function st(e2) {
    return void 0 === e2 && (e2 = {}), Se({
      ns: "os",
      name: "getWebviewType"
    })(st, function () {
      var e3 = n$1(c$1.mark(function e4(t2) {
        var n2, r2, a2, i2, o2, s2;
        return c$1.wrap(function (e5) {
          for (;;) switch (e5.prev = e5.next) {
            case 0:
              return e5.next = 2, Ue();
            case 2:
              if (r2 = e5.sent, a2 = null == (n2 = window.navigator) || null == (n2 = n2.userAgent) ? void 0 : n2.includes("wbType/common"), i2 = a2 ? ct.COMMON : ct.UNKNOWN, ![Qe.PINK, Qe.BLINK].includes(r2) || a2) {
                e5.next = 19;
                break;
              }
              return e5.prev = 6, e5.next = 9, it({
                method: "live_info_half.getEssential"
              });
            case 9:
              return o2 = e5.sent, e5.next = 12, it({
                method: "live_info_full.getEssential"
              });
            case 12:
              s2 = e5.sent, i2 = o2 ? ct.HALF : s2 ? ct.FULL : ct.UNKNOWN, e5.next = 19;
              break;
            case 16:
              e5.prev = 16, e5.t0 = e5["catch"](6), console.log(e5.t0);
            case 19:
              return e5.abrupt("return", w(t2, i2));
            case 20:
            case "end":
              return e5.stop();
          }
        }, e4, null, [[6, 16]]);
      }));
      return function (t2) {
        return e3.apply(this, arguments);
      };
    }())(e2);
  }
  var ut = function ut() {
      return Ne(st, "os_{}");
    },
    ct = function (e2) {
      return e2[e2.HALF = 1] = "HALF", e2[e2.FULL = 2] = "FULL", e2[e2.COMMON = 3] = "COMMON", e2[e2.UNKNOWN = -1] = "UNKNOWN", e2;
    }({}),
    lt = ["method"],
    _ft = function ft() {
      return Se({
        ns: "global",
        name: "getAllSupport"
      })(_ft, function () {
        return new Promise(function (e2) {
          oe({
            method: "global.getAllSupport",
            callback: function callback(t2) {
              var n2 = Array.isArray(t2) ? t2 : null == t2 ? void 0 : t2.data;
              e2(n2);
            }
          });
        });
      })();
    },
    _pt = function pt() {
      return Se({
        ns: "global",
        name: "getAllNewChannelSupport"
      })(_pt, function () {
        return new Promise(function () {
          var e2 = n$1(c$1.mark(function e3(t2) {
            return c$1.wrap(function (e4) {
              for (;;) switch (e4.prev = e4.next) {
                case 0:
                  return e4.next = 2, st();
                case 2:
                  e4.sent !== ct.COMMON ? t2([]) : le("global.getAllSupport", {}).then(function (e5) {
                    var n2;
                    t2(Array.isArray(e5) ? e5 : (null == e5 || null == (n2 = e5.data) ? void 0 : n2.methods) || []);
                  })["catch"](function () {
                    t2([]);
                  });
                case 4:
                case "end":
                  return e4.stop();
              }
            }, e3);
          }));
          return function (t2) {
            return e2.apply(this, arguments);
          };
        }());
      })();
    },
    dt = function dt() {
      return Ne(_ft, "global_{}");
    };
  function vt(e2) {
    return _t.apply(this, arguments);
  }
  function _t() {
    return (_t = n$1(c$1.mark(function t2(n2) {
      var r2, a2, i2, o2;
      return c$1.wrap(function (t3) {
        for (;;) switch (t3.prev = t3.next) {
          case 0:
            return r2 = n2.method, a2 = e$1(n2, lt), t3.next = 3, _ft();
          case 3:
            return o2 = (null == (i2 = t3.sent) ? void 0 : i2.indexOf(r2)) >= 0, t3.abrupt("return", w(a2, Promise.resolve(o2)));
          case 6:
          case "end":
            return t3.stop();
        }
      }, t2);
    }))).apply(this, arguments);
  }
  var ht = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (!Pe()) {
                e4.next = 4;
                break;
              }
              return n2 = t2.success, t2.success = function (e5) {
                dt(), null == n2 || n2(e5);
              }, e4.abrupt("return", Ie({
                method: "global.import"
              })(t2));
            case 4:
              return e4.abrupt("return", Promise.reject(ke));
            case 5:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    mt = function (e2) {
      return e2[e2.GUEST = 1] = "GUEST", e2[e2.MASTER = 2] = "MASTER", e2[e2.PC_LINK_BANNER = 3] = "PC_LINK_BANNER", e2[e2.PC_LINK_PROJECTION = 4] = "PC_LINK_PROJECTION", e2[e2.UNKNOWN = -1] = "UNKNOWN", e2;
    }({});
  function bt(e2) {
    return gt.apply(this, arguments);
  }
  function gt() {
    return gt = n$1(c$1.mark(function e2(t2) {
      var r2, a2, i2, o2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return void 0 === t2 && (t2 = {}), r2 = Ke(), a2 = mt.UNKNOWN, e3.prev = 3, e3.next = 6, st();
          case 6:
            if (e3.sent !== ct.HALF) {
              e3.next = 26;
              break;
            }
            if (r2 !== Qe.PINK) {
              e3.next = 25;
              break;
            }
            return e3.next = 11, xt({
              namespace: "live_room_half"
            });
          case 11:
            return e3.next = 13, new Promise(function () {
              var e4 = n$1(c$1.mark(function e5(t3) {
                return c$1.wrap(function (e6) {
                  for (;;) switch (e6.prev = e6.next) {
                    case 0:
                      return e6.next = 2, it({
                        method: "live_room_half.getRoomInfo"
                      });
                    case 2:
                      e6.sent || t3(mt.UNKNOWN), oe({
                        method: "live_room_half.getRoomInfo",
                        success: function success(e7) {
                          E("getBusinessFromRoomInfo:", "getBusinessState", e7), t3("isLiveRoomForUser" in ((null == e7 ? void 0 : e7.data) || {}) ? e7.data.isLiveRoomForUser ? mt.GUEST : mt.MASTER : mt.UNKNOWN);
                        }
                      });
                    case 5:
                    case "end":
                      return e6.stop();
                  }
                }, e5);
              }));
              return function (t3) {
                return e4.apply(this, arguments);
              };
            }());
          case 13:
            if ((i2 = e3.sent) === mt.UNKNOWN) {
              e3.next = 18;
              break;
            }
            a2 = i2, e3.next = 23;
            break;
          case 18:
            return e3.next = 20, it({
              method: "live_room_half.openGiftPanel"
            });
          case 20:
            E("getBusinessState isRoom", "getBusinessState", o2 = e3.sent), a2 = o2 ? mt.GUEST : mt.MASTER;
          case 23:
            e3.next = 26;
            break;
          case 25:
            r2 === Qe.BLINK && (a2 = mt.MASTER);
          case 26:
            e3.next = 30;
            break;
          case 28:
            e3.prev = 28, e3.t0 = e3["catch"](3);
          case 30:
            return e3.abrupt("return", w(t2, a2));
          case 31:
          case "end":
            return e3.stop();
        }
      }, e2, null, [[3, 28]]);
    })), gt.apply(this, arguments);
  }
  function It(e2) {
    return yt.apply(this, arguments);
  }
  function yt() {
    return (yt = n$1(c$1.mark(function e2(t2) {
      var n2, r2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            void 0 === t2 && (t2 = {}), n2 = mt.UNKNOWN;
            try {
              Pe(2103) || O(ke, "getBusinessState"), n2 = "projection" === (null == (r2 = window.browser) ? void 0 : r2.pc_link_scene) ? mt.PC_LINK_PROJECTION : mt.PC_LINK_BANNER;
            } catch (e4) {}
            return e3.abrupt("return", w(t2, n2));
          case 4:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function Pt() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      getBusinessState: bt
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      getBusinessState: It
    }), "PC_ROOM" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      getBusinessState: function getBusinessState() {
        return mt.GUEST;
      }
    });
  }
  function wt(e2) {
    return Lt.apply(this, arguments);
  }
  function Lt() {
    return (Lt = n$1(c$1.mark(function e2(t2) {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return void 0 === t2 && (t2 = {}), e3.next = 3, En();
          case 3:
            return e3.abrupt("return", Se({
              ns: "os",
              name: "getBusinessState"
            })(wt, nt({
              namespace: "NATIVE",
              method: "getBusinessState",
              useNative: Pt
            }))(t2));
          case 4:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  var Ot = function Ot() {
      return Ne(wt, "os_{}");
    },
    Et = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return n2 = t2.success, t2.success = function (e5) {
                dt(), Ot(), ut(), null == n2 || n2(e5);
              }, Ke() !== Qe.BLINK && Ke() !== Qe.PINK || (dt(), Ot(), ut()), E("importNamespace", "importNamespace", t2), e4.abrupt("return", Ie({
                method: "global.import"
              })(t2));
            case 5:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }();
  function kt() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      importNamespace: Et
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      importNamespace: ht
    });
  }
  var At = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, En();
            case 2:
              return e4.abrupt("return", nt({
                namespace: "NATIVE",
                method: "importNamespace",
                useNative: kt
              })(t2));
            case 3:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    xt = function xt(e2) {
      return rt(At)(e2);
    },
    Nt = function Nt(e2) {
      var t2 = "",
        n2 = true;
      for (var r2 in e2) {
        var a2 = r2 + "=" + e2[r2];
        n2 || (a2 = "&" + a2), t2 += a2, n2 = false;
      }
      return t2;
    },
    St = function St(e2) {
      var t2,
        n2 = {},
        r2 = ["href", "origin", "protocol", "host", "hostname", "port", "pathname", "search", "hash"],
        a2 = /(([^:]+:)\/\/(([^:\/\?#]+)(:\d+)?))(\/[^?#]*)?(\?[^#]*)?(#.*)?/.exec(e2);
      if (a2) for (t2 = r2.length - 1; t2 >= 0; --t2) n2[r2[t2]] = a2[t2] ? a2[t2] : "";
      return n2;
    },
    Ct = function Ct(e2) {
      var t2 = St(e2).search.match(/\?(.*)/),
        n2 = {};
      return t2 && (n2 = function (e3) {
        for (var t3, n3 = {}, r2 = /([^&]*)=([^&]*)/g; t3 = r2.exec(e3);) {
          var a2 = t3[1],
            i2 = t3[2];
          n3[a2] ? (n3[a2] = Array.isArray(n3[a2]) ? n3[a2] : [n3[a2]], n3[a2].push(i2)) : n3[a2] = i2;
        }
        return n3;
      }(t2[1])), n2;
    };
  function Mt() {
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e2) {
      var t2 = 16 * Math.random() | 0;
      return ("x" === e2 ? t2 : 3 & t2 | 8).toString(16);
    });
  }
  function Rt(e2) {
    Re({
      method: "callNative",
      params: e2
    }), E("CallingNative Args", "callNative", e2), Object.assign(e2.data = e2.data || {}, {
      bridgeReportURL: "undefined" != typeof window ? encodeURIComponent(window.location.href) : "",
      bridgeReportUUID: Mt()
    }), me.callNative(e2);
  }
  var Bt = function Bt(e2) {
      return function () {
        return k(Rt)({
          method: e2.method
        });
      };
    },
    Tt = function Tt() {
      return Pe() ? Bt({
        method: "live_ui.pageFinished"
      })() : Bt({
        method: "live_ui_half.pageFinished"
      })();
    },
    Wt = "1" === Ct(window.location.href).is_live_half_webview,
    Vt = function Vt() {
      return Wt ? "half" : "full";
    },
    jt = function jt() {
      if ("full" === Vt()) throw new Error(Oe);
      return Bt({
        method: "live_ui_half.pageFinished"
      })();
    };
  function Ft() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      postNaHalfIsNormal: jt
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      postNaHalfIsNormal: Tt
    });
  }
  var Yt = function () {
      var e2 = n$1(c$1.mark(function e3() {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, En();
            case 2:
              return e4.abrupt("return", nt({
                namespace: "NATIVE",
                method: "postNaHalfIsNormal",
                usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK"],
                useNative: Ft
              })());
            case 3:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function () {
        return e2.apply(this, arguments);
      };
    }(),
    Jt = ["autoPostNaHalfIsNormal"],
    Kt = function Kt(t2) {
      var n2 = t2.newConfig,
        r2 = t2.App,
        a2 = n2.autoPostNaHalfIsNormal,
        i2 = void 0 === a2 || a2,
        o2 = e$1(n2, Jt);
      if (ae(), r2.isReady || (r2.isReady = true), i2) {
        var s2 = Ct(window.location.href).pc_ui;
        if (s2) {
          var u2 = s2.split(",");
          (!u2[3] || "0" === u2[3]) && Yt();
        }
      }
      try {
        Promise.all(["live_stream"].map(function (e2) {
          return At({
            namespace: e2
          });
        })), E("initEnv LiveBridge pcLink.", "initial"), r2.initialized = true, r2.isReady = false;
      } catch (e2) {
        console.log(e2);
      }
      return w(o2, r2.initialized);
    },
    Ut = function Ut(e2) {
      if (Re({
        method: "hideCloseBtnByHalf",
        params: e2
      }), "full" === Vt()) throw new Error(Oe);
      return k(Rt)({
        method: "live_ui_half.controlCloseBtn",
        data: {
          show: 0
        },
        fail: function fail(t2) {
          null == e2 || null == e2.fail || e2.fail(t2);
        },
        callback: function callback(t2) {
          null == e2 || null == e2.success || e2.success(t2);
        }
      });
    },
    Ht = ["ns", "autoPostNaHalfIsNormal"],
    qt = Vt(),
    Gt = "full" === qt,
    Dt = "half" === qt,
    zt = function () {
      var e2 = n$1(c$1.mark(function e3(t2, n2) {
        var r2, a2, i2, o2, s2, u2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (r2 = [], t2.isReady) {
                e4.next = 24;
                break;
              }
              if (t2.isReady = true, a2 = ["live_info_half", "live_pay_half", "live_cache_half", "live_network_half", "live_ui_half", "live_location_half", "live_room_half", "live_center_half"], i2 = ["live_hime"], o2 = ["live_stream_half", "live_room_half"], s2 = [].concat(["live_info_full", "live_pay_full", "live_cache_full", "live_network_full", "live_ui_full", "live_location_full"]), u2 = [].concat(a2), e4.t0 = Ke() === Qe.BLINK, e4.t0) {
                e4.next = 19;
                break;
              }
              if (e4.t1 = Ke() === Qe.PINK, !e4.t1) {
                e4.next = 18;
                break;
              }
              return e4.next = 15, wt();
            case 15:
              e4.t2 = e4.sent, e4.t3 = mt.MASTER, e4.t1 = e4.t2 === e4.t3;
            case 18:
              e4.t0 = e4.t1;
            case 19:
              if (!e4.t0) {
                e4.next = 22;
                break;
              }
              s2 = s2.concat(i2), u2 = u2.concat(o2);
            case 22:
              Gt ? r2 = s2 : Dt && (r2 = u2), "string" == typeof n2 ? r2 = [n2] : Array.isArray(n2) && (r2 = n2);
            case 24:
              return e4.prev = 24, e4.next = 27, $t(r2);
            case 27:
              Promise.all(e4.sent.map(function (e5) {
                return At({
                  namespace: e5
                });
              })), E("initEnv LiveBridge" + (Gt ? "Full" : "Half") + ".", "initial"), t2.initialized = true, t2.isReady = false, e4.next = 37;
              break;
            case 34:
              e4.prev = 34, e4.t4 = e4["catch"](24), console.log(e4.t4);
            case 37:
            case "end":
              return e4.stop();
          }
        }, e3, null, [[24, 34]]);
      }));
      return function (t2, n2) {
        return e2.apply(this, arguments);
      };
    }(),
    Qt = function () {
      var t2 = n$1(c$1.mark(function t3(n2) {
        var r2, a2, i2, o2, s2, u2, l2, f2, p2;
        return c$1.wrap(function (t4) {
          for (;;) switch (t4.prev = t4.next) {
            case 0:
              return a2 = n2.App, i2 = (r2 = n2.newConfig).ns, s2 = void 0 === (o2 = r2.autoPostNaHalfIsNormal) || o2, u2 = e$1(r2, Ht), ae(), window.__custom_cookie = window.__custom_cookie || {}, s2 && Dt && (l2 = Ct(window.location.href).hybrid_half_ui) && (f2 = l2.split(","), p2 = "1" === f2[9], (!f2[5] || "0" === f2[5]) && p2 && Ut()), zt(a2, i2), t4.abrupt("return", w(u2, a2.initialized));
            case 7:
            case "end":
              return t4.stop();
          }
        }, t3);
      }));
      return function (e2) {
        return t2.apply(this, arguments);
      };
    }(),
    $t = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2, r2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, _ft();
            case 2:
              return n2 = new Set(e4.sent.map(function (e5) {
                return e5.split(".")[0];
              })), r2 = [], t2.forEach(function (e5) {
                n2.has(e5) || r2.push(e5);
              }), e4.abrupt("return", r2);
            case 7:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }();
  function Xt(e2, t2) {
    var n2 = Me({}, e2);
    return Array.isArray(t2) && t2.forEach(function (e3) {
      delete n2[e3];
    }), n2;
  }
  var Zt = {
    resolveFn: ["callback"],
    rejectFn: ["fail", "failed"]
  };
  function en(e2, t2, n2, r2) {
    for (var a2 = {}, i2 = Array.isArray(e2) ? e2 : [e2], o2 = i2.length; o2--;) {
      a2[i2[o2]] = function (e3, a3) {
        var i3,
          o3 = "function" == typeof r2 ? r2(e3, a3) : e3;
        null == n2 || n2(o3), null == t2 || null == (i3 = t2[a3]) || i3.call(t2, o3);
      };
    }
    return a2;
  }
  function tn(e2) {
    return void 0 === e2 && (e2 = {}), function (t2) {
      return function (e3, t3) {
        void 0 === e3 && (e3 = {});
        var n2 = Me({}, Zt, e3),
          r2 = n2.resolveFn,
          a2 = n2.rejectFn,
          i2 = n2.transformResolve,
          o2 = n2.transformReject;
        return function (e4) {
          var n3 = this;
          return new Promise(function (s2, u2) {
            var c2 = en(r2, e4, s2, i2),
              l2 = en(a2, e4, u2, o2),
              f2 = Object.assign({}, e4 || {}, c2, l2);
            t3.call(n3, f2);
          });
        };
      }(Me({}, Zt, e2), t2);
    };
  }
  function nn(e2, t2) {
    return rn.apply(this, arguments);
  }
  function rn() {
    return (rn = n$1(c$1.mark(function e2(t2, n2) {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return void 0 === n2 && (n2 = "success"), e3.next = 3, tn({
              resolveFn: n2
            })(oe)({
              method: t2
            });
          case 3:
            return e3.abrupt("return", an(e3.sent));
          case 5:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function an(e2) {
    if ("string" == typeof e2) try {
      e2 = JSON.parse(e2);
    } catch (e3) {}
    return e2;
  }
  var on = function on() {
      var e2 = Ke();
      return {
        SDKVersion: v,
        pixelRatio: window.devicePixelRatio,
        screenWidth: window.screen.width,
        screenHeight: window.screen.height,
        windowWidth: window.innerWidth,
        windowHeight: window.innerHeight,
        platform: navigator.platform,
        environment: e2,
        webviewType: -1,
        businessState: -1,
        platformId: 0
      };
    },
    sn = ["method"];
  function un(e2) {
    return cn.apply(this, arguments);
  }
  function cn() {
    return (cn = n$1(c$1.mark(function t2(n2) {
      var r2, a2, i2, o2, s2, u2;
      return c$1.wrap(function (t3) {
        for (;;) switch (t3.prev = t3.next) {
          case 0:
            return r2 = n2.method, a2 = e$1(n2, sn), t3.next = 3, _ft();
          case 3:
            return o2 = (null == (i2 = t3.sent) ? void 0 : i2.indexOf(r2)) >= 0, t3.next = 7, _pt();
          case 7:
            return u2 = (null == (s2 = t3.sent) ? void 0 : s2.indexOf(r2)) >= 0, t3.abrupt("return", w(a2, Promise.resolve({
              isSupport: o2,
              isNewChannelSupport: u2
            })));
          case 10:
          case "end":
            return t3.stop();
        }
      }, t2);
    }))).apply(this, arguments);
  }
  var ln = function ln(e2) {
    return Pe() ? un(e2) : Promise.reject(ke);
  };
  function fn() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      isSupportV2: un
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      isSupportV2: ln
    });
  }
  var pn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, En();
            case 2:
              return e4.abrupt("return", nt({
                namespace: "NATIVE",
                method: "isSupportV2",
                useNative: fn
              })(t2));
            case 3:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    dn = function dn(e2) {
      return rt(pn)(e2);
    };
  function vn(e2) {
    return _n.apply(this, arguments);
  }
  function _n() {
    return (_n = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2, i2, o2, s2, u2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return void 0 === t2 && (t2 = {}), n2 = on(), e3.prev = 2, e3.next = 5, st();
          case 5:
            return E("getSystemInfo webviewType", "getSystemInfo", r2 = e3.sent), e3.next = 9, wt();
          case 9:
            return E("getSystemInfo businessState", "getSystemInfo", a2 = e3.sent), e3.next = 13, hn(r2);
          case 13:
            return E("getSystemInfo getContainerInfo", "getSystemInfo", i2 = e3.sent), e3.next = 17, mn();
          case 17:
            E("getSystemInfo essentialInfo", "getSystemInfo", o2 = e3.sent), s2 = function s2() {
              return "version" in i2 ? i2.version : "appVersion" in o2 ? o2.appVersion : "version" in o2 ? o2.version : "build" in o2 ? o2.build.slice(0, 1) + "." + o2.build.slice(1, 3) + "." + Number(o2.build.slice(3, 5)) : "";
            }, Object.assign(n2, {
              brand: i2.brand ? i2.brand : i2.deviceName.replace(i2.modelName, ""),
              model: i2.modelName,
              version: s2(),
              system: i2.platform + " " + i2.osVer,
              platform: i2.platform,
              name: o2.appName,
              build: o2.appBuild || o2.build,
              webviewType: r2,
              businessState: a2,
              paySdkVersion: o2.paySdkVersion,
              extInfo: {
                foreground: o2.foreground,
                background: o2.background,
                time: +o2.time,
                isReview: o2.isReview,
                rawData: JSON.stringify(o2)
              },
              containerInfo: Me({}, Xt(i2, ["brand", "deviceName", "modelName", "osVer", "platform", "statusBarHeight", "build"]), {
                rawData: JSON.stringify(i2)
              })
            }), "statusBar" in o2 && (n2.statusBarHeight = o2.statusBar), !n2.statusBarHeight && "statusBarHeight" in i2 && (n2.statusBarHeight = i2.statusBarHeight), "safeArea" in o2 && (u2 = o2.safeArea.split(","), n2.safeArea = {
              top: +u2[0],
              right: +u2[1],
              bottom: +u2[2],
              left: +u2[3]
            }), e3.next = 28;
            break;
          case 26:
            e3.prev = 26, e3.t0 = e3["catch"](2);
          case 28:
            return E("getSystemInfo systemInfo", "getSystemInfo", n2), e3.abrupt("return", w(t2, Promise.resolve(n2)));
          case 30:
          case "end":
            return e3.stop();
        }
      }, e2, null, [[2, 26]]);
    }))).apply(this, arguments);
  }
  var hn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (t2 !== ct.COMMON) {
                e4.next = 7;
                break;
              }
              return e4.next = 3, le("global.getContainerInfo");
            case 3:
              return e4.abrupt("return", e4.sent.data);
            case 7:
              return e4.next = 9, nn("global.getContainerInfo", "callback");
            case 9:
              return e4.abrupt("return", e4.sent);
            case 10:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    mn = function () {
      var e2 = n$1(c$1.mark(function e3() {
        var t2, n2, r2, a2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, pn({
                method: "live_info_full.getEssential"
              });
            case 2:
              if (n2 = (t2 = e4.sent).isSupport, !t2.isNewChannelSupport) {
                e4.next = 11;
                break;
              }
              return e4.next = 8, le("live_info_full.getEssential");
            case 8:
            case 14:
            case 23:
            case 29:
              return e4.abrupt("return", e4.sent);
            case 11:
              if (!n2) {
                e4.next = 15;
                break;
              }
              return e4.next = 14, nn("live_info_full.getEssential", "success");
            case 15:
              return e4.next = 17, pn({
                method: "live_info_half.getEssential"
              });
            case 17:
              if (a2 = (r2 = e4.sent).isSupport, !r2.isNewChannelSupport) {
                e4.next = 26;
                break;
              }
              return e4.next = 23, le("live_info_half.getEssential");
            case 26:
              if (!a2) {
                e4.next = 30;
                break;
              }
              return e4.next = 29, nn("live_info_half.getEssential", "success");
            case 30:
              return e4.abrupt("return", {});
            case 31:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function () {
        return e2.apply(this, arguments);
      };
    }();
  function bn(e2) {
    return gn.apply(this, arguments);
  }
  function gn() {
    return (gn = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return void 0 === t2 && (t2 = {}), n2 = on(), e3.prev = 2, e3.next = 5, Promise.resolve().then(function () {
              return uaParser9a55bc2f;
            });
          case 5:
            r2 = new e3.sent.UAParser().getResult(), (a2 = r2.os).name && a2.version && (n2.name = a2.name, n2.version = a2.version, n2.system = a2.name + " " + a2.version), e3.next = 13;
            break;
          case 11:
            e3.prev = 11, e3.t0 = e3["catch"](2);
          case 13:
            return e3.abrupt("return", w(t2, Promise.resolve(Me({}, n2))));
          case 14:
          case "end":
            return e3.stop();
        }
      }, e2, null, [[2, 11]]);
    }))).apply(this, arguments);
  }
  function In(e2) {
    return yn.apply(this, arguments);
  }
  function yn() {
    return (yn = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            if (void 0 === t2 && (t2 = {}), !Pe()) {
              e3.next = 16;
              break;
            }
            return n2 = on(), e3.prev = 3, e3.next = 6, wt();
          case 6:
            return r2 = e3.sent, e3.next = 9, nn("global.getContainerInfo", "callback");
          case 9:
            a2 = e3.sent, Object.assign(n2, {
              brand: "",
              model: "",
              version: a2.appVersion,
              system: a2.platform + " " + a2.osVersion,
              platform: a2.platform,
              name: "",
              build: +a2.appBuild,
              webviewType: -1,
              businessState: r2,
              extInfo: {
                time: +a2.time,
                rawData: JSON.stringify(a2)
              },
              containerInfo: Me({}, Xt(a2, ["appVersion", "osVersion", "platform", "navBarHeight", "time", "appBuild"]), {
                rawData: JSON.stringify(a2)
              }),
              statusBarHeight: a2.navBarHeight
            }), e3.next = 15;
            break;
          case 13:
            e3.prev = 13, e3.t0 = e3["catch"](3);
          case 15:
            return e3.abrupt("return", w(t2, Promise.resolve(n2)));
          case 16:
            return e3.abrupt("return", Promise.reject(ke));
          case 17:
          case "end":
            return e3.stop();
        }
      }, e2, null, [[3, 13]]);
    }))).apply(this, arguments);
  }
  function Pn() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      getSystemInfo: vn
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      getSystemInfo: In
    }), "WEB" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_ROOM" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      getSystemInfo: bn
    });
  }
  var wn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, En();
            case 2:
              return e4.abrupt("return", nt({
                namespace: "NATIVE",
                method: "getSystemInfo",
                useNative: Pn
              })(t2));
            case 3:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    Ln = ["enableDebug", "enableMemory", "warnHandler"],
    On = function On() {};
  function En(e2) {
    return kn.apply(this, arguments);
  }
  function kn() {
    return (kn = n$1(c$1.mark(function t2(n2) {
      var r2, a2, i2, o2, s2, u2, l2, f2, p2;
      return c$1.wrap(function (t3) {
        for (;;) switch (t3.prev = t3.next) {
          case 0:
            if (void 0 === n2 && (n2 = {
              enableDebug: false,
              enableMemory: true,
              autoPostNaHalfIsNormal: true
            }), !On.initialized) {
              t3.next = 3;
              break;
            }
            return t3.abrupt("return", w(n2, On.initialized));
          case 3:
            if (!On.isReady) {
              t3.next = 5;
              break;
            }
            return t3.abrupt("return", new Promise(function (e2) {
              On.queue.push(function () {
                e2(En(n2));
              });
            }));
          case 5:
            if (i2 = void 0 !== (a2 = (r2 = n2).enableDebug) && a2, s2 = void 0 === (o2 = r2.enableMemory) || o2, u2 = r2.warnHandler, l2 = e$1(r2, Ln), void 0 !== n2 && P({
              enableDebug: !!i2,
              enableMemory: !!s2,
              warnHandler: u2
            }), (f2 = Ke()) !== Qe.PC_LINK) {
              t3.next = 12;
              break;
            }
            self.__AWESOME_API_POLYFILL_COMPILER__ = "PC_LINK", t3.next = 20;
            break;
          case 12:
            if (f2 !== Qe.BLINK && f2 !== Qe.PINK) {
              t3.next = 16;
              break;
            }
            self.__AWESOME_API_POLYFILL_COMPILER__ = "NATIVE", t3.next = 20;
            break;
          case 16:
            return t3.next = 18, Ue();
          case 18:
            self.__AWESOME_API_POLYFILL_COMPILER__ = t3.sent === Qe.PC_ROOM ? "PC_ROOM" : "WEB";
          case 20:
            if (E("awesomeApi current_env:" + f2 + ",compiler:" + self.__AWESOME_API_POLYFILL_COMPILER__, "initial"), !On.isReady && !On.initialized) {
              t3.next = 25;
              break;
            }
            return E("The bridge " + (On.isReady ? "is being" : "has been") + " registered, please do not register again.", "initial"), t3.abrupt("return", w(l2, !On.isReady && On.initialized));
          case 25:
            if (t3.prev = 25, "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__) {
              t3.next = 29;
              break;
            }
            return t3.next = 29, Qt({
              newConfig: n2,
              App: On
            });
          case 29:
            if ("PC_LINK" !== self.__AWESOME_API_POLYFILL_COMPILER__) {
              t3.next = 32;
              break;
            }
            return t3.next = 32, Kt({
              newConfig: n2,
              App: On
            });
          case 32:
            t3.next = 36;
            break;
          case 34:
            t3.prev = 34, t3.t0 = t3["catch"](25);
          case 36:
            return t3.prev = 36, On.initialized = true, On.isReady = false, t3.next = 41, wn();
          case 41:
            for (p2 = t3.sent, self.__awesome && Object.assign(self.__awesome, {
              reportConfig: {
                env: Qe[f2],
                appInfo: {
                  version: p2.version,
                  build: p2.build,
                  platform: p2.platform,
                  system: p2.system,
                  name: p2.name,
                  brand: p2.brand,
                  model: p2.model
                }
              }
            }), Re({
              method: "initial",
              params: n2
            }); On.queue.length > 0;) On.queue.shift()();
            t3.next = 50;
            break;
          case 47:
            t3.prev = 47, t3.t1 = t3["catch"](36), console.log(t3.t1);
          case 50:
            return t3.abrupt("return", w(l2, On.initialized));
          case 51:
          case "end":
            return t3.stop();
        }
      }, t2, null, [[25, 34], [36, 47]]);
    }))).apply(this, arguments);
  }
  On.isReady = false, On.initialized = false, On.queue = [];
  var An = ["old", "compare"],
    xn = {
      ">": 1,
      "<": -1,
      "=": 0,
      ">=": 2,
      "<=": -2
    };
  function Nn() {
    return Sn.apply(this, arguments);
  }
  function Sn() {
    return (Sn = n$1(c$1.mark(function e2() {
      var t2, n2, r2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return e3.next = 2, tn()(Rt)({
              method: "global.getContainerInfo"
            });
          case 2:
            return e3.abrupt("return", {
              type: null != (t2 = (r2 = e3.sent).mobi_app) ? t2 : r2.platform,
              build: null != (n2 = r2.build) ? n2 : r2.appBuild
            });
          case 4:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  var Cn = function Cn(t2) {
    return function (n2) {
      var r2 = n2.old,
        a2 = n2.compare,
        i2 = void 0 === a2 ? 1 : a2,
        o2 = e$1(n2, An),
        s2 = Array.isArray(r2) ? r2 : [r2],
        u2 = false;
      try {
        for (var c2 = 0; c2 < s2.length;) {
          var l2 = s2[c2];
          if (t2.type === l2.type) {
            var f2 = ye(t2.build, l2.build),
              p2 = "string" == typeof i2 ? xn[i2] : i2;
            if (2 === p2) {
              u2 = 1 === f2 || 0 === f2;
              break;
            }
            if (-2 === p2) {
              u2 = -1 === f2 || 0 === f2;
              break;
            }
            u2 = f2 === p2;
            break;
          }
          c2++;
        }
      } catch (e2) {
        console.log(e2);
      }
      return w(o2, Promise.resolve(u2));
    };
  };
  function Mn(e2) {
    return Rn.apply(this, arguments);
  }
  function Rn() {
    return (Rn = n$1(c$1.mark(function e2(t2) {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return void 0 === t2 && (t2 = {
              old: [],
              compare: 1
            }), e3.next = 3, Nn();
          case 3:
            return e3.abrupt("return", Cn(e3.sent)(t2));
          case 5:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function Bn(e2) {
    return Tn.apply(this, arguments);
  }
  function Tn() {
    return (Tn = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2, i2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            if (void 0 === t2 && (t2 = {
              old: [],
              compare: 1
            }), !Pe()) {
              e3.next = 6;
              break;
            }
            return e3.next = 4, Nn();
          case 4:
            return e3.abrupt("return", Cn(e3.sent)(t2));
          case 6:
            if (null == (n2 = window.browser) || !n2.app_version) {
              e3.next = 15;
              break;
            }
            return e3.prev = 7, a2 = null == (r2 = window.browser) ? void 0 : r2.app_version.split("."), i2 = parseInt(a2[a2.length - 1]), e3.abrupt("return", Cn({
              type: "pc_link",
              build: i2
            })(t2));
          case 13:
            e3.prev = 13, e3.t0 = e3["catch"](7);
          case 15:
            return e3.abrupt("return", Promise.reject(ke));
          case 16:
          case "end":
            return e3.stop();
        }
      }, e2, null, [[7, 13]]);
    }))).apply(this, arguments);
  }
  function Wn() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      checkVersion: Mn
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      checkVersion: Bn
    });
  }
  var Vn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, En();
            case 2:
              return e4.abrupt("return", Se({
                ns: "global",
                name: "checkVersion"
              })(Vn, nt({
                namespace: "NATIVE",
                method: "checkVersion",
                useNative: Wn
              }))(t2));
            case 3:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    jn = ["success", "fail"],
    Fn = function Fn(t2) {
      return function () {
        var r2 = n$1(c$1.mark(function n2(r3) {
          var a2, i2, o2, s2;
          return c$1.wrap(function (n3) {
            for (;;) switch (n3.prev = n3.next) {
              case 0:
                if (a2 = r3.success, i2 = r3.fail, o2 = e$1(r3, jn), n3.t0 = "live_room_half.receiveBroadcast" === (null == t2 ? void 0 : t2.method), !n3.t0) {
                  n3.next = 8;
                  break;
                }
                return n3.next = 5, st();
              case 5:
                n3.t1 = n3.sent, n3.t2 = ct.COMMON, n3.t0 = n3.t1 === n3.t2;
              case 8:
                if (!n3.t0) {
                  n3.next = 12;
                  break;
                }
                fe("liveRoomHalf.receiveBroadcast", function (e2) {
                  if (0 === e2.code) try {
                    var t3,
                      n4 = JSON.parse((null == e2 || null == (t3 = e2.data) ? void 0 : t3.result) || "{}");
                    null == a2 || a2(n4);
                  } catch (e3) {
                    console.log("receiveBroadcastHOC: JSON.parse error");
                  }
                }, Me({}, o2)), n3.next = 13;
                break;
              case 12:
                return n3.abrupt("return", k(Rt)({
                  method: null != (s2 = null == t2 ? void 0 : t2.method) ? s2 : "live_stream.receiveBroadcast",
                  data: o2,
                  success: function success(e2) {
                    return null == a2 ? void 0 : a2(e2);
                  },
                  fail: function fail(e2) {
                    return null == i2 ? void 0 : i2(e2);
                  }
                }));
              case 13:
              case "end":
                return n3.stop();
            }
          }, n2);
        }));
        return function (e2) {
          return r2.apply(this, arguments);
        };
      }();
    },
    Yn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (!Pe()) {
                e4.next = 2;
                break;
              }
              return e4.abrupt("return", Fn({
                method: "live_stream.receiveBroadcast"
              })(Me({}, t2, {
                type: Mt()
              })));
            case 2:
              return e4.abrupt("return", Promise.reject(ke));
            case 3:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    Jn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2, r2, a2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return r2 = Ke(), e4.next = 3, wt();
            case 3:
              return a2 = e4.sent, r2 === Qe.PINK && (n2 = "live_room_half.receiveBroadcast"), (r2 === Qe.BLINK || r2 === Qe.PINK && a2 === mt.MASTER) && (n2 = "live_stream_half.receiveBroadcast"), e4.abrupt("return", Fn({
                method: n2
              })(Xt(t2, ["type"])));
            case 7:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    Kn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, Ue();
            case 2:
              if (e4.sent === Qe.PC_ROOM) {
                e4.next = 5;
                break;
              }
              return e4.abrupt("return", null);
            case 5:
              return Ye("receiveBroadcast", t2.success, {
                cmd: t2.cmd
              }), e4.abrupt("return", Fn({
                method: void 0
              })(Xt(t2, ["type"])));
            case 7:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }();
  function Un() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      receiveBroadcast: Jn
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      receiveBroadcast: Yn
    }), "PC_ROOM" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      receiveBroadcast: Kn
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "receiveBroadcast",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK"],
              useNative: Un
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  var Dn = function (e2) {
      return e2[e2.h5 = 0] = "h5", e2[e2["native"] = 1] = "native", e2[e2.half = 2] = "half", e2[e2.invalid = -1] = "invalid", e2;
    }({}),
    zn = function zn(e2) {
      if (/miniapp.bilibili.com/.test(e2)) return 1;
      var t2 = Ct(e2),
        n2 = e2.match(/(\w+):\/\/([^/:]+)(:\d*)?/);
      if (n2) {
        var r2 = n2[1],
          a2 = ["http", "https"].includes(r2),
          i2 = !["http", "https", ""].includes(r2) && !a2;
        return a2 && "1" === t2.is_live_half_webview ? 2 : i2 ? 1 : a2 ? 0 : -1;
      }
      return -1;
    },
    Qn = function (e2) {
      return e2[e2.LivePage = 0] = "LivePage", e2[e2.BlancLivePage = 1] = "BlancLivePage", e2[e2.PlayerPage = 2] = "PlayerPage", e2[e2.SpacePage = 3] = "SpacePage", e2;
    }(Qn || {}),
    $n = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2, r2, a2, i2, o2, s2, u2, l2, f2, p2, d2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, Promise.resolve().then(function () {
                return biliBridge_min04ad1937;
              });
            case 2:
              if (i2 = e4.sent.callNative, o2 = new URL(t2.url), s2 = o2.hostname, u2 = o2.pathname.match(/^([\w/]*)\/(\w+)\/*$/)) {
                e4.next = 10;
                break;
              }
              return e4.abrupt("return", false);
            case 10:
              if (l2 = null != (n2 = u2[1]) ? n2 : "", f2 = null != (r2 = u2[2]) ? r2 : "", p2 = ["live.bilibili.com", "live.bilibili.com/blanc", "www.bilibili.com/video", "space.bilibili.com"].indexOf(s2 + l2), 0 !== s2.indexOf("ff-") && 0 !== s2.indexOf("dev.") || /^(dev\.live)|(ff-(test\d+\.live|dev))\.bilibili\.com(\/blanc)?$/.test(s2 + l2) && (p2 = Qn.LivePage), d2 = true, !(p2 > -1 && f2)) {
                e4.next = 39;
                break;
              }
              e4.prev = 17, e4.t0 = p2, e4.next = e4.t0 === Qn.LivePage || e4.t0 === Qn.BlancLivePage ? 21 : e4.t0 === Qn.PlayerPage ? 23 : e4.t0 === Qn.SpacePage ? 26 : 29;
              break;
            case 21:
              return null == (a2 = window) || null == (a2 = a2.top) || a2.postMessage({
                type: "roomIdChange",
                roomId: f2
              }, "*"), e4.abrupt("break", 31);
            case 23:
              return e4.next = 25, i2("window/openPlayerWindow", {
                type: "ugc",
                bvid: f2
              });
            case 25:
              return e4.abrupt("break", 31);
            case 26:
              return e4.next = 28, i2("window/openMainWindowPage", {
                page: "SpacePage",
                meta: {
                  mid: f2
                }
              });
            case 28:
              return e4.abrupt("break", 31);
            case 29:
              return d2 = false, e4.abrupt("break", 31);
            case 31:
              e4.next = 37;
              break;
            case 33:
              e4.prev = 33, e4.t1 = e4["catch"](17), d2 = false;
            case 37:
              e4.next = 40;
              break;
            case 39:
              d2 = false;
            case 40:
              return e4.abrupt("return", d2);
            case 41:
            case "end":
              return e4.stop();
          }
        }, e3, null, [[17, 33]]);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    Xn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (e4.t0 = "h5" !== (null == t2 ? void 0 : t2.jumpType), !e4.t0) {
                e4.next = 5;
                break;
              }
              return e4.next = 4, $n(t2);
            case 4:
              e4.t0 = e4.sent;
            case 5:
              if (!e4.t0) {
                e4.next = 7;
                break;
              }
              return e4.abrupt("return", Promise.resolve(true));
            case 7:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    Zn = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, Ue();
            case 2:
              if (n2 = e4.sent, !("h5" === t2.jumpType || "half" === t2.openType || t2.url.indexOf("is_live_half_webview=1") > -1) || n2 !== Qe.PC_ROOM) {
                e4.next = 8;
                break;
              }
              return e4.abrupt("return", Fe("openFrame", {
                url: t2.url,
                title: t2.title || "哔哩哔哩直播"
              }));
            case 8:
              t2.replace ? window.location.replace(t2.url) : window.open(t2.url);
            case 9:
              return e4.abrupt("return", Promise.resolve(true));
            case 10:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    er = function er(e2) {
      return function (t2) {
        var n2;
        return k(Rt)({
          method: null != (n2 = null == e2 ? void 0 : e2.method) ? n2 : "live_location.closeWindow",
          callback: function callback() {
            return null == t2 || null == t2.success ? void 0 : t2.success();
          },
          fail: function fail(e3) {
            return null == t2 || null == t2.fail ? void 0 : t2.fail(e3);
          }
        });
      };
    },
    tr = function tr(e2) {
      return Pe() ? er()(e2) : er({
        method: "live_location_half.closeWindow"
      })(e2);
    },
    nr = function () {
      var e2 = n$1(c$1.mark(function e3() {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, Ue();
            case 2:
              if (e4.sent !== Qe.PC_ROOM) {
                e4.next = 7;
                break;
              }
              return e4.abrupt("return", Fe("closeFrame"));
            case 7:
              window.close();
            case 8:
              return e4.abrupt("return", Promise.resolve(true));
            case 9:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function () {
        return e2.apply(this, arguments);
      };
    }(),
    rr = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, st();
            case 2:
              if ((n2 = e4.sent) !== ct.HALF) {
                e4.next = 7;
                break;
              }
              return e4.abrupt("return", er({
                method: "live_location_half.closeWindow"
              })(t2));
            case 7:
              if (n2 !== ct.FULL) {
                e4.next = 11;
                break;
              }
              return e4.abrupt("return", er({
                method: "live_location_full.back"
              })(t2));
            case 11:
              if (n2 !== ct.COMMON) {
                e4.next = 15;
                break;
              }
              return e4.abrupt("return", le("global.closeBrowser", {}));
            case 15:
              return e4.abrupt("return", er({
                method: "global.closeBrowser"
              })(t2));
            case 16:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }();
  function ar() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      closeView: rr
    }), "WEB" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_ROOM" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_APP" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      closeView: nr
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      closeView: tr
    });
  }
  var ir = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, En();
            case 2:
              return e4.abrupt("return", nt({
                namespace: "NATIVE",
                method: "closeView",
                useNative: ar
              })(t2));
            case 3:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    or = function or(e2) {
      return function (t2) {
        var n2,
          r2 = t2.fail,
          a2 = t2.success,
          i2 = t2.onClose,
          o2 = {
            method: null != (n2 = null == e2 ? void 0 : e2.method) ? n2 : "live_location.forward",
            data: {
              type: t2.jumpType,
              topage: t2.url
            },
            fail: function fail(e3) {
              null == r2 || r2(e3);
            },
            callback: function callback(e3) {
              null == a2 || a2(e3), t2.replace && ir();
            },
            success: function success() {
              return null == i2 ? void 0 : i2();
            }
          };
        return k(Rt)(o2);
      };
    };
  function sr(e2, t2) {
    var n2 = e2.url.startsWith("bililive://"),
      r2 = "bililive://blink/open_browser",
      a2 = "bililive://blink/open_web",
      i2 = function i2() {
        return e2.jumpType ? {
          h5: 3,
          "native": 2,
          browser: 1
        }[e2.jumpType] : void 0;
      };
    if (e2.url.startsWith(a2) || e2.url.startsWith(r2)) {
      var o2,
        s2 = Ct(e2.url),
        u2 = St(e2.url),
        c2 = u2.origin,
        l2 = u2.pathname,
        f2 = null != (o2 = s2.h5_link_type) ? o2 : i2();
      s2.h5_link_type && delete s2.h5_link_type, e2.url = c2 + l2 + "?" + Nt(s2) + "&h5_link_type=" + f2, e2.url = e2.url.replace(a2, r2);
    } else !n2 && t2 && (e2.url = r2 + "?url=" + encodeURIComponent(e2.url) + "&h5_link_type=" + i2());
    return e2;
  }
  var ur = function ur(e2) {
      return Pe() ? function (e3) {
        var t2 = e3.onClose;
        if (!e3.jumpType) {
          var n2 = zn(e3.url);
          e3.jumpType = Dn[n2];
        }
        if ("h5" === e3.jumpType && void 0 !== e3.navbarStyle && 2 !== e3.navbarStyle) {
          var r2 = e3.navbarStyle + 2,
            a2 = Ct(e3.url),
            i2 = a2.pc_ui;
          if (i2) {
            var o2 = i2.split(",");
            o2[3] = r2.toString(), a2.pc_ui = o2.join(",");
            var s2 = new URL(e3.url);
            e3.url = decodeURIComponent(s2.origin + s2.pathname + "?" + Nt(a2) + s2.hash);
          }
        }
        return e3.onClose = function () {
          "h5" === e3.jumpType && (null == t2 || t2());
        }, or()(sr(e3));
      }(e2) : Pe(3869) ? function (e3) {
        if (!e3.jumpType) {
          var t2 = zn(e3.url);
          e3.jumpType = Dn[t2];
        }
        var n2 = sr(e3, true),
          r2 = n2.replace,
          a2 = n2.url,
          i2 = n2.fail,
          o2 = n2.success;
        return k(Rt)({
          method: "live_arouse_pc_link_module",
          data: {
            params: a2,
            moduleName: "open_in_app",
            closeCurrent: r2 ? 1 : 0
          },
          fail: function fail(e4) {
            null == i2 || i2(e4);
          },
          callback: function callback(e4) {
            null == o2 || o2(e4);
          }
        });
      }(e2) : Promise.reject(ke);
    },
    cr = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2, r2, a2, i2, o2, s2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, st();
            case 2:
              return n2 = e4.sent === ct.HALF ? "half" : "full", a2 = void 0 === (r2 = t2.navbarStyle) ? 0 : r2, "browser" === t2.jumpType && (t2.jumpType = "h5"), t2.jumpType || (i2 = zn(t2.url), t2.jumpType = Dn[i2]), 0 !== a2 && ((o2 = Ct(t2.url)).hybrid_set_header = a2.toString(), s2 = new URL(t2.url), t2.url = decodeURIComponent(s2.origin + s2.pathname + "?" + Nt(o2) + s2.hash)), e4.abrupt("return", or({
                method: "live_location_" + n2 + ".forward"
              })(t2));
            case 9:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    lr = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2, r2, a2, i2, o2, s2, u2, l2, f2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return n2 = t2.fail, r2 = t2.success, a2 = t2.onClose, e4.next = 3, st();
            case 3:
              if (i2 = e4.sent === ct.HALF ? "half" : "full", void 0 !== t2.is_cling_player && ((o2 = Ct(t2.url)).is_cling_player = o2.is_cling_player ? "0" : "1", s2 = new URL(t2.url), t2.url = decodeURIComponent(s2.origin + s2.pathname + "?" + Nt(o2) + s2.hash)), 2 === zn(t2.url)) {
                e4.next = 9;
                break;
              }
              return e4.abrupt("return", Promise.reject("invalid url."));
            case 9:
              return u2 = "live_room_" + i2 + ".openHalfWebView", e4.next = 12, it({
                method: u2
              });
            case 12:
              return (l2 = e4.sent) || (u2 = "live_location_" + i2 + ".forward"), f2 = {
                method: u2,
                data: {
                  url: t2.url
                },
                fail: function fail(e5) {
                  null == n2 || n2(e5);
                },
                callback: function callback(e5) {
                  null == r2 || r2(e5), t2.replace && ir();
                },
                success: function success() {
                  return null == a2 ? void 0 : a2();
                }
              }, l2 || (Reflect.deleteProperty(f2.data, "url"), Reflect.set(f2.data, "type", "half"), Reflect.set(f2.data, "topage", t2.url)), e4.abrupt("return", k(Rt)(f2));
            case 17:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    fr = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return n2 = "live_hime.openBlinkScheme", e4.next = 3, st();
            case 3:
              return "half" === (e4.sent === ct.HALF ? "half" : "full") && (n2 = "live_stream_half.open_in_app"), e4.next = 8, it({
                method: n2
              });
            case 8:
              if (!e4.sent) {
                e4.next = 10;
                break;
              }
              return e4.abrupt("return", k(Rt)({
                method: n2,
                data: {
                  url: t2.url
                }
              }));
            case 10:
              return e4.abrupt("return", -1);
            case 11:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    pr = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2, r2, a2, i2, o2, s2, u2, l2, f2, p2, d2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return n2 = t2.url.startsWith("bililive://blink"), e4.next = 3, st();
            case 3:
              if (r2 = e4.sent, !n2) {
                e4.next = 10;
                break;
              }
              return e4.next = 7, fr(t2);
            case 7:
              if (-1 === e4.sent) {
                e4.next = 10;
                break;
              }
              return e4.abrupt("return", Promise.resolve(true));
            case 10:
              return a2 = r2 === ct.HALF ? "half" : "full", e4.next = 13, it({
                method: "live_location_" + a2 + ".forward"
              });
            case 13:
              if (!e4.sent) {
                e4.next = 25;
                break;
              }
              if (i2 = t2.openType, o2 = Ct(t2.url), i2 || (i2 = "1" === o2.is_live_half_webview ? "half" : "full"), s2 = St(t2.url), u2 = s2.origin, l2 = s2.pathname, f2 = s2.hash, "full" !== i2) {
                e4.next = 22;
                break;
              }
              return o2.is_live_half_webview && (o2.is_live_half_webview = "0"), t2.url = u2 + l2 + "?" + Nt(o2) + f2, e4.abrupt("return", cr(t2));
            case 22:
              return o2.is_live_half_webview || (o2.is_live_half_webview = "1"), t2.url = u2 + l2 + "?" + Nt(o2) + f2, e4.abrupt("return", lr(t2));
            case 25:
              return e4.next = 27, pn({
                method: "ability.openScheme"
              });
            case 27:
              if (d2 = (p2 = e4.sent).isSupport, !p2.isNewChannelSupport) {
                e4.next = 32;
                break;
              }
              return e4.abrupt("return", le("ability.openScheme", {
                url: t2.url
              }));
            case 32:
              if (!d2) {
                e4.next = 34;
                break;
              }
              return e4.abrupt("return", k(Rt)({
                method: "ability.openScheme",
                data: {
                  url: t2.url
                }
              }));
            case 34:
              return e4.abrupt("return", Zn(t2));
            case 35:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }();
  function dr() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      openView: pr
    }), "WEB" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_ROOM" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      openView: Zn
    }), "PC_APP" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      openView: Xn
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      openView: ur
    });
  }
  var vr = function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            if (/^[a-z]+:\/\/(.*)/.test(t2.url) || (t2.url = t2.url.replace("//", ""), t2.url = "https://" + t2.url), -1 !== zn(t2.url)) {
              e4.next = 6;
              break;
            }
            return e4.abrupt("return", Promise.reject("invalid url."));
          case 6:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "openView",
              useNative: dr
            })(t2));
          case 7:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  }();
  function Ir(e2, t2) {
    return 0 === e2.lastIndexOf(t2, 0);
  }
  function yr(e2, t2) {
    var n2 = Pr(),
      r2 = n2.namespace,
      a2 = n2.split,
      i2 = n2.keyWhiteList,
      o2 = n2.keyBlackList,
      s2 = function (e3, t3) {
        return Ir(e3, t3) ? e3.substring(t3.length) : e3;
      }(e2, r2),
      u2 = function u2(e3) {
        return e3.replace(/\./gi, null != t2 ? t2 : a2);
      };
    return function (e3, t3) {
      return "string" == typeof t3 && (null == e3 ? void 0 : e3.some(function (e4) {
        return "string" == typeof e4 ? -1 !== t3.indexOf(e4) : t3.match(e4);
      }));
    }(o2, e2) || i2.length && -1 === (null == i2 ? void 0 : i2.indexOf(e2)) ? u2(e2) : u2(function (e3, t3) {
      return Ir(e3, t3) ? e3 : "" + t3 + e3;
    }(s2, r2));
  }
  function Pr() {
    return I("appStorageSetting", {
      namespace: "",
      split: ".",
      keyWhiteList: [],
      keyBlackList: []
    });
  }
  var Vr = function Vr(e2) {
      return function (t2) {
        var n2,
          r2 = t2.msg,
          a2 = t2.type,
          i2 = t2.success,
          o2 = t2.fail;
        return k(Rt)({
          method: null != (n2 = null == e2 ? void 0 : e2.method) ? n2 : "live_ui.toast",
          data: {
            msg: r2,
            type: a2 || "short"
          },
          fail: function fail(e3) {
            null == o2 || o2(e3);
          },
          callback: function callback(e3) {
            null == i2 || i2(e3);
          }
        });
      };
    },
    jr = function jr(e2) {
      return Pe() ? Vr()(e2) : Promise.reject(ke);
    },
    Fr = function Fr(e2) {
      return Vr({
        method: "live_ui_" + Vt() + ".toast"
      })(e2);
    };
  function Yr() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      showToast: Fr
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      showToast: jr
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "showToast",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK"],
              useNative: Yr
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  var Kr = function Kr(e2) {
      return function (t2) {
        var n2;
        if ("half" === Vt()) throw new Error(Le);
        return k(Rt)({
          method: null != (n2 = null == e2 ? void 0 : e2.method) ? n2 : "live_ui.titleBar",
          data: {
            display: 0
          },
          callback: function callback() {
            return null == t2 || null == t2.success ? void 0 : t2.success();
          },
          fail: function fail(e3) {
            return null == t2 || null == t2.fail ? void 0 : t2.fail(e3);
          }
        });
      };
    },
    Ur = function Ur(e2) {
      return Kr({
        method: "live_ui.titleBar"
      })(e2);
    },
    Hr = function Hr(e2) {
      return Kr({
        method: "live_ui_" + Vt() + ".titleBar"
      })(e2);
    };
  function qr() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      hideNavigationBar: Hr
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      hideNavigationBar: Ur
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "hideNavigationBar",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK"],
              useNative: qr
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  function Dr(e2, t2) {
    var n2 = "undefined" != typeof Symbol && e2[Symbol.iterator] || e2["@@iterator"];
    if (n2) return (n2 = n2.call(e2)).next.bind(n2);
    if (Array.isArray(e2) || (n2 = function (e3, t3) {
      if (e3) {
        if ("string" == typeof e3) return zr(e3, t3);
        var n3 = {}.toString.call(e3).slice(8, -1);
        return "Object" === n3 && e3.constructor && (n3 = e3.constructor.name), "Map" === n3 || "Set" === n3 ? Array.from(e3) : "Arguments" === n3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? zr(e3, t3) : void 0;
      }
    }(e2)) || t2 && e2 && "number" == typeof e2.length) {
      n2 && (e2 = n2);
      var r2 = 0;
      return function () {
        return r2 >= e2.length ? {
          done: true
        } : {
          done: false,
          value: e2[r2++]
        };
      };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  function zr(e2, t2) {
    (null == t2 || t2 > e2.length) && (t2 = e2.length);
    for (var n2 = 0, r2 = Array(t2); n2 < t2; n2++) r2[n2] = e2[n2];
    return r2;
  }
  var Qr = function Qr(e2) {
      if (!Pe()) return Promise.reject(ke);
      var t2 = e2.success,
        n2 = e2.fail,
        r2 = $r(e2.items);
      return k(Rt)({
        method: "live_ui.titleBar",
        data: {
          right: r2
        },
        success: function success(e3) {
          var t3 = e3.tagname;
          if (r2 && t3) for (var n3, a2 = Dr(r2); !(n3 = a2()).done;) {
            var i2,
              o2 = n3.value;
            if (o2 && t3 === o2.tagname) null == (i2 = o2.onClick) || i2.call(o2);
          }
        },
        callback: function callback() {
          return null == t2 ? void 0 : t2();
        },
        fail: function fail(e3) {
          return null == n2 ? void 0 : n2(e3);
        }
      });
    },
    $r = function $r(e2) {
      var t2 = [];
      return null == e2 || e2.forEach(function (e3) {
        if (e3) {
          var n2 = e3.url || Xr[e3.tagname || ""],
            r2 = "custom";
          e3.tagname && ["close", "help", "set"].indexOf(e3.tagname) > -1 && (r2 = e3.tagname), t2.find(function (e4) {
            return (null == e4 ? void 0 : e4.tagname) === r2;
          }) || t2.push({
            url: n2,
            tagname: r2,
            text: e3.text,
            onClick: e3.onClick
          });
        }
      }), t2;
    },
    Xr = {
      share: "https://i0.hdslb.com/bfs/live/7a31e08fb841cea4483fecceb74834f6f690224e.png",
      more: "https://i0.hdslb.com/bfs/live/b535f55bc08312913a2f7cdd59bd60ceb1c31637.png",
      notice: "https://i0.hdslb.com/bfs/live/67bdd6014e74af9b568e9fe41f2cf8c46768c717.png",
      calendar: "https://i0.hdslb.com/bfs/live/424d2419410dc060d8e7fad29ed3e7e05a6b2678.png"
    };
  function Zr(e2, t2) {
    var n2 = "undefined" != typeof Symbol && e2[Symbol.iterator] || e2["@@iterator"];
    if (n2) return (n2 = n2.call(e2)).next.bind(n2);
    if (Array.isArray(e2) || (n2 = function (e3, t3) {
      if (e3) {
        if ("string" == typeof e3) return ea(e3, t3);
        var n3 = {}.toString.call(e3).slice(8, -1);
        return "Object" === n3 && e3.constructor && (n3 = e3.constructor.name), "Map" === n3 || "Set" === n3 ? Array.from(e3) : "Arguments" === n3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? ea(e3, t3) : void 0;
      }
    }(e2)) || t2 && e2 && "number" == typeof e2.length) {
      n2 && (e2 = n2);
      var r2 = 0;
      return function () {
        return r2 >= e2.length ? {
          done: true
        } : {
          done: false,
          value: e2[r2++]
        };
      };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  function ea(e2, t2) {
    (null == t2 || t2 > e2.length) && (t2 = e2.length);
    for (var n2 = 0, r2 = Array(t2); n2 < t2; n2++) r2[n2] = e2[n2];
    return r2;
  }
  var ta = function ta(e2) {
      if (!Pe()) return Promise.reject(ke);
      var t2 = e2.title,
        n2 = void 0 === t2 ? "" : t2,
        r2 = e2.titleColor,
        a2 = e2.backgroundColor,
        i2 = e2.leftSlot,
        o2 = void 0 === i2 ? [] : i2,
        s2 = e2.rightSlot,
        u2 = e2.success,
        c2 = e2.fail,
        l2 = $r(void 0 === s2 ? [] : s2),
        f2 = {
          display: 1,
          title: n2,
          style: {},
          icon: na(o2),
          right: l2
        };
      return void 0 !== r2 && (f2.style.titleColor = "" + r2), void 0 !== a2 && (f2.style.backgroundColor = "" + a2), k(Rt)({
        method: "live_ui.titleBar",
        data: f2,
        success: function success(e3) {
          var t3 = e3.tagname;
          if (l2 && t3) for (var n3, r3 = Zr(l2); !(n3 = r3()).done;) {
            var a3,
              i3 = n3.value;
            if (i3 && t3 === i3.tagname) null == (a3 = i3.onClick) || a3.call(i3);
          }
        },
        fail: function fail(e3) {
          return null == c2 ? void 0 : c2(e3);
        },
        callback: function callback() {
          null == u2 || u2();
        }
      });
    },
    na = function na(e2) {
      var t2;
      if (void 0 !== e2) return null != e2 && e2.length ? null == (t2 = e2[0]) ? void 0 : t2.url : "";
    },
    ra = ["title"],
    aa = function () {
      var t2 = n$1(c$1.mark(function t3(n2) {
        var r2, a2;
        return c$1.wrap(function (t4) {
          for (;;) switch (t4.prev = t4.next) {
            case 0:
              return r2 = n2.title, a2 = e$1(n2, ra), t4.next = 3, new Promise(function (e2) {
                setTimeout(function () {
                  document.title = null != r2 ? r2 : document.title, e2("");
                });
              });
            case 3:
              return t4.abrupt("return", w(a2, t4.sent));
            case 5:
            case "end":
              return t4.stop();
          }
        }, t3);
      }));
      return function (e2) {
        return t2.apply(this, arguments);
      };
    }();
  function ia(e2, t2) {
    var n2 = "undefined" != typeof Symbol && e2[Symbol.iterator] || e2["@@iterator"];
    if (n2) return (n2 = n2.call(e2)).next.bind(n2);
    if (Array.isArray(e2) || (n2 = function (e3, t3) {
      if (e3) {
        if ("string" == typeof e3) return oa(e3, t3);
        var n3 = {}.toString.call(e3).slice(8, -1);
        return "Object" === n3 && e3.constructor && (n3 = e3.constructor.name), "Map" === n3 || "Set" === n3 ? Array.from(e3) : "Arguments" === n3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? oa(e3, t3) : void 0;
      }
    }(e2)) || t2 && e2 && "number" == typeof e2.length) {
      n2 && (e2 = n2);
      var r2 = 0;
      return function () {
        return r2 >= e2.length ? {
          done: true
        } : {
          done: false,
          value: e2[r2++]
        };
      };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  function oa(e2, t2) {
    (null == t2 || t2 > e2.length) && (t2 = e2.length);
    for (var n2 = 0, r2 = Array(t2); n2 < t2; n2++) r2[n2] = e2[n2];
    return r2;
  }
  var sa = function sa(e2) {
      var t2;
      if ("half" === Vt()) throw new Error(Le);
      var n2 = e2.success,
        r2 = e2.fail,
        a2 = null == e2 || null == (t2 = e2.items) ? void 0 : t2.slice(0, 2);
      return (null == a2 ? void 0 : a2.length) > 0 && a2.forEach(function (e3) {
        var t3;
        e3.badge = 0 == e3.badge ? "solid" : null == (t3 = e3.badge) ? void 0 : t3.toString();
      }), k(Rt)({
        method: "live_ui_full.setNavMenu",
        data: {
          list: a2
        },
        success: function success(e3) {
          for (var t3, n3 = ia(a2); !(t3 = n3()).done;) {
            var r3,
              i2 = t3.value;
            if (i2 && e3 === i2.tagname) null == (r3 = i2.onClick) || r3.call(i2);
          }
        },
        callback: function callback() {
          return null == n2 ? void 0 : n2();
        },
        fail: function fail(e3) {
          return null == r2 ? void 0 : r2(e3);
        }
      });
    },
    ua$3 = function ua$3(e2) {
      if ("half" === Vt()) throw new Error(Le);
      var t2 = e2.titleColor,
        n2 = e2.backgroundColor,
        r2 = e2.titileColorOpacity,
        a2 = e2.backgroundColorOpacity,
        i2 = e2.showBack,
        o2 = e2.showClose,
        s2 = e2.leftSlot,
        u2 = e2.rightSlot,
        c2 = void 0 === u2 ? [] : u2,
        l2 = e2.success,
        f2 = e2.fail,
        p2 = {
          display: 1,
          title: e2.title,
          style: {},
          left: ca(void 0 === s2 ? [] : s2, void 0 === i2 || i2, e2.backColor, void 0 !== o2 && o2, e2.closeColor),
          right: c2
        };
      return void 0 !== t2 && (p2.style.titleColor = t2 + ", " + (void 0 !== r2 ? r2 : 1)), void 0 !== n2 && (p2.style.backgroundColor = n2 + ", " + (void 0 !== a2 ? a2 : 1)), k(Rt)({
        method: "live_ui_full.titleBar",
        data: p2,
        success: function success(e3) {
          if (["back", "close"].includes(e3) && "back" === e3) return ir();
        },
        fail: function fail(e3) {
          return null == f2 ? void 0 : f2(e3);
        },
        callback: function callback() {
          c2 && sa({
            items: c2
          }), null == l2 || l2();
        }
      });
    },
    ca = function ca(e2, t2, n2, r2, a2) {
      var i2 = [];
      return t2 && i2.push(n2 ? {
        tagname: "back",
        color: n2 + ", 1"
      } : {
        tagname: "back"
      }), r2 && i2.push(a2 ? {
        tagname: "close",
        color: a2 + ", 1"
      } : {
        tagname: "close"
      }), [].concat(i2, e2 || []);
    };
  function la() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      setNavigationBar: ua$3
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      setNavigationBar: ta
    }), "WEB" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      setNavigationBar: aa
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "setNavigationBar",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK", "WEB"],
              useNative: la
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  var pa = ["success", "fail"],
    da = function da(t2) {
      return function (n2) {
        var r2,
          a2 = n2.success,
          i2 = n2.fail,
          o2 = e$1(n2, pa);
        return k(Rt, {
          resolveFn: "success"
        })({
          method: null != (r2 = null == t2 ? void 0 : t2.method) ? r2 : "live_ui.titleBar",
          data: o2,
          callback: function callback() {
            return null == a2 ? void 0 : a2();
          },
          fail: function fail(e2) {
            return null == i2 ? void 0 : i2(e2);
          }
        });
      };
    },
    va = function va(e2) {
      return Pe() ? da()(e2) : Promise.reject(ke);
    },
    _a$1 = ["title"],
    ha = function () {
      var t2 = n$1(c$1.mark(function t3(n2) {
        var r2, a2;
        return c$1.wrap(function (t4) {
          for (;;) switch (t4.prev = t4.next) {
            case 0:
              return r2 = n2.title, a2 = e$1(n2, _a$1), t4.next = 3, new Promise(function (e2) {
                setTimeout(function () {
                  document.title = null != r2 ? r2 : document.title, e2("");
                });
              });
            case 3:
              return t4.abrupt("return", w(a2, t4.sent));
            case 5:
            case "end":
              return t4.stop();
          }
        }, t3);
      }));
      return function (e2) {
        return t2.apply(this, arguments);
      };
    }(),
    ma = function ma(e2) {
      if ("half" === Vt()) throw new Error(Le);
      return da({
        method: "live_ui_full.setTitle"
      })(Xt(e2, ["icon"]));
    };
  function ba() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      setNavigationBarTitle: ma
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      setNavigationBarTitle: va
    }), "WEB" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      setNavigationBarTitle: ha
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "setNavigationBarTitle",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK", "WEB"],
              useNative: ba
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  function Ia() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      setNavigationBarRightSlot: sa
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      setNavigationBarRightSlot: Qr
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "setNavigationBarRightSlot",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK"],
              useNative: Ia
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  var Oa = function Oa(e2) {
    return "Object" === Object.prototype.toString.call(e2).slice(8, -1);
  };
  function Ma(e2, t2) {
    return void 0 === t2 && (t2 = false), t2 ? /^\/\/+/i.test(e2) : /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e2);
  }
  function Ra(e2) {
    var t2, n2;
    e2.baseURL && e2.url && !Ma(e2.url) && (e2.url = (t2 = e2.baseURL, (n2 = e2.url) ? t2.replace(/\/+$/, "") + "/" + n2.replace(/^\/+/, "") : t2)), e2.dependProtocolURL && e2.url && Ma(e2.url, true) && (e2.url = "" + e2.dependProtocolURL + e2.url), e2.data = Ba(e2.data, e2.headers, e2.transformRequest);
    var r2 = e2.adapter;
    return delete e2.adapter, r2(e2).then(function (t3) {
      return t3.data = Ba(t3.data, t3.headers, e2.transformResponse), t3;
    }, function (t3) {
      return t3 && t3.response && (t3.response.data = Ba(t3.response.data, t3.response.headers, e2.transformResponse)), t3;
    });
  }
  function Ba(e2, t2, n2) {
    return n2 && n2.forEach(function (n3) {
      n3 && (e2 = n3(e2, t2));
    }), e2;
  }
  function Ta(e2) {
    if (Oa(e2)) return e2;
    try {
      return JSON.parse(e2);
    } catch (t2) {
      return {
        code: 77777,
        message: "数据格式错误",
        error: t2,
        response: e2
      };
    }
  }
  var Wa = function () {
      function e2() {
        this.handlers = [], this.init();
      }
      var t2 = e2.prototype;
      return t2.init = function () {
        this.handlers = [];
      }, t2.use = function (e3, t3) {
        return this.handlers.push({
          fulfilled: e3,
          rejected: t3
        }), this.handlers.length - 1;
      }, t2.eject = function (e3) {
        this.handlers[e3] && (this.handlers[e3] = null);
      }, t2.forEach = function (e3) {
        this.handlers.forEach(function (t3) {
          null !== t3 && e3(t3);
        });
      }, e2;
    }(),
    Va = function () {
      function e2(e3) {
        void 0 === e3 && (e3 = {}), this.interceptors = {
          request: new Wa(),
          response: new Wa()
        }, this.defaults = e3, this.initInterceptor();
      }
      var t2 = e2.prototype;
      return t2.initInterceptor = function () {
        this.interceptors.request.use(function (e3) {
          return "get" === e3.method && delete e3.data, e3;
        }, void 0), this.interceptors.response.use(function (e3) {
          return "status" in e3 && 200 === e3.status ? Promise.resolve(e3.data) : Promise.reject(e3);
        }, void 0);
      }, t2.nativeRequest = function (e3) {
        var t3,
          n2,
          r2 = e3.params ? e3.url + "?" + Nt(e3.params) : e3.url + "",
          a2 = {
            method: null != (t3 = e3.method) ? t3 : "get"
          };
        "post" === e3.method && (a2.body = Me({}, e3.params, e3.data), a2.headers = ((n2 = {})["content-type"] = "json" === e3.contentType ? "application/json; charset=UTF-8" : "application/x-www-form-urlencoded; charset=UTF-8", n2));
        return window.fetch(r2, a2).then(function (e4) {
          return e4.json();
        });
      }, t2.request = function () {
        var e3 = n$1(c$1.mark(function e4(t3) {
          var n2, r2, a2, i2, o2, s2;
          return c$1.wrap(function (e5) {
            for (;;) switch (e5.prev = e5.next) {
              case 0:
                if (void 0 === t3 && (t3 = {}), (n2 = Object.assign({
                  method: "get",
                  dependProtocolURL: "https:",
                  transformRequest: [function (e6) {
                    return e6;
                  }],
                  transformResponse: [function (e6) {
                    return Ta(e6);
                  }]
                }, this.defaults, t3)).method = n2.method && n2.method.toLowerCase(), n2.adapter && "function" == typeof n2.adapter) {
                  e5.next = 7;
                  break;
                }
                return O(r2 = "invalid adapter.", "request"), e5.abrupt("return", Promise.reject(r2));
              case 7:
                if (n2.url) {
                  e5.next = 11;
                  break;
                }
                return O(a2 = "invalid url.", "request"), e5.abrupt("return", Promise.reject(a2));
              case 11:
                if (n2.method && ["get", "post"].includes(n2.method)) {
                  e5.next = 15;
                  break;
                }
                return O(i2 = "invalid method.", "request"), e5.abrupt("return", Promise.reject(i2));
              case 15:
                for (o2 = [Ra, void 0], s2 = Promise.resolve(n2), this.interceptors.request.forEach(function (e6) {
                  o2.unshift(e6.fulfilled, e6.rejected);
                }), this.interceptors.response.forEach(function (e6) {
                  o2.push(e6.fulfilled, e6.rejected);
                }); o2.length;) s2 = s2.then(o2.shift(), o2.shift());
                return e5.abrupt("return", s2);
              case 21:
              case "end":
                return e5.stop();
            }
          }, e4, this);
        }));
        return function (t3) {
          return e3.apply(this, arguments);
        };
      }(), t2.get = function (e3, t3) {
        return this.request(Me({}, t3, {
          method: "get",
          url: e3
        }));
      }, t2.post = function (e3, t3, n2) {
        return this.request(Me({}, n2, {
          method: "post",
          url: e3,
          data: t3
        }));
      }, e2;
    }();
  function ja(e2, t2) {
    return ja = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e3, t3) {
      return e3.__proto__ = t3, e3;
    }, ja(e2, t2);
  }
  (function (e2) {
    function t2(t3) {
      var n2;
      return (n2 = e2.call(this, t3) || this).isSupportNativeRequest = null, n2.mode = Vt(), n2;
    }
    !function (e3, t3) {
      e3.prototype = Object.create(t3.prototype), e3.prototype.constructor = e3, ja(e3, t3);
    }(t2, e2);
    var r2 = t2.prototype;
    return r2.initInterceptor = function () {
      var e3 = this;
      e3.interceptors.request.eject(0), e3.interceptors.response.eject(0), e3.interceptors.request.use(function (t3) {
        return e3.isSupportNativeRequest || "get" === t3.method && delete t3.data, t3;
      }, void 0), e3.interceptors.response.use(function (t3) {
        return e3.isSupportNativeRequest ? t3 : "status" in t3 && 200 === t3.status ? Promise.resolve(t3.data) : Promise.reject(t3);
      }, void 0);
    }, r2.nativeRequest = function (e3) {
      var t3 = this;
      return new Promise(function (n2, r3) {
        var a2,
          i2 = "post" === e3.method ? {
            url: e3.url,
            method: e3.method,
            params: Me({}, e3.params, e3.data),
            paramsType: e3.contentType || "queryString"
          } : {
            url: e3.url,
            method: null != (a2 = e3.method) ? a2 : "get",
            params: e3.params
          };
        Rt({
          method: "live_network_" + t3.mode + ".request",
          data: i2,
          success: function success(e4) {
            n2(Ta(e4));
          },
          fail: function fail(e4) {
            r3(Ta(e4));
          },
          failed: function failed(e4) {
            r3(Ta(e4));
          },
          callback: function callback() {}
        });
      });
    }, r2.request = function () {
      var t3 = n$1(c$1.mark(function t4(n2) {
        var r3, a2;
        return c$1.wrap(function (t5) {
          for (;;) switch (t5.prev = t5.next) {
            case 0:
              if (r3 = this, a2 = "debug_mode=1", ("undefined" != typeof window && -1 !== window.location.href.indexOf(a2) || n2.url && -1 !== n2.url.indexOf(a2)) && (r3.isSupportNativeRequest = false), null !== r3.isSupportNativeRequest) {
                t5.next = 10;
                break;
              }
              if (t5.t0 = Ze().isApp, !t5.t0) {
                t5.next = 9;
                break;
              }
              return t5.next = 8, it({
                method: "live_network_" + r3.mode + ".request"
              });
            case 8:
              t5.t0 = t5.sent;
            case 9:
              r3.isSupportNativeRequest = t5.t0;
            case 10:
              return r3.isSupportNativeRequest && (n2.adapter = r3.nativeRequest.bind(r3)), t5.abrupt("return", e2.prototype.request.call(this, Me({}, n2, {
                transformResponse: [function (e3) {
                  return r3.isSupportNativeRequest ? e3 : Ta(e3);
                }]
              })));
            case 12:
            case "end":
              return t5.stop();
          }
        }, t4, this);
      }));
      return function (e3) {
        return t3.apply(this, arguments);
      };
    }(), t2;
  })(Va);
  function Ja(e2) {
    return void 0 === e2;
  }
  function Ka(e2, t2, n2) {
    if (void 0 === n2 && (n2 = Ja), !e2) return t2;
    var r2 = "";
    try {
      r2 = JSON.parse(e2);
    } catch (t3) {
      r2 = e2;
    }
    return n2(r2) ? t2 : r2;
  }
  function Ua(e2) {
    return JSON.stringify(e2);
  }
  var Ha = ["operation", "key", "value"];
  function qa(e2) {
    return Ze().isIOS ? void 0 === e2 || "(null)" === e2 : void 0 === e2;
  }
  function Ga(t2) {
    void 0 === t2 && (t2 = {
      operation: "set"
    });
    var r2 = t2.operation,
      a2 = void 0 === r2 ? "set" : r2,
      i2 = t2.key,
      o2 = t2.value,
      s2 = e$1(t2, Ha);
    return new Promise(function () {
      var e2 = n$1(c$1.mark(function e3(t3, n2) {
        var r3, u2, l2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (!Ze().isApp) {
                e4.next = 40;
                break;
              }
              return c2 = void 0, c2 = yr(null != i2 ? i2 : ""), r3 = "set" === a2 ? {
                operation: a2,
                key: c2,
                value: Ua(o2)
              } : "clear" === a2 ? {
                operation: a2
              } : {
                operation: a2,
                key: c2
              }, e4.next = 4, st();
            case 4:
              return u2 = e4.sent, e4.next = 7, dn({
                method: "storage.setItem"
              });
            case 7:
              if (l2 = e4.sent.isNewChannelSupport, u2 !== ct.COMMON || !l2) {
                e4.next = 24;
                break;
              }
              e4.t0 = a2, e4.next = "set" === e4.t0 ? 13 : "get" === e4.t0 ? 15 : "remove" === e4.t0 ? 17 : "clear" === e4.t0 ? 19 : 21;
              break;
            case 13:
              return le("storage.setItem", {
                key: r3.key,
                value: r3.value
              }).then(function (e5) {
                0 === (null == e5 ? void 0 : e5.code) && t3(e5);
              }), e4.abrupt("break", 22);
            case 15:
              return le("storage.getItem", {
                key: r3.key
              }).then(function (e5) {
                if (0 === e5.code && e5.data.value) {
                  var n3 = Ka(e5.data.value);
                  s2.success && s2.success(n3), t3(n3);
                }
              }), e4.abrupt("break", 22);
            case 17:
              return le("storage.removeItem", {
                key: r3.key
              }).then(function () {
                s2.success && s2.success(void 0), t3(void 0);
              }), e4.abrupt("break", 22);
            case 19:
              return le("storage.clear").then(function () {
                s2.success && s2.success(void 0), t3(void 0);
              }), e4.abrupt("break", 22);
            case 21:
              return e4.abrupt("break", 22);
            case 22:
              e4.next = 40;
              break;
            case 24:
              if (u2 !== ct.HALF && u2 !== ct.FULL) {
                e4.next = 28;
                break;
              }
              Rt({
                method: "live_cache_" + Vt() + ".localCache",
                data: r3,
                success: function success(e5) {
                  var n3,
                    i3 = Ka("set" === a2 ? r3.value : e5, "get" === a2 ? o2 : void 0, qa);
                  "get" === a2 && (i3 = "string" == typeof (n3 = i3) ? n3.replace(/^\"/, "").replace(/\"$/, "") : n3), s2.success && s2.success(i3), t3(i3);
                },
                fail: function fail(e5) {
                  var t4 = {
                    message: "出错了"
                  };
                  try {
                    t4 = JSON.parse(e5);
                  } catch (e6) {
                    t4 = {
                      message: "数据格式错误"
                    };
                  }
                  s2.fail && s2.fail(t4.message), n2(t4.message);
                },
                callback: function callback() {
                  s2.callback && s2.callback();
                }
              }), e4.next = 40;
              break;
            case 28:
              e4.t1 = a2, e4.next = "set" === e4.t1 ? 31 : "get" === e4.t1 ? 33 : "remove" === e4.t1 ? 35 : "clear" === e4.t1 ? 37 : 39;
              break;
            case 31:
              return Rt({
                method: "storage.setItem",
                data: {
                  key: r3.key,
                  value: r3.value
                },
                callback: function callback(e5) {
                  t3(e5);
                }
              }), e4.abrupt("break", 40);
            case 33:
              return Rt({
                method: "storage.getItem",
                data: {
                  key: r3.key
                },
                callback: function callback(e5) {
                  var n3 = Ka(e5.value);
                  s2.success && s2.success(n3), t3(n3);
                }
              }), e4.abrupt("break", 40);
            case 35:
              return Rt({
                method: "storage.removeItem",
                data: {
                  key: r3.key
                },
                callback: function callback(e5) {
                  t3(e5);
                }
              }), e4.abrupt("break", 40);
            case 37:
              return Rt({
                method: "storage.clear",
                data: {},
                callback: function callback(e5) {
                  t3(e5);
                }
              }), e4.abrupt("break", 40);
            case 39:
              return e4.abrupt("break", 40);
            case 40:
            case "end":
              return e4.stop();
          }
          var c2;
        }, e3);
      }));
      return function (t3, n2) {
        return e2.apply(this, arguments);
      };
    }());
  }
  var Da = ["operation", "key", "value"];
  function za(t2) {
    void 0 === t2 && (t2 = {
      operation: "set"
    });
    var n2 = t2.operation,
      r2 = void 0 === n2 ? "set" : n2,
      a2 = t2.key,
      i2 = t2.value,
      o2 = e$1(t2, Da);
    return new Promise(function (e2, t3) {
      if (window.localStorage) switch (r2) {
        case "set":
          localStorage.setItem(yr(a2), Ua(i2)), o2.success && o2.success(i2), e2(i2);
          break;
        case "get":
          var n3 = Ka(localStorage.getItem(yr(a2)), "get" === r2 ? i2 : void 0);
          o2.success && o2.success(n3), e2(n3);
          break;
        case "remove":
          localStorage.removeItem(yr(a2)), o2.success && o2.success(void 0), e2(void 0);
          break;
        case "clear":
          localStorage.clear(), o2.success && o2.success(void 0), e2(void 0);
      } else t3(Ee);
    });
  }
  var Qa = ["operation", "key", "value"];
  function $a(t2) {
    void 0 === t2 && (t2 = {
      operation: "set"
    });
    var n2 = t2.operation,
      r2 = void 0 === n2 ? "set" : n2,
      a2 = t2.key,
      i2 = t2.value,
      o2 = e$1(t2, Qa);
    return "clear" === r2 ? Promise.reject('Invalid param: type check failed for param "operation". Expected "set,get,remove", got String with value "clear".') : new Promise(function (e2, t3) {
      var n3,
        s2 = (n3 = yr(null != a2 ? a2 : "", "_"), "set" === r2 ? {
          operation: r2,
          key: n3,
          value: Ua(i2)
        } : {
          operation: r2,
          key: n3
        });
      Pe() ? Rt({
        method: "live_cache.localCache",
        data: s2,
        success: function success(t4) {
          var n4 = Ka("set" === r2 ? s2.value : null == t4 ? void 0 : t4.value, "get" === r2 ? i2 : void 0);
          o2.success && o2.success(n4), e2(n4);
        },
        fail: function fail(e3) {
          var n4 = {
            message: "出错了"
          };
          try {
            n4 = JSON.parse(e3);
          } catch (e4) {
            n4 = {
              message: "数据格式错误"
            };
          }
          o2.fail && o2.fail(n4.message), t3(n4.message);
        },
        callback: function callback() {
          o2.callback && o2.callback();
        }
      }) : t3(ke);
    });
  }
  function Xa() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      storage: Ga
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      storage: $a
    }), "WEB" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_ROOM" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      storage: za
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return void 0 === t2 && (t2 = {
              operation: "set"
            }), e4.next = 3, En();
          case 3:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "storage",
              useNative: Xa
            })(t2));
          case 4:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  var ci = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2, r2, a2, i2, o2, s2, u2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              r2 = "auth.login", a2 = 0, i2 = ["auth.loginUpdate", "auth.ios_purchaseLogin", "auth.purchaseLogin", "auth.login"];
            case 3:
              if (!(a2 < i2.length)) {
                e4.next = 13;
                break;
              }
              return o2 = i2[a2], e4.next = 7, it({
                method: o2
              });
            case 7:
              if (!e4.sent) {
                e4.next = 10;
                break;
              }
              return r2 = o2, e4.abrupt("break", 13);
            case 10:
              a2++, e4.next = 3;
              break;
            case 13:
              return "" === (s2 = null != (n2 = null == t2 ? void 0 : t2.jumpBackUrl) ? n2 : "") || /^[a-z]+:\/\/(.*)/.test(s2) || (s2 = "https://" + (s2 = s2.replace("//", ""))), u2 = s2 ? zn(s2) : -1, e4.abrupt("return", new Promise(function (e5, n3) {
                Rt({
                  method: r2,
                  data: {
                    type: "default",
                    callbackUrl: 1 !== u2 ? s2 : ""
                  },
                  onLogin: function onLogin(r3) {
                    var a3 = r3.state;
                    if (1 === a3) return e5(a3), null == t2 || null == t2.success || t2.success(), void (1 === u2 && vr({
                      url: s2
                    }));
                    n3(a3), null == t2 || null == t2.fail || t2.fail({
                      code: a3,
                      msg: "登录失败！"
                    });
                  }
                });
              }));
            case 17:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    li = function () {
      var e2 = n$1(c$1.mark(function e3() {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, Promise.resolve().then(function () {
                return biliBridge_min04ad1937;
              });
            case 2:
              (0, e4.sent.callNative)("auth/requestLogin");
            case 5:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function () {
        return e2.apply(this, arguments);
      };
    }();
  function fi(e2) {
    return new Promise(function (t2, n2) {
      var r2 = document.createElement("script");
      function a2() {
        t2(true), o2();
      }
      function i2(t3) {
        n2(t3 || new Error("Script loading failed，URL：" + e2)), o2();
      }
      function o2() {
        r2.removeEventListener("load", a2), r2.removeEventListener("error", i2);
      }
      r2.type = "text/javascript", r2.readyState ? r2.onreadystatechange = function () {
        "loaded" === r2.readyState || "complete" === r2.readyState ? t2(r2) : n2(new Error("Script loading failed，URL：" + e2)), r2.onreadystatechange = null;
      } : (r2.addEventListener("load", a2), r2.addEventListener("error", i2)), r2.src = e2, document.head && document.getElementsByTagName("head")[0].appendChild(r2);
    });
  }
  var pi = function () {
      var e2 = n$1(c$1.mark(function e3() {
        var t2, n2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return t2 = 0, e4.prev = 1, e4.next = 4, Promise.resolve().then(function () {
                return window.__BiliUser__;
              });
            case 4:
              return n2 = e4.sent, e4.next = 7, new Promise(function (e5, t3) {
                "function" == typeof (null == n2 ? void 0 : n2.quickLogin) ? n2.quickLogin(function (t4) {
                  0 === t4.code ? (window.location.reload(), e5(1)) : e5(0);
                }) : t3(-1);
              });
            case 7:
              t2 = e4.sent, e4.next = 13;
              break;
            case 10:
              e4.prev = 10, e4.t0 = e4["catch"](1), O('Not found "window.__BiliUser__" instance in page.', "login");
            case 13:
              return e4.abrupt("return", Promise.resolve(t2));
            case 14:
            case "end":
              return e4.stop();
          }
        }, e3, null, [[1, 10]]);
      }));
      return function () {
        return e2.apply(this, arguments);
      };
    }(),
    di = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        var n2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return e4.next = 2, Ue();
            case 2:
              if (e4.sent !== Qe.PC_ROOM) {
                e4.next = 5;
                break;
              }
              return e4.abrupt("return", Fe("login"));
            case 5:
              if (null == t2 || !t2.withBiliUser) {
                e4.next = 7;
                break;
              }
              return e4.abrupt("return", pi());
            case 7:
              return n2 = function n2() {
                window.biliQuickLogin(function () {
                  window.postMessage("quickLogin:reloadRequest", "*"), window.location.reload();
                });
              }, e4.abrupt("return", new Promise(function (e5, t3) {
                setTimeout(function () {
                  window.biliQuickLogin ? (n2(), e5(1)) : fi("https://static.hdslb.com/account/bili_quick_login.js").then(function () {
                    n2(), e5(1);
                  }, t3);
                }, 0);
              }));
            case 9:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }(),
    vi = function () {
      var e2 = n$1(c$1.mark(function e3(t2) {
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              if (null == t2 || !t2.withBiliUser) {
                e4.next = 2;
                break;
              }
              return e4.abrupt("return", pi());
            case 2:
              return window.location.href = "https://passport.bilibili.com/login", e4.abrupt("return", Promise.resolve(1));
            case 4:
            case "end":
              return e4.stop();
          }
        }, e3);
      }));
      return function (t2) {
        return e2.apply(this, arguments);
      };
    }();
  function _i() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      login: ci
    }), "WEB" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      login: vi
    }), "PC_APP" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      login: li
    }), "PC_ROOM" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      login: di
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "login",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["WEB", "PC_APP", "PC_ROOM"],
              useNative: _i
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  function bi(e2, t2) {
    return Ja(e2) ? t2 : e2;
  }
  var gi = function (e2) {
    return e2[e2.Others = 0] = "Others", e2[e2.PV = 1] = "PV", e2[e2.Click = 2] = "Click", e2[e2.Show = 3] = "Show", e2[e2.System = 4] = "System", e2[e2.Performance = 5] = "Performance", e2[e2.Custom = 7] = "Custom", e2[e2.Player = 9] = "Player", e2;
  }({});
  function Ii(e2) {
    if ("string" == typeof e2) {
      var t2 = e2.split("."),
        n2 = t2[t2.length - 1].toLowerCase();
      if ("pv" === n2) return gi.PV;
      var r2 = "" + n2.slice(0, 1).toUpperCase() + n2.slice(1);
      return void 0 !== gi[r2] ? gi[r2] : gi.Others;
    }
    return gi.Others;
  }
  function yi(e2) {
    return Pi.apply(this, arguments);
  }
  function Pi() {
    return Pi = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            if (n2 = void 0 !== t2.type ? t2.type : Ii(t2.eventName), r2 = JSON.stringify({}), t2 && void 0 !== t2.data) try {
              r2 = JSON.stringify(t2.data);
            } catch (e4) {
              console.log(e4);
            }
            return e3.next = 5, pn({
              method: "ability.reportEvent"
            });
          case 5:
            if (a2 = {
              event: t2.eventName,
              params: r2,
              type: n2,
              label: t2.label || "webviewTracker"
            }, !e3.sent.isNewChannelSupport) {
              e3.next = 12;
              break;
            }
            return e3.next = 11, le("ability.reportEvent", Me({}, a2)).data;
          case 11:
            return e3.abrupt("return", e3.sent);
          case 12:
            return e3.abrupt("return", tn({
              transformResolve: function transformResolve() {
                return bi(true);
              }
            })(oe)({
              method: "ability.reportEventV3",
              data: a2
            }));
          case 13:
          case "end":
            return e3.stop();
        }
      }, e2);
    })), Pi.apply(this, arguments);
  }
  function wi(e2) {
    return "string" == typeof e2 ? e2 : Array.isArray(e2) ? e2.join(";") : "object" == _typeof4(e2) ? Object.keys(e2).map(function (t2) {
      return t2 + ":" + e2[t2];
    }).join(";") : void 0;
  }
  function Li(e2) {
    return Oi.apply(this, arguments);
  }
  function Oi() {
    return (Oi = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return n2 = "live_network.polarisReport", Pe() || (n2 = "live_location_polaris_report"), r2 = t2.eventName, a2 = t2.data, e3.abrupt("return", tn({
              transformResolve: function transformResolve() {
                return bi(true);
              }
            })(Rt)({
              method: n2,
              data: {
                id: r2,
                msg: wi(a2)
              }
            }));
          case 4:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function Ei() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      reportEventV3: yi
    }), "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ && g({
      target: "NATIVE"
    }, {
      reportEventV3: Li
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "reportEventV3",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ && ["PC_LINK"],
              useNative: Ei
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  (function (e2) {
    return e2[e2.AUTO = 0] = "AUTO", e2[e2.PC_LINK = 1] = "PC_LINK", e2[e2.WEB = 2] = "WEB", e2;
  })({});
  var Ki = {
      uid: 0,
      uname: "",
      face: "",
      isLogin: false,
      isTourist: false
    },
    Ui = function () {
      var e2 = n$1(c$1.mark(function e3() {
        var t2, n2, r2;
        return c$1.wrap(function (e4) {
          for (;;) switch (e4.prev = e4.next) {
            case 0:
              return t2 = Me({}, Ki), e4.prev = 1, e4.next = 4, Promise.resolve().then(function () {
                return window.__BiliUser__;
              });
            case 4:
              return n2 = e4.sent, e4.next = 7, null == n2 ? void 0 : n2.get();
            case 7:
              0 === (r2 = e4.sent).code && (t2 = {
                uid: r2.data.mid,
                uname: r2.data.uname,
                face: r2.data.face,
                isLogin: r2.data.isLogin,
                isTourist: false
              }), e4.next = 14;
              break;
            case 11:
              e4.prev = 11, e4.t0 = e4["catch"](1), O('Not found "window.__BiliUser__" instance in page.', "getUserInfo");
            case 14:
              return e4.abrupt("return", Promise.resolve(Me({}, t2)));
            case 15:
            case "end":
              return e4.stop();
          }
        }, e3, null, [[1, 11]]);
      }));
      return function () {
        return e2.apply(this, arguments);
      };
    }();
  function Hi(e2) {
    return "boolean" == typeof e2 ? e2 : !!Number(e2);
  }
  function qi(e2) {
    return Gi.apply(this, arguments);
  }
  function Gi() {
    return Gi = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2, i2, o2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return void 0 === t2 && (t2 = {}), n2 = Me({}, Ki), e3.next = 4, pn({
              method: "auth.getUserInfo"
            });
          case 4:
            if (a2 = (r2 = e3.sent).isSupport, !r2.isNewChannelSupport) {
              e3.next = 14;
              break;
            }
            return e3.next = 10, le("auth.getUserInfo", {});
          case 10:
            n2 = {
              isLogin: (i2 = e3.sent).data.state,
              uid: i2.data.mid,
              uname: i2.data.userName,
              face: i2.data.face,
              isTourist: i2.data.isTourist
            }, e3.next = 19;
            break;
          case 14:
            if (!a2) {
              e3.next = 19;
              break;
            }
            return e3.next = 17, tn()(oe)({
              method: "auth.getUserInfo",
              data: {
                type: "default"
              }
            });
          case 17:
            n2 = {
              uid: (o2 = e3.sent).mid,
              uname: o2.userName,
              isLogin: Hi(o2.state),
              face: o2.face,
              isTourist: Hi(void 0 !== o2.isTourist ? o2.isTourist : o2.isLoginViaTourist)
            };
          case 19:
            return e3.abrupt("return", w(t2, Promise.resolve(n2)));
          case 20:
          case "end":
            return e3.stop();
        }
      }, e2);
    })), Gi.apply(this, arguments);
  }
  function Di() {
    var e2 = "__LIVE_USER_LOGIN_STATUS__",
      t2 = 1,
      n2 = window,
      r2 = Me({}, {
        uid: 0,
        isLogin: false,
        uname: "",
        face: "",
        isError: true
      });
    try {
      for (; n2 !== window.top && t2 < 5;) {
        var a2;
        if (null != (a2 = n2) && null != (a2 = a2.parent) && a2[e2]) {
          var i2;
          r2 = null == (i2 = n2) || null == (i2 = i2.parent) ? void 0 : i2[e2];
          break;
        }
        n2 = n2.parent, t2++;
      }
    } catch (e3) {}
    return {
      uid: r2.uid,
      uname: r2.uname,
      face: r2.face,
      isLogin: r2.isLogin,
      isTourist: false
    };
  }
  function zi(e2) {
    return Qi.apply(this, arguments);
  }
  function Qi() {
    return (Qi = n$1(c$1.mark(function e2(t2) {
      var n2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            if (void 0 === t2 && (t2 = {}), n2 = Me({}, Ki), !t2.withBiliUser) {
              e3.next = 8;
              break;
            }
            return e3.next = 5, Ui();
          case 5:
            n2 = e3.sent, e3.next = 9;
            break;
          case 8:
            n2 = Di();
          case 9:
            return e3.abrupt("return", w(t2, Promise.resolve(n2)));
          case 10:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function $i() {
    return Xi.apply(this, arguments);
  }
  function Xi() {
    return (Xi = n$1(c$1.mark(function e2() {
      var t2, n2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            if (void 0 === _typeof4(window.fetch)) {
              e3.next = 14;
              break;
            }
            return e3.prev = 1, e3.next = 5, fetch("//api.bilibili.com/x/web-interface/nav", {
              credentials: "include"
            }).then(function (e4) {
              return e4.json();
            });
          case 5:
            if (n2 = (t2 = e3.sent).data, 0 !== t2.code || !n2 || !n2.isLogin) {
              e3.next = 10;
              break;
            }
            return e3.abrupt("return", {
              uid: n2.mid,
              uname: n2.uname,
              face: n2.face,
              isLogin: n2.isLogin,
              isTourist: false
            });
          case 10:
            e3.next = 14;
            break;
          case 12:
            e3.prev = 12, e3.t0 = e3["catch"](1);
          case 14:
            return e3.abrupt("return", Me({}, Ki));
          case 15:
          case "end":
            return e3.stop();
        }
      }, e2, null, [[1, 12]]);
    }))).apply(this, arguments);
  }
  function Zi(e2) {
    return eo.apply(this, arguments);
  }
  function eo() {
    return (eo = n$1(c$1.mark(function e2(t2) {
      var n2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            if (void 0 === t2 && (t2 = {}), n2 = Me({}, Ki), !t2.withBiliUser) {
              e3.next = 8;
              break;
            }
            return e3.next = 5, Ui();
          case 5:
            n2 = e3.sent, e3.next = 11;
            break;
          case 8:
            return e3.next = 10, $i();
          case 10:
            n2 = e3.sent;
          case 11:
            return e3.abrupt("return", w(t2, Promise.resolve(n2)));
          case 12:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function to() {
    "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__ || "NATIVE" === self.__AWESOME_API_POLYFILL_COMPILER__ ? g({
      target: "NATIVE"
    }, {
      getUserInfo: qi
    }) : "WEB" === self.__AWESOME_API_POLYFILL_COMPILER__ || "PC_LINK" === self.__AWESOME_API_POLYFILL_COMPILER__ ? g({
      target: "NATIVE"
    }, {
      getUserInfo: Zi
    }) : "PC_APP" === self.__AWESOME_API_POLYFILL_COMPILER__ ? g({
      target: "NATIVE"
    }, {
      getUserInfo: zi
    }) : g({
      target: "NATIVE"
    }, {
      getUserInfo: Zi
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "getUserInfo",
              useNative: to
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  var ro = ["closeSelfPage"];
  function ao(e2) {
    return io.apply(this, arguments);
  }
  function io() {
    return io = n$1(c$1.mark(function t2(n2) {
      var r2, a2, i2, o2, s2, u2;
      return c$1.wrap(function (t3) {
        for (;;) switch (t3.prev = t3.next) {
          case 0:
            return void 0 === n2 && (n2 = {}), t3.next = 3, pn({
              method: "live_room_half.openGiftPanel"
            });
          case 3:
            return r2 = t3.sent.isSupport, t3.next = 7, pn({
              method: "liveRoomHalf.openGiftPanel"
            });
          case 7:
            if (a2 = t3.sent.isNewChannelSupport, s2 = void 0 !== (o2 = (i2 = n2).closeSelfPage) && o2, u2 = e$1(i2, ro), !a2) {
              t3.next = 14;
              break;
            }
            le("liveRoomHalf.openGiftPanel", u2).then(function () {
              return s2 && ir(), Promise.resolve(true);
            })["catch"](function (e2) {
              return Promise.reject(e2);
            }), t3.next = 19;
            break;
          case 14:
            if (!r2) {
              t3.next = 18;
              break;
            }
            return t3.abrupt("return", new Promise(function (e2, t4) {
              oe({
                method: "live_room_half.openGiftPanel",
                data: {
                  gift_id: n2.giftId,
                  panel: n2.panel,
                  batch_num: n2.batchNumber
                },
                success: function success() {
                  s2 && ir(), e2(true);
                },
                callback: function callback() {
                  s2 && ir(), e2(true);
                },
                fail: t4
              });
            }));
          case 18:
            return t3.abrupt("return", Promise.reject("invalid method"));
          case 19:
          case "end":
            return t3.stop();
        }
      }, t2);
    })), io.apply(this, arguments);
  }
  var oo = ["closeSelfPage"];
  function so(e2) {
    return uo.apply(this, arguments);
  }
  function uo() {
    return (uo = n$1(c$1.mark(function t2(n2) {
      var r2, a2, i2;
      return c$1.wrap(function (t3) {
        for (;;) switch (t3.prev = t3.next) {
          case 0:
            return t3.next = 2, Ue();
          case 2:
            if (t3.sent !== Qe.PC_ROOM) {
              t3.next = 6;
              break;
            }
            return a2 = void 0 !== (r2 = n2.closeSelfPage) && r2, i2 = e$1(n2, oo), t3.abrupt("return", new Promise(function (e2, t4) {
              Fe("openGiftPanel", i2).then(function () {
                a2 && ir(), e2(true);
              })["catch"](t4);
            }));
          case 6:
          case "end":
            return t3.stop();
        }
      }, t2);
    }))).apply(this, arguments);
  }
  function co() {
    return lo.apply(this, arguments);
  }
  function lo() {
    return (lo = n$1(c$1.mark(function e2() {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
              target: "NATIVE"
            }, {
              openGiftPanel: ao
            }), "PC_ROOM" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_APP" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
              target: "NATIVE"
            }, {
              openGiftPanel: so
            });
          case 2:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "openGiftPanel",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__,
              useNative: co
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  function po() {
    return vo.apply(this, arguments);
  }
  function vo() {
    return (vo = n$1(c$1.mark(function e2() {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return e3.abrupt("return", vr({
              url: "https://live.bilibili.com/p/html/live-app-viceroy/index.html?is_live_half_webview=1&hybrid_half_ui=1,3,100p,73p,0,0,70,0,12,0;2,2,375,100p,0,0,70,0,0,0;3,3,100p,73p,0,0,70,0,12,0;4,2,375,100p,0,0,70,0,0,0;5,3,100p,73p,0,0,70,0,12,0;6,3,100p,73p,0,0,70,0,12,0;7,3,100p,73p,0,0,70,0,12,0;8,2,320,480,0,0,70,0,0,0#/index",
              openType: "half"
            }));
          case 2:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function _o(e2) {
    return ho.apply(this, arguments);
  }
  function ho() {
    return (ho = n$1(c$1.mark(function e2(t2) {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return e3.next = 2, Ue();
          case 2:
            if (e3.sent !== Qe.PC_ROOM) {
              e3.next = 5;
              break;
            }
            return e3.abrupt("return", Fe("openGuard", t2));
          case 5:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function mo() {
    return bo.apply(this, arguments);
  }
  function bo() {
    return (bo = n$1(c$1.mark(function e2() {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
              target: "NATIVE"
            }, {
              openGuard: po
            }), "PC_ROOM" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_APP" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
              target: "NATIVE"
            }, {
              openGuard: _o
            });
          case 2:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "openGuard",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__,
              useNative: mo
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  function Io(e2) {
    return yo.apply(this, arguments);
  }
  function yo() {
    return yo = n$1(c$1.mark(function e2(t2) {
      var n2, r2, a2, i2, o2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return n2 = {}, e3.next = 3, pn({
              method: "live_room_half.openGiftPanel"
            });
          case 3:
            return r2 = e3.sent.isSupport, e3.next = 7, pn({
              method: "liveRoomHalf.openGiftPanel"
            });
          case 7:
            return a2 = e3.sent.isNewChannelSupport, ["anchorId", "giftId", "count", "sourceEventServer", "sourceEventPay", "channel", "eventId", "sendGiftType", "bagId", "price", "needPreCheck"].forEach(function (e4) {
              if (void 0 !== t2[e4]) if ("anchorId" === e4) {
                if (a2) n2[e4] = String(t2[e4]);else {
                  if ("string" == typeof t2[e4] && (r3 = Number(t2[e4]), !Number.isSafeInteger(r3))) throw new Error("The number exceeds the maximum safe integer limit in JavaScript.");
                  n2[e4] = Number(t2[e4]);
                }
              } else if ("gift_scene" === e4) {
                n2[a2 ? "giftScene" : "gift_scene"] = "object" == _typeof4(t2[e4]) ? JSON.stringify(t2[e4]) : t2[e4];
              } else n2[e4] = t2[e4];
              var r3;
            }), e3.next = 12, Po([t2.giftId]);
          case 12:
            if (i2 = e3.sent[0]) {
              e3.next = 16;
              break;
            }
            return e3.abrupt("return", Promise.reject({
              code: 100,
              message: "礼物不存在"
            }));
          case 16:
            return i2.gift_scene && (o2 = "object" == _typeof4(i2.gift_scene) ? JSON.parse(i2.gift_scene) : i2.gift_scene, a2 ? n2.giftScene = o2 : n2.gift_scene = o2), i2.gift_tag && (n2[a2 ? "giftTag" : "gift_tag"] = i2.gift_tag), e3.abrupt("return", new Promise(function (e4, t3) {
              a2 ? le("liveRoomHalf.sendGift", Me({}, n2)).then(function () {
                e4(true);
              })["catch"](function (e5) {
                t3(e5);
              }) : r2 ? Rt({
                method: "live_room_half.sendGift",
                data: n2,
                success: function success() {
                  e4(true);
                },
                fail: function fail(e5) {
                  t3(e5);
                }
              }) : t3("invalid method");
            }));
          case 19:
          case "end":
            return e3.stop();
        }
      }, e2);
    })), yo.apply(this, arguments);
  }
  function Po(e2) {
    return wo.apply(this, arguments);
  }
  function wo() {
    return wo = n$1(c$1.mark(function e2(t2) {
      var n2, r2;
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return e3.next = 2, pn({
              method: "live_room_half.getGiftConfig"
            });
          case 2:
            return n2 = e3.sent.isSupport, e3.next = 6, pn({
              method: "liveRoomHalf.getGiftConfig"
            });
          case 6:
            return r2 = e3.sent.isNewChannelSupport, e3.abrupt("return", new Promise(function (e4, a2) {
              r2 ? le("liveRoomHalf.getGiftConfig", {
                giftIds: t2
              }).then(function (t3) {
                var n3;
                e4(JSON.parse((null == (n3 = t3.data) ? void 0 : n3.result) || "[]"));
              })["catch"](function (e5) {
                a2(e5);
              }) : n2 ? Rt({
                method: "live_room_half.getGiftConfig",
                data: {
                  giftIds: t2
                },
                success: e4,
                fail: a2
              }) : a2("invalid method");
            }));
          case 9:
          case "end":
            return e3.stop();
        }
      }, e2);
    })), wo.apply(this, arguments);
  }
  function Lo(e2) {
    return Oo.apply(this, arguments);
  }
  function Oo() {
    return (Oo = n$1(c$1.mark(function e2(t2) {
      return c$1.wrap(function (e3) {
        for (;;) switch (e3.prev = e3.next) {
          case 0:
            return e3.next = 2, Ue();
          case 2:
            if (e3.sent !== Qe.PC_ROOM) {
              e3.next = 7;
              break;
            }
            return e3.abrupt("return", new Promise(function (e4, n2) {
              Fe("quietSendGift", {
                micUserId: t2.anchorId,
                count: t2.count,
                giftId: t2.giftId
              }).then(e4)["catch"](function (e5) {
                n2(200013 === e5.code ? {
                  code: 100,
                  message: "礼物不存在"
                } : e5);
              });
            }));
          case 7:
            return e3.abrupt("return", Promise.reject("sendGiftQuiet is only available in PC_ROOM"));
          case 8:
          case "end":
            return e3.stop();
        }
      }, e2);
    }))).apply(this, arguments);
  }
  function Eo() {
    "boolean" != typeof self.__AWESOME_API_POLYFILL_COMPILER__ && "NATIVE" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      sendGiftQuiet: Io
    }), "PC_ROOM" !== self.__AWESOME_API_POLYFILL_COMPILER__ && "PC_APP" !== self.__AWESOME_API_POLYFILL_COMPILER__ || g({
      target: "NATIVE"
    }, {
      sendGiftQuiet: Lo
    });
  }
  (function () {
    var e2 = n$1(c$1.mark(function e3(t2) {
      return c$1.wrap(function (e4) {
        for (;;) switch (e4.prev = e4.next) {
          case 0:
            return e4.next = 2, En();
          case 2:
            return e4.abrupt("return", nt({
              namespace: "NATIVE",
              method: "sendGiftQuiet",
              usePolyfill: "boolean" == typeof self.__AWESOME_API_POLYFILL_COMPILER__,
              useNative: Eo
            })(t2));
          case 3:
          case "end":
            return e4.stop();
        }
      }, e3);
    }));
    return function (t2) {
      return e2.apply(this, arguments);
    };
  })();
  var ua$2 = typeof navigator !== "undefined" ? navigator.userAgent : "";
  ({
    qq: /QQ\/([\d\.]+)/i.test(ua$2),
    //是否为手机QQ
    weibo: /Weibo/i.test(ua$2),
    //是否为微博
    MicroMessenger: /MicroMessenger/i.test(ua$2),
    //是否为微信
    wechat: /MicroMessenger/i.test(ua$2) && !/wxwork/i.test(ua$2),
    iqiyi: /iqiyi/i.test(ua$2),
    qqBrowser: /MQQBrowser/i.test(ua$2) && !/MicroMessenger/i.test(ua$2),
    //是否为QQ浏览器
    qzone: /qzone\/.*_qz_([\d.]+)/i.test(ua$2),
    // 是否为QQ空间
    uc: /UCBrowser/i.test(ua$2),
    //是否为UC
    ios: /\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(ua$2),
    //ios终端
    android: /Android/i.test(ua$2) || /Linux/i.test(ua$2),
    //android终端或者uc浏览器
    baidu: /Baidu/i.test(ua$2),
    //是否为百度浏览器
    chrome: /CriOS/i.test(ua$2),
    BiliApp: /BiliApp/i.test(ua$2),
    Mac: /Macintosh/.test(ua$2),
    zhihu: /Zhihu/i.test(ua$2),
    miuiBrowser: /miuibrowser\/([\d.]+)/i.test(ua$2),
    firefox: /firefox\/([\d.]+)/i.test(ua$2),
    wxwork: /wxwork\/([\d.]+)/i.test(ua$2),
    // 安卓 chrome 浏览器，包含 原生chrome浏览器、三星自带浏览器、360浏览器以及早期国内厂商自带浏览器
    originalChrome: /chrome\/[\d.]+ mobile safari\/[\d.]+/i.test(ua$2) && /Android/i.test(ua$2) || /Linux/i.test(ua$2) && ua$2.indexOf("Version") < 0,
    harmonyOSNext: /OpenHarmony/i.test(ua$2)
    // 是否是鸿蒙系统浏览器
  });
  /*!
   * @bilibili/vanilla-toast v1.1.4
   * Released under the ISC License.
   */
  /*! *****************************************************************************
  	Copyright (c) Microsoft Corporation. All rights reserved.
  	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  	this file except in compliance with the License. You may obtain a copy of the
  	License at http://www.apache.org/licenses/LICENSE-2.0
  
  	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  	MERCHANTABLITY OR NON-INFRINGEMENT.
  
  	See the Apache Version 2.0 License for specific language governing permissions
  	and limitations under the License.
  	***************************************************************************** */
  var _assign$ = function __assign$8() {
    _assign$ = Object.assign || function __assign2(t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return _assign$.apply(this, arguments);
  };
  var ToastType;
  (function (ToastType2) {
    ToastType2["info"] = "info";
    ToastType2["success"] = "success";
    ToastType2["warn"] = "warn";
    ToastType2["error"] = "error";
  })(ToastType || (ToastType = {}));
  var TYPE_STYLE = {
    info: {
      backgroundColor: "rgba(0, 0, 0, .8)"
    },
    success: {
      backgroundColor: "rgba(57, 175, 100, 1)"
    },
    error: {
      backgroundColor: "rgba(228, 12, 12, 1)"
    },
    warn: {
      backgroundColor: "rgba(255, 134, 39, 1)"
    }
  };
  var keyframesName = "vanilla-toast-slide";
  (function appendKeyframes() {
    if (document.querySelector("." + keyframesName)) {
      return;
    }
    var keyframes = "{\n    0% {\n      transform: translate(-50%, 0);\n      -webkit-transform: translate(-50%, 0);\n      opacity: 0;\n    }\n    100% {\n      transform: translate(-50%, -50%);\n      -webkit-transform: translate(-50%, -50%);\n      opacity: 1;\n    }\n  }";
    var runkeyframes = "\n    @keyframes " + keyframesName + " " + keyframes + "\n    @-webkit-keyframes " + keyframesName + " " + keyframes + "\n  ";
    var style = document.createElement("style");
    style.type = "text/css";
    style.className = keyframesName;
    style.innerHTML = runkeyframes;
    var head = document.querySelector("head");
    if (!head) {
      console.warn("head tag does not exist!");
      return;
    }
    head.appendChild(style);
  })();
  var toast$2 = function toast$2(msg, options) {
    var defaultOptions2 = {
      duration: 2e3,
      onClose: function onClose() {}
    };
    var _a3 = options || defaultOptions2,
      _b2 = _a3.duration,
      duration = _b2 === void 0 ? 2e3 : _b2,
      customStyle = _a3.customStyle,
      _c2 = _a3.onClose,
      onClose = _c2 === void 0 ? function () {} : _c2;
    var msgStyle = _assign$({
      position: "fixed",
      left: "50%",
      top: "50%",
      boxSizing: "border-box",
      width: "auto",
      padding: "6px 12px",
      borderRadius: "8px",
      maxWidth: "80%",
      background: "rgba(0, 0, 0, .7)",
      fontSize: "14px",
      color: "#fff",
      lineHeight: "1.4",
      wordWrap: "break-word",
      textAlign: "justify",
      zIndex: "99999",
      cursor: "default",
      userSelect: "none",
      animation: ".3s ease-int-out both",
      animationName: keyframesName,
      webkitAnimation: ".3s ease-int-out both",
      webkitAnimationName: keyframesName
    }, customStyle);
    var node = document.createElement("div");
    Object.assign(node.style, msgStyle);
    node.innerText = msg;
    document.body.appendChild(node);
    setTimeout(function () {
      typeof onClose === "function" && onClose();
      document.body.removeChild(node);
    }, duration);
  };
  var typeToast = {};
  Object.keys(ToastType).forEach(function (item) {
    typeToast[item] = function (msg, options) {
      var _options = options || {};
      toast$2(msg, _assign$(_assign$({}, _options), {
        customStyle: _assign$(_assign$({}, TYPE_STYLE[item]), _options.customStyle || {})
      }));
    };
  });
  var TimeService = /*#__PURE__*/function () {
    "use strict";

    function TimeService() {
      _classCallCheck(this, TimeService);
      this.msDiffWithServer = null;
      this.init();
    }
    return _createClass(TimeService, [{
      key: "init",
      value: function init() {
        this.updateMsDiff();
      }
    }, {
      key: "create",
      value: function create() {
        return new TimeService();
      }
    }, {
      key: "updateMsDiff",
      value: function () {
        var _updateMsDiff = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39() {
          var res;
          return _regeneratorRuntime().wrap(function _callee39$(_context39) {
            while (1) switch (_context39.prev = _context39.next) {
              case 0:
                _context39.next = 2;
                return this.queryTimestamp();
              case 2:
                res = _context39.sent;
                this.msDiffWithServer = res.microtime - Date.now();
              case 4:
              case "end":
                return _context39.stop();
            }
          }, _callee39, this);
        }));
        function updateMsDiff() {
          return _updateMsDiff.apply(this, arguments);
        }
        return updateMsDiff;
      }()
    }, {
      key: "queryTimestamp",
      value: function () {
        var _queryTimestamp = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40() {
          return _regeneratorRuntime().wrap(function _callee40$(_context40) {
            while (1) switch (_context40.prev = _context40.next) {
              case 0:
                return _context40.abrupt("return", request$2({
                  url: "https://api.live.bilibili.com/xlive/open-interface/v1/rtc/getTimestamp"
                }));
              case 1:
              case "end":
                return _context40.stop();
            }
          }, _callee40);
        }));
        function queryTimestamp() {
          return _queryTimestamp.apply(this, arguments);
        }
        return queryTimestamp;
      }() // 获取修正后的 Date 实例
    }, {
      key: "getDate",
      value: function getDate(params) {
        var date;
        if (typeof params === "string") {
          date = dateUtil["new"](params);
        } else if (typeof params === "number") {
          date = new Date(params);
        } else {
          date = /* @__PURE__ */new Date();
        }
        return this.msDiffWithServer ? new Date(date.getTime() + this.msDiffWithServer) : date;
      }
    }, {
      key: "createTimer",
      value: function createTimer(cb) {
        var _this24 = this;
        var intervalId = setInterval(function () {
          cb(_this24.getDate().getTime());
        }, 1e3);
        return function () {
          clearInterval(intervalId);
        };
      }
    }]);
  }();
  new TimeService();
  var _BatchRequestService = /*#__PURE__*/function () {
    "use strict";

    function _BatchRequestService2(requestMethod, customResMapMethod, responseKey, itemKey, batchCount, delayTime) {
      _classCallCheck(this, _BatchRequestService2);
      this.defaultBatchCount = 20;
      this.defaultDelayTime = 1e3;
      this.requestMethod = requestMethod;
      this.responseKey = responseKey;
      this.itemKey = itemKey;
      this.customResMapMethod = customResMapMethod;
      this.batchCount = batchCount !== null && batchCount !== void 0 ? batchCount : this.defaultBatchCount;
      this.delayTime = delayTime !== null && delayTime !== void 0 ? delayTime : this.defaultDelayTime;
    }
    return _createClass(_BatchRequestService2, [{
      key: "batchRequestMethod",
      value: function () {
        var _batchRequestMethod = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(idList) {
          return _regeneratorRuntime().wrap(function _callee41$(_context41) {
            while (1) switch (_context41.prev = _context41.next) {
              case 0:
                return _context41.abrupt("return", promiseUtil.interflow(this.requestMethod(idList.join(","))));
              case 1:
              case "end":
                return _context41.stop();
            }
          }, _callee41, this);
        }));
        function batchRequestMethod(_x55) {
          return _batchRequestMethod.apply(this, arguments);
        }
        return batchRequestMethod;
      }() // 针对responseKey的值是数组的情况, 需要传itemKey
    }, {
      key: "universalResMapMethod",
      value: function universalResMapMethod(res, targetItemKey) {
        var _this25 = this,
          _data$targetItemKey;
        if (this.customResMapMethod) {
          return this.customResMapMethod(res, targetItemKey);
        }
        if (!this.responseKey) return {};
        var data = {};
        if (this.itemKey) {
          var list = (res == null ? void 0 : res.data[this.responseKey]) || [];
          Array.isArray(list) && list.forEach(function (item) {
            data[item[_this25.itemKey]] = item;
          });
        } else {
          data = (res == null ? void 0 : res.data[this.responseKey]) || {};
        }
        return (_data$targetItemKey = data[targetItemKey]) !== null && _data$targetItemKey !== void 0 ? _data$targetItemKey : {};
      }
      /**
       *
       * @param uid
       */
    }, {
      key: "getResponseData",
      value: (function () {
        var _getResponseData = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee43(uid) {
          var _this26 = this;
          var _yield$_BatchRequestS, _yield$_BatchRequestS2, err2, res2, _yield$_BatchRequestS3, _yield$_BatchRequestS4, err, res;
          return _regeneratorRuntime().wrap(function _callee43$(_context44) {
            while (1) switch (_context44.prev = _context44.next) {
              case 0:
                if (!_BatchRequestService2.queryQueue.includes(uid)) {
                  _BatchRequestService2.queryQueue.push(uid);
                }
                if (!_BatchRequestService2.timeoutId) {
                  _context44.next = 14;
                  break;
                }
                _context44.next = 4;
                return _BatchRequestService2.timeoutDefer;
              case 4:
                _context44.next = 6;
                return _BatchRequestService2.deferMap[uid];
              case 6:
                _yield$_BatchRequestS = _context44.sent;
                _yield$_BatchRequestS2 = _slicedToArray(_yield$_BatchRequestS, 2);
                err2 = _yield$_BatchRequestS2[0];
                res2 = _yield$_BatchRequestS2[1];
                if (!err2) {
                  _context44.next = 12;
                  break;
                }
                throw err2;
              case 12:
                delete _BatchRequestService2.deferMap[uid];
                return _context44.abrupt("return", this.universalResMapMethod(res2, uid));
              case 14:
                _BatchRequestService2.timeoutDefer = new Promise(function (resolve) {
                  var delay = _BatchRequestService2.isFirstCall ? 0 : _this26.delayTime;
                  _BatchRequestService2.timeoutId = window.setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42() {
                    var _loop2;
                    return _regeneratorRuntime().wrap(function _callee42$(_context43) {
                      while (1) switch (_context43.prev = _context43.next) {
                        case 0:
                          if (!(_BatchRequestService2.queryQueue.length > 0)) {
                            _context43.next = 6;
                            break;
                          }
                          _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2() {
                            var idList, res2;
                            return _regeneratorRuntime().wrap(function _loop2$(_context42) {
                              while (1) switch (_context42.prev = _context42.next) {
                                case 0:
                                  idList = _BatchRequestService2.queryQueue.splice(0, _this26.batchCount);
                                  res2 = promiseUtil.retry(function () {
                                    return _this26.batchRequestMethod(idList);
                                  });
                                  idList.forEach(function (uid2) {
                                    _BatchRequestService2.deferMap[uid2] = res2;
                                  });
                                case 3:
                                case "end":
                                  return _context42.stop();
                              }
                            }, _loop2);
                          });
                        case 2:
                          if (!(_BatchRequestService2.queryQueue.length > 0)) {
                            _context43.next = 6;
                            break;
                          }
                          return _context43.delegateYield(_loop2(), "t0", 4);
                        case 4:
                          _context43.next = 2;
                          break;
                        case 6:
                          _BatchRequestService2.timeoutId = null;
                          resolve(null);
                        case 8:
                        case "end":
                          return _context43.stop();
                      }
                    }, _callee42);
                  })), delay);
                  _BatchRequestService2.isFirstCall = false;
                });
                _context44.next = 17;
                return _BatchRequestService2.timeoutDefer;
              case 17:
                _context44.next = 19;
                return _BatchRequestService2.deferMap[uid];
              case 19:
                _yield$_BatchRequestS3 = _context44.sent;
                _yield$_BatchRequestS4 = _slicedToArray(_yield$_BatchRequestS3, 2);
                err = _yield$_BatchRequestS4[0];
                res = _yield$_BatchRequestS4[1];
                if (!err) {
                  _context44.next = 25;
                  break;
                }
                throw err;
              case 25:
                delete _BatchRequestService2.deferMap[uid];
                return _context44.abrupt("return", this.universalResMapMethod(res, uid));
              case 27:
              case "end":
                return _context44.stop();
            }
          }, _callee43, this);
        }));
        function getResponseData(_x56) {
          return _getResponseData.apply(this, arguments);
        }
        return getResponseData;
      }())
    }]);
  }();
  _BatchRequestService.timeoutId = null;
  _BatchRequestService.queryQueue = [];
  _BatchRequestService.timeoutDefer = null;
  _BatchRequestService.deferMap = {};
  _BatchRequestService.isFirstCall = true;
  var BatchRequestService = _BatchRequestService;
  var durationTime = 3e3;
  var toast$1 = new (/*#__PURE__*/function () {
    "use strict";

    function _class() {
      _classCallCheck(this, _class);
    }
    return _createClass(_class, [{
      key: "info",
      value: function info(msg) {
        typeToast.info(msg, {
          duration: durationTime,
          customStyle: {
            fontSize: "14px"
          }
        });
      }
    }, {
      key: "success",
      value: function success(msg) {
        typeToast.success(msg, {
          duration: 500,
          customStyle: {
            backgroundColor: "#2F3238",
            fontSize: "14px"
          }
        });
      }
    }, {
      key: "error",
      value: function error(msg) {
        typeToast.error(msg, {
          duration: 500,
          customStyle: {
            backgroundColor: "#2F3238",
            fontSize: "14px"
          }
        });
      }
    }]);
  }())();
  var u$1 = navigator.userAgent;
  var biliVersion$1 = (u$1.match(/BiliApp\/([^ ]*)/) || [])[1] || "0";
  var isAndroid$2 = /android|adr|linux/i.test(u$1);
  var isIpod = /iPod/.test(u$1);
  var isIphone$2 = /iPhone/.test(u$1);
  var isIpad = /iPad/.test(u$1);
  var isiOS = isIphone$2 || isIpad || isIpod;
  var isMobile = /Phone|Android|iPhone|iPad|PlayBook|Mobile|Tablet/.test(u$1);
  var isPC = !isMobile;
  var isBiliApp$1 = /BiliApp|BiliComic/i.test(u$1);
  var isApp$1 = u$1.indexOf("Bili") > -1;
  var isUat$3 = window.location.href.indexOf("uat") >= 0;
  window.location.href.indexOf("preview") > -1;
  biliVersion$1.length > 4 ? Number(biliVersion$1.toString().substr(0, 4)) : Number(biliVersion$1);
  var activityName = "activity-task-component";
  var isUat$2 = window.location.href.indexOf("uat-") >= 0;
  var isPre$1 = window.location.href.indexOf("pre-") >= 0;
  var envPrefix$1 = isUat$2 ? "uat-" : isPre$1 ? "pre-" : "";
  var actApiPrefix$1 = "".concat(location.protocol, "//").concat(envPrefix$1, "api.bilibili.com");
  function getCookie$3(name) {
    if (!name) {
      return "";
    }
    var cookie2 = "".concat(document.cookie);
    var indexStart = cookie2.indexOf("".concat(name, "="));
    if (indexStart === -1) {
      return "";
    }
    var indexEnd = cookie2.indexOf(";", indexStart);
    if (indexEnd === -1) {
      indexEnd = cookie2.length;
    }
    return decodeURIComponent(cookie2.substring(indexStart + name.length + 1, indexEnd));
  }
  var _assign$2 = function __assign$7() {
    _assign$2 = Object.assign || function __assign2(t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return _assign$2.apply(this, arguments);
  };
  function __awaiter$2(thisArg, _arguments, P2, generator) {
    function adopt(value) {
      return value instanceof P2 ? value : new P2(function (resolve) {
        resolve(value);
      });
    }
    return new (P2 || (P2 = Promise))(function (resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e2) {
          reject(e2);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e2) {
          reject(e2);
        }
      }
      function step(result2) {
        result2.done ? resolve(result2.value) : adopt(result2.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  }
  function __generator$2(thisArg, body2) {
    var _2 = {
        label: 0,
        sent: function sent() {
          if (t2[0] & 1) throw t2[1];
          return t2[1];
        },
        trys: [],
        ops: []
      },
      f2,
      y2,
      t2,
      g2 = Object.create((typeof Iterator === "function" ? Iterator : Object).prototype);
    return g2.next = verb(0), g2["throw"] = verb(1), g2["return"] = verb(2), typeof Symbol === "function" && (g2[Symbol.iterator] = function () {
      return this;
    }), g2;
    function verb(n2) {
      return function (v2) {
        return step([n2, v2]);
      };
    }
    function step(op) {
      if (f2) throw new TypeError("Generator is already executing.");
      while (g2 && (g2 = 0, op[0] && (_2 = 0)), _2) try {
        if (f2 = 1, y2 && (t2 = op[0] & 2 ? y2["return"] : op[0] ? y2["throw"] || ((t2 = y2["return"]) && t2.call(y2), 0) : y2.next) && !(t2 = t2.call(y2, op[1])).done) return t2;
        if (y2 = 0, t2) op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _2.label++;
            return {
              value: op[1],
              done: false
            };
          case 5:
            _2.label++;
            y2 = op[1];
            op = [0];
            continue;
          case 7:
            op = _2.ops.pop();
            _2.trys.pop();
            continue;
          default:
            if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _2 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _2.label = op[1];
              break;
            }
            if (op[0] === 6 && _2.label < t2[1]) {
              _2.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _2.label < t2[2]) {
              _2.label = t2[2];
              _2.ops.push(op);
              break;
            }
            if (t2[2]) _2.ops.pop();
            _2.trys.pop();
            continue;
        }
        op = body2.call(thisArg, _2);
      } catch (e2) {
        op = [6, e2];
        y2 = 0;
      } finally {
        f2 = t2 = 0;
      }
      if (op[0] & 5) throw op[1];
      return {
        value: op[0] ? op[1] : void 0,
        done: true
      };
    }
  }
  typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e2 = new Error(message);
    return e2.name = "SuppressedError", e2.error = error, e2.suppressed = suppressed, e2;
  };
  var baseGet = _baseGet;
  function get(object, path, defaultValue) {
    var result2 = object == null ? void 0 : baseGet(object, path);
    return result2 === void 0 ? defaultValue : result2;
  }
  var get_1 = get;
  var get$1 = /* @__PURE__ */getDefaultExportFromCjs(get_1);
  var client = {
    exports: {}
  };
  var componentEmitter = {
    exports: {}
  };
  (function (module2) {
    {
      module2.exports = Emitter;
    }
    function Emitter(obj) {
      if (obj) return mixin2(obj);
    }
    function mixin2(obj) {
      for (var key in Emitter.prototype) {
        obj[key] = Emitter.prototype[key];
      }
      return obj;
    }
    Emitter.prototype.on = Emitter.prototype.addEventListener = function (event2, fn2) {
      this._callbacks = this._callbacks || {};
      (this._callbacks["$" + event2] = this._callbacks["$" + event2] || []).push(fn2);
      return this;
    };
    Emitter.prototype.once = function (event2, fn2) {
      function on2() {
        this.off(event2, on2);
        fn2.apply(this, arguments);
      }
      on2.fn = fn2;
      this.on(event2, on2);
      return this;
    };
    Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event2, fn2) {
      this._callbacks = this._callbacks || {};
      if (0 == arguments.length) {
        this._callbacks = {};
        return this;
      }
      var callbacks = this._callbacks["$" + event2];
      if (!callbacks) return this;
      if (1 == arguments.length) {
        delete this._callbacks["$" + event2];
        return this;
      }
      var cb;
      for (var i2 = 0; i2 < callbacks.length; i2++) {
        cb = callbacks[i2];
        if (cb === fn2 || cb.fn === fn2) {
          callbacks.splice(i2, 1);
          break;
        }
      }
      if (callbacks.length === 0) {
        delete this._callbacks["$" + event2];
      }
      return this;
    };
    Emitter.prototype.emit = function (event2) {
      this._callbacks = this._callbacks || {};
      var args = new Array(arguments.length - 1),
        callbacks = this._callbacks["$" + event2];
      for (var i2 = 1; i2 < arguments.length; i2++) {
        args[i2 - 1] = arguments[i2];
      }
      if (callbacks) {
        callbacks = callbacks.slice(0);
        for (var i2 = 0, len = callbacks.length; i2 < len; ++i2) {
          callbacks[i2].apply(this, args);
        }
      }
      return this;
    };
    Emitter.prototype.listeners = function (event2) {
      this._callbacks = this._callbacks || {};
      return this._callbacks["$" + event2] || [];
    };
    Emitter.prototype.hasListeners = function (event2) {
      return !!this.listeners(event2).length;
    };
  })(componentEmitter);
  var componentEmitterExports = componentEmitter.exports;
  var fastSafeStringify = stringify$3;
  stringify$3["default"] = stringify$3;
  stringify$3.stable = deterministicStringify;
  stringify$3.stableStringify = deterministicStringify;
  var LIMIT_REPLACE_NODE = "[...]";
  var CIRCULAR_REPLACE_NODE = "[Circular]";
  var arr = [];
  var replacerStack = [];
  function defaultOptions() {
    return {
      depthLimit: Number.MAX_SAFE_INTEGER,
      edgesLimit: Number.MAX_SAFE_INTEGER
    };
  }
  function stringify$3(obj, replacer, spacer, options) {
    if (typeof options === "undefined") {
      options = defaultOptions();
    }
    decirc(obj, "", 0, [], void 0, 0, options);
    var res;
    try {
      if (replacerStack.length === 0) {
        res = JSON.stringify(obj, replacer, spacer);
      } else {
        res = JSON.stringify(obj, replaceGetterValues(replacer), spacer);
      }
    } catch (_2) {
      return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]");
    } finally {
      while (arr.length !== 0) {
        var part = arr.pop();
        if (part.length === 4) {
          Object.defineProperty(part[0], part[1], part[3]);
        } else {
          part[0][part[1]] = part[2];
        }
      }
    }
    return res;
  }
  function setReplace(replace2, val, k2, parent2) {
    var propertyDescriptor = Object.getOwnPropertyDescriptor(parent2, k2);
    if (propertyDescriptor.get !== void 0) {
      if (propertyDescriptor.configurable) {
        Object.defineProperty(parent2, k2, {
          value: replace2
        });
        arr.push([parent2, k2, val, propertyDescriptor]);
      } else {
        replacerStack.push([val, k2, replace2]);
      }
    } else {
      parent2[k2] = replace2;
      arr.push([parent2, k2, val]);
    }
  }
  function decirc(val, k2, edgeIndex, stack, parent2, depth, options) {
    depth += 1;
    var i2;
    if (_typeof4(val) === "object" && val !== null) {
      for (i2 = 0; i2 < stack.length; i2++) {
        if (stack[i2] === val) {
          setReplace(CIRCULAR_REPLACE_NODE, val, k2, parent2);
          return;
        }
      }
      if (typeof options.depthLimit !== "undefined" && depth > options.depthLimit) {
        setReplace(LIMIT_REPLACE_NODE, val, k2, parent2);
        return;
      }
      if (typeof options.edgesLimit !== "undefined" && edgeIndex + 1 > options.edgesLimit) {
        setReplace(LIMIT_REPLACE_NODE, val, k2, parent2);
        return;
      }
      stack.push(val);
      if (Array.isArray(val)) {
        for (i2 = 0; i2 < val.length; i2++) {
          decirc(val[i2], i2, i2, stack, val, depth, options);
        }
      } else {
        var keys2 = Object.keys(val);
        for (i2 = 0; i2 < keys2.length; i2++) {
          var key = keys2[i2];
          decirc(val[key], key, i2, stack, val, depth, options);
        }
      }
      stack.pop();
    }
  }
  function compareFunction(a2, b2) {
    if (a2 < b2) {
      return -1;
    }
    if (a2 > b2) {
      return 1;
    }
    return 0;
  }
  function deterministicStringify(obj, replacer, spacer, options) {
    if (typeof options === "undefined") {
      options = defaultOptions();
    }
    var tmp = deterministicDecirc(obj, "", 0, [], void 0, 0, options) || obj;
    var res;
    try {
      if (replacerStack.length === 0) {
        res = JSON.stringify(tmp, replacer, spacer);
      } else {
        res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer);
      }
    } catch (_2) {
      return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]");
    } finally {
      while (arr.length !== 0) {
        var part = arr.pop();
        if (part.length === 4) {
          Object.defineProperty(part[0], part[1], part[3]);
        } else {
          part[0][part[1]] = part[2];
        }
      }
    }
    return res;
  }
  function deterministicDecirc(val, k2, edgeIndex, stack, parent2, depth, options) {
    depth += 1;
    var i2;
    if (_typeof4(val) === "object" && val !== null) {
      for (i2 = 0; i2 < stack.length; i2++) {
        if (stack[i2] === val) {
          setReplace(CIRCULAR_REPLACE_NODE, val, k2, parent2);
          return;
        }
      }
      try {
        if (typeof val.toJSON === "function") {
          return;
        }
      } catch (_2) {
        return;
      }
      if (typeof options.depthLimit !== "undefined" && depth > options.depthLimit) {
        setReplace(LIMIT_REPLACE_NODE, val, k2, parent2);
        return;
      }
      if (typeof options.edgesLimit !== "undefined" && edgeIndex + 1 > options.edgesLimit) {
        setReplace(LIMIT_REPLACE_NODE, val, k2, parent2);
        return;
      }
      stack.push(val);
      if (Array.isArray(val)) {
        for (i2 = 0; i2 < val.length; i2++) {
          deterministicDecirc(val[i2], i2, i2, stack, val, depth, options);
        }
      } else {
        var tmp = {};
        var keys2 = Object.keys(val).sort(compareFunction);
        for (i2 = 0; i2 < keys2.length; i2++) {
          var key = keys2[i2];
          deterministicDecirc(val[key], key, i2, stack, val, depth, options);
          tmp[key] = val[key];
        }
        if (typeof parent2 !== "undefined") {
          arr.push([parent2, k2, val]);
          parent2[k2] = tmp;
        } else {
          return tmp;
        }
      }
      stack.pop();
    }
  }
  function replaceGetterValues(replacer) {
    replacer = typeof replacer !== "undefined" ? replacer : function (k2, v2) {
      return v2;
    };
    return function (key, val) {
      if (replacerStack.length > 0) {
        for (var i2 = 0; i2 < replacerStack.length; i2++) {
          var part = replacerStack[i2];
          if (part[1] === key && part[0] === val) {
            val = part[2];
            replacerStack.splice(i2, 1);
            break;
          }
        }
      }
      return replacer.call(this, key, val);
    };
  }
  function _typeof$1(obj) {
    "@babel/helpers - typeof";

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      _typeof$1 = function _typeof2(obj2) {
        return typeof obj2;
      };
    } else {
      _typeof$1 = function _typeof2(obj2) {
        return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
      };
    }
    return _typeof$1(obj);
  }
  function isObject$2(obj) {
    return obj !== null && _typeof$1(obj) === "object";
  }
  var isObject_1 = isObject$2;
  function _typeof(obj) {
    "@babel/helpers - typeof";

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      _typeof = function _typeof2(obj2) {
        return typeof obj2;
      };
    } else {
      _typeof = function _typeof2(obj2) {
        return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
      };
    }
    return _typeof(obj);
  }
  var isObject$1 = isObject_1;
  var requestBase = RequestBase;
  function RequestBase(object) {
    if (object) return mixin$1(object);
  }
  function mixin$1(object) {
    for (var key in RequestBase.prototype) {
      if (Object.prototype.hasOwnProperty.call(RequestBase.prototype, key)) object[key] = RequestBase.prototype[key];
    }
    return object;
  }
  RequestBase.prototype.clearTimeout = function () {
    clearTimeout(this._timer);
    clearTimeout(this._responseTimeoutTimer);
    clearTimeout(this._uploadTimeoutTimer);
    delete this._timer;
    delete this._responseTimeoutTimer;
    delete this._uploadTimeoutTimer;
    return this;
  };
  RequestBase.prototype.parse = function (fn2) {
    this._parser = fn2;
    return this;
  };
  RequestBase.prototype.responseType = function (value) {
    this._responseType = value;
    return this;
  };
  RequestBase.prototype.serialize = function (fn2) {
    this._serializer = fn2;
    return this;
  };
  RequestBase.prototype.timeout = function (options) {
    if (!options || _typeof(options) !== "object") {
      this._timeout = options;
      this._responseTimeout = 0;
      this._uploadTimeout = 0;
      return this;
    }
    for (var option in options) {
      if (Object.prototype.hasOwnProperty.call(options, option)) {
        switch (option) {
          case "deadline":
            this._timeout = options.deadline;
            break;
          case "response":
            this._responseTimeout = options.response;
            break;
          case "upload":
            this._uploadTimeout = options.upload;
            break;
          default:
            console.warn("Unknown timeout option", option);
        }
      }
    }
    return this;
  };
  RequestBase.prototype.retry = function (count, fn2) {
    if (arguments.length === 0 || count === true) count = 1;
    if (count <= 0) count = 0;
    this._maxRetries = count;
    this._retries = 0;
    this._retryCallback = fn2;
    return this;
  };
  var ERROR_CODES = /* @__PURE__ */new Set(["ETIMEDOUT", "ECONNRESET", "EADDRINUSE", "ECONNREFUSED", "EPIPE", "ENOTFOUND", "ENETUNREACH", "EAI_AGAIN"]);
  var STATUS_CODES = /* @__PURE__ */new Set([408, 413, 429, 500, 502, 503, 504, 521, 522, 524]);
  RequestBase.prototype._shouldRetry = function (err, res) {
    if (!this._maxRetries || this._retries++ >= this._maxRetries) {
      return false;
    }
    if (this._retryCallback) {
      try {
        var override = this._retryCallback(err, res);
        if (override === true) return true;
        if (override === false) return false;
      } catch (err_) {
        console.error(err_);
      }
    }
    if (res && res.status && STATUS_CODES.has(res.status)) return true;
    if (err) {
      if (err.code && ERROR_CODES.has(err.code)) return true;
      if (err.timeout && err.code === "ECONNABORTED") return true;
      if (err.crossDomain) return true;
    }
    return false;
  };
  RequestBase.prototype._retry = function () {
    this.clearTimeout();
    if (this.req) {
      this.req = null;
      this.req = this.request();
    }
    this._aborted = false;
    this.timedout = false;
    this.timedoutError = null;
    return this._end();
  };
  RequestBase.prototype.then = function (resolve, reject) {
    var _this = this;
    if (!this._fullfilledPromise) {
      var self2 = this;
      if (this._endCalled) {
        console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises");
      }
      this._fullfilledPromise = new Promise(function (resolve2, reject2) {
        self2.on("abort", function () {
          if (_this._maxRetries && _this._maxRetries > _this._retries) {
            return;
          }
          if (_this.timedout && _this.timedoutError) {
            reject2(_this.timedoutError);
            return;
          }
          var err = new Error("Aborted");
          err.code = "ABORTED";
          err.status = _this.status;
          err.method = _this.method;
          err.url = _this.url;
          reject2(err);
        });
        self2.end(function (err, res) {
          if (err) reject2(err);else resolve2(res);
        });
      });
    }
    return this._fullfilledPromise.then(resolve, reject);
  };
  RequestBase.prototype["catch"] = function (cb) {
    return this.then(void 0, cb);
  };
  RequestBase.prototype.use = function (fn2) {
    fn2(this);
    return this;
  };
  RequestBase.prototype.ok = function (cb) {
    if (typeof cb !== "function") throw new Error("Callback required");
    this._okCallback = cb;
    return this;
  };
  RequestBase.prototype._isResponseOK = function (res) {
    if (!res) {
      return false;
    }
    if (this._okCallback) {
      return this._okCallback(res);
    }
    return res.status >= 200 && res.status < 300;
  };
  RequestBase.prototype.get = function (field) {
    return this._header[field.toLowerCase()];
  };
  RequestBase.prototype.getHeader = RequestBase.prototype.get;
  RequestBase.prototype.set = function (field, value) {
    if (isObject$1(field)) {
      for (var key in field) {
        if (Object.prototype.hasOwnProperty.call(field, key)) this.set(key, field[key]);
      }
      return this;
    }
    this._header[field.toLowerCase()] = value;
    this.header[field] = value;
    return this;
  };
  RequestBase.prototype.unset = function (field) {
    delete this._header[field.toLowerCase()];
    delete this.header[field];
    return this;
  };
  RequestBase.prototype.field = function (name, value) {
    if (name === null || void 0 === name) {
      throw new Error(".field(name, val) name can not be empty");
    }
    if (this._data) {
      throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");
    }
    if (isObject$1(name)) {
      for (var key in name) {
        if (Object.prototype.hasOwnProperty.call(name, key)) this.field(key, name[key]);
      }
      return this;
    }
    if (Array.isArray(value)) {
      for (var i2 in value) {
        if (Object.prototype.hasOwnProperty.call(value, i2)) this.field(name, value[i2]);
      }
      return this;
    }
    if (value === null || void 0 === value) {
      throw new Error(".field(name, val) val can not be empty");
    }
    if (typeof value === "boolean") {
      value = String(value);
    }
    this._getFormData().append(name, value);
    return this;
  };
  RequestBase.prototype.abort = function () {
    if (this._aborted) {
      return this;
    }
    this._aborted = true;
    if (this.xhr) this.xhr.abort();
    if (this.req) this.req.abort();
    this.clearTimeout();
    this.emit("abort");
    return this;
  };
  RequestBase.prototype._auth = function (user, pass, options, base64Encoder) {
    switch (options.type) {
      case "basic":
        this.set("Authorization", "Basic ".concat(base64Encoder("".concat(user, ":").concat(pass))));
        break;
      case "auto":
        this.username = user;
        this.password = pass;
        break;
      case "bearer":
        this.set("Authorization", "Bearer ".concat(user));
        break;
    }
    return this;
  };
  RequestBase.prototype.withCredentials = function (on2) {
    if (on2 === void 0) on2 = true;
    this._withCredentials = on2;
    return this;
  };
  RequestBase.prototype.redirects = function (n2) {
    this._maxRedirects = n2;
    return this;
  };
  RequestBase.prototype.maxResponseSize = function (n2) {
    if (typeof n2 !== "number") {
      throw new TypeError("Invalid argument");
    }
    this._maxResponseSize = n2;
    return this;
  };
  RequestBase.prototype.toJSON = function () {
    return {
      method: this.method,
      url: this.url,
      data: this._data,
      headers: this._header
    };
  };
  RequestBase.prototype.send = function (data) {
    var isObject_ = isObject$1(data);
    var type2 = this._header["content-type"];
    if (this._formData) {
      throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");
    }
    if (isObject_ && !this._data) {
      if (Array.isArray(data)) {
        this._data = [];
      } else if (!this._isHost(data)) {
        this._data = {};
      }
    } else if (data && this._data && this._isHost(this._data)) {
      throw new Error("Can't merge these send calls");
    }
    if (isObject_ && isObject$1(this._data)) {
      for (var key in data) {
        if (Object.prototype.hasOwnProperty.call(data, key)) this._data[key] = data[key];
      }
    } else if (typeof data === "string") {
      if (!type2) this.type("form");
      type2 = this._header["content-type"];
      if (type2) type2 = type2.toLowerCase().trim();
      if (type2 === "application/x-www-form-urlencoded") {
        this._data = this._data ? "".concat(this._data, "&").concat(data) : data;
      } else {
        this._data = (this._data || "") + data;
      }
    } else {
      this._data = data;
    }
    if (!isObject_ || this._isHost(data)) {
      return this;
    }
    if (!type2) this.type("json");
    return this;
  };
  RequestBase.prototype.sortQuery = function (sort) {
    this._sort = typeof sort === "undefined" ? true : sort;
    return this;
  };
  RequestBase.prototype._finalizeQueryString = function () {
    var query2 = this._query.join("&");
    if (query2) {
      this.url += (this.url.includes("?") ? "&" : "?") + query2;
    }
    this._query.length = 0;
    if (this._sort) {
      var index2 = this.url.indexOf("?");
      if (index2 >= 0) {
        var queryArray = this.url.slice(index2 + 1).split("&");
        if (typeof this._sort === "function") {
          queryArray.sort(this._sort);
        } else {
          queryArray.sort();
        }
        this.url = this.url.slice(0, index2) + "?" + queryArray.join("&");
      }
    }
  };
  RequestBase.prototype._appendQueryString = function () {
    console.warn("Unsupported");
  };
  RequestBase.prototype._timeoutError = function (reason, timeout2, errno) {
    if (this._aborted) {
      return;
    }
    var err = new Error("".concat(reason + timeout2, "ms exceeded"));
    err.timeout = timeout2;
    err.code = "ECONNABORTED";
    err.errno = errno;
    this.timedout = true;
    this.timedoutError = err;
    this.abort();
    this.callback(err);
  };
  RequestBase.prototype._setTimeouts = function () {
    var self2 = this;
    if (this._timeout && !this._timer) {
      this._timer = setTimeout(function () {
        self2._timeoutError("Timeout of ", self2._timeout, "ETIME");
      }, this._timeout);
    }
    if (this._responseTimeout && !this._responseTimeoutTimer) {
      this._responseTimeoutTimer = setTimeout(function () {
        self2._timeoutError("Response timeout of ", self2._responseTimeout, "ETIMEDOUT");
      }, this._responseTimeout);
    }
  };
  var utils$7 = {};
  function _createForOfIteratorHelper(o2, allowArrayLike) {
    var it2;
    if (typeof Symbol === "undefined" || o2[Symbol.iterator] == null) {
      if (Array.isArray(o2) || (it2 = _unsupportedIterableToArray$1(o2)) || allowArrayLike && o2 && typeof o2.length === "number") {
        if (it2) o2 = it2;
        var i2 = 0;
        var F2 = function F3() {};
        return {
          s: F2,
          n: function n2() {
            if (i2 >= o2.length) return {
              done: true
            };
            return {
              done: false,
              value: o2[i2++]
            };
          },
          e: function e2(_e3) {
            throw _e3;
          },
          f: F2
        };
      }
      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var normalCompletion = true,
      didErr = false,
      err;
    return {
      s: function s2() {
        it2 = o2[Symbol.iterator]();
      },
      n: function n2() {
        var step = it2.next();
        normalCompletion = step.done;
        return step;
      },
      e: function e2(_e22) {
        didErr = true;
        err = _e22;
      },
      f: function f2() {
        try {
          if (!normalCompletion && it2["return"] != null) it2["return"]();
        } finally {
          if (didErr) throw err;
        }
      }
    };
  }
  function _unsupportedIterableToArray$1(o2, minLen) {
    if (!o2) return;
    if (typeof o2 === "string") return _arrayLikeToArray$1(o2, minLen);
    var n2 = Object.prototype.toString.call(o2).slice(8, -1);
    if (n2 === "Object" && o2.constructor) n2 = o2.constructor.name;
    if (n2 === "Map" || n2 === "Set") return Array.from(o2);
    if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2)) return _arrayLikeToArray$1(o2, minLen);
  }
  function _arrayLikeToArray$1(arr2, len) {
    if (len == null || len > arr2.length) len = arr2.length;
    for (var i2 = 0, arr22 = new Array(len); i2 < len; i2++) {
      arr22[i2] = arr2[i2];
    }
    return arr22;
  }
  utils$7.type = function (str) {
    return str.split(/ *; */).shift();
  };
  utils$7.params = function (val) {
    var obj = {};
    var _iterator = _createForOfIteratorHelper(val.split(/ *; */)),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var str = _step.value;
        var parts = str.split(/ *= */);
        var key = parts.shift();
        var _val = parts.shift();
        if (key && _val) obj[key] = _val;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return obj;
  };
  utils$7.parseLinks = function (val) {
    var obj = {};
    var _iterator2 = _createForOfIteratorHelper(val.split(/ *, */)),
      _step2;
    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var str = _step2.value;
        var parts = str.split(/ *; */);
        var url2 = parts[0].slice(1, -1);
        var rel = parts[1].split(/ *= */)[1].slice(1, -1);
        obj[rel] = url2;
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
    return obj;
  };
  utils$7.cleanHeader = function (header, changesOrigin) {
    delete header["content-type"];
    delete header["content-length"];
    delete header["transfer-encoding"];
    delete header.host;
    if (changesOrigin) {
      delete header.authorization;
      delete header.cookie;
    }
    return header;
  };
  var utils$6 = utils$7;
  var responseBase = ResponseBase;
  function ResponseBase(obj) {
    if (obj) return mixin(obj);
  }
  function mixin(obj) {
    for (var key in ResponseBase.prototype) {
      if (Object.prototype.hasOwnProperty.call(ResponseBase.prototype, key)) obj[key] = ResponseBase.prototype[key];
    }
    return obj;
  }
  ResponseBase.prototype.get = function (field) {
    return this.header[field.toLowerCase()];
  };
  ResponseBase.prototype._setHeaderProperties = function (header) {
    var ct2 = header["content-type"] || "";
    this.type = utils$6.type(ct2);
    var params = utils$6.params(ct2);
    for (var key in params) {
      if (Object.prototype.hasOwnProperty.call(params, key)) this[key] = params[key];
    }
    this.links = {};
    try {
      if (header.link) {
        this.links = utils$6.parseLinks(header.link);
      }
    } catch (_unused) {}
  };
  ResponseBase.prototype._setStatusProperties = function (status) {
    var type2 = status / 100 | 0;
    this.statusCode = status;
    this.status = this.statusCode;
    this.statusType = type2;
    this.info = type2 === 1;
    this.ok = type2 === 2;
    this.redirect = type2 === 3;
    this.clientError = type2 === 4;
    this.serverError = type2 === 5;
    this.error = type2 === 4 || type2 === 5 ? this.toError() : false;
    this.created = status === 201;
    this.accepted = status === 202;
    this.noContent = status === 204;
    this.badRequest = status === 400;
    this.unauthorized = status === 401;
    this.notAcceptable = status === 406;
    this.forbidden = status === 403;
    this.notFound = status === 404;
    this.unprocessableEntity = status === 422;
  };
  function _toConsumableArray(arr2) {
    return _arrayWithoutHoles(arr2) || _iterableToArray(arr2) || _unsupportedIterableToArray(arr2) || _nonIterableSpread();
  }
  function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  function _unsupportedIterableToArray(o2, minLen) {
    if (!o2) return;
    if (typeof o2 === "string") return _arrayLikeToArray(o2, minLen);
    var n2 = Object.prototype.toString.call(o2).slice(8, -1);
    if (n2 === "Object" && o2.constructor) n2 = o2.constructor.name;
    if (n2 === "Map" || n2 === "Set") return Array.from(o2);
    if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2)) return _arrayLikeToArray(o2, minLen);
  }
  function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
  }
  function _arrayWithoutHoles(arr2) {
    if (Array.isArray(arr2)) return _arrayLikeToArray(arr2);
  }
  function _arrayLikeToArray(arr2, len) {
    if (len == null || len > arr2.length) len = arr2.length;
    for (var i2 = 0, arr22 = new Array(len); i2 < len; i2++) {
      arr22[i2] = arr2[i2];
    }
    return arr22;
  }
  function Agent() {
    this._defaults = [];
  }
  ["use", "on", "once", "set", "query", "type", "accept", "auth", "withCredentials", "sortQuery", "retry", "ok", "redirects", "timeout", "buffer", "serialize", "parse", "ca", "key", "pfx", "cert", "disableTLSCerts"].forEach(function (fn2) {
    Agent.prototype[fn2] = function () {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      this._defaults.push({
        fn: fn2,
        args: args
      });
      return this;
    };
  });
  Agent.prototype._setDefaults = function (req) {
    this._defaults.forEach(function (def) {
      req[def.fn].apply(req, _toConsumableArray(def.args));
    });
  };
  var agentBase = Agent;
  (function (module2, exports2) {
    function _typeof2(obj) {
      "@babel/helpers - typeof";

      if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
        _typeof2 = function _typeof3(obj2) {
          return typeof obj2;
        };
      } else {
        _typeof2 = function _typeof3(obj2) {
          return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
        };
      }
      return _typeof2(obj);
    }
    var root2;
    if (typeof window !== "undefined") {
      root2 = window;
    } else if (typeof self === "undefined") {
      console.warn("Using browser-only version of superagent in non-browser environment");
      root2 = void 0;
    } else {
      root2 = self;
    }
    var Emitter = componentEmitterExports;
    var safeStringify = fastSafeStringify;
    var qs2 = lib$2;
    var RequestBase2 = requestBase;
    var isObject2 = isObject_1;
    var ResponseBase2 = responseBase;
    var Agent2 = agentBase;
    function noop() {}
    module2.exports = function (method, url2) {
      if (typeof url2 === "function") {
        return new exports2.Request("GET", method).end(url2);
      }
      if (arguments.length === 1) {
        return new exports2.Request("GET", method);
      }
      return new exports2.Request(method, url2);
    };
    exports2 = module2.exports;
    var request2 = exports2;
    exports2.Request = Request;
    request2.getXHR = function () {
      if (root2.XMLHttpRequest && (!root2.location || root2.location.protocol !== "file:" || !root2.ActiveXObject)) {
        return new XMLHttpRequest();
      }
      try {
        return new ActiveXObject("Microsoft.XMLHTTP");
      } catch (_unused) {}
      try {
        return new ActiveXObject("Msxml2.XMLHTTP.6.0");
      } catch (_unused2) {}
      try {
        return new ActiveXObject("Msxml2.XMLHTTP.3.0");
      } catch (_unused3) {}
      try {
        return new ActiveXObject("Msxml2.XMLHTTP");
      } catch (_unused4) {}
      throw new Error("Browser-only version of superagent could not find XHR");
    };
    var trim = "".trim ? function (s2) {
      return s2.trim();
    } : function (s2) {
      return s2.replace(/(^\s*|\s*$)/g, "");
    };
    function serialize(obj) {
      if (!isObject2(obj)) return obj;
      var pairs = [];
      for (var key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) pushEncodedKeyValuePair(pairs, key, obj[key]);
      }
      return pairs.join("&");
    }
    function pushEncodedKeyValuePair(pairs, key, val) {
      if (val === void 0) return;
      if (val === null) {
        pairs.push(encodeURI(key));
        return;
      }
      if (Array.isArray(val)) {
        val.forEach(function (v2) {
          pushEncodedKeyValuePair(pairs, key, v2);
        });
      } else if (isObject2(val)) {
        for (var subkey in val) {
          if (Object.prototype.hasOwnProperty.call(val, subkey)) pushEncodedKeyValuePair(pairs, "".concat(key, "[").concat(subkey, "]"), val[subkey]);
        }
      } else {
        pairs.push(encodeURI(key) + "=" + encodeURIComponent(val));
      }
    }
    request2.serializeObject = serialize;
    function parseString(str) {
      var obj = {};
      var pairs = str.split("&");
      var pair;
      var pos;
      for (var i2 = 0, len = pairs.length; i2 < len; ++i2) {
        pair = pairs[i2];
        pos = pair.indexOf("=");
        if (pos === -1) {
          obj[decodeURIComponent(pair)] = "";
        } else {
          obj[decodeURIComponent(pair.slice(0, pos))] = decodeURIComponent(pair.slice(pos + 1));
        }
      }
      return obj;
    }
    request2.parseString = parseString;
    request2.types = {
      html: "text/html",
      json: "application/json",
      xml: "text/xml",
      urlencoded: "application/x-www-form-urlencoded",
      form: "application/x-www-form-urlencoded",
      "form-data": "application/x-www-form-urlencoded"
    };
    request2.serialize = {
      "application/x-www-form-urlencoded": qs2.stringify,
      "application/json": safeStringify
    };
    request2.parse = {
      "application/x-www-form-urlencoded": parseString,
      "application/json": JSON.parse
    };
    function parseHeader(str) {
      var lines = str.split(/\r?\n/);
      var fields = {};
      var index2;
      var line;
      var field;
      var val;
      for (var i2 = 0, len = lines.length; i2 < len; ++i2) {
        line = lines[i2];
        index2 = line.indexOf(":");
        if (index2 === -1) {
          continue;
        }
        field = line.slice(0, index2).toLowerCase();
        val = trim(line.slice(index2 + 1));
        fields[field] = val;
      }
      return fields;
    }
    function isJSON(mime) {
      return /[/+]json($|[^-\w])/i.test(mime);
    }
    function Response2(req) {
      this.req = req;
      this.xhr = this.req.xhr;
      this.text = this.req.method !== "HEAD" && (this.xhr.responseType === "" || this.xhr.responseType === "text") || typeof this.xhr.responseType === "undefined" ? this.xhr.responseText : null;
      this.statusText = this.req.xhr.statusText;
      var status = this.xhr.status;
      if (status === 1223) {
        status = 204;
      }
      this._setStatusProperties(status);
      this.headers = parseHeader(this.xhr.getAllResponseHeaders());
      this.header = this.headers;
      this.header["content-type"] = this.xhr.getResponseHeader("content-type");
      this._setHeaderProperties(this.header);
      if (this.text === null && req._responseType) {
        this.body = this.xhr.response;
      } else {
        this.body = this.req.method === "HEAD" ? null : this._parseBody(this.text ? this.text : this.xhr.response);
      }
    }
    ResponseBase2(Response2.prototype);
    Response2.prototype._parseBody = function (str) {
      var parse2 = request2.parse[this.type];
      if (this.req._parser) {
        return this.req._parser(this, str);
      }
      if (!parse2 && isJSON(this.type)) {
        parse2 = request2.parse["application/json"];
      }
      return parse2 && str && (str.length > 0 || str instanceof Object) ? parse2(str) : null;
    };
    Response2.prototype.toError = function () {
      var req = this.req;
      var method = req.method;
      var url2 = req.url;
      var msg = "cannot ".concat(method, " ").concat(url2, " (").concat(this.status, ")");
      var err = new Error(msg);
      err.status = this.status;
      err.method = method;
      err.url = url2;
      return err;
    };
    request2.Response = Response2;
    function Request(method, url2) {
      var self2 = this;
      this._query = this._query || [];
      this.method = method;
      this.url = url2;
      this.header = {};
      this._header = {};
      this.on("end", function () {
        var err = null;
        var res = null;
        try {
          res = new Response2(self2);
        } catch (err_) {
          err = new Error("Parser is unable to parse the response");
          err.parse = true;
          err.original = err_;
          if (self2.xhr) {
            err.rawResponse = typeof self2.xhr.responseType === "undefined" ? self2.xhr.responseText : self2.xhr.response;
            err.status = self2.xhr.status ? self2.xhr.status : null;
            err.statusCode = err.status;
          } else {
            err.rawResponse = null;
            err.status = null;
          }
          return self2.callback(err);
        }
        self2.emit("response", res);
        var new_err;
        try {
          if (!self2._isResponseOK(res)) {
            new_err = new Error(res.statusText || res.text || "Unsuccessful HTTP response");
          }
        } catch (err_) {
          new_err = err_;
        }
        if (new_err) {
          new_err.original = err;
          new_err.response = res;
          new_err.status = res.status;
          self2.callback(new_err, res);
        } else {
          self2.callback(null, res);
        }
      });
    }
    Emitter(Request.prototype);
    RequestBase2(Request.prototype);
    Request.prototype.type = function (type2) {
      this.set("Content-Type", request2.types[type2] || type2);
      return this;
    };
    Request.prototype.accept = function (type2) {
      this.set("Accept", request2.types[type2] || type2);
      return this;
    };
    Request.prototype.auth = function (user, pass, options) {
      if (arguments.length === 1) pass = "";
      if (_typeof2(pass) === "object" && pass !== null) {
        options = pass;
        pass = "";
      }
      if (!options) {
        options = {
          type: typeof btoa === "function" ? "basic" : "auto"
        };
      }
      var encoder = function encoder2(string) {
        if (typeof btoa === "function") {
          return btoa(string);
        }
        throw new Error("Cannot use basic auth, btoa is not a function");
      };
      return this._auth(user, pass, options, encoder);
    };
    Request.prototype.query = function (val) {
      if (typeof val !== "string") val = serialize(val);
      if (val) this._query.push(val);
      return this;
    };
    Request.prototype.attach = function (field, file, options) {
      if (file) {
        if (this._data) {
          throw new Error("superagent can't mix .send() and .attach()");
        }
        this._getFormData().append(field, file, options || file.name);
      }
      return this;
    };
    Request.prototype._getFormData = function () {
      if (!this._formData) {
        this._formData = new root2.FormData();
      }
      return this._formData;
    };
    Request.prototype.callback = function (err, res) {
      if (this._shouldRetry(err, res)) {
        return this._retry();
      }
      var fn2 = this._callback;
      this.clearTimeout();
      if (err) {
        if (this._maxRetries) err.retries = this._retries - 1;
        this.emit("error", err);
      }
      fn2(err, res);
    };
    Request.prototype.crossDomainError = function () {
      var err = new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");
      err.crossDomain = true;
      err.status = this.status;
      err.method = this.method;
      err.url = this.url;
      this.callback(err);
    };
    Request.prototype.agent = function () {
      console.warn("This is not supported in browser version of superagent");
      return this;
    };
    Request.prototype.ca = Request.prototype.agent;
    Request.prototype.buffer = Request.prototype.ca;
    Request.prototype.write = function () {
      throw new Error("Streaming is not supported in browser version of superagent");
    };
    Request.prototype.pipe = Request.prototype.write;
    Request.prototype._isHost = function (obj) {
      return obj && _typeof2(obj) === "object" && !Array.isArray(obj) && Object.prototype.toString.call(obj) !== "[object Object]";
    };
    Request.prototype.end = function (fn2) {
      if (this._endCalled) {
        console.warn("Warning: .end() was called twice. This is not supported in superagent");
      }
      this._endCalled = true;
      this._callback = fn2 || noop;
      this._finalizeQueryString();
      this._end();
    };
    Request.prototype._setUploadTimeout = function () {
      var self2 = this;
      if (this._uploadTimeout && !this._uploadTimeoutTimer) {
        this._uploadTimeoutTimer = setTimeout(function () {
          self2._timeoutError("Upload timeout of ", self2._uploadTimeout, "ETIMEDOUT");
        }, this._uploadTimeout);
      }
    };
    Request.prototype._end = function () {
      if (this._aborted) return this.callback(new Error("The request has been aborted even before .end() was called"));
      var self2 = this;
      this.xhr = request2.getXHR();
      var xhr = this.xhr;
      var data = this._formData || this._data;
      this._setTimeouts();
      xhr.onreadystatechange = function () {
        var readyState = xhr.readyState;
        if (readyState >= 2 && self2._responseTimeoutTimer) {
          clearTimeout(self2._responseTimeoutTimer);
        }
        if (readyState !== 4) {
          return;
        }
        var status;
        try {
          status = xhr.status;
        } catch (_unused5) {
          status = 0;
        }
        if (!status) {
          if (self2.timedout || self2._aborted) return;
          return self2.crossDomainError();
        }
        self2.emit("end");
      };
      var handleProgress = function handleProgress2(direction, e2) {
        if (e2.total > 0) {
          e2.percent = e2.loaded / e2.total * 100;
          if (e2.percent === 100) {
            clearTimeout(self2._uploadTimeoutTimer);
          }
        }
        e2.direction = direction;
        self2.emit("progress", e2);
      };
      if (this.hasListeners("progress")) {
        try {
          xhr.addEventListener("progress", handleProgress.bind(null, "download"));
          if (xhr.upload) {
            xhr.upload.addEventListener("progress", handleProgress.bind(null, "upload"));
          }
        } catch (_unused6) {}
      }
      if (xhr.upload) {
        this._setUploadTimeout();
      }
      try {
        if (this.username && this.password) {
          xhr.open(this.method, this.url, true, this.username, this.password);
        } else {
          xhr.open(this.method, this.url, true);
        }
      } catch (err) {
        return this.callback(err);
      }
      if (this._withCredentials) xhr.withCredentials = true;
      if (!this._formData && this.method !== "GET" && this.method !== "HEAD" && typeof data !== "string" && !this._isHost(data)) {
        var contentType = this._header["content-type"];
        var _serialize = this._serializer || request2.serialize[contentType ? contentType.split(";")[0] : ""];
        if (!_serialize && isJSON(contentType)) {
          _serialize = request2.serialize["application/json"];
        }
        if (_serialize) data = _serialize(data);
      }
      for (var field in this.header) {
        if (this.header[field] === null) continue;
        if (Object.prototype.hasOwnProperty.call(this.header, field)) xhr.setRequestHeader(field, this.header[field]);
      }
      if (this._responseType) {
        xhr.responseType = this._responseType;
      }
      this.emit("request", this);
      xhr.send(typeof data === "undefined" ? null : data);
    };
    request2.agent = function () {
      return new Agent2();
    };
    ["GET", "POST", "OPTIONS", "PATCH", "PUT", "DELETE"].forEach(function (method) {
      Agent2.prototype[method.toLowerCase()] = function (url2, fn2) {
        var req = new request2.Request(method, url2);
        this._setDefaults(req);
        if (fn2) {
          req.end(fn2);
        }
        return req;
      };
    });
    Agent2.prototype.del = Agent2.prototype["delete"];
    request2.get = function (url2, data, fn2) {
      var req = request2("GET", url2);
      if (typeof data === "function") {
        fn2 = data;
        data = null;
      }
      if (data) req.query(data);
      if (fn2) req.end(fn2);
      return req;
    };
    request2.head = function (url2, data, fn2) {
      var req = request2("HEAD", url2);
      if (typeof data === "function") {
        fn2 = data;
        data = null;
      }
      if (data) req.query(data);
      if (fn2) req.end(fn2);
      return req;
    };
    request2.options = function (url2, data, fn2) {
      var req = request2("OPTIONS", url2);
      if (typeof data === "function") {
        fn2 = data;
        data = null;
      }
      if (data) req.send(data);
      if (fn2) req.end(fn2);
      return req;
    };
    function del(url2, data, fn2) {
      var req = request2("DELETE", url2);
      if (typeof data === "function") {
        fn2 = data;
        data = null;
      }
      if (data) req.send(data);
      if (fn2) req.end(fn2);
      return req;
    }
    request2.del = del;
    request2["delete"] = del;
    request2.patch = function (url2, data, fn2) {
      var req = request2("PATCH", url2);
      if (typeof data === "function") {
        fn2 = data;
        data = null;
      }
      if (data) req.send(data);
      if (fn2) req.end(fn2);
      return req;
    };
    request2.post = function (url2, data, fn2) {
      var req = request2("POST", url2);
      if (typeof data === "function") {
        fn2 = data;
        data = null;
      }
      if (data) req.send(data);
      if (fn2) req.end(fn2);
      return req;
    };
    request2.put = function (url2, data, fn2) {
      var req = request2("PUT", url2);
      if (typeof data === "function") {
        fn2 = data;
        data = null;
      }
      if (data) req.send(data);
      if (fn2) req.end(fn2);
      return req;
    };
  })(client, client.exports);
  var clientExports = client.exports;
  var superagent = /* @__PURE__ */getDefaultExportFromCjs(clientExports);
  var superagentJsonp = {
    exports: {}
  };
  (function (module2) {
    var removeCallback = function removeCallback2(_ref) {
      var script = _ref.script,
        callbackName = _ref.callbackName,
        timeout2 = _ref.timeout;
      if (script && script.parentNode) script.parentNode.removeChild(script);
      delete window[callbackName];
      clearTimeout(timeout2);
    };
    var jsonp2 = function jsonp3(requestOrConfig) {
      var end = function end2() {
        var config = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        return function handler(callback) {
          var _this = this;
          var callbackParam = config.callbackParam || "callback";
          var callbackName = config.callbackName || "superagentCallback" + ((/* @__PURE__ */new Date()).valueOf() + parseInt(Math.random() * 1e3, 10));
          var timeoutLimit = config.timeout || 1e3;
          var timeout2 = setTimeout(jsonp3.errorWrapper.bind(this), timeoutLimit);
          this._jsonp = {
            callbackName: callbackName,
            callback: callback,
            timeout: timeout2
          };
          window[callbackName] = jsonp3.callbackWrapper.bind(this);
          this._query.push(encodeURIComponent(callbackParam) + "=" + encodeURIComponent(callbackName));
          var queryString2 = this._query.join("&");
          var s2 = document.createElement("script");
          {
            var separator = this.url.indexOf("?") > -1 ? "&" : "?";
            var url2 = this.url + separator + queryString2;
            s2.src = url2;
            s2.onerror = function (e2) {
              jsonp3.errorWrapper.call(_this, e2);
            };
          }
          document.head.appendChild(s2);
          this._jsonp.script = s2;
          return this;
        };
      };
      var reqFunc = function reqFunc2(request2) {
        if (typeof window === "undefined") return request2;
        request2.end = end.call(request2, requestOrConfig);
        return request2;
      };
      if (typeof requestOrConfig.end === "function") {
        return reqFunc(requestOrConfig);
      }
      return reqFunc;
    };
    jsonp2.callbackWrapper = function callbackWrapper(body2) {
      var err = null;
      var res = {
        body: body2
      };
      removeCallback(this._jsonp);
      this._jsonp.callback.call(this, err, res);
    };
    jsonp2.errorWrapper = function errorWrapper(error) {
      var err = new Error("404 Not found");
      if (error && error instanceof Event && error.type === "error") {
        err = new Error("Connection issue");
      }
      removeCallback(this._jsonp);
      this._jsonp.callback.call(this, err, null);
    };
    {
      module2.exports = jsonp2;
    }
  })(superagentJsonp);
  var superagentJsonpExports = superagentJsonp.exports;
  var jsonp = /* @__PURE__ */getDefaultExportFromCjs(superagentJsonpExports);
  var requestPayload$1 = {};
  var _requestQueue$1 = [];
  function removeFromRequestQueue$1(req) {
    var findIndex = _requestQueue$1.findIndex(function (item) {
      return item.idx === req.idx;
    });
    _requestQueue$1.splice(findIndex, 1);
  }
  function resposneHandler$1(res) {
    removeFromRequestQueue$1(res.req);
  }
  function request$1(options) {
    return __awaiter$2(this, void 0, void 0, function () {
      var param, pendingRequest, throttleType, useCache, req, d2, result2, r2;
      return __generator$2(this, function (_a3) {
        switch (_a3.label) {
          case 0:
            param = _assign$2(_assign$2({}, options), {
              method: options.method || "GET",
              idx: options.idx || JSON.stringify(options),
              cache: options.cache === void 0 ? false : options.cache,
              noCredentials: options.noCredentials === void 0 ? false : options.noCredentials
            });
            pendingRequest = _requestQueue$1.find(function (item) {
              return item.idx === param.idx;
            });
            throttleType = options.throttleType || "drop";
            useCache = param.cache && param.method.toLocaleLowerCase() === "get";
            req = superagent(param.method, param.url);
            if (param.jsonp) {
              req = superagent(param.method || "GET", param.url).use(jsonp({
                callbackParam: param.callbackParam || "callback",
                callbackName: param.callbackName || "supercallback",
                timeout: param.jsonpTimeout || 1e4
              }));
            }
            if (!param.noCredentials) {
              req.withCredentials();
            }
            req.timeout(param.timeout || 1e4);
            if (param.method.toLowerCase() === "post" && !param.form) {
              d2 = get$1(param, "data", "");
              if (!d2) {
                param.data = {};
              }
              if (!param.data.csrf) {
                param.data.csrf = getCookie$3("bili_jct");
              }
              req.set("Content-Type", "application/x-www-form-urlencoded");
            }
            if (param.headers) {
              keys$4(param.headers).forEach(function (k2) {
                req.set(k2, param.headers[k2]);
              });
            }
            if (param.query) {
              req.query(param.query);
            }
            if (!param.files) return [3, 1];
            keys$4(param.data).forEach(function (key) {
              req.field(key, param.data[key]);
            });
            keys$4(param.files).forEach(function (key) {
              req.attach(key, param.files[key]);
            });
            return [3, 6];
          case 1:
            if (!useCache) return [3, 5];
            if (!(requestPayload$1[param.url] || pendingRequest)) return [3, 4];
            if (!(pendingRequest && throttleType)) return [3, 4];
            if (!(throttleType === "abort")) return [3, 2];
            pendingRequest._req.abort();
            removeFromRequestQueue$1(pendingRequest);
            return [3, 4];
          case 2:
            if (!(throttleType === "drop")) return [3, 4];
            result2 = requestPayload$1[param.url] || pendingRequest._req;
            return [4, result2];
          case 3:
            r2 = _a3.sent();
            return [2, r2.body || r2];
          case 4:
            req.send(param.data);
            if (throttleType) {
              req.idx = param.idx;
              _requestQueue$1.push({
                idx: param.idx,
                _req: req
              });
            }
            _a3.label = 5;
          case 5:
            req.send(param.data);
            _a3.label = 6;
          case 6:
            return [2, req.then(function (res) {
              if (param.customResolve) {
                return param.customResolve(res);
              }
              var body2 = res.body;
              if (useCache) {
                requestPayload$1[param.url] = body2;
              }
              if (!body2.code) {
                return Promise.resolve(body2);
              }
              if (+body2.code !== 0) {
                return Promise.reject(body2);
              }
              resposneHandler$1(res);
              return Promise.resolve(body2);
            })["catch"](function (error) {
              return Promise.reject(error);
            })];
        }
      });
    });
  }
  function openQuickLogin$1() {
    var script = document.createElement("script");
    script.src = "//".concat(isUat$3 ? "uat-" : "", "s1.hdslb.com/bfs/seed/jinkela/short/mini-login/miniLogin.umd.min.js");
    script.onload = function () {
      var miniLogin = new window.MiniLogin();
      miniLogin.showComponent();
      miniLogin.addEventListener("success", function () {
        window.location.reload();
      });
    };
    document.body.appendChild(script);
  }
  if (isApp$1) {
    N$1();
  }
  _$1.callNative({
    method: "global.import",
    data: {
      namespace: "auth"
    }
  });
  var lodash = {
    exports: {}
  };
  /**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */
  lodash.exports;
  (function (module2, exports2) {
    (function () {
      var undefined$12;
      var VERSION = "4.17.21";
      var LARGE_ARRAY_SIZE2 = 200;
      var CORE_ERROR_TEXT = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",
        FUNC_ERROR_TEXT2 = "Expected a function",
        INVALID_TEMPL_VAR_ERROR_TEXT = "Invalid `variable` option passed into `_.template`";
      var HASH_UNDEFINED2 = "__lodash_hash_undefined__";
      var MAX_MEMOIZE_SIZE2 = 500;
      var PLACEHOLDER = "__lodash_placeholder__";
      var CLONE_DEEP_FLAG2 = 1,
        CLONE_FLAT_FLAG2 = 2,
        CLONE_SYMBOLS_FLAG2 = 4;
      var COMPARE_PARTIAL_FLAG = 1,
        COMPARE_UNORDERED_FLAG = 2;
      var WRAP_BIND_FLAG = 1,
        WRAP_BIND_KEY_FLAG = 2,
        WRAP_CURRY_BOUND_FLAG = 4,
        WRAP_CURRY_FLAG = 8,
        WRAP_CURRY_RIGHT_FLAG = 16,
        WRAP_PARTIAL_FLAG = 32,
        WRAP_PARTIAL_RIGHT_FLAG = 64,
        WRAP_ARY_FLAG = 128,
        WRAP_REARG_FLAG = 256,
        WRAP_FLIP_FLAG = 512;
      var DEFAULT_TRUNC_LENGTH = 30,
        DEFAULT_TRUNC_OMISSION = "...";
      var HOT_COUNT2 = 800,
        HOT_SPAN2 = 16;
      var LAZY_FILTER_FLAG = 1,
        LAZY_MAP_FLAG = 2,
        LAZY_WHILE_FLAG = 3;
      var INFINITY2 = 1 / 0,
        MAX_SAFE_INTEGER2 = 9007199254740991,
        MAX_INTEGER = 17976931348623157e292,
        NAN2 = 0 / 0;
      var MAX_ARRAY_LENGTH = 4294967295,
        MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,
        HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;
      var wrapFlags = [["ary", WRAP_ARY_FLAG], ["bind", WRAP_BIND_FLAG], ["bindKey", WRAP_BIND_KEY_FLAG], ["curry", WRAP_CURRY_FLAG], ["curryRight", WRAP_CURRY_RIGHT_FLAG], ["flip", WRAP_FLIP_FLAG], ["partial", WRAP_PARTIAL_FLAG], ["partialRight", WRAP_PARTIAL_RIGHT_FLAG], ["rearg", WRAP_REARG_FLAG]];
      var argsTag2 = "[object Arguments]",
        arrayTag2 = "[object Array]",
        asyncTag2 = "[object AsyncFunction]",
        boolTag2 = "[object Boolean]",
        dateTag2 = "[object Date]",
        domExcTag = "[object DOMException]",
        errorTag2 = "[object Error]",
        funcTag2 = "[object Function]",
        genTag2 = "[object GeneratorFunction]",
        mapTag2 = "[object Map]",
        numberTag2 = "[object Number]",
        nullTag2 = "[object Null]",
        objectTag2 = "[object Object]",
        promiseTag2 = "[object Promise]",
        proxyTag2 = "[object Proxy]",
        regexpTag2 = "[object RegExp]",
        setTag2 = "[object Set]",
        stringTag2 = "[object String]",
        symbolTag2 = "[object Symbol]",
        undefinedTag2 = "[object Undefined]",
        weakMapTag2 = "[object WeakMap]",
        weakSetTag = "[object WeakSet]";
      var arrayBufferTag2 = "[object ArrayBuffer]",
        dataViewTag2 = "[object DataView]",
        float32Tag2 = "[object Float32Array]",
        float64Tag2 = "[object Float64Array]",
        int8Tag2 = "[object Int8Array]",
        int16Tag2 = "[object Int16Array]",
        int32Tag2 = "[object Int32Array]",
        uint8Tag2 = "[object Uint8Array]",
        uint8ClampedTag2 = "[object Uint8ClampedArray]",
        uint16Tag2 = "[object Uint16Array]",
        uint32Tag2 = "[object Uint32Array]";
      var reEmptyStringLeading = /\b__p \+= '';/g,
        reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
        reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
      var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,
        reUnescapedHtml = /[&<>"']/g,
        reHasEscapedHtml = RegExp(reEscapedHtml.source),
        reHasUnescapedHtml = RegExp(reUnescapedHtml.source);
      var reEscape = /<%-([\s\S]+?)%>/g,
        reEvaluate = /<%([\s\S]+?)%>/g,
        reInterpolate = /<%=([\s\S]+?)%>/g;
      var reIsDeepProp2 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        reIsPlainProp2 = /^\w*$/,
        rePropName2 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
      var reRegExpChar2 = /[\\^$.*+?()[\]{}|]/g,
        reHasRegExpChar = RegExp(reRegExpChar2.source);
      var reTrimStart2 = /^\s+/;
      var reWhitespace2 = /\s/;
      var reWrapComment = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
        reWrapDetails = /\{\n\/\* \[wrapped with (.+)\] \*/,
        reSplitDetails = /,? & /;
      var reAsciiWord = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
      var reForbiddenIdentifierChars = /[()=,{}\[\]\/\s]/;
      var reEscapeChar2 = /\\(\\)?/g;
      var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
      var reFlags2 = /\w*$/;
      var reIsBadHex2 = /^[-+]0x[0-9a-f]+$/i;
      var reIsBinary2 = /^0b[01]+$/i;
      var reIsHostCtor2 = /^\[object .+?Constructor\]$/;
      var reIsOctal2 = /^0o[0-7]+$/i;
      var reIsUint2 = /^(?:0|[1-9]\d*)$/;
      var reLatin = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;
      var reNoMatch = /($^)/;
      var reUnescapedString = /['\n\r\u2028\u2029\\]/g;
      var rsAstralRange = "\\ud800-\\udfff",
        rsComboMarksRange = "\\u0300-\\u036f",
        reComboHalfMarksRange = "\\ufe20-\\ufe2f",
        rsComboSymbolsRange = "\\u20d0-\\u20ff",
        rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
        rsDingbatRange = "\\u2700-\\u27bf",
        rsLowerRange = "a-z\\xdf-\\xf6\\xf8-\\xff",
        rsMathOpRange = "\\xac\\xb1\\xd7\\xf7",
        rsNonCharRange = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",
        rsPunctuationRange = "\\u2000-\\u206f",
        rsSpaceRange = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
        rsUpperRange = "A-Z\\xc0-\\xd6\\xd8-\\xde",
        rsVarRange = "\\ufe0e\\ufe0f",
        rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;
      var rsApos = "['’]",
        rsAstral = "[" + rsAstralRange + "]",
        rsBreak = "[" + rsBreakRange + "]",
        rsCombo = "[" + rsComboRange + "]",
        rsDigits = "\\d+",
        rsDingbat = "[" + rsDingbatRange + "]",
        rsLower = "[" + rsLowerRange + "]",
        rsMisc = "[^" + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + "]",
        rsFitz = "\\ud83c[\\udffb-\\udfff]",
        rsModifier = "(?:" + rsCombo + "|" + rsFitz + ")",
        rsNonAstral = "[^" + rsAstralRange + "]",
        rsRegional = "(?:\\ud83c[\\udde6-\\uddff]){2}",
        rsSurrPair = "[\\ud800-\\udbff][\\udc00-\\udfff]",
        rsUpper = "[" + rsUpperRange + "]",
        rsZWJ = "\\u200d";
      var rsMiscLower = "(?:" + rsLower + "|" + rsMisc + ")",
        rsMiscUpper = "(?:" + rsUpper + "|" + rsMisc + ")",
        rsOptContrLower = "(?:" + rsApos + "(?:d|ll|m|re|s|t|ve))?",
        rsOptContrUpper = "(?:" + rsApos + "(?:D|LL|M|RE|S|T|VE))?",
        reOptMod = rsModifier + "?",
        rsOptVar = "[" + rsVarRange + "]?",
        rsOptJoin = "(?:" + rsZWJ + "(?:" + [rsNonAstral, rsRegional, rsSurrPair].join("|") + ")" + rsOptVar + reOptMod + ")*",
        rsOrdLower = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",
        rsOrdUpper = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",
        rsSeq = rsOptVar + reOptMod + rsOptJoin,
        rsEmoji = "(?:" + [rsDingbat, rsRegional, rsSurrPair].join("|") + ")" + rsSeq,
        rsSymbol = "(?:" + [rsNonAstral + rsCombo + "?", rsCombo, rsRegional, rsSurrPair, rsAstral].join("|") + ")";
      var reApos = RegExp(rsApos, "g");
      var reComboMark = RegExp(rsCombo, "g");
      var reUnicode = RegExp(rsFitz + "(?=" + rsFitz + ")|" + rsSymbol + rsSeq, "g");
      var reUnicodeWord = RegExp([rsUpper + "?" + rsLower + "+" + rsOptContrLower + "(?=" + [rsBreak, rsUpper, "$"].join("|") + ")", rsMiscUpper + "+" + rsOptContrUpper + "(?=" + [rsBreak, rsUpper + rsMiscLower, "$"].join("|") + ")", rsUpper + "?" + rsMiscLower + "+" + rsOptContrLower, rsUpper + "+" + rsOptContrUpper, rsOrdUpper, rsOrdLower, rsDigits, rsEmoji].join("|"), "g");
      var reHasUnicode = RegExp("[" + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + "]");
      var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
      var contextProps = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"];
      var templateCounter = -1;
      var typedArrayTags2 = {};
      typedArrayTags2[float32Tag2] = typedArrayTags2[float64Tag2] = typedArrayTags2[int8Tag2] = typedArrayTags2[int16Tag2] = typedArrayTags2[int32Tag2] = typedArrayTags2[uint8Tag2] = typedArrayTags2[uint8ClampedTag2] = typedArrayTags2[uint16Tag2] = typedArrayTags2[uint32Tag2] = true;
      typedArrayTags2[argsTag2] = typedArrayTags2[arrayTag2] = typedArrayTags2[arrayBufferTag2] = typedArrayTags2[boolTag2] = typedArrayTags2[dataViewTag2] = typedArrayTags2[dateTag2] = typedArrayTags2[errorTag2] = typedArrayTags2[funcTag2] = typedArrayTags2[mapTag2] = typedArrayTags2[numberTag2] = typedArrayTags2[objectTag2] = typedArrayTags2[regexpTag2] = typedArrayTags2[setTag2] = typedArrayTags2[stringTag2] = typedArrayTags2[weakMapTag2] = false;
      var cloneableTags2 = {};
      cloneableTags2[argsTag2] = cloneableTags2[arrayTag2] = cloneableTags2[arrayBufferTag2] = cloneableTags2[dataViewTag2] = cloneableTags2[boolTag2] = cloneableTags2[dateTag2] = cloneableTags2[float32Tag2] = cloneableTags2[float64Tag2] = cloneableTags2[int8Tag2] = cloneableTags2[int16Tag2] = cloneableTags2[int32Tag2] = cloneableTags2[mapTag2] = cloneableTags2[numberTag2] = cloneableTags2[objectTag2] = cloneableTags2[regexpTag2] = cloneableTags2[setTag2] = cloneableTags2[stringTag2] = cloneableTags2[symbolTag2] = cloneableTags2[uint8Tag2] = cloneableTags2[uint8ClampedTag2] = cloneableTags2[uint16Tag2] = cloneableTags2[uint32Tag2] = true;
      cloneableTags2[errorTag2] = cloneableTags2[funcTag2] = cloneableTags2[weakMapTag2] = false;
      var deburredLetters = {
        // Latin-1 Supplement block.
        "À": "A",
        "Á": "A",
        "Â": "A",
        "Ã": "A",
        "Ä": "A",
        "Å": "A",
        "à": "a",
        "á": "a",
        "â": "a",
        "ã": "a",
        "ä": "a",
        "å": "a",
        "Ç": "C",
        "ç": "c",
        "Ð": "D",
        "ð": "d",
        "È": "E",
        "É": "E",
        "Ê": "E",
        "Ë": "E",
        "è": "e",
        "é": "e",
        "ê": "e",
        "ë": "e",
        "Ì": "I",
        "Í": "I",
        "Î": "I",
        "Ï": "I",
        "ì": "i",
        "í": "i",
        "î": "i",
        "ï": "i",
        "Ñ": "N",
        "ñ": "n",
        "Ò": "O",
        "Ó": "O",
        "Ô": "O",
        "Õ": "O",
        "Ö": "O",
        "Ø": "O",
        "ò": "o",
        "ó": "o",
        "ô": "o",
        "õ": "o",
        "ö": "o",
        "ø": "o",
        "Ù": "U",
        "Ú": "U",
        "Û": "U",
        "Ü": "U",
        "ù": "u",
        "ú": "u",
        "û": "u",
        "ü": "u",
        "Ý": "Y",
        "ý": "y",
        "ÿ": "y",
        "Æ": "Ae",
        "æ": "ae",
        "Þ": "Th",
        "þ": "th",
        "ß": "ss",
        // Latin Extended-A block.
        "Ā": "A",
        "Ă": "A",
        "Ą": "A",
        "ā": "a",
        "ă": "a",
        "ą": "a",
        "Ć": "C",
        "Ĉ": "C",
        "Ċ": "C",
        "Č": "C",
        "ć": "c",
        "ĉ": "c",
        "ċ": "c",
        "č": "c",
        "Ď": "D",
        "Đ": "D",
        "ď": "d",
        "đ": "d",
        "Ē": "E",
        "Ĕ": "E",
        "Ė": "E",
        "Ę": "E",
        "Ě": "E",
        "ē": "e",
        "ĕ": "e",
        "ė": "e",
        "ę": "e",
        "ě": "e",
        "Ĝ": "G",
        "Ğ": "G",
        "Ġ": "G",
        "Ģ": "G",
        "ĝ": "g",
        "ğ": "g",
        "ġ": "g",
        "ģ": "g",
        "Ĥ": "H",
        "Ħ": "H",
        "ĥ": "h",
        "ħ": "h",
        "Ĩ": "I",
        "Ī": "I",
        "Ĭ": "I",
        "Į": "I",
        "İ": "I",
        "ĩ": "i",
        "ī": "i",
        "ĭ": "i",
        "į": "i",
        "ı": "i",
        "Ĵ": "J",
        "ĵ": "j",
        "Ķ": "K",
        "ķ": "k",
        "ĸ": "k",
        "Ĺ": "L",
        "Ļ": "L",
        "Ľ": "L",
        "Ŀ": "L",
        "Ł": "L",
        "ĺ": "l",
        "ļ": "l",
        "ľ": "l",
        "ŀ": "l",
        "ł": "l",
        "Ń": "N",
        "Ņ": "N",
        "Ň": "N",
        "Ŋ": "N",
        "ń": "n",
        "ņ": "n",
        "ň": "n",
        "ŋ": "n",
        "Ō": "O",
        "Ŏ": "O",
        "Ő": "O",
        "ō": "o",
        "ŏ": "o",
        "ő": "o",
        "Ŕ": "R",
        "Ŗ": "R",
        "Ř": "R",
        "ŕ": "r",
        "ŗ": "r",
        "ř": "r",
        "Ś": "S",
        "Ŝ": "S",
        "Ş": "S",
        "Š": "S",
        "ś": "s",
        "ŝ": "s",
        "ş": "s",
        "š": "s",
        "Ţ": "T",
        "Ť": "T",
        "Ŧ": "T",
        "ţ": "t",
        "ť": "t",
        "ŧ": "t",
        "Ũ": "U",
        "Ū": "U",
        "Ŭ": "U",
        "Ů": "U",
        "Ű": "U",
        "Ų": "U",
        "ũ": "u",
        "ū": "u",
        "ŭ": "u",
        "ů": "u",
        "ű": "u",
        "ų": "u",
        "Ŵ": "W",
        "ŵ": "w",
        "Ŷ": "Y",
        "ŷ": "y",
        "Ÿ": "Y",
        "Ź": "Z",
        "Ż": "Z",
        "Ž": "Z",
        "ź": "z",
        "ż": "z",
        "ž": "z",
        "Ĳ": "IJ",
        "ĳ": "ij",
        "Œ": "Oe",
        "œ": "oe",
        "ŉ": "'n",
        "ſ": "s"
      };
      var htmlEscapes = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      };
      var htmlUnescapes = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'"
      };
      var stringEscapes = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\u2028": "u2028",
        "\u2029": "u2029"
      };
      var freeParseFloat = parseFloat,
        freeParseInt2 = parseInt;
      var freeGlobal2 = _typeof4(commonjsGlobal) == "object" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
      var freeSelf2 = (typeof self === "undefined" ? "undefined" : _typeof4(self)) == "object" && self && self.Object === Object && self;
      var root2 = freeGlobal2 || freeSelf2 || Function("return this")();
      var freeExports = exports2 && !exports2.nodeType && exports2;
      var freeModule = freeExports && true && module2 && !module2.nodeType && module2;
      var moduleExports = freeModule && freeModule.exports === freeExports;
      var freeProcess = moduleExports && freeGlobal2.process;
      var nodeUtil2 = function () {
        try {
          var types = freeModule && freeModule.require && freeModule.require("util").types;
          if (types) {
            return types;
          }
          return freeProcess && freeProcess.binding && freeProcess.binding("util");
        } catch (e2) {}
      }();
      var nodeIsArrayBuffer = nodeUtil2 && nodeUtil2.isArrayBuffer,
        nodeIsDate = nodeUtil2 && nodeUtil2.isDate,
        nodeIsMap2 = nodeUtil2 && nodeUtil2.isMap,
        nodeIsRegExp = nodeUtil2 && nodeUtil2.isRegExp,
        nodeIsSet2 = nodeUtil2 && nodeUtil2.isSet,
        nodeIsTypedArray2 = nodeUtil2 && nodeUtil2.isTypedArray;
      function apply2(func, thisArg, args) {
        switch (args.length) {
          case 0:
            return func.call(thisArg);
          case 1:
            return func.call(thisArg, args[0]);
          case 2:
            return func.call(thisArg, args[0], args[1]);
          case 3:
            return func.call(thisArg, args[0], args[1], args[2]);
        }
        return func.apply(thisArg, args);
      }
      function arrayAggregator(array, setter, iteratee, accumulator) {
        var index2 = -1,
          length = array == null ? 0 : array.length;
        while (++index2 < length) {
          var value = array[index2];
          setter(accumulator, value, iteratee(value), array);
        }
        return accumulator;
      }
      function arrayEach2(array, iteratee) {
        var index2 = -1,
          length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (iteratee(array[index2], index2, array) === false) {
            break;
          }
        }
        return array;
      }
      function arrayEachRight(array, iteratee) {
        var length = array == null ? 0 : array.length;
        while (length--) {
          if (iteratee(array[length], length, array) === false) {
            break;
          }
        }
        return array;
      }
      function arrayEvery(array, predicate) {
        var index2 = -1,
          length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (!predicate(array[index2], index2, array)) {
            return false;
          }
        }
        return true;
      }
      function arrayFilter2(array, predicate) {
        var index2 = -1,
          length = array == null ? 0 : array.length,
          resIndex = 0,
          result2 = [];
        while (++index2 < length) {
          var value = array[index2];
          if (predicate(value, index2, array)) {
            result2[resIndex++] = value;
          }
        }
        return result2;
      }
      function arrayIncludes(array, value) {
        var length = array == null ? 0 : array.length;
        return !!length && baseIndexOf(array, value, 0) > -1;
      }
      function arrayIncludesWith(array, value, comparator) {
        var index2 = -1,
          length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (comparator(value, array[index2])) {
            return true;
          }
        }
        return false;
      }
      function arrayMap2(array, iteratee) {
        var index2 = -1,
          length = array == null ? 0 : array.length,
          result2 = Array(length);
        while (++index2 < length) {
          result2[index2] = iteratee(array[index2], index2, array);
        }
        return result2;
      }
      function arrayPush2(array, values) {
        var index2 = -1,
          length = values.length,
          offset = array.length;
        while (++index2 < length) {
          array[offset + index2] = values[index2];
        }
        return array;
      }
      function arrayReduce(array, iteratee, accumulator, initAccum) {
        var index2 = -1,
          length = array == null ? 0 : array.length;
        if (initAccum && length) {
          accumulator = array[++index2];
        }
        while (++index2 < length) {
          accumulator = iteratee(accumulator, array[index2], index2, array);
        }
        return accumulator;
      }
      function arrayReduceRight(array, iteratee, accumulator, initAccum) {
        var length = array == null ? 0 : array.length;
        if (initAccum && length) {
          accumulator = array[--length];
        }
        while (length--) {
          accumulator = iteratee(accumulator, array[length], length, array);
        }
        return accumulator;
      }
      function arraySome(array, predicate) {
        var index2 = -1,
          length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (predicate(array[index2], index2, array)) {
            return true;
          }
        }
        return false;
      }
      var asciiSize = baseProperty("length");
      function asciiToArray(string) {
        return string.split("");
      }
      function asciiWords(string) {
        return string.match(reAsciiWord) || [];
      }
      function baseFindKey(collection, predicate, eachFunc) {
        var result2;
        eachFunc(collection, function (value, key, collection2) {
          if (predicate(value, key, collection2)) {
            result2 = key;
            return false;
          }
        });
        return result2;
      }
      function baseFindIndex(array, predicate, fromIndex, fromRight) {
        var length = array.length,
          index2 = fromIndex + (fromRight ? 1 : -1);
        while (fromRight ? index2-- : ++index2 < length) {
          if (predicate(array[index2], index2, array)) {
            return index2;
          }
        }
        return -1;
      }
      function baseIndexOf(array, value, fromIndex) {
        return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);
      }
      function baseIndexOfWith(array, value, fromIndex, comparator) {
        var index2 = fromIndex - 1,
          length = array.length;
        while (++index2 < length) {
          if (comparator(array[index2], value)) {
            return index2;
          }
        }
        return -1;
      }
      function baseIsNaN(value) {
        return value !== value;
      }
      function baseMean(array, iteratee) {
        var length = array == null ? 0 : array.length;
        return length ? baseSum(array, iteratee) / length : NAN2;
      }
      function baseProperty(key) {
        return function (object) {
          return object == null ? undefined$12 : object[key];
        };
      }
      function basePropertyOf(object) {
        return function (key) {
          return object == null ? undefined$12 : object[key];
        };
      }
      function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {
        eachFunc(collection, function (value, index2, collection2) {
          accumulator = initAccum ? (initAccum = false, value) : iteratee(accumulator, value, index2, collection2);
        });
        return accumulator;
      }
      function baseSortBy(array, comparer) {
        var length = array.length;
        array.sort(comparer);
        while (length--) {
          array[length] = array[length].value;
        }
        return array;
      }
      function baseSum(array, iteratee) {
        var result2,
          index2 = -1,
          length = array.length;
        while (++index2 < length) {
          var current = iteratee(array[index2]);
          if (current !== undefined$12) {
            result2 = result2 === undefined$12 ? current : result2 + current;
          }
        }
        return result2;
      }
      function baseTimes2(n2, iteratee) {
        var index2 = -1,
          result2 = Array(n2);
        while (++index2 < n2) {
          result2[index2] = iteratee(index2);
        }
        return result2;
      }
      function baseToPairs(object, props) {
        return arrayMap2(props, function (key) {
          return [key, object[key]];
        });
      }
      function baseTrim2(string) {
        return string ? string.slice(0, trimmedEndIndex2(string) + 1).replace(reTrimStart2, "") : string;
      }
      function baseUnary2(func) {
        return function (value) {
          return func(value);
        };
      }
      function baseValues(object, props) {
        return arrayMap2(props, function (key) {
          return object[key];
        });
      }
      function cacheHas(cache, key) {
        return cache.has(key);
      }
      function charsStartIndex(strSymbols, chrSymbols) {
        var index2 = -1,
          length = strSymbols.length;
        while (++index2 < length && baseIndexOf(chrSymbols, strSymbols[index2], 0) > -1) {}
        return index2;
      }
      function charsEndIndex(strSymbols, chrSymbols) {
        var index2 = strSymbols.length;
        while (index2-- && baseIndexOf(chrSymbols, strSymbols[index2], 0) > -1) {}
        return index2;
      }
      function countHolders(array, placeholder) {
        var length = array.length,
          result2 = 0;
        while (length--) {
          if (array[length] === placeholder) {
            ++result2;
          }
        }
        return result2;
      }
      var deburrLetter = basePropertyOf(deburredLetters);
      var escapeHtmlChar = basePropertyOf(htmlEscapes);
      function escapeStringChar(chr) {
        return "\\" + stringEscapes[chr];
      }
      function getValue2(object, key) {
        return object == null ? undefined$12 : object[key];
      }
      function hasUnicode(string) {
        return reHasUnicode.test(string);
      }
      function hasUnicodeWord(string) {
        return reHasUnicodeWord.test(string);
      }
      function iteratorToArray(iterator) {
        var data,
          result2 = [];
        while (!(data = iterator.next()).done) {
          result2.push(data.value);
        }
        return result2;
      }
      function mapToArray(map) {
        var index2 = -1,
          result2 = Array(map.size);
        map.forEach(function (value, key) {
          result2[++index2] = [key, value];
        });
        return result2;
      }
      function overArg2(func, transform) {
        return function (arg) {
          return func(transform(arg));
        };
      }
      function replaceHolders(array, placeholder) {
        var index2 = -1,
          length = array.length,
          resIndex = 0,
          result2 = [];
        while (++index2 < length) {
          var value = array[index2];
          if (value === placeholder || value === PLACEHOLDER) {
            array[index2] = PLACEHOLDER;
            result2[resIndex++] = index2;
          }
        }
        return result2;
      }
      function setToArray(set) {
        var index2 = -1,
          result2 = Array(set.size);
        set.forEach(function (value) {
          result2[++index2] = value;
        });
        return result2;
      }
      function setToPairs(set) {
        var index2 = -1,
          result2 = Array(set.size);
        set.forEach(function (value) {
          result2[++index2] = [value, value];
        });
        return result2;
      }
      function strictIndexOf(array, value, fromIndex) {
        var index2 = fromIndex - 1,
          length = array.length;
        while (++index2 < length) {
          if (array[index2] === value) {
            return index2;
          }
        }
        return -1;
      }
      function strictLastIndexOf(array, value, fromIndex) {
        var index2 = fromIndex + 1;
        while (index2--) {
          if (array[index2] === value) {
            return index2;
          }
        }
        return index2;
      }
      function stringSize(string) {
        return hasUnicode(string) ? unicodeSize(string) : asciiSize(string);
      }
      function stringToArray(string) {
        return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);
      }
      function trimmedEndIndex2(string) {
        var index2 = string.length;
        while (index2-- && reWhitespace2.test(string.charAt(index2))) {}
        return index2;
      }
      var unescapeHtmlChar = basePropertyOf(htmlUnescapes);
      function unicodeSize(string) {
        var result2 = reUnicode.lastIndex = 0;
        while (reUnicode.test(string)) {
          ++result2;
        }
        return result2;
      }
      function unicodeToArray(string) {
        return string.match(reUnicode) || [];
      }
      function unicodeWords(string) {
        return string.match(reUnicodeWord) || [];
      }
      var runInContext = function runInContext2(context) {
        context = context == null ? root2 : _2.defaults(root2.Object(), context, _2.pick(root2, contextProps));
        var Array2 = context.Array,
          Date2 = context.Date,
          Error2 = context.Error,
          Function2 = context.Function,
          Math2 = context.Math,
          Object2 = context.Object,
          RegExp2 = context.RegExp,
          String2 = context.String,
          TypeError2 = context.TypeError;
        var arrayProto2 = Array2.prototype,
          funcProto2 = Function2.prototype,
          objectProto2 = Object2.prototype;
        var coreJsData2 = context["__core-js_shared__"];
        var funcToString2 = funcProto2.toString;
        var hasOwnProperty2 = objectProto2.hasOwnProperty;
        var idCounter = 0;
        var maskSrcKey2 = function () {
          var uid = /[^.]+$/.exec(coreJsData2 && coreJsData2.keys && coreJsData2.keys.IE_PROTO || "");
          return uid ? "Symbol(src)_1." + uid : "";
        }();
        var nativeObjectToString2 = objectProto2.toString;
        var objectCtorString2 = funcToString2.call(Object2);
        var oldDash = root2._;
        var reIsNative2 = RegExp2("^" + funcToString2.call(hasOwnProperty2).replace(reRegExpChar2, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
        var Buffer2 = moduleExports ? context.Buffer : undefined$12,
          Symbol2 = context.Symbol,
          Uint8Array2 = context.Uint8Array,
          allocUnsafe = Buffer2 ? Buffer2.allocUnsafe : undefined$12,
          getPrototype2 = overArg2(Object2.getPrototypeOf, Object2),
          objectCreate2 = Object2.create,
          propertyIsEnumerable2 = objectProto2.propertyIsEnumerable,
          splice2 = arrayProto2.splice,
          spreadableSymbol2 = Symbol2 ? Symbol2.isConcatSpreadable : undefined$12,
          symIterator = Symbol2 ? Symbol2.iterator : undefined$12,
          symToStringTag2 = Symbol2 ? Symbol2.toStringTag : undefined$12;
        var defineProperty2 = function () {
          try {
            var func = getNative2(Object2, "defineProperty");
            func({}, "", {});
            return func;
          } catch (e2) {}
        }();
        var ctxClearTimeout = context.clearTimeout !== root2.clearTimeout && context.clearTimeout,
          ctxNow = Date2 && Date2.now !== root2.Date.now && Date2.now,
          ctxSetTimeout = context.setTimeout !== root2.setTimeout && context.setTimeout;
        var nativeCeil = Math2.ceil,
          nativeFloor = Math2.floor,
          nativeGetSymbols2 = Object2.getOwnPropertySymbols,
          nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : undefined$12,
          nativeIsFinite = context.isFinite,
          nativeJoin = arrayProto2.join,
          nativeKeys2 = overArg2(Object2.keys, Object2),
          nativeMax2 = Math2.max,
          nativeMin2 = Math2.min,
          nativeNow2 = Date2.now,
          nativeParseInt = context.parseInt,
          nativeRandom = Math2.random,
          nativeReverse = arrayProto2.reverse;
        var DataView2 = getNative2(context, "DataView"),
          Map2 = getNative2(context, "Map"),
          Promise2 = getNative2(context, "Promise"),
          Set2 = getNative2(context, "Set"),
          WeakMap2 = getNative2(context, "WeakMap"),
          nativeCreate2 = getNative2(Object2, "create");
        var metaMap = WeakMap2 && new WeakMap2();
        var realNames = {};
        var dataViewCtorString2 = toSource2(DataView2),
          mapCtorString2 = toSource2(Map2),
          promiseCtorString2 = toSource2(Promise2),
          setCtorString2 = toSource2(Set2),
          weakMapCtorString2 = toSource2(WeakMap2);
        var symbolProto2 = Symbol2 ? Symbol2.prototype : undefined$12,
          symbolValueOf2 = symbolProto2 ? symbolProto2.valueOf : undefined$12,
          symbolToString2 = symbolProto2 ? symbolProto2.toString : undefined$12;
        function lodash2(value) {
          if (isObjectLike2(value) && !isArray2(value) && !(value instanceof LazyWrapper)) {
            if (value instanceof LodashWrapper) {
              return value;
            }
            if (hasOwnProperty2.call(value, "__wrapped__")) {
              return wrapperClone(value);
            }
          }
          return new LodashWrapper(value);
        }
        var baseCreate2 = function () {
          function object() {}
          return function (proto) {
            if (!isObject2(proto)) {
              return {};
            }
            if (objectCreate2) {
              return objectCreate2(proto);
            }
            object.prototype = proto;
            var result3 = new object();
            object.prototype = undefined$12;
            return result3;
          };
        }();
        function baseLodash() {}
        function LodashWrapper(value, chainAll) {
          this.__wrapped__ = value;
          this.__actions__ = [];
          this.__chain__ = !!chainAll;
          this.__index__ = 0;
          this.__values__ = undefined$12;
        }
        lodash2.templateSettings = {
          /**
           * Used to detect `data` property values to be HTML-escaped.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          "escape": reEscape,
          /**
           * Used to detect code to be evaluated.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          "evaluate": reEvaluate,
          /**
           * Used to detect `data` property values to inject.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          "interpolate": reInterpolate,
          /**
           * Used to reference the data object in the template text.
           *
           * @memberOf _.templateSettings
           * @type {string}
           */
          "variable": "",
          /**
           * Used to import variables into the compiled template.
           *
           * @memberOf _.templateSettings
           * @type {Object}
           */
          "imports": {
            /**
             * A reference to the `lodash` function.
             *
             * @memberOf _.templateSettings.imports
             * @type {Function}
             */
            "_": lodash2
          }
        };
        lodash2.prototype = baseLodash.prototype;
        lodash2.prototype.constructor = lodash2;
        LodashWrapper.prototype = baseCreate2(baseLodash.prototype);
        LodashWrapper.prototype.constructor = LodashWrapper;
        function LazyWrapper(value) {
          this.__wrapped__ = value;
          this.__actions__ = [];
          this.__dir__ = 1;
          this.__filtered__ = false;
          this.__iteratees__ = [];
          this.__takeCount__ = MAX_ARRAY_LENGTH;
          this.__views__ = [];
        }
        function lazyClone() {
          var result3 = new LazyWrapper(this.__wrapped__);
          result3.__actions__ = copyArray2(this.__actions__);
          result3.__dir__ = this.__dir__;
          result3.__filtered__ = this.__filtered__;
          result3.__iteratees__ = copyArray2(this.__iteratees__);
          result3.__takeCount__ = this.__takeCount__;
          result3.__views__ = copyArray2(this.__views__);
          return result3;
        }
        function lazyReverse() {
          if (this.__filtered__) {
            var result3 = new LazyWrapper(this);
            result3.__dir__ = -1;
            result3.__filtered__ = true;
          } else {
            result3 = this.clone();
            result3.__dir__ *= -1;
          }
          return result3;
        }
        function lazyValue() {
          var array = this.__wrapped__.value(),
            dir = this.__dir__,
            isArr = isArray2(array),
            isRight = dir < 0,
            arrLength = isArr ? array.length : 0,
            view = getView(0, arrLength, this.__views__),
            start = view.start,
            end = view.end,
            length = end - start,
            index2 = isRight ? end : start - 1,
            iteratees = this.__iteratees__,
            iterLength = iteratees.length,
            resIndex = 0,
            takeCount = nativeMin2(length, this.__takeCount__);
          if (!isArr || !isRight && arrLength == length && takeCount == length) {
            return baseWrapperValue(array, this.__actions__);
          }
          var result3 = [];
          outer: while (length-- && resIndex < takeCount) {
            index2 += dir;
            var iterIndex = -1,
              value = array[index2];
            while (++iterIndex < iterLength) {
              var data = iteratees[iterIndex],
                iteratee2 = data.iteratee,
                type2 = data.type,
                computed = iteratee2(value);
              if (type2 == LAZY_MAP_FLAG) {
                value = computed;
              } else if (!computed) {
                if (type2 == LAZY_FILTER_FLAG) {
                  continue outer;
                } else {
                  break outer;
                }
              }
            }
            result3[resIndex++] = value;
          }
          return result3;
        }
        LazyWrapper.prototype = baseCreate2(baseLodash.prototype);
        LazyWrapper.prototype.constructor = LazyWrapper;
        function Hash2(entries) {
          var index2 = -1,
            length = entries == null ? 0 : entries.length;
          this.clear();
          while (++index2 < length) {
            var entry = entries[index2];
            this.set(entry[0], entry[1]);
          }
        }
        function hashClear2() {
          this.__data__ = nativeCreate2 ? nativeCreate2(null) : {};
          this.size = 0;
        }
        function hashDelete2(key) {
          var result3 = this.has(key) && delete this.__data__[key];
          this.size -= result3 ? 1 : 0;
          return result3;
        }
        function hashGet2(key) {
          var data = this.__data__;
          if (nativeCreate2) {
            var result3 = data[key];
            return result3 === HASH_UNDEFINED2 ? undefined$12 : result3;
          }
          return hasOwnProperty2.call(data, key) ? data[key] : undefined$12;
        }
        function hashHas2(key) {
          var data = this.__data__;
          return nativeCreate2 ? data[key] !== undefined$12 : hasOwnProperty2.call(data, key);
        }
        function hashSet2(key, value) {
          var data = this.__data__;
          this.size += this.has(key) ? 0 : 1;
          data[key] = nativeCreate2 && value === undefined$12 ? HASH_UNDEFINED2 : value;
          return this;
        }
        Hash2.prototype.clear = hashClear2;
        Hash2.prototype["delete"] = hashDelete2;
        Hash2.prototype.get = hashGet2;
        Hash2.prototype.has = hashHas2;
        Hash2.prototype.set = hashSet2;
        function ListCache2(entries) {
          var index2 = -1,
            length = entries == null ? 0 : entries.length;
          this.clear();
          while (++index2 < length) {
            var entry = entries[index2];
            this.set(entry[0], entry[1]);
          }
        }
        function listCacheClear2() {
          this.__data__ = [];
          this.size = 0;
        }
        function listCacheDelete2(key) {
          var data = this.__data__,
            index2 = assocIndexOf2(data, key);
          if (index2 < 0) {
            return false;
          }
          var lastIndex = data.length - 1;
          if (index2 == lastIndex) {
            data.pop();
          } else {
            splice2.call(data, index2, 1);
          }
          --this.size;
          return true;
        }
        function listCacheGet2(key) {
          var data = this.__data__,
            index2 = assocIndexOf2(data, key);
          return index2 < 0 ? undefined$12 : data[index2][1];
        }
        function listCacheHas2(key) {
          return assocIndexOf2(this.__data__, key) > -1;
        }
        function listCacheSet2(key, value) {
          var data = this.__data__,
            index2 = assocIndexOf2(data, key);
          if (index2 < 0) {
            ++this.size;
            data.push([key, value]);
          } else {
            data[index2][1] = value;
          }
          return this;
        }
        ListCache2.prototype.clear = listCacheClear2;
        ListCache2.prototype["delete"] = listCacheDelete2;
        ListCache2.prototype.get = listCacheGet2;
        ListCache2.prototype.has = listCacheHas2;
        ListCache2.prototype.set = listCacheSet2;
        function MapCache2(entries) {
          var index2 = -1,
            length = entries == null ? 0 : entries.length;
          this.clear();
          while (++index2 < length) {
            var entry = entries[index2];
            this.set(entry[0], entry[1]);
          }
        }
        function mapCacheClear2() {
          this.size = 0;
          this.__data__ = {
            "hash": new Hash2(),
            "map": new (Map2 || ListCache2)(),
            "string": new Hash2()
          };
        }
        function mapCacheDelete2(key) {
          var result3 = getMapData2(this, key)["delete"](key);
          this.size -= result3 ? 1 : 0;
          return result3;
        }
        function mapCacheGet2(key) {
          return getMapData2(this, key).get(key);
        }
        function mapCacheHas2(key) {
          return getMapData2(this, key).has(key);
        }
        function mapCacheSet2(key, value) {
          var data = getMapData2(this, key),
            size2 = data.size;
          data.set(key, value);
          this.size += data.size == size2 ? 0 : 1;
          return this;
        }
        MapCache2.prototype.clear = mapCacheClear2;
        MapCache2.prototype["delete"] = mapCacheDelete2;
        MapCache2.prototype.get = mapCacheGet2;
        MapCache2.prototype.has = mapCacheHas2;
        MapCache2.prototype.set = mapCacheSet2;
        function SetCache(values2) {
          var index2 = -1,
            length = values2 == null ? 0 : values2.length;
          this.__data__ = new MapCache2();
          while (++index2 < length) {
            this.add(values2[index2]);
          }
        }
        function setCacheAdd(value) {
          this.__data__.set(value, HASH_UNDEFINED2);
          return this;
        }
        function setCacheHas(value) {
          return this.__data__.has(value);
        }
        SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
        SetCache.prototype.has = setCacheHas;
        function Stack2(entries) {
          var data = this.__data__ = new ListCache2(entries);
          this.size = data.size;
        }
        function stackClear2() {
          this.__data__ = new ListCache2();
          this.size = 0;
        }
        function stackDelete2(key) {
          var data = this.__data__,
            result3 = data["delete"](key);
          this.size = data.size;
          return result3;
        }
        function stackGet2(key) {
          return this.__data__.get(key);
        }
        function stackHas2(key) {
          return this.__data__.has(key);
        }
        function stackSet2(key, value) {
          var data = this.__data__;
          if (data instanceof ListCache2) {
            var pairs = data.__data__;
            if (!Map2 || pairs.length < LARGE_ARRAY_SIZE2 - 1) {
              pairs.push([key, value]);
              this.size = ++data.size;
              return this;
            }
            data = this.__data__ = new MapCache2(pairs);
          }
          data.set(key, value);
          this.size = data.size;
          return this;
        }
        Stack2.prototype.clear = stackClear2;
        Stack2.prototype["delete"] = stackDelete2;
        Stack2.prototype.get = stackGet2;
        Stack2.prototype.has = stackHas2;
        Stack2.prototype.set = stackSet2;
        function arrayLikeKeys2(value, inherited) {
          var isArr = isArray2(value),
            isArg = !isArr && isArguments2(value),
            isBuff = !isArr && !isArg && isBuffer2(value),
            isType = !isArr && !isArg && !isBuff && isTypedArray2(value),
            skipIndexes = isArr || isArg || isBuff || isType,
            result3 = skipIndexes ? baseTimes2(value.length, String2) : [],
            length = result3.length;
          for (var key in value) {
            if ((inherited || hasOwnProperty2.call(value, key)) && !(skipIndexes && (
            // Safari 9 has enumerable `arguments.length` in strict mode.
            key == "length" ||
            // Node.js 0.10 has enumerable non-index properties on buffers.
            isBuff && (key == "offset" || key == "parent") ||
            // PhantomJS 2 has enumerable non-index properties on typed arrays.
            isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") ||
            // Skip index properties.
            isIndex2(key, length)))) {
              result3.push(key);
            }
          }
          return result3;
        }
        function arraySample(array) {
          var length = array.length;
          return length ? array[baseRandom(0, length - 1)] : undefined$12;
        }
        function arraySampleSize(array, n2) {
          return shuffleSelf(copyArray2(array), baseClamp(n2, 0, array.length));
        }
        function arrayShuffle(array) {
          return shuffleSelf(copyArray2(array));
        }
        function assignMergeValue2(object, key, value) {
          if (value !== undefined$12 && !eq2(object[key], value) || value === undefined$12 && !(key in object)) {
            baseAssignValue2(object, key, value);
          }
        }
        function assignValue2(object, key, value) {
          var objValue = object[key];
          if (!(hasOwnProperty2.call(object, key) && eq2(objValue, value)) || value === undefined$12 && !(key in object)) {
            baseAssignValue2(object, key, value);
          }
        }
        function assocIndexOf2(array, key) {
          var length = array.length;
          while (length--) {
            if (eq2(array[length][0], key)) {
              return length;
            }
          }
          return -1;
        }
        function baseAggregator(collection, setter, iteratee2, accumulator) {
          baseEach(collection, function (value, key, collection2) {
            setter(accumulator, value, iteratee2(value), collection2);
          });
          return accumulator;
        }
        function baseAssign2(object, source) {
          return object && copyObject2(source, keys2(source), object);
        }
        function baseAssignIn2(object, source) {
          return object && copyObject2(source, keysIn2(source), object);
        }
        function baseAssignValue2(object, key, value) {
          if (key == "__proto__" && defineProperty2) {
            defineProperty2(object, key, {
              "configurable": true,
              "enumerable": true,
              "value": value,
              "writable": true
            });
          } else {
            object[key] = value;
          }
        }
        function baseAt(object, paths) {
          var index2 = -1,
            length = paths.length,
            result3 = Array2(length),
            skip = object == null;
          while (++index2 < length) {
            result3[index2] = skip ? undefined$12 : get2(object, paths[index2]);
          }
          return result3;
        }
        function baseClamp(number, lower, upper) {
          if (number === number) {
            if (upper !== undefined$12) {
              number = number <= upper ? number : upper;
            }
            if (lower !== undefined$12) {
              number = number >= lower ? number : lower;
            }
          }
          return number;
        }
        function baseClone2(value, bitmask, customizer, key, object, stack) {
          var result3,
            isDeep = bitmask & CLONE_DEEP_FLAG2,
            isFlat = bitmask & CLONE_FLAT_FLAG2,
            isFull = bitmask & CLONE_SYMBOLS_FLAG2;
          if (customizer) {
            result3 = object ? customizer(value, key, object, stack) : customizer(value);
          }
          if (result3 !== undefined$12) {
            return result3;
          }
          if (!isObject2(value)) {
            return value;
          }
          var isArr = isArray2(value);
          if (isArr) {
            result3 = initCloneArray2(value);
            if (!isDeep) {
              return copyArray2(value, result3);
            }
          } else {
            var tag = getTag2(value),
              isFunc = tag == funcTag2 || tag == genTag2;
            if (isBuffer2(value)) {
              return cloneBuffer2(value, isDeep);
            }
            if (tag == objectTag2 || tag == argsTag2 || isFunc && !object) {
              result3 = isFlat || isFunc ? {} : initCloneObject2(value);
              if (!isDeep) {
                return isFlat ? copySymbolsIn2(value, baseAssignIn2(result3, value)) : copySymbols2(value, baseAssign2(result3, value));
              }
            } else {
              if (!cloneableTags2[tag]) {
                return object ? value : {};
              }
              result3 = initCloneByTag2(value, tag, isDeep);
            }
          }
          stack || (stack = new Stack2());
          var stacked = stack.get(value);
          if (stacked) {
            return stacked;
          }
          stack.set(value, result3);
          if (isSet2(value)) {
            value.forEach(function (subValue) {
              result3.add(baseClone2(subValue, bitmask, customizer, subValue, value, stack));
            });
          } else if (isMap2(value)) {
            value.forEach(function (subValue, key2) {
              result3.set(key2, baseClone2(subValue, bitmask, customizer, key2, value, stack));
            });
          }
          var keysFunc = isFull ? isFlat ? getAllKeysIn2 : getAllKeys2 : isFlat ? keysIn2 : keys2;
          var props = isArr ? undefined$12 : keysFunc(value);
          arrayEach2(props || value, function (subValue, key2) {
            if (props) {
              key2 = subValue;
              subValue = value[key2];
            }
            assignValue2(result3, key2, baseClone2(subValue, bitmask, customizer, key2, value, stack));
          });
          return result3;
        }
        function baseConforms(source) {
          var props = keys2(source);
          return function (object) {
            return baseConformsTo(object, source, props);
          };
        }
        function baseConformsTo(object, source, props) {
          var length = props.length;
          if (object == null) {
            return !length;
          }
          object = Object2(object);
          while (length--) {
            var key = props[length],
              predicate = source[key],
              value = object[key];
            if (value === undefined$12 && !(key in object) || !predicate(value)) {
              return false;
            }
          }
          return true;
        }
        function baseDelay(func, wait, args) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          return setTimeout2(function () {
            func.apply(undefined$12, args);
          }, wait);
        }
        function baseDifference(array, values2, iteratee2, comparator) {
          var index2 = -1,
            includes2 = arrayIncludes,
            isCommon = true,
            length = array.length,
            result3 = [],
            valuesLength = values2.length;
          if (!length) {
            return result3;
          }
          if (iteratee2) {
            values2 = arrayMap2(values2, baseUnary2(iteratee2));
          }
          if (comparator) {
            includes2 = arrayIncludesWith;
            isCommon = false;
          } else if (values2.length >= LARGE_ARRAY_SIZE2) {
            includes2 = cacheHas;
            isCommon = false;
            values2 = new SetCache(values2);
          }
          outer: while (++index2 < length) {
            var value = array[index2],
              computed = iteratee2 == null ? value : iteratee2(value);
            value = comparator || value !== 0 ? value : 0;
            if (isCommon && computed === computed) {
              var valuesIndex = valuesLength;
              while (valuesIndex--) {
                if (values2[valuesIndex] === computed) {
                  continue outer;
                }
              }
              result3.push(value);
            } else if (!includes2(values2, computed, comparator)) {
              result3.push(value);
            }
          }
          return result3;
        }
        var baseEach = createBaseEach(baseForOwn);
        var baseEachRight = createBaseEach(baseForOwnRight, true);
        function baseEvery(collection, predicate) {
          var result3 = true;
          baseEach(collection, function (value, index2, collection2) {
            result3 = !!predicate(value, index2, collection2);
            return result3;
          });
          return result3;
        }
        function baseExtremum(array, iteratee2, comparator) {
          var index2 = -1,
            length = array.length;
          while (++index2 < length) {
            var value = array[index2],
              current = iteratee2(value);
            if (current != null && (computed === undefined$12 ? current === current && !isSymbol2(current) : comparator(current, computed))) {
              var computed = current,
                result3 = value;
            }
          }
          return result3;
        }
        function baseFill(array, value, start, end) {
          var length = array.length;
          start = toInteger(start);
          if (start < 0) {
            start = -start > length ? 0 : length + start;
          }
          end = end === undefined$12 || end > length ? length : toInteger(end);
          if (end < 0) {
            end += length;
          }
          end = start > end ? 0 : toLength(end);
          while (start < end) {
            array[start++] = value;
          }
          return array;
        }
        function baseFilter(collection, predicate) {
          var result3 = [];
          baseEach(collection, function (value, index2, collection2) {
            if (predicate(value, index2, collection2)) {
              result3.push(value);
            }
          });
          return result3;
        }
        function baseFlatten2(array, depth, predicate, isStrict, result3) {
          var index2 = -1,
            length = array.length;
          predicate || (predicate = isFlattenable2);
          result3 || (result3 = []);
          while (++index2 < length) {
            var value = array[index2];
            if (depth > 0 && predicate(value)) {
              if (depth > 1) {
                baseFlatten2(value, depth - 1, predicate, isStrict, result3);
              } else {
                arrayPush2(result3, value);
              }
            } else if (!isStrict) {
              result3[result3.length] = value;
            }
          }
          return result3;
        }
        var baseFor2 = createBaseFor2();
        var baseForRight = createBaseFor2(true);
        function baseForOwn(object, iteratee2) {
          return object && baseFor2(object, iteratee2, keys2);
        }
        function baseForOwnRight(object, iteratee2) {
          return object && baseForRight(object, iteratee2, keys2);
        }
        function baseFunctions(object, props) {
          return arrayFilter2(props, function (key) {
            return isFunction2(object[key]);
          });
        }
        function baseGet2(object, path) {
          path = castPath2(path, object);
          var index2 = 0,
            length = path.length;
          while (object != null && index2 < length) {
            object = object[toKey2(path[index2++])];
          }
          return index2 && index2 == length ? object : undefined$12;
        }
        function baseGetAllKeys2(object, keysFunc, symbolsFunc) {
          var result3 = keysFunc(object);
          return isArray2(object) ? result3 : arrayPush2(result3, symbolsFunc(object));
        }
        function baseGetTag2(value) {
          if (value == null) {
            return value === undefined$12 ? undefinedTag2 : nullTag2;
          }
          return symToStringTag2 && symToStringTag2 in Object2(value) ? getRawTag2(value) : objectToString2(value);
        }
        function baseGt(value, other) {
          return value > other;
        }
        function baseHas(object, key) {
          return object != null && hasOwnProperty2.call(object, key);
        }
        function baseHasIn2(object, key) {
          return object != null && key in Object2(object);
        }
        function baseInRange(number, start, end) {
          return number >= nativeMin2(start, end) && number < nativeMax2(start, end);
        }
        function baseIntersection(arrays, iteratee2, comparator) {
          var includes2 = comparator ? arrayIncludesWith : arrayIncludes,
            length = arrays[0].length,
            othLength = arrays.length,
            othIndex = othLength,
            caches = Array2(othLength),
            maxLength = Infinity,
            result3 = [];
          while (othIndex--) {
            var array = arrays[othIndex];
            if (othIndex && iteratee2) {
              array = arrayMap2(array, baseUnary2(iteratee2));
            }
            maxLength = nativeMin2(array.length, maxLength);
            caches[othIndex] = !comparator && (iteratee2 || length >= 120 && array.length >= 120) ? new SetCache(othIndex && array) : undefined$12;
          }
          array = arrays[0];
          var index2 = -1,
            seen = caches[0];
          outer: while (++index2 < length && result3.length < maxLength) {
            var value = array[index2],
              computed = iteratee2 ? iteratee2(value) : value;
            value = comparator || value !== 0 ? value : 0;
            if (!(seen ? cacheHas(seen, computed) : includes2(result3, computed, comparator))) {
              othIndex = othLength;
              while (--othIndex) {
                var cache = caches[othIndex];
                if (!(cache ? cacheHas(cache, computed) : includes2(arrays[othIndex], computed, comparator))) {
                  continue outer;
                }
              }
              if (seen) {
                seen.push(computed);
              }
              result3.push(value);
            }
          }
          return result3;
        }
        function baseInverter(object, setter, iteratee2, accumulator) {
          baseForOwn(object, function (value, key, object2) {
            setter(accumulator, iteratee2(value), key, object2);
          });
          return accumulator;
        }
        function baseInvoke(object, path, args) {
          path = castPath2(path, object);
          object = parent2(object, path);
          var func = object == null ? object : object[toKey2(last2(path))];
          return func == null ? undefined$12 : apply2(func, object, args);
        }
        function baseIsArguments2(value) {
          return isObjectLike2(value) && baseGetTag2(value) == argsTag2;
        }
        function baseIsArrayBuffer(value) {
          return isObjectLike2(value) && baseGetTag2(value) == arrayBufferTag2;
        }
        function baseIsDate(value) {
          return isObjectLike2(value) && baseGetTag2(value) == dateTag2;
        }
        function baseIsEqual(value, other, bitmask, customizer, stack) {
          if (value === other) {
            return true;
          }
          if (value == null || other == null || !isObjectLike2(value) && !isObjectLike2(other)) {
            return value !== value && other !== other;
          }
          return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
        }
        function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
          var objIsArr = isArray2(object),
            othIsArr = isArray2(other),
            objTag = objIsArr ? arrayTag2 : getTag2(object),
            othTag = othIsArr ? arrayTag2 : getTag2(other);
          objTag = objTag == argsTag2 ? objectTag2 : objTag;
          othTag = othTag == argsTag2 ? objectTag2 : othTag;
          var objIsObj = objTag == objectTag2,
            othIsObj = othTag == objectTag2,
            isSameTag = objTag == othTag;
          if (isSameTag && isBuffer2(object)) {
            if (!isBuffer2(other)) {
              return false;
            }
            objIsArr = true;
            objIsObj = false;
          }
          if (isSameTag && !objIsObj) {
            stack || (stack = new Stack2());
            return objIsArr || isTypedArray2(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
          }
          if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
            var objIsWrapped = objIsObj && hasOwnProperty2.call(object, "__wrapped__"),
              othIsWrapped = othIsObj && hasOwnProperty2.call(other, "__wrapped__");
            if (objIsWrapped || othIsWrapped) {
              var objUnwrapped = objIsWrapped ? object.value() : object,
                othUnwrapped = othIsWrapped ? other.value() : other;
              stack || (stack = new Stack2());
              return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
            }
          }
          if (!isSameTag) {
            return false;
          }
          stack || (stack = new Stack2());
          return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
        }
        function baseIsMap2(value) {
          return isObjectLike2(value) && getTag2(value) == mapTag2;
        }
        function baseIsMatch(object, source, matchData, customizer) {
          var index2 = matchData.length,
            length = index2,
            noCustomizer = !customizer;
          if (object == null) {
            return !length;
          }
          object = Object2(object);
          while (index2--) {
            var data = matchData[index2];
            if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {
              return false;
            }
          }
          while (++index2 < length) {
            data = matchData[index2];
            var key = data[0],
              objValue = object[key],
              srcValue = data[1];
            if (noCustomizer && data[2]) {
              if (objValue === undefined$12 && !(key in object)) {
                return false;
              }
            } else {
              var stack = new Stack2();
              if (customizer) {
                var result3 = customizer(objValue, srcValue, key, object, source, stack);
              }
              if (!(result3 === undefined$12 ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result3)) {
                return false;
              }
            }
          }
          return true;
        }
        function baseIsNative2(value) {
          if (!isObject2(value) || isMasked2(value)) {
            return false;
          }
          var pattern = isFunction2(value) ? reIsNative2 : reIsHostCtor2;
          return pattern.test(toSource2(value));
        }
        function baseIsRegExp(value) {
          return isObjectLike2(value) && baseGetTag2(value) == regexpTag2;
        }
        function baseIsSet2(value) {
          return isObjectLike2(value) && getTag2(value) == setTag2;
        }
        function baseIsTypedArray2(value) {
          return isObjectLike2(value) && isLength2(value.length) && !!typedArrayTags2[baseGetTag2(value)];
        }
        function baseIteratee(value) {
          if (typeof value == "function") {
            return value;
          }
          if (value == null) {
            return identity2;
          }
          if (_typeof4(value) == "object") {
            return isArray2(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);
          }
          return property(value);
        }
        function baseKeys2(object) {
          if (!isPrototype2(object)) {
            return nativeKeys2(object);
          }
          var result3 = [];
          for (var key in Object2(object)) {
            if (hasOwnProperty2.call(object, key) && key != "constructor") {
              result3.push(key);
            }
          }
          return result3;
        }
        function baseKeysIn2(object) {
          if (!isObject2(object)) {
            return nativeKeysIn2(object);
          }
          var isProto = isPrototype2(object),
            result3 = [];
          for (var key in object) {
            if (!(key == "constructor" && (isProto || !hasOwnProperty2.call(object, key)))) {
              result3.push(key);
            }
          }
          return result3;
        }
        function baseLt(value, other) {
          return value < other;
        }
        function baseMap(collection, iteratee2) {
          var index2 = -1,
            result3 = isArrayLike2(collection) ? Array2(collection.length) : [];
          baseEach(collection, function (value, key, collection2) {
            result3[++index2] = iteratee2(value, key, collection2);
          });
          return result3;
        }
        function baseMatches(source) {
          var matchData = getMatchData(source);
          if (matchData.length == 1 && matchData[0][2]) {
            return matchesStrictComparable(matchData[0][0], matchData[0][1]);
          }
          return function (object) {
            return object === source || baseIsMatch(object, source, matchData);
          };
        }
        function baseMatchesProperty(path, srcValue) {
          if (isKey2(path) && isStrictComparable(srcValue)) {
            return matchesStrictComparable(toKey2(path), srcValue);
          }
          return function (object) {
            var objValue = get2(object, path);
            return objValue === undefined$12 && objValue === srcValue ? hasIn2(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
          };
        }
        function baseMerge2(object, source, srcIndex, customizer, stack) {
          if (object === source) {
            return;
          }
          baseFor2(source, function (srcValue, key) {
            stack || (stack = new Stack2());
            if (isObject2(srcValue)) {
              baseMergeDeep2(object, source, key, srcIndex, baseMerge2, customizer, stack);
            } else {
              var newValue = customizer ? customizer(safeGet2(object, key), srcValue, key + "", object, source, stack) : undefined$12;
              if (newValue === undefined$12) {
                newValue = srcValue;
              }
              assignMergeValue2(object, key, newValue);
            }
          }, keysIn2);
        }
        function baseMergeDeep2(object, source, key, srcIndex, mergeFunc, customizer, stack) {
          var objValue = safeGet2(object, key),
            srcValue = safeGet2(source, key),
            stacked = stack.get(srcValue);
          if (stacked) {
            assignMergeValue2(object, key, stacked);
            return;
          }
          var newValue = customizer ? customizer(objValue, srcValue, key + "", object, source, stack) : undefined$12;
          var isCommon = newValue === undefined$12;
          if (isCommon) {
            var isArr = isArray2(srcValue),
              isBuff = !isArr && isBuffer2(srcValue),
              isTyped = !isArr && !isBuff && isTypedArray2(srcValue);
            newValue = srcValue;
            if (isArr || isBuff || isTyped) {
              if (isArray2(objValue)) {
                newValue = objValue;
              } else if (isArrayLikeObject2(objValue)) {
                newValue = copyArray2(objValue);
              } else if (isBuff) {
                isCommon = false;
                newValue = cloneBuffer2(srcValue, true);
              } else if (isTyped) {
                isCommon = false;
                newValue = cloneTypedArray2(srcValue, true);
              } else {
                newValue = [];
              }
            } else if (isPlainObject2(srcValue) || isArguments2(srcValue)) {
              newValue = objValue;
              if (isArguments2(objValue)) {
                newValue = toPlainObject2(objValue);
              } else if (!isObject2(objValue) || isFunction2(objValue)) {
                newValue = initCloneObject2(srcValue);
              }
            } else {
              isCommon = false;
            }
          }
          if (isCommon) {
            stack.set(srcValue, newValue);
            mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
            stack["delete"](srcValue);
          }
          assignMergeValue2(object, key, newValue);
        }
        function baseNth(array, n2) {
          var length = array.length;
          if (!length) {
            return;
          }
          n2 += n2 < 0 ? length : 0;
          return isIndex2(n2, length) ? array[n2] : undefined$12;
        }
        function baseOrderBy(collection, iteratees, orders) {
          if (iteratees.length) {
            iteratees = arrayMap2(iteratees, function (iteratee2) {
              if (isArray2(iteratee2)) {
                return function (value) {
                  return baseGet2(value, iteratee2.length === 1 ? iteratee2[0] : iteratee2);
                };
              }
              return iteratee2;
            });
          } else {
            iteratees = [identity2];
          }
          var index2 = -1;
          iteratees = arrayMap2(iteratees, baseUnary2(getIteratee()));
          var result3 = baseMap(collection, function (value, key, collection2) {
            var criteria = arrayMap2(iteratees, function (iteratee2) {
              return iteratee2(value);
            });
            return {
              "criteria": criteria,
              "index": ++index2,
              "value": value
            };
          });
          return baseSortBy(result3, function (object, other) {
            return compareMultiple(object, other, orders);
          });
        }
        function basePick2(object, paths) {
          return basePickBy2(object, paths, function (value, path) {
            return hasIn2(object, path);
          });
        }
        function basePickBy2(object, paths, predicate) {
          var index2 = -1,
            length = paths.length,
            result3 = {};
          while (++index2 < length) {
            var path = paths[index2],
              value = baseGet2(object, path);
            if (predicate(value, path)) {
              baseSet2(result3, castPath2(path, object), value);
            }
          }
          return result3;
        }
        function basePropertyDeep(path) {
          return function (object) {
            return baseGet2(object, path);
          };
        }
        function basePullAll(array, values2, iteratee2, comparator) {
          var indexOf3 = comparator ? baseIndexOfWith : baseIndexOf,
            index2 = -1,
            length = values2.length,
            seen = array;
          if (array === values2) {
            values2 = copyArray2(values2);
          }
          if (iteratee2) {
            seen = arrayMap2(array, baseUnary2(iteratee2));
          }
          while (++index2 < length) {
            var fromIndex = 0,
              value = values2[index2],
              computed = iteratee2 ? iteratee2(value) : value;
            while ((fromIndex = indexOf3(seen, computed, fromIndex, comparator)) > -1) {
              if (seen !== array) {
                splice2.call(seen, fromIndex, 1);
              }
              splice2.call(array, fromIndex, 1);
            }
          }
          return array;
        }
        function basePullAt(array, indexes) {
          var length = array ? indexes.length : 0,
            lastIndex = length - 1;
          while (length--) {
            var index2 = indexes[length];
            if (length == lastIndex || index2 !== previous) {
              var previous = index2;
              if (isIndex2(index2)) {
                splice2.call(array, index2, 1);
              } else {
                baseUnset2(array, index2);
              }
            }
          }
          return array;
        }
        function baseRandom(lower, upper) {
          return lower + nativeFloor(nativeRandom() * (upper - lower + 1));
        }
        function baseRange(start, end, step, fromRight) {
          var index2 = -1,
            length = nativeMax2(nativeCeil((end - start) / (step || 1)), 0),
            result3 = Array2(length);
          while (length--) {
            result3[fromRight ? length : ++index2] = start;
            start += step;
          }
          return result3;
        }
        function baseRepeat(string, n2) {
          var result3 = "";
          if (!string || n2 < 1 || n2 > MAX_SAFE_INTEGER2) {
            return result3;
          }
          do {
            if (n2 % 2) {
              result3 += string;
            }
            n2 = nativeFloor(n2 / 2);
            if (n2) {
              string += string;
            }
          } while (n2);
          return result3;
        }
        function baseRest2(func, start) {
          return setToString2(overRest2(func, start, identity2), func + "");
        }
        function baseSample(collection) {
          return arraySample(values(collection));
        }
        function baseSampleSize(collection, n2) {
          var array = values(collection);
          return shuffleSelf(array, baseClamp(n2, 0, array.length));
        }
        function baseSet2(object, path, value, customizer) {
          if (!isObject2(object)) {
            return object;
          }
          path = castPath2(path, object);
          var index2 = -1,
            length = path.length,
            lastIndex = length - 1,
            nested = object;
          while (nested != null && ++index2 < length) {
            var key = toKey2(path[index2]),
              newValue = value;
            if (key === "__proto__" || key === "constructor" || key === "prototype") {
              return object;
            }
            if (index2 != lastIndex) {
              var objValue = nested[key];
              newValue = customizer ? customizer(objValue, key, nested) : undefined$12;
              if (newValue === undefined$12) {
                newValue = isObject2(objValue) ? objValue : isIndex2(path[index2 + 1]) ? [] : {};
              }
            }
            assignValue2(nested, key, newValue);
            nested = nested[key];
          }
          return object;
        }
        var baseSetData = !metaMap ? identity2 : function (func, data) {
          metaMap.set(func, data);
          return func;
        };
        var baseSetToString2 = !defineProperty2 ? identity2 : function (func, string) {
          return defineProperty2(func, "toString", {
            "configurable": true,
            "enumerable": false,
            "value": constant2(string),
            "writable": true
          });
        };
        function baseShuffle(collection) {
          return shuffleSelf(values(collection));
        }
        function baseSlice2(array, start, end) {
          var index2 = -1,
            length = array.length;
          if (start < 0) {
            start = -start > length ? 0 : length + start;
          }
          end = end > length ? length : end;
          if (end < 0) {
            end += length;
          }
          length = start > end ? 0 : end - start >>> 0;
          start >>>= 0;
          var result3 = Array2(length);
          while (++index2 < length) {
            result3[index2] = array[index2 + start];
          }
          return result3;
        }
        function baseSome(collection, predicate) {
          var result3;
          baseEach(collection, function (value, index2, collection2) {
            result3 = predicate(value, index2, collection2);
            return !result3;
          });
          return !!result3;
        }
        function baseSortedIndex(array, value, retHighest) {
          var low = 0,
            high = array == null ? low : array.length;
          if (typeof value == "number" && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
            while (low < high) {
              var mid = low + high >>> 1,
                computed = array[mid];
              if (computed !== null && !isSymbol2(computed) && (retHighest ? computed <= value : computed < value)) {
                low = mid + 1;
              } else {
                high = mid;
              }
            }
            return high;
          }
          return baseSortedIndexBy(array, value, identity2, retHighest);
        }
        function baseSortedIndexBy(array, value, iteratee2, retHighest) {
          var low = 0,
            high = array == null ? 0 : array.length;
          if (high === 0) {
            return 0;
          }
          value = iteratee2(value);
          var valIsNaN = value !== value,
            valIsNull = value === null,
            valIsSymbol = isSymbol2(value),
            valIsUndefined = value === undefined$12;
          while (low < high) {
            var mid = nativeFloor((low + high) / 2),
              computed = iteratee2(array[mid]),
              othIsDefined = computed !== undefined$12,
              othIsNull = computed === null,
              othIsReflexive = computed === computed,
              othIsSymbol = isSymbol2(computed);
            if (valIsNaN) {
              var setLow = retHighest || othIsReflexive;
            } else if (valIsUndefined) {
              setLow = othIsReflexive && (retHighest || othIsDefined);
            } else if (valIsNull) {
              setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);
            } else if (valIsSymbol) {
              setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);
            } else if (othIsNull || othIsSymbol) {
              setLow = false;
            } else {
              setLow = retHighest ? computed <= value : computed < value;
            }
            if (setLow) {
              low = mid + 1;
            } else {
              high = mid;
            }
          }
          return nativeMin2(high, MAX_ARRAY_INDEX);
        }
        function baseSortedUniq(array, iteratee2) {
          var index2 = -1,
            length = array.length,
            resIndex = 0,
            result3 = [];
          while (++index2 < length) {
            var value = array[index2],
              computed = iteratee2 ? iteratee2(value) : value;
            if (!index2 || !eq2(computed, seen)) {
              var seen = computed;
              result3[resIndex++] = value === 0 ? 0 : value;
            }
          }
          return result3;
        }
        function baseToNumber(value) {
          if (typeof value == "number") {
            return value;
          }
          if (isSymbol2(value)) {
            return NAN2;
          }
          return +value;
        }
        function baseToString2(value) {
          if (typeof value == "string") {
            return value;
          }
          if (isArray2(value)) {
            return arrayMap2(value, baseToString2) + "";
          }
          if (isSymbol2(value)) {
            return symbolToString2 ? symbolToString2.call(value) : "";
          }
          var result3 = value + "";
          return result3 == "0" && 1 / value == -INFINITY2 ? "-0" : result3;
        }
        function baseUniq(array, iteratee2, comparator) {
          var index2 = -1,
            includes2 = arrayIncludes,
            length = array.length,
            isCommon = true,
            result3 = [],
            seen = result3;
          if (comparator) {
            isCommon = false;
            includes2 = arrayIncludesWith;
          } else if (length >= LARGE_ARRAY_SIZE2) {
            var set2 = iteratee2 ? null : createSet(array);
            if (set2) {
              return setToArray(set2);
            }
            isCommon = false;
            includes2 = cacheHas;
            seen = new SetCache();
          } else {
            seen = iteratee2 ? [] : result3;
          }
          outer: while (++index2 < length) {
            var value = array[index2],
              computed = iteratee2 ? iteratee2(value) : value;
            value = comparator || value !== 0 ? value : 0;
            if (isCommon && computed === computed) {
              var seenIndex = seen.length;
              while (seenIndex--) {
                if (seen[seenIndex] === computed) {
                  continue outer;
                }
              }
              if (iteratee2) {
                seen.push(computed);
              }
              result3.push(value);
            } else if (!includes2(seen, computed, comparator)) {
              if (seen !== result3) {
                seen.push(computed);
              }
              result3.push(value);
            }
          }
          return result3;
        }
        function baseUnset2(object, path) {
          path = castPath2(path, object);
          object = parent2(object, path);
          return object == null || delete object[toKey2(last2(path))];
        }
        function baseUpdate(object, path, updater, customizer) {
          return baseSet2(object, path, updater(baseGet2(object, path)), customizer);
        }
        function baseWhile(array, predicate, isDrop, fromRight) {
          var length = array.length,
            index2 = fromRight ? length : -1;
          while ((fromRight ? index2-- : ++index2 < length) && predicate(array[index2], index2, array)) {}
          return isDrop ? baseSlice2(array, fromRight ? 0 : index2, fromRight ? index2 + 1 : length) : baseSlice2(array, fromRight ? index2 + 1 : 0, fromRight ? length : index2);
        }
        function baseWrapperValue(value, actions) {
          var result3 = value;
          if (result3 instanceof LazyWrapper) {
            result3 = result3.value();
          }
          return arrayReduce(actions, function (result4, action) {
            return action.func.apply(action.thisArg, arrayPush2([result4], action.args));
          }, result3);
        }
        function baseXor(arrays, iteratee2, comparator) {
          var length = arrays.length;
          if (length < 2) {
            return length ? baseUniq(arrays[0]) : [];
          }
          var index2 = -1,
            result3 = Array2(length);
          while (++index2 < length) {
            var array = arrays[index2],
              othIndex = -1;
            while (++othIndex < length) {
              if (othIndex != index2) {
                result3[index2] = baseDifference(result3[index2] || array, arrays[othIndex], iteratee2, comparator);
              }
            }
          }
          return baseUniq(baseFlatten2(result3, 1), iteratee2, comparator);
        }
        function baseZipObject(props, values2, assignFunc) {
          var index2 = -1,
            length = props.length,
            valsLength = values2.length,
            result3 = {};
          while (++index2 < length) {
            var value = index2 < valsLength ? values2[index2] : undefined$12;
            assignFunc(result3, props[index2], value);
          }
          return result3;
        }
        function castArrayLikeObject(value) {
          return isArrayLikeObject2(value) ? value : [];
        }
        function castFunction(value) {
          return typeof value == "function" ? value : identity2;
        }
        function castPath2(value, object) {
          if (isArray2(value)) {
            return value;
          }
          return isKey2(value, object) ? [value] : stringToPath2(toString2(value));
        }
        var castRest = baseRest2;
        function castSlice(array, start, end) {
          var length = array.length;
          end = end === undefined$12 ? length : end;
          return !start && end >= length ? array : baseSlice2(array, start, end);
        }
        var clearTimeout2 = ctxClearTimeout || function (id) {
          return root2.clearTimeout(id);
        };
        function cloneBuffer2(buffer, isDeep) {
          if (isDeep) {
            return buffer.slice();
          }
          var length = buffer.length,
            result3 = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
          buffer.copy(result3);
          return result3;
        }
        function cloneArrayBuffer2(arrayBuffer) {
          var result3 = new arrayBuffer.constructor(arrayBuffer.byteLength);
          new Uint8Array2(result3).set(new Uint8Array2(arrayBuffer));
          return result3;
        }
        function cloneDataView2(dataView, isDeep) {
          var buffer = isDeep ? cloneArrayBuffer2(dataView.buffer) : dataView.buffer;
          return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
        }
        function cloneRegExp2(regexp) {
          var result3 = new regexp.constructor(regexp.source, reFlags2.exec(regexp));
          result3.lastIndex = regexp.lastIndex;
          return result3;
        }
        function cloneSymbol2(symbol) {
          return symbolValueOf2 ? Object2(symbolValueOf2.call(symbol)) : {};
        }
        function cloneTypedArray2(typedArray, isDeep) {
          var buffer = isDeep ? cloneArrayBuffer2(typedArray.buffer) : typedArray.buffer;
          return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
        }
        function compareAscending(value, other) {
          if (value !== other) {
            var valIsDefined = value !== undefined$12,
              valIsNull = value === null,
              valIsReflexive = value === value,
              valIsSymbol = isSymbol2(value);
            var othIsDefined = other !== undefined$12,
              othIsNull = other === null,
              othIsReflexive = other === other,
              othIsSymbol = isSymbol2(other);
            if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {
              return 1;
            }
            if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {
              return -1;
            }
          }
          return 0;
        }
        function compareMultiple(object, other, orders) {
          var index2 = -1,
            objCriteria = object.criteria,
            othCriteria = other.criteria,
            length = objCriteria.length,
            ordersLength = orders.length;
          while (++index2 < length) {
            var result3 = compareAscending(objCriteria[index2], othCriteria[index2]);
            if (result3) {
              if (index2 >= ordersLength) {
                return result3;
              }
              var order = orders[index2];
              return result3 * (order == "desc" ? -1 : 1);
            }
          }
          return object.index - other.index;
        }
        function composeArgs(args, partials, holders, isCurried) {
          var argsIndex = -1,
            argsLength = args.length,
            holdersLength = holders.length,
            leftIndex = -1,
            leftLength = partials.length,
            rangeLength = nativeMax2(argsLength - holdersLength, 0),
            result3 = Array2(leftLength + rangeLength),
            isUncurried = !isCurried;
          while (++leftIndex < leftLength) {
            result3[leftIndex] = partials[leftIndex];
          }
          while (++argsIndex < holdersLength) {
            if (isUncurried || argsIndex < argsLength) {
              result3[holders[argsIndex]] = args[argsIndex];
            }
          }
          while (rangeLength--) {
            result3[leftIndex++] = args[argsIndex++];
          }
          return result3;
        }
        function composeArgsRight(args, partials, holders, isCurried) {
          var argsIndex = -1,
            argsLength = args.length,
            holdersIndex = -1,
            holdersLength = holders.length,
            rightIndex = -1,
            rightLength = partials.length,
            rangeLength = nativeMax2(argsLength - holdersLength, 0),
            result3 = Array2(rangeLength + rightLength),
            isUncurried = !isCurried;
          while (++argsIndex < rangeLength) {
            result3[argsIndex] = args[argsIndex];
          }
          var offset = argsIndex;
          while (++rightIndex < rightLength) {
            result3[offset + rightIndex] = partials[rightIndex];
          }
          while (++holdersIndex < holdersLength) {
            if (isUncurried || argsIndex < argsLength) {
              result3[offset + holders[holdersIndex]] = args[argsIndex++];
            }
          }
          return result3;
        }
        function copyArray2(source, array) {
          var index2 = -1,
            length = source.length;
          array || (array = Array2(length));
          while (++index2 < length) {
            array[index2] = source[index2];
          }
          return array;
        }
        function copyObject2(source, props, object, customizer) {
          var isNew = !object;
          object || (object = {});
          var index2 = -1,
            length = props.length;
          while (++index2 < length) {
            var key = props[index2];
            var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined$12;
            if (newValue === undefined$12) {
              newValue = source[key];
            }
            if (isNew) {
              baseAssignValue2(object, key, newValue);
            } else {
              assignValue2(object, key, newValue);
            }
          }
          return object;
        }
        function copySymbols2(source, object) {
          return copyObject2(source, getSymbols2(source), object);
        }
        function copySymbolsIn2(source, object) {
          return copyObject2(source, getSymbolsIn2(source), object);
        }
        function createAggregator(setter, initializer) {
          return function (collection, iteratee2) {
            var func = isArray2(collection) ? arrayAggregator : baseAggregator,
              accumulator = initializer ? initializer() : {};
            return func(collection, setter, getIteratee(iteratee2, 2), accumulator);
          };
        }
        function createAssigner2(assigner) {
          return baseRest2(function (object, sources) {
            var index2 = -1,
              length = sources.length,
              customizer = length > 1 ? sources[length - 1] : undefined$12,
              guard = length > 2 ? sources[2] : undefined$12;
            customizer = assigner.length > 3 && typeof customizer == "function" ? (length--, customizer) : undefined$12;
            if (guard && isIterateeCall2(sources[0], sources[1], guard)) {
              customizer = length < 3 ? undefined$12 : customizer;
              length = 1;
            }
            object = Object2(object);
            while (++index2 < length) {
              var source = sources[index2];
              if (source) {
                assigner(object, source, index2, customizer);
              }
            }
            return object;
          });
        }
        function createBaseEach(eachFunc, fromRight) {
          return function (collection, iteratee2) {
            if (collection == null) {
              return collection;
            }
            if (!isArrayLike2(collection)) {
              return eachFunc(collection, iteratee2);
            }
            var length = collection.length,
              index2 = fromRight ? length : -1,
              iterable = Object2(collection);
            while (fromRight ? index2-- : ++index2 < length) {
              if (iteratee2(iterable[index2], index2, iterable) === false) {
                break;
              }
            }
            return collection;
          };
        }
        function createBaseFor2(fromRight) {
          return function (object, iteratee2, keysFunc) {
            var index2 = -1,
              iterable = Object2(object),
              props = keysFunc(object),
              length = props.length;
            while (length--) {
              var key = props[fromRight ? length : ++index2];
              if (iteratee2(iterable[key], key, iterable) === false) {
                break;
              }
            }
            return object;
          };
        }
        function createBind(func, bitmask, thisArg) {
          var isBind = bitmask & WRAP_BIND_FLAG,
            Ctor = createCtor(func);
          function wrapper2() {
            var fn2 = this && this !== root2 && this instanceof wrapper2 ? Ctor : func;
            return fn2.apply(isBind ? thisArg : this, arguments);
          }
          return wrapper2;
        }
        function createCaseFirst(methodName) {
          return function (string) {
            string = toString2(string);
            var strSymbols = hasUnicode(string) ? stringToArray(string) : undefined$12;
            var chr = strSymbols ? strSymbols[0] : string.charAt(0);
            var trailing = strSymbols ? castSlice(strSymbols, 1).join("") : string.slice(1);
            return chr[methodName]() + trailing;
          };
        }
        function createCompounder(callback) {
          return function (string) {
            return arrayReduce(words(deburr(string).replace(reApos, "")), callback, "");
          };
        }
        function createCtor(Ctor) {
          return function () {
            var args = arguments;
            switch (args.length) {
              case 0:
                return new Ctor();
              case 1:
                return new Ctor(args[0]);
              case 2:
                return new Ctor(args[0], args[1]);
              case 3:
                return new Ctor(args[0], args[1], args[2]);
              case 4:
                return new Ctor(args[0], args[1], args[2], args[3]);
              case 5:
                return new Ctor(args[0], args[1], args[2], args[3], args[4]);
              case 6:
                return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
              case 7:
                return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
            }
            var thisBinding = baseCreate2(Ctor.prototype),
              result3 = Ctor.apply(thisBinding, args);
            return isObject2(result3) ? result3 : thisBinding;
          };
        }
        function createCurry(func, bitmask, arity) {
          var Ctor = createCtor(func);
          function wrapper2() {
            var length = arguments.length,
              args = Array2(length),
              index2 = length,
              placeholder = getHolder(wrapper2);
            while (index2--) {
              args[index2] = arguments[index2];
            }
            var holders = length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder ? [] : replaceHolders(args, placeholder);
            length -= holders.length;
            if (length < arity) {
              return createRecurry(func, bitmask, createHybrid, wrapper2.placeholder, undefined$12, args, holders, undefined$12, undefined$12, arity - length);
            }
            var fn2 = this && this !== root2 && this instanceof wrapper2 ? Ctor : func;
            return apply2(fn2, this, args);
          }
          return wrapper2;
        }
        function createFind(findIndexFunc) {
          return function (collection, predicate, fromIndex) {
            var iterable = Object2(collection);
            if (!isArrayLike2(collection)) {
              var iteratee2 = getIteratee(predicate, 3);
              collection = keys2(collection);
              predicate = function predicate(key) {
                return iteratee2(iterable[key], key, iterable);
              };
            }
            var index2 = findIndexFunc(collection, predicate, fromIndex);
            return index2 > -1 ? iterable[iteratee2 ? collection[index2] : index2] : undefined$12;
          };
        }
        function createFlow(fromRight) {
          return flatRest2(function (funcs) {
            var length = funcs.length,
              index2 = length,
              prereq = LodashWrapper.prototype.thru;
            if (fromRight) {
              funcs.reverse();
            }
            while (index2--) {
              var func = funcs[index2];
              if (typeof func != "function") {
                throw new TypeError2(FUNC_ERROR_TEXT2);
              }
              if (prereq && !wrapper2 && getFuncName(func) == "wrapper") {
                var wrapper2 = new LodashWrapper([], true);
              }
            }
            index2 = wrapper2 ? index2 : length;
            while (++index2 < length) {
              func = funcs[index2];
              var funcName = getFuncName(func),
                data = funcName == "wrapper" ? getData(func) : undefined$12;
              if (data && isLaziable(data[0]) && data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) && !data[4].length && data[9] == 1) {
                wrapper2 = wrapper2[getFuncName(data[0])].apply(wrapper2, data[3]);
              } else {
                wrapper2 = func.length == 1 && isLaziable(func) ? wrapper2[funcName]() : wrapper2.thru(func);
              }
            }
            return function () {
              var args = arguments,
                value = args[0];
              if (wrapper2 && args.length == 1 && isArray2(value)) {
                return wrapper2.plant(value).value();
              }
              var index3 = 0,
                result3 = length ? funcs[index3].apply(this, args) : value;
              while (++index3 < length) {
                result3 = funcs[index3].call(this, result3);
              }
              return result3;
            };
          });
        }
        function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary2, arity) {
          var isAry = bitmask & WRAP_ARY_FLAG,
            isBind = bitmask & WRAP_BIND_FLAG,
            isBindKey = bitmask & WRAP_BIND_KEY_FLAG,
            isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),
            isFlip = bitmask & WRAP_FLIP_FLAG,
            Ctor = isBindKey ? undefined$12 : createCtor(func);
          function wrapper2() {
            var length = arguments.length,
              args = Array2(length),
              index2 = length;
            while (index2--) {
              args[index2] = arguments[index2];
            }
            if (isCurried) {
              var placeholder = getHolder(wrapper2),
                holdersCount = countHolders(args, placeholder);
            }
            if (partials) {
              args = composeArgs(args, partials, holders, isCurried);
            }
            if (partialsRight) {
              args = composeArgsRight(args, partialsRight, holdersRight, isCurried);
            }
            length -= holdersCount;
            if (isCurried && length < arity) {
              var newHolders = replaceHolders(args, placeholder);
              return createRecurry(func, bitmask, createHybrid, wrapper2.placeholder, thisArg, args, newHolders, argPos, ary2, arity - length);
            }
            var thisBinding = isBind ? thisArg : this,
              fn2 = isBindKey ? thisBinding[func] : func;
            length = args.length;
            if (argPos) {
              args = reorder(args, argPos);
            } else if (isFlip && length > 1) {
              args.reverse();
            }
            if (isAry && ary2 < length) {
              args.length = ary2;
            }
            if (this && this !== root2 && this instanceof wrapper2) {
              fn2 = Ctor || createCtor(fn2);
            }
            return fn2.apply(thisBinding, args);
          }
          return wrapper2;
        }
        function createInverter(setter, toIteratee) {
          return function (object, iteratee2) {
            return baseInverter(object, setter, toIteratee(iteratee2), {});
          };
        }
        function createMathOperation(operator, defaultValue) {
          return function (value, other) {
            var result3;
            if (value === undefined$12 && other === undefined$12) {
              return defaultValue;
            }
            if (value !== undefined$12) {
              result3 = value;
            }
            if (other !== undefined$12) {
              if (result3 === undefined$12) {
                return other;
              }
              if (typeof value == "string" || typeof other == "string") {
                value = baseToString2(value);
                other = baseToString2(other);
              } else {
                value = baseToNumber(value);
                other = baseToNumber(other);
              }
              result3 = operator(value, other);
            }
            return result3;
          };
        }
        function createOver(arrayFunc) {
          return flatRest2(function (iteratees) {
            iteratees = arrayMap2(iteratees, baseUnary2(getIteratee()));
            return baseRest2(function (args) {
              var thisArg = this;
              return arrayFunc(iteratees, function (iteratee2) {
                return apply2(iteratee2, thisArg, args);
              });
            });
          });
        }
        function createPadding(length, chars) {
          chars = chars === undefined$12 ? " " : baseToString2(chars);
          var charsLength = chars.length;
          if (charsLength < 2) {
            return charsLength ? baseRepeat(chars, length) : chars;
          }
          var result3 = baseRepeat(chars, nativeCeil(length / stringSize(chars)));
          return hasUnicode(chars) ? castSlice(stringToArray(result3), 0, length).join("") : result3.slice(0, length);
        }
        function createPartial(func, bitmask, thisArg, partials) {
          var isBind = bitmask & WRAP_BIND_FLAG,
            Ctor = createCtor(func);
          function wrapper2() {
            var argsIndex = -1,
              argsLength = arguments.length,
              leftIndex = -1,
              leftLength = partials.length,
              args = Array2(leftLength + argsLength),
              fn2 = this && this !== root2 && this instanceof wrapper2 ? Ctor : func;
            while (++leftIndex < leftLength) {
              args[leftIndex] = partials[leftIndex];
            }
            while (argsLength--) {
              args[leftIndex++] = arguments[++argsIndex];
            }
            return apply2(fn2, isBind ? thisArg : this, args);
          }
          return wrapper2;
        }
        function createRange(fromRight) {
          return function (start, end, step) {
            if (step && typeof step != "number" && isIterateeCall2(start, end, step)) {
              end = step = undefined$12;
            }
            start = toFinite(start);
            if (end === undefined$12) {
              end = start;
              start = 0;
            } else {
              end = toFinite(end);
            }
            step = step === undefined$12 ? start < end ? 1 : -1 : toFinite(step);
            return baseRange(start, end, step, fromRight);
          };
        }
        function createRelationalOperation(operator) {
          return function (value, other) {
            if (!(typeof value == "string" && typeof other == "string")) {
              value = toNumber2(value);
              other = toNumber2(other);
            }
            return operator(value, other);
          };
        }
        function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary2, arity) {
          var isCurry = bitmask & WRAP_CURRY_FLAG,
            newHolders = isCurry ? holders : undefined$12,
            newHoldersRight = isCurry ? undefined$12 : holders,
            newPartials = isCurry ? partials : undefined$12,
            newPartialsRight = isCurry ? undefined$12 : partials;
          bitmask |= isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG;
          bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);
          if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {
            bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);
          }
          var newData = [func, bitmask, thisArg, newPartials, newHolders, newPartialsRight, newHoldersRight, argPos, ary2, arity];
          var result3 = wrapFunc.apply(undefined$12, newData);
          if (isLaziable(func)) {
            setData(result3, newData);
          }
          result3.placeholder = placeholder;
          return setWrapToString(result3, func, bitmask);
        }
        function createRound(methodName) {
          var func = Math2[methodName];
          return function (number, precision) {
            number = toNumber2(number);
            precision = precision == null ? 0 : nativeMin2(toInteger(precision), 292);
            if (precision && nativeIsFinite(number)) {
              var pair = (toString2(number) + "e").split("e"),
                value = func(pair[0] + "e" + (+pair[1] + precision));
              pair = (toString2(value) + "e").split("e");
              return +(pair[0] + "e" + (+pair[1] - precision));
            }
            return func(number);
          };
        }
        var createSet = !(Set2 && 1 / setToArray(new Set2([, -0]))[1] == INFINITY2) ? noop : function (values2) {
          return new Set2(values2);
        };
        function createToPairs(keysFunc) {
          return function (object) {
            var tag = getTag2(object);
            if (tag == mapTag2) {
              return mapToArray(object);
            }
            if (tag == setTag2) {
              return setToPairs(object);
            }
            return baseToPairs(object, keysFunc(object));
          };
        }
        function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary2, arity) {
          var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;
          if (!isBindKey && typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          var length = partials ? partials.length : 0;
          if (!length) {
            bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);
            partials = holders = undefined$12;
          }
          ary2 = ary2 === undefined$12 ? ary2 : nativeMax2(toInteger(ary2), 0);
          arity = arity === undefined$12 ? arity : toInteger(arity);
          length -= holders ? holders.length : 0;
          if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {
            var partialsRight = partials,
              holdersRight = holders;
            partials = holders = undefined$12;
          }
          var data = isBindKey ? undefined$12 : getData(func);
          var newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary2, arity];
          if (data) {
            mergeData(newData, data);
          }
          func = newData[0];
          bitmask = newData[1];
          thisArg = newData[2];
          partials = newData[3];
          holders = newData[4];
          arity = newData[9] = newData[9] === undefined$12 ? isBindKey ? 0 : func.length : nativeMax2(newData[9] - length, 0);
          if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {
            bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);
          }
          if (!bitmask || bitmask == WRAP_BIND_FLAG) {
            var result3 = createBind(func, bitmask, thisArg);
          } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {
            result3 = createCurry(func, bitmask, arity);
          } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {
            result3 = createPartial(func, bitmask, thisArg, partials);
          } else {
            result3 = createHybrid.apply(undefined$12, newData);
          }
          var setter = data ? baseSetData : setData;
          return setWrapToString(setter(result3, newData), func, bitmask);
        }
        function customDefaultsAssignIn(objValue, srcValue, key, object) {
          if (objValue === undefined$12 || eq2(objValue, objectProto2[key]) && !hasOwnProperty2.call(object, key)) {
            return srcValue;
          }
          return objValue;
        }
        function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {
          if (isObject2(objValue) && isObject2(srcValue)) {
            stack.set(srcValue, objValue);
            baseMerge2(objValue, srcValue, undefined$12, customDefaultsMerge, stack);
            stack["delete"](srcValue);
          }
          return objValue;
        }
        function customOmitClone2(value) {
          return isPlainObject2(value) ? undefined$12 : value;
        }
        function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
          var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
            arrLength = array.length,
            othLength = other.length;
          if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
            return false;
          }
          var arrStacked = stack.get(array);
          var othStacked = stack.get(other);
          if (arrStacked && othStacked) {
            return arrStacked == other && othStacked == array;
          }
          var index2 = -1,
            result3 = true,
            seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : undefined$12;
          stack.set(array, other);
          stack.set(other, array);
          while (++index2 < arrLength) {
            var arrValue = array[index2],
              othValue = other[index2];
            if (customizer) {
              var compared = isPartial ? customizer(othValue, arrValue, index2, other, array, stack) : customizer(arrValue, othValue, index2, array, other, stack);
            }
            if (compared !== undefined$12) {
              if (compared) {
                continue;
              }
              result3 = false;
              break;
            }
            if (seen) {
              if (!arraySome(other, function (othValue2, othIndex) {
                if (!cacheHas(seen, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {
                  return seen.push(othIndex);
                }
              })) {
                result3 = false;
                break;
              }
            } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
              result3 = false;
              break;
            }
          }
          stack["delete"](array);
          stack["delete"](other);
          return result3;
        }
        function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
          switch (tag) {
            case dataViewTag2:
              if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
                return false;
              }
              object = object.buffer;
              other = other.buffer;
            case arrayBufferTag2:
              if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array2(object), new Uint8Array2(other))) {
                return false;
              }
              return true;
            case boolTag2:
            case dateTag2:
            case numberTag2:
              return eq2(+object, +other);
            case errorTag2:
              return object.name == other.name && object.message == other.message;
            case regexpTag2:
            case stringTag2:
              return object == other + "";
            case mapTag2:
              var convert = mapToArray;
            case setTag2:
              var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
              convert || (convert = setToArray);
              if (object.size != other.size && !isPartial) {
                return false;
              }
              var stacked = stack.get(object);
              if (stacked) {
                return stacked == other;
              }
              bitmask |= COMPARE_UNORDERED_FLAG;
              stack.set(object, other);
              var result3 = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
              stack["delete"](object);
              return result3;
            case symbolTag2:
              if (symbolValueOf2) {
                return symbolValueOf2.call(object) == symbolValueOf2.call(other);
              }
          }
          return false;
        }
        function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
          var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
            objProps = getAllKeys2(object),
            objLength = objProps.length,
            othProps = getAllKeys2(other),
            othLength = othProps.length;
          if (objLength != othLength && !isPartial) {
            return false;
          }
          var index2 = objLength;
          while (index2--) {
            var key = objProps[index2];
            if (!(isPartial ? key in other : hasOwnProperty2.call(other, key))) {
              return false;
            }
          }
          var objStacked = stack.get(object);
          var othStacked = stack.get(other);
          if (objStacked && othStacked) {
            return objStacked == other && othStacked == object;
          }
          var result3 = true;
          stack.set(object, other);
          stack.set(other, object);
          var skipCtor = isPartial;
          while (++index2 < objLength) {
            key = objProps[index2];
            var objValue = object[key],
              othValue = other[key];
            if (customizer) {
              var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
            }
            if (!(compared === undefined$12 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
              result3 = false;
              break;
            }
            skipCtor || (skipCtor = key == "constructor");
          }
          if (result3 && !skipCtor) {
            var objCtor = object.constructor,
              othCtor = other.constructor;
            if (objCtor != othCtor && "constructor" in object && "constructor" in other && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)) {
              result3 = false;
            }
          }
          stack["delete"](object);
          stack["delete"](other);
          return result3;
        }
        function flatRest2(func) {
          return setToString2(overRest2(func, undefined$12, flatten2), func + "");
        }
        function getAllKeys2(object) {
          return baseGetAllKeys2(object, keys2, getSymbols2);
        }
        function getAllKeysIn2(object) {
          return baseGetAllKeys2(object, keysIn2, getSymbolsIn2);
        }
        var getData = !metaMap ? noop : function (func) {
          return metaMap.get(func);
        };
        function getFuncName(func) {
          var result3 = func.name + "",
            array = realNames[result3],
            length = hasOwnProperty2.call(realNames, result3) ? array.length : 0;
          while (length--) {
            var data = array[length],
              otherFunc = data.func;
            if (otherFunc == null || otherFunc == func) {
              return data.name;
            }
          }
          return result3;
        }
        function getHolder(func) {
          var object = hasOwnProperty2.call(lodash2, "placeholder") ? lodash2 : func;
          return object.placeholder;
        }
        function getIteratee() {
          var result3 = lodash2.iteratee || iteratee;
          result3 = result3 === iteratee ? baseIteratee : result3;
          return arguments.length ? result3(arguments[0], arguments[1]) : result3;
        }
        function getMapData2(map2, key) {
          var data = map2.__data__;
          return isKeyable2(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
        }
        function getMatchData(object) {
          var result3 = keys2(object),
            length = result3.length;
          while (length--) {
            var key = result3[length],
              value = object[key];
            result3[length] = [key, value, isStrictComparable(value)];
          }
          return result3;
        }
        function getNative2(object, key) {
          var value = getValue2(object, key);
          return baseIsNative2(value) ? value : undefined$12;
        }
        function getRawTag2(value) {
          var isOwn = hasOwnProperty2.call(value, symToStringTag2),
            tag = value[symToStringTag2];
          try {
            value[symToStringTag2] = undefined$12;
            var unmasked = true;
          } catch (e2) {}
          var result3 = nativeObjectToString2.call(value);
          if (unmasked) {
            if (isOwn) {
              value[symToStringTag2] = tag;
            } else {
              delete value[symToStringTag2];
            }
          }
          return result3;
        }
        var getSymbols2 = !nativeGetSymbols2 ? stubArray2 : function (object) {
          if (object == null) {
            return [];
          }
          object = Object2(object);
          return arrayFilter2(nativeGetSymbols2(object), function (symbol) {
            return propertyIsEnumerable2.call(object, symbol);
          });
        };
        var getSymbolsIn2 = !nativeGetSymbols2 ? stubArray2 : function (object) {
          var result3 = [];
          while (object) {
            arrayPush2(result3, getSymbols2(object));
            object = getPrototype2(object);
          }
          return result3;
        };
        var getTag2 = baseGetTag2;
        if (DataView2 && getTag2(new DataView2(new ArrayBuffer(1))) != dataViewTag2 || Map2 && getTag2(new Map2()) != mapTag2 || Promise2 && getTag2(Promise2.resolve()) != promiseTag2 || Set2 && getTag2(new Set2()) != setTag2 || WeakMap2 && getTag2(new WeakMap2()) != weakMapTag2) {
          getTag2 = function getTag2(value) {
            var result3 = baseGetTag2(value),
              Ctor = result3 == objectTag2 ? value.constructor : undefined$12,
              ctorString = Ctor ? toSource2(Ctor) : "";
            if (ctorString) {
              switch (ctorString) {
                case dataViewCtorString2:
                  return dataViewTag2;
                case mapCtorString2:
                  return mapTag2;
                case promiseCtorString2:
                  return promiseTag2;
                case setCtorString2:
                  return setTag2;
                case weakMapCtorString2:
                  return weakMapTag2;
              }
            }
            return result3;
          };
        }
        function getView(start, end, transforms) {
          var index2 = -1,
            length = transforms.length;
          while (++index2 < length) {
            var data = transforms[index2],
              size2 = data.size;
            switch (data.type) {
              case "drop":
                start += size2;
                break;
              case "dropRight":
                end -= size2;
                break;
              case "take":
                end = nativeMin2(end, start + size2);
                break;
              case "takeRight":
                start = nativeMax2(start, end - size2);
                break;
            }
          }
          return {
            "start": start,
            "end": end
          };
        }
        function getWrapDetails(source) {
          var match = source.match(reWrapDetails);
          return match ? match[1].split(reSplitDetails) : [];
        }
        function hasPath2(object, path, hasFunc) {
          path = castPath2(path, object);
          var index2 = -1,
            length = path.length,
            result3 = false;
          while (++index2 < length) {
            var key = toKey2(path[index2]);
            if (!(result3 = object != null && hasFunc(object, key))) {
              break;
            }
            object = object[key];
          }
          if (result3 || ++index2 != length) {
            return result3;
          }
          length = object == null ? 0 : object.length;
          return !!length && isLength2(length) && isIndex2(key, length) && (isArray2(object) || isArguments2(object));
        }
        function initCloneArray2(array) {
          var length = array.length,
            result3 = new array.constructor(length);
          if (length && typeof array[0] == "string" && hasOwnProperty2.call(array, "index")) {
            result3.index = array.index;
            result3.input = array.input;
          }
          return result3;
        }
        function initCloneObject2(object) {
          return typeof object.constructor == "function" && !isPrototype2(object) ? baseCreate2(getPrototype2(object)) : {};
        }
        function initCloneByTag2(object, tag, isDeep) {
          var Ctor = object.constructor;
          switch (tag) {
            case arrayBufferTag2:
              return cloneArrayBuffer2(object);
            case boolTag2:
            case dateTag2:
              return new Ctor(+object);
            case dataViewTag2:
              return cloneDataView2(object, isDeep);
            case float32Tag2:
            case float64Tag2:
            case int8Tag2:
            case int16Tag2:
            case int32Tag2:
            case uint8Tag2:
            case uint8ClampedTag2:
            case uint16Tag2:
            case uint32Tag2:
              return cloneTypedArray2(object, isDeep);
            case mapTag2:
              return new Ctor();
            case numberTag2:
            case stringTag2:
              return new Ctor(object);
            case regexpTag2:
              return cloneRegExp2(object);
            case setTag2:
              return new Ctor();
            case symbolTag2:
              return cloneSymbol2(object);
          }
        }
        function insertWrapDetails(source, details) {
          var length = details.length;
          if (!length) {
            return source;
          }
          var lastIndex = length - 1;
          details[lastIndex] = (length > 1 ? "& " : "") + details[lastIndex];
          details = details.join(length > 2 ? ", " : " ");
          return source.replace(reWrapComment, "{\n/* [wrapped with " + details + "] */\n");
        }
        function isFlattenable2(value) {
          return isArray2(value) || isArguments2(value) || !!(spreadableSymbol2 && value && value[spreadableSymbol2]);
        }
        function isIndex2(value, length) {
          var type2 = _typeof4(value);
          length = length == null ? MAX_SAFE_INTEGER2 : length;
          return !!length && (type2 == "number" || type2 != "symbol" && reIsUint2.test(value)) && value > -1 && value % 1 == 0 && value < length;
        }
        function isIterateeCall2(value, index2, object) {
          if (!isObject2(object)) {
            return false;
          }
          var type2 = _typeof4(index2);
          if (type2 == "number" ? isArrayLike2(object) && isIndex2(index2, object.length) : type2 == "string" && index2 in object) {
            return eq2(object[index2], value);
          }
          return false;
        }
        function isKey2(value, object) {
          if (isArray2(value)) {
            return false;
          }
          var type2 = _typeof4(value);
          if (type2 == "number" || type2 == "symbol" || type2 == "boolean" || value == null || isSymbol2(value)) {
            return true;
          }
          return reIsPlainProp2.test(value) || !reIsDeepProp2.test(value) || object != null && value in Object2(object);
        }
        function isKeyable2(value) {
          var type2 = _typeof4(value);
          return type2 == "string" || type2 == "number" || type2 == "symbol" || type2 == "boolean" ? value !== "__proto__" : value === null;
        }
        function isLaziable(func) {
          var funcName = getFuncName(func),
            other = lodash2[funcName];
          if (typeof other != "function" || !(funcName in LazyWrapper.prototype)) {
            return false;
          }
          if (func === other) {
            return true;
          }
          var data = getData(other);
          return !!data && func === data[0];
        }
        function isMasked2(func) {
          return !!maskSrcKey2 && maskSrcKey2 in func;
        }
        var isMaskable = coreJsData2 ? isFunction2 : stubFalse2;
        function isPrototype2(value) {
          var Ctor = value && value.constructor,
            proto = typeof Ctor == "function" && Ctor.prototype || objectProto2;
          return value === proto;
        }
        function isStrictComparable(value) {
          return value === value && !isObject2(value);
        }
        function matchesStrictComparable(key, srcValue) {
          return function (object) {
            if (object == null) {
              return false;
            }
            return object[key] === srcValue && (srcValue !== undefined$12 || key in Object2(object));
          };
        }
        function memoizeCapped2(func) {
          var result3 = memoize2(func, function (key) {
            if (cache.size === MAX_MEMOIZE_SIZE2) {
              cache.clear();
            }
            return key;
          });
          var cache = result3.cache;
          return result3;
        }
        function mergeData(data, source) {
          var bitmask = data[1],
            srcBitmask = source[1],
            newBitmask = bitmask | srcBitmask,
            isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);
          var isCombo = srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_CURRY_FLAG || srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_REARG_FLAG && data[7].length <= source[8] || srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG) && source[7].length <= source[8] && bitmask == WRAP_CURRY_FLAG;
          if (!(isCommon || isCombo)) {
            return data;
          }
          if (srcBitmask & WRAP_BIND_FLAG) {
            data[2] = source[2];
            newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;
          }
          var value = source[3];
          if (value) {
            var partials = data[3];
            data[3] = partials ? composeArgs(partials, value, source[4]) : value;
            data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];
          }
          value = source[5];
          if (value) {
            partials = data[5];
            data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;
            data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];
          }
          value = source[7];
          if (value) {
            data[7] = value;
          }
          if (srcBitmask & WRAP_ARY_FLAG) {
            data[8] = data[8] == null ? source[8] : nativeMin2(data[8], source[8]);
          }
          if (data[9] == null) {
            data[9] = source[9];
          }
          data[0] = source[0];
          data[1] = newBitmask;
          return data;
        }
        function nativeKeysIn2(object) {
          var result3 = [];
          if (object != null) {
            for (var key in Object2(object)) {
              result3.push(key);
            }
          }
          return result3;
        }
        function objectToString2(value) {
          return nativeObjectToString2.call(value);
        }
        function overRest2(func, start, transform2) {
          start = nativeMax2(start === undefined$12 ? func.length - 1 : start, 0);
          return function () {
            var args = arguments,
              index2 = -1,
              length = nativeMax2(args.length - start, 0),
              array = Array2(length);
            while (++index2 < length) {
              array[index2] = args[start + index2];
            }
            index2 = -1;
            var otherArgs = Array2(start + 1);
            while (++index2 < start) {
              otherArgs[index2] = args[index2];
            }
            otherArgs[start] = transform2(array);
            return apply2(func, this, otherArgs);
          };
        }
        function parent2(object, path) {
          return path.length < 2 ? object : baseGet2(object, baseSlice2(path, 0, -1));
        }
        function reorder(array, indexes) {
          var arrLength = array.length,
            length = nativeMin2(indexes.length, arrLength),
            oldArray = copyArray2(array);
          while (length--) {
            var index2 = indexes[length];
            array[length] = isIndex2(index2, arrLength) ? oldArray[index2] : undefined$12;
          }
          return array;
        }
        function safeGet2(object, key) {
          if (key === "constructor" && typeof object[key] === "function") {
            return;
          }
          if (key == "__proto__") {
            return;
          }
          return object[key];
        }
        var setData = shortOut2(baseSetData);
        var setTimeout2 = ctxSetTimeout || function (func, wait) {
          return root2.setTimeout(func, wait);
        };
        var setToString2 = shortOut2(baseSetToString2);
        function setWrapToString(wrapper2, reference, bitmask) {
          var source = reference + "";
          return setToString2(wrapper2, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));
        }
        function shortOut2(func) {
          var count = 0,
            lastCalled = 0;
          return function () {
            var stamp = nativeNow2(),
              remaining = HOT_SPAN2 - (stamp - lastCalled);
            lastCalled = stamp;
            if (remaining > 0) {
              if (++count >= HOT_COUNT2) {
                return arguments[0];
              }
            } else {
              count = 0;
            }
            return func.apply(undefined$12, arguments);
          };
        }
        function shuffleSelf(array, size2) {
          var index2 = -1,
            length = array.length,
            lastIndex = length - 1;
          size2 = size2 === undefined$12 ? length : size2;
          while (++index2 < size2) {
            var rand = baseRandom(index2, lastIndex),
              value = array[rand];
            array[rand] = array[index2];
            array[index2] = value;
          }
          array.length = size2;
          return array;
        }
        var stringToPath2 = memoizeCapped2(function (string) {
          var result3 = [];
          if (string.charCodeAt(0) === 46) {
            result3.push("");
          }
          string.replace(rePropName2, function (match, number, quote2, subString) {
            result3.push(quote2 ? subString.replace(reEscapeChar2, "$1") : number || match);
          });
          return result3;
        });
        function toKey2(value) {
          if (typeof value == "string" || isSymbol2(value)) {
            return value;
          }
          var result3 = value + "";
          return result3 == "0" && 1 / value == -INFINITY2 ? "-0" : result3;
        }
        function toSource2(func) {
          if (func != null) {
            try {
              return funcToString2.call(func);
            } catch (e2) {}
            try {
              return func + "";
            } catch (e2) {}
          }
          return "";
        }
        function updateWrapDetails(details, bitmask) {
          arrayEach2(wrapFlags, function (pair) {
            var value = "_." + pair[0];
            if (bitmask & pair[1] && !arrayIncludes(details, value)) {
              details.push(value);
            }
          });
          return details.sort();
        }
        function wrapperClone(wrapper2) {
          if (wrapper2 instanceof LazyWrapper) {
            return wrapper2.clone();
          }
          var result3 = new LodashWrapper(wrapper2.__wrapped__, wrapper2.__chain__);
          result3.__actions__ = copyArray2(wrapper2.__actions__);
          result3.__index__ = wrapper2.__index__;
          result3.__values__ = wrapper2.__values__;
          return result3;
        }
        function chunk(array, size2, guard) {
          if (guard ? isIterateeCall2(array, size2, guard) : size2 === undefined$12) {
            size2 = 1;
          } else {
            size2 = nativeMax2(toInteger(size2), 0);
          }
          var length = array == null ? 0 : array.length;
          if (!length || size2 < 1) {
            return [];
          }
          var index2 = 0,
            resIndex = 0,
            result3 = Array2(nativeCeil(length / size2));
          while (index2 < length) {
            result3[resIndex++] = baseSlice2(array, index2, index2 += size2);
          }
          return result3;
        }
        function compact2(array) {
          var index2 = -1,
            length = array == null ? 0 : array.length,
            resIndex = 0,
            result3 = [];
          while (++index2 < length) {
            var value = array[index2];
            if (value) {
              result3[resIndex++] = value;
            }
          }
          return result3;
        }
        function concat() {
          var length = arguments.length;
          if (!length) {
            return [];
          }
          var args = Array2(length - 1),
            array = arguments[0],
            index2 = length;
          while (index2--) {
            args[index2 - 1] = arguments[index2];
          }
          return arrayPush2(isArray2(array) ? copyArray2(array) : [array], baseFlatten2(args, 1));
        }
        var difference = baseRest2(function (array, values2) {
          return isArrayLikeObject2(array) ? baseDifference(array, baseFlatten2(values2, 1, isArrayLikeObject2, true)) : [];
        });
        var differenceBy = baseRest2(function (array, values2) {
          var iteratee2 = last2(values2);
          if (isArrayLikeObject2(iteratee2)) {
            iteratee2 = undefined$12;
          }
          return isArrayLikeObject2(array) ? baseDifference(array, baseFlatten2(values2, 1, isArrayLikeObject2, true), getIteratee(iteratee2, 2)) : [];
        });
        var differenceWith = baseRest2(function (array, values2) {
          var comparator = last2(values2);
          if (isArrayLikeObject2(comparator)) {
            comparator = undefined$12;
          }
          return isArrayLikeObject2(array) ? baseDifference(array, baseFlatten2(values2, 1, isArrayLikeObject2, true), undefined$12, comparator) : [];
        });
        function drop(array, n2, guard) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          n2 = guard || n2 === undefined$12 ? 1 : toInteger(n2);
          return baseSlice2(array, n2 < 0 ? 0 : n2, length);
        }
        function dropRight(array, n2, guard) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          n2 = guard || n2 === undefined$12 ? 1 : toInteger(n2);
          n2 = length - n2;
          return baseSlice2(array, 0, n2 < 0 ? 0 : n2);
        }
        function dropRightWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true, true) : [];
        }
        function dropWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true) : [];
        }
        function fill(array, value, start, end) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          if (start && typeof start != "number" && isIterateeCall2(array, value, start)) {
            start = 0;
            end = length;
          }
          return baseFill(array, value, start, end);
        }
        function findIndex(array, predicate, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = fromIndex == null ? 0 : toInteger(fromIndex);
          if (index2 < 0) {
            index2 = nativeMax2(length + index2, 0);
          }
          return baseFindIndex(array, getIteratee(predicate, 3), index2);
        }
        function findLastIndex(array, predicate, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = length - 1;
          if (fromIndex !== undefined$12) {
            index2 = toInteger(fromIndex);
            index2 = fromIndex < 0 ? nativeMax2(length + index2, 0) : nativeMin2(index2, length - 1);
          }
          return baseFindIndex(array, getIteratee(predicate, 3), index2, true);
        }
        function flatten2(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseFlatten2(array, 1) : [];
        }
        function flattenDeep(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseFlatten2(array, INFINITY2) : [];
        }
        function flattenDepth(array, depth) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          depth = depth === undefined$12 ? 1 : toInteger(depth);
          return baseFlatten2(array, depth);
        }
        function fromPairs(pairs) {
          var index2 = -1,
            length = pairs == null ? 0 : pairs.length,
            result3 = {};
          while (++index2 < length) {
            var pair = pairs[index2];
            result3[pair[0]] = pair[1];
          }
          return result3;
        }
        function head(array) {
          return array && array.length ? array[0] : undefined$12;
        }
        function indexOf2(array, value, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = fromIndex == null ? 0 : toInteger(fromIndex);
          if (index2 < 0) {
            index2 = nativeMax2(length + index2, 0);
          }
          return baseIndexOf(array, value, index2);
        }
        function initial(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseSlice2(array, 0, -1) : [];
        }
        var intersection = baseRest2(function (arrays) {
          var mapped = arrayMap2(arrays, castArrayLikeObject);
          return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped) : [];
        });
        var intersectionBy = baseRest2(function (arrays) {
          var iteratee2 = last2(arrays),
            mapped = arrayMap2(arrays, castArrayLikeObject);
          if (iteratee2 === last2(mapped)) {
            iteratee2 = undefined$12;
          } else {
            mapped.pop();
          }
          return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, getIteratee(iteratee2, 2)) : [];
        });
        var intersectionWith = baseRest2(function (arrays) {
          var comparator = last2(arrays),
            mapped = arrayMap2(arrays, castArrayLikeObject);
          comparator = typeof comparator == "function" ? comparator : undefined$12;
          if (comparator) {
            mapped.pop();
          }
          return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, undefined$12, comparator) : [];
        });
        function join(array, separator) {
          return array == null ? "" : nativeJoin.call(array, separator);
        }
        function last2(array) {
          var length = array == null ? 0 : array.length;
          return length ? array[length - 1] : undefined$12;
        }
        function lastIndexOf(array, value, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = length;
          if (fromIndex !== undefined$12) {
            index2 = toInteger(fromIndex);
            index2 = index2 < 0 ? nativeMax2(length + index2, 0) : nativeMin2(index2, length - 1);
          }
          return value === value ? strictLastIndexOf(array, value, index2) : baseFindIndex(array, baseIsNaN, index2, true);
        }
        function nth(array, n2) {
          return array && array.length ? baseNth(array, toInteger(n2)) : undefined$12;
        }
        var pull = baseRest2(pullAll);
        function pullAll(array, values2) {
          return array && array.length && values2 && values2.length ? basePullAll(array, values2) : array;
        }
        function pullAllBy(array, values2, iteratee2) {
          return array && array.length && values2 && values2.length ? basePullAll(array, values2, getIteratee(iteratee2, 2)) : array;
        }
        function pullAllWith(array, values2, comparator) {
          return array && array.length && values2 && values2.length ? basePullAll(array, values2, undefined$12, comparator) : array;
        }
        var pullAt = flatRest2(function (array, indexes) {
          var length = array == null ? 0 : array.length,
            result3 = baseAt(array, indexes);
          basePullAt(array, arrayMap2(indexes, function (index2) {
            return isIndex2(index2, length) ? +index2 : index2;
          }).sort(compareAscending));
          return result3;
        });
        function remove(array, predicate) {
          var result3 = [];
          if (!(array && array.length)) {
            return result3;
          }
          var index2 = -1,
            indexes = [],
            length = array.length;
          predicate = getIteratee(predicate, 3);
          while (++index2 < length) {
            var value = array[index2];
            if (predicate(value, index2, array)) {
              result3.push(value);
              indexes.push(index2);
            }
          }
          basePullAt(array, indexes);
          return result3;
        }
        function reverse(array) {
          return array == null ? array : nativeReverse.call(array);
        }
        function slice(array, start, end) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          if (end && typeof end != "number" && isIterateeCall2(array, start, end)) {
            start = 0;
            end = length;
          } else {
            start = start == null ? 0 : toInteger(start);
            end = end === undefined$12 ? length : toInteger(end);
          }
          return baseSlice2(array, start, end);
        }
        function sortedIndex(array, value) {
          return baseSortedIndex(array, value);
        }
        function sortedIndexBy(array, value, iteratee2) {
          return baseSortedIndexBy(array, value, getIteratee(iteratee2, 2));
        }
        function sortedIndexOf(array, value) {
          var length = array == null ? 0 : array.length;
          if (length) {
            var index2 = baseSortedIndex(array, value);
            if (index2 < length && eq2(array[index2], value)) {
              return index2;
            }
          }
          return -1;
        }
        function sortedLastIndex(array, value) {
          return baseSortedIndex(array, value, true);
        }
        function sortedLastIndexBy(array, value, iteratee2) {
          return baseSortedIndexBy(array, value, getIteratee(iteratee2, 2), true);
        }
        function sortedLastIndexOf(array, value) {
          var length = array == null ? 0 : array.length;
          if (length) {
            var index2 = baseSortedIndex(array, value, true) - 1;
            if (eq2(array[index2], value)) {
              return index2;
            }
          }
          return -1;
        }
        function sortedUniq(array) {
          return array && array.length ? baseSortedUniq(array) : [];
        }
        function sortedUniqBy(array, iteratee2) {
          return array && array.length ? baseSortedUniq(array, getIteratee(iteratee2, 2)) : [];
        }
        function tail(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseSlice2(array, 1, length) : [];
        }
        function take(array, n2, guard) {
          if (!(array && array.length)) {
            return [];
          }
          n2 = guard || n2 === undefined$12 ? 1 : toInteger(n2);
          return baseSlice2(array, 0, n2 < 0 ? 0 : n2);
        }
        function takeRight(array, n2, guard) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          n2 = guard || n2 === undefined$12 ? 1 : toInteger(n2);
          n2 = length - n2;
          return baseSlice2(array, n2 < 0 ? 0 : n2, length);
        }
        function takeRightWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3), false, true) : [];
        }
        function takeWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3)) : [];
        }
        var union = baseRest2(function (arrays) {
          return baseUniq(baseFlatten2(arrays, 1, isArrayLikeObject2, true));
        });
        var unionBy = baseRest2(function (arrays) {
          var iteratee2 = last2(arrays);
          if (isArrayLikeObject2(iteratee2)) {
            iteratee2 = undefined$12;
          }
          return baseUniq(baseFlatten2(arrays, 1, isArrayLikeObject2, true), getIteratee(iteratee2, 2));
        });
        var unionWith = baseRest2(function (arrays) {
          var comparator = last2(arrays);
          comparator = typeof comparator == "function" ? comparator : undefined$12;
          return baseUniq(baseFlatten2(arrays, 1, isArrayLikeObject2, true), undefined$12, comparator);
        });
        function uniq(array) {
          return array && array.length ? baseUniq(array) : [];
        }
        function uniqBy(array, iteratee2) {
          return array && array.length ? baseUniq(array, getIteratee(iteratee2, 2)) : [];
        }
        function uniqWith(array, comparator) {
          comparator = typeof comparator == "function" ? comparator : undefined$12;
          return array && array.length ? baseUniq(array, undefined$12, comparator) : [];
        }
        function unzip(array) {
          if (!(array && array.length)) {
            return [];
          }
          var length = 0;
          array = arrayFilter2(array, function (group) {
            if (isArrayLikeObject2(group)) {
              length = nativeMax2(group.length, length);
              return true;
            }
          });
          return baseTimes2(length, function (index2) {
            return arrayMap2(array, baseProperty(index2));
          });
        }
        function unzipWith(array, iteratee2) {
          if (!(array && array.length)) {
            return [];
          }
          var result3 = unzip(array);
          if (iteratee2 == null) {
            return result3;
          }
          return arrayMap2(result3, function (group) {
            return apply2(iteratee2, undefined$12, group);
          });
        }
        var without = baseRest2(function (array, values2) {
          return isArrayLikeObject2(array) ? baseDifference(array, values2) : [];
        });
        var xor = baseRest2(function (arrays) {
          return baseXor(arrayFilter2(arrays, isArrayLikeObject2));
        });
        var xorBy = baseRest2(function (arrays) {
          var iteratee2 = last2(arrays);
          if (isArrayLikeObject2(iteratee2)) {
            iteratee2 = undefined$12;
          }
          return baseXor(arrayFilter2(arrays, isArrayLikeObject2), getIteratee(iteratee2, 2));
        });
        var xorWith = baseRest2(function (arrays) {
          var comparator = last2(arrays);
          comparator = typeof comparator == "function" ? comparator : undefined$12;
          return baseXor(arrayFilter2(arrays, isArrayLikeObject2), undefined$12, comparator);
        });
        var zip = baseRest2(unzip);
        function zipObject(props, values2) {
          return baseZipObject(props || [], values2 || [], assignValue2);
        }
        function zipObjectDeep(props, values2) {
          return baseZipObject(props || [], values2 || [], baseSet2);
        }
        var zipWith = baseRest2(function (arrays) {
          var length = arrays.length,
            iteratee2 = length > 1 ? arrays[length - 1] : undefined$12;
          iteratee2 = typeof iteratee2 == "function" ? (arrays.pop(), iteratee2) : undefined$12;
          return unzipWith(arrays, iteratee2);
        });
        function chain(value) {
          var result3 = lodash2(value);
          result3.__chain__ = true;
          return result3;
        }
        function tap(value, interceptor) {
          interceptor(value);
          return value;
        }
        function thru(value, interceptor) {
          return interceptor(value);
        }
        var wrapperAt = flatRest2(function (paths) {
          var length = paths.length,
            start = length ? paths[0] : 0,
            value = this.__wrapped__,
            interceptor = function interceptor(object) {
              return baseAt(object, paths);
            };
          if (length > 1 || this.__actions__.length || !(value instanceof LazyWrapper) || !isIndex2(start)) {
            return this.thru(interceptor);
          }
          value = value.slice(start, +start + (length ? 1 : 0));
          value.__actions__.push({
            "func": thru,
            "args": [interceptor],
            "thisArg": undefined$12
          });
          return new LodashWrapper(value, this.__chain__).thru(function (array) {
            if (length && !array.length) {
              array.push(undefined$12);
            }
            return array;
          });
        });
        function wrapperChain() {
          return chain(this);
        }
        function wrapperCommit() {
          return new LodashWrapper(this.value(), this.__chain__);
        }
        function wrapperNext() {
          if (this.__values__ === undefined$12) {
            this.__values__ = toArray(this.value());
          }
          var done = this.__index__ >= this.__values__.length,
            value = done ? undefined$12 : this.__values__[this.__index__++];
          return {
            "done": done,
            "value": value
          };
        }
        function wrapperToIterator() {
          return this;
        }
        function wrapperPlant(value) {
          var result3,
            parent3 = this;
          while (parent3 instanceof baseLodash) {
            var clone2 = wrapperClone(parent3);
            clone2.__index__ = 0;
            clone2.__values__ = undefined$12;
            if (result3) {
              previous.__wrapped__ = clone2;
            } else {
              result3 = clone2;
            }
            var previous = clone2;
            parent3 = parent3.__wrapped__;
          }
          previous.__wrapped__ = value;
          return result3;
        }
        function wrapperReverse() {
          var value = this.__wrapped__;
          if (value instanceof LazyWrapper) {
            var wrapped = value;
            if (this.__actions__.length) {
              wrapped = new LazyWrapper(this);
            }
            wrapped = wrapped.reverse();
            wrapped.__actions__.push({
              "func": thru,
              "args": [reverse],
              "thisArg": undefined$12
            });
            return new LodashWrapper(wrapped, this.__chain__);
          }
          return this.thru(reverse);
        }
        function wrapperValue() {
          return baseWrapperValue(this.__wrapped__, this.__actions__);
        }
        var countBy = createAggregator(function (result3, value, key) {
          if (hasOwnProperty2.call(result3, key)) {
            ++result3[key];
          } else {
            baseAssignValue2(result3, key, 1);
          }
        });
        function every(collection, predicate, guard) {
          var func = isArray2(collection) ? arrayEvery : baseEvery;
          if (guard && isIterateeCall2(collection, predicate, guard)) {
            predicate = undefined$12;
          }
          return func(collection, getIteratee(predicate, 3));
        }
        function filter(collection, predicate) {
          var func = isArray2(collection) ? arrayFilter2 : baseFilter;
          return func(collection, getIteratee(predicate, 3));
        }
        var find = createFind(findIndex);
        var findLast = createFind(findLastIndex);
        function flatMap(collection, iteratee2) {
          return baseFlatten2(map(collection, iteratee2), 1);
        }
        function flatMapDeep(collection, iteratee2) {
          return baseFlatten2(map(collection, iteratee2), INFINITY2);
        }
        function flatMapDepth(collection, iteratee2, depth) {
          depth = depth === undefined$12 ? 1 : toInteger(depth);
          return baseFlatten2(map(collection, iteratee2), depth);
        }
        function forEach2(collection, iteratee2) {
          var func = isArray2(collection) ? arrayEach2 : baseEach;
          return func(collection, getIteratee(iteratee2, 3));
        }
        function forEachRight(collection, iteratee2) {
          var func = isArray2(collection) ? arrayEachRight : baseEachRight;
          return func(collection, getIteratee(iteratee2, 3));
        }
        var groupBy = createAggregator(function (result3, value, key) {
          if (hasOwnProperty2.call(result3, key)) {
            result3[key].push(value);
          } else {
            baseAssignValue2(result3, key, [value]);
          }
        });
        function includes(collection, value, fromIndex, guard) {
          collection = isArrayLike2(collection) ? collection : values(collection);
          fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
          var length = collection.length;
          if (fromIndex < 0) {
            fromIndex = nativeMax2(length + fromIndex, 0);
          }
          return isString2(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
        }
        var invokeMap = baseRest2(function (collection, path, args) {
          var index2 = -1,
            isFunc = typeof path == "function",
            result3 = isArrayLike2(collection) ? Array2(collection.length) : [];
          baseEach(collection, function (value) {
            result3[++index2] = isFunc ? apply2(path, value, args) : baseInvoke(value, path, args);
          });
          return result3;
        });
        var keyBy = createAggregator(function (result3, value, key) {
          baseAssignValue2(result3, key, value);
        });
        function map(collection, iteratee2) {
          var func = isArray2(collection) ? arrayMap2 : baseMap;
          return func(collection, getIteratee(iteratee2, 3));
        }
        function orderBy(collection, iteratees, orders, guard) {
          if (collection == null) {
            return [];
          }
          if (!isArray2(iteratees)) {
            iteratees = iteratees == null ? [] : [iteratees];
          }
          orders = guard ? undefined$12 : orders;
          if (!isArray2(orders)) {
            orders = orders == null ? [] : [orders];
          }
          return baseOrderBy(collection, iteratees, orders);
        }
        var partition = createAggregator(function (result3, value, key) {
          result3[key ? 0 : 1].push(value);
        }, function () {
          return [[], []];
        });
        function reduce(collection, iteratee2, accumulator) {
          var func = isArray2(collection) ? arrayReduce : baseReduce,
            initAccum = arguments.length < 3;
          return func(collection, getIteratee(iteratee2, 4), accumulator, initAccum, baseEach);
        }
        function reduceRight(collection, iteratee2, accumulator) {
          var func = isArray2(collection) ? arrayReduceRight : baseReduce,
            initAccum = arguments.length < 3;
          return func(collection, getIteratee(iteratee2, 4), accumulator, initAccum, baseEachRight);
        }
        function reject(collection, predicate) {
          var func = isArray2(collection) ? arrayFilter2 : baseFilter;
          return func(collection, negate(getIteratee(predicate, 3)));
        }
        function sample(collection) {
          var func = isArray2(collection) ? arraySample : baseSample;
          return func(collection);
        }
        function sampleSize(collection, n2, guard) {
          if (guard ? isIterateeCall2(collection, n2, guard) : n2 === undefined$12) {
            n2 = 1;
          } else {
            n2 = toInteger(n2);
          }
          var func = isArray2(collection) ? arraySampleSize : baseSampleSize;
          return func(collection, n2);
        }
        function shuffle(collection) {
          var func = isArray2(collection) ? arrayShuffle : baseShuffle;
          return func(collection);
        }
        function size(collection) {
          if (collection == null) {
            return 0;
          }
          if (isArrayLike2(collection)) {
            return isString2(collection) ? stringSize(collection) : collection.length;
          }
          var tag = getTag2(collection);
          if (tag == mapTag2 || tag == setTag2) {
            return collection.size;
          }
          return baseKeys2(collection).length;
        }
        function some(collection, predicate, guard) {
          var func = isArray2(collection) ? arraySome : baseSome;
          if (guard && isIterateeCall2(collection, predicate, guard)) {
            predicate = undefined$12;
          }
          return func(collection, getIteratee(predicate, 3));
        }
        var sortBy = baseRest2(function (collection, iteratees) {
          if (collection == null) {
            return [];
          }
          var length = iteratees.length;
          if (length > 1 && isIterateeCall2(collection, iteratees[0], iteratees[1])) {
            iteratees = [];
          } else if (length > 2 && isIterateeCall2(iteratees[0], iteratees[1], iteratees[2])) {
            iteratees = [iteratees[0]];
          }
          return baseOrderBy(collection, baseFlatten2(iteratees, 1), []);
        });
        var now2 = ctxNow || function () {
          return root2.Date.now();
        };
        function after(n2, func) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          n2 = toInteger(n2);
          return function () {
            if (--n2 < 1) {
              return func.apply(this, arguments);
            }
          };
        }
        function ary(func, n2, guard) {
          n2 = guard ? undefined$12 : n2;
          n2 = func && n2 == null ? func.length : n2;
          return createWrap(func, WRAP_ARY_FLAG, undefined$12, undefined$12, undefined$12, undefined$12, n2);
        }
        function before(n2, func) {
          var result3;
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          n2 = toInteger(n2);
          return function () {
            if (--n2 > 0) {
              result3 = func.apply(this, arguments);
            }
            if (n2 <= 1) {
              func = undefined$12;
            }
            return result3;
          };
        }
        var bind2 = baseRest2(function (func, thisArg, partials) {
          var bitmask = WRAP_BIND_FLAG;
          if (partials.length) {
            var holders = replaceHolders(partials, getHolder(bind2));
            bitmask |= WRAP_PARTIAL_FLAG;
          }
          return createWrap(func, bitmask, thisArg, partials, holders);
        });
        var bindKey = baseRest2(function (object, key, partials) {
          var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;
          if (partials.length) {
            var holders = replaceHolders(partials, getHolder(bindKey));
            bitmask |= WRAP_PARTIAL_FLAG;
          }
          return createWrap(key, bitmask, object, partials, holders);
        });
        function curry(func, arity, guard) {
          arity = guard ? undefined$12 : arity;
          var result3 = createWrap(func, WRAP_CURRY_FLAG, undefined$12, undefined$12, undefined$12, undefined$12, undefined$12, arity);
          result3.placeholder = curry.placeholder;
          return result3;
        }
        function curryRight(func, arity, guard) {
          arity = guard ? undefined$12 : arity;
          var result3 = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined$12, undefined$12, undefined$12, undefined$12, undefined$12, arity);
          result3.placeholder = curryRight.placeholder;
          return result3;
        }
        function debounce2(func, wait, options) {
          var lastArgs,
            lastThis,
            maxWait,
            result3,
            timerId,
            lastCallTime,
            lastInvokeTime = 0,
            leading = false,
            maxing = false,
            trailing = true;
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          wait = toNumber2(wait) || 0;
          if (isObject2(options)) {
            leading = !!options.leading;
            maxing = "maxWait" in options;
            maxWait = maxing ? nativeMax2(toNumber2(options.maxWait) || 0, wait) : maxWait;
            trailing = "trailing" in options ? !!options.trailing : trailing;
          }
          function invokeFunc(time) {
            var args = lastArgs,
              thisArg = lastThis;
            lastArgs = lastThis = undefined$12;
            lastInvokeTime = time;
            result3 = func.apply(thisArg, args);
            return result3;
          }
          function leadingEdge(time) {
            lastInvokeTime = time;
            timerId = setTimeout2(timerExpired, wait);
            return leading ? invokeFunc(time) : result3;
          }
          function remainingWait(time) {
            var timeSinceLastCall = time - lastCallTime,
              timeSinceLastInvoke = time - lastInvokeTime,
              timeWaiting = wait - timeSinceLastCall;
            return maxing ? nativeMin2(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
          }
          function shouldInvoke(time) {
            var timeSinceLastCall = time - lastCallTime,
              timeSinceLastInvoke = time - lastInvokeTime;
            return lastCallTime === undefined$12 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
          }
          function timerExpired() {
            var time = now2();
            if (shouldInvoke(time)) {
              return trailingEdge(time);
            }
            timerId = setTimeout2(timerExpired, remainingWait(time));
          }
          function trailingEdge(time) {
            timerId = undefined$12;
            if (trailing && lastArgs) {
              return invokeFunc(time);
            }
            lastArgs = lastThis = undefined$12;
            return result3;
          }
          function cancel() {
            if (timerId !== undefined$12) {
              clearTimeout2(timerId);
            }
            lastInvokeTime = 0;
            lastArgs = lastCallTime = lastThis = timerId = undefined$12;
          }
          function flush() {
            return timerId === undefined$12 ? result3 : trailingEdge(now2());
          }
          function debounced() {
            var time = now2(),
              isInvoking = shouldInvoke(time);
            lastArgs = arguments;
            lastThis = this;
            lastCallTime = time;
            if (isInvoking) {
              if (timerId === undefined$12) {
                return leadingEdge(lastCallTime);
              }
              if (maxing) {
                clearTimeout2(timerId);
                timerId = setTimeout2(timerExpired, wait);
                return invokeFunc(lastCallTime);
              }
            }
            if (timerId === undefined$12) {
              timerId = setTimeout2(timerExpired, wait);
            }
            return result3;
          }
          debounced.cancel = cancel;
          debounced.flush = flush;
          return debounced;
        }
        var defer = baseRest2(function (func, args) {
          return baseDelay(func, 1, args);
        });
        var delay = baseRest2(function (func, wait, args) {
          return baseDelay(func, toNumber2(wait) || 0, args);
        });
        function flip(func) {
          return createWrap(func, WRAP_FLIP_FLAG);
        }
        function memoize2(func, resolver) {
          if (typeof func != "function" || resolver != null && typeof resolver != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          var _memoized3 = function memoized() {
            var args = arguments,
              key = resolver ? resolver.apply(this, args) : args[0],
              cache = _memoized3.cache;
            if (cache.has(key)) {
              return cache.get(key);
            }
            var result3 = func.apply(this, args);
            _memoized3.cache = cache.set(key, result3) || cache;
            return result3;
          };
          _memoized3.cache = new (memoize2.Cache || MapCache2)();
          return _memoized3;
        }
        memoize2.Cache = MapCache2;
        function negate(predicate) {
          if (typeof predicate != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          return function () {
            var args = arguments;
            switch (args.length) {
              case 0:
                return !predicate.call(this);
              case 1:
                return !predicate.call(this, args[0]);
              case 2:
                return !predicate.call(this, args[0], args[1]);
              case 3:
                return !predicate.call(this, args[0], args[1], args[2]);
            }
            return !predicate.apply(this, args);
          };
        }
        function once(func) {
          return before(2, func);
        }
        var overArgs = castRest(function (func, transforms) {
          transforms = transforms.length == 1 && isArray2(transforms[0]) ? arrayMap2(transforms[0], baseUnary2(getIteratee())) : arrayMap2(baseFlatten2(transforms, 1), baseUnary2(getIteratee()));
          var funcsLength = transforms.length;
          return baseRest2(function (args) {
            var index2 = -1,
              length = nativeMin2(args.length, funcsLength);
            while (++index2 < length) {
              args[index2] = transforms[index2].call(this, args[index2]);
            }
            return apply2(func, this, args);
          });
        });
        var partial = baseRest2(function (func, partials) {
          var holders = replaceHolders(partials, getHolder(partial));
          return createWrap(func, WRAP_PARTIAL_FLAG, undefined$12, partials, holders);
        });
        var partialRight = baseRest2(function (func, partials) {
          var holders = replaceHolders(partials, getHolder(partialRight));
          return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined$12, partials, holders);
        });
        var rearg = flatRest2(function (func, indexes) {
          return createWrap(func, WRAP_REARG_FLAG, undefined$12, undefined$12, undefined$12, indexes);
        });
        function rest(func, start) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          start = start === undefined$12 ? start : toInteger(start);
          return baseRest2(func, start);
        }
        function spread(func, start) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          start = start == null ? 0 : nativeMax2(toInteger(start), 0);
          return baseRest2(function (args) {
            var array = args[start],
              otherArgs = castSlice(args, 0, start);
            if (array) {
              arrayPush2(otherArgs, array);
            }
            return apply2(func, this, otherArgs);
          });
        }
        function throttle2(func, wait, options) {
          var leading = true,
            trailing = true;
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          if (isObject2(options)) {
            leading = "leading" in options ? !!options.leading : leading;
            trailing = "trailing" in options ? !!options.trailing : trailing;
          }
          return debounce2(func, wait, {
            "leading": leading,
            "maxWait": wait,
            "trailing": trailing
          });
        }
        function unary(func) {
          return ary(func, 1);
        }
        function wrap(value, wrapper2) {
          return partial(castFunction(wrapper2), value);
        }
        function castArray() {
          if (!arguments.length) {
            return [];
          }
          var value = arguments[0];
          return isArray2(value) ? value : [value];
        }
        function clone(value) {
          return baseClone2(value, CLONE_SYMBOLS_FLAG2);
        }
        function cloneWith(value, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$12;
          return baseClone2(value, CLONE_SYMBOLS_FLAG2, customizer);
        }
        function cloneDeep(value) {
          return baseClone2(value, CLONE_DEEP_FLAG2 | CLONE_SYMBOLS_FLAG2);
        }
        function cloneDeepWith(value, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$12;
          return baseClone2(value, CLONE_DEEP_FLAG2 | CLONE_SYMBOLS_FLAG2, customizer);
        }
        function conformsTo(object, source) {
          return source == null || baseConformsTo(object, source, keys2(source));
        }
        function eq2(value, other) {
          return value === other || value !== value && other !== other;
        }
        var gt2 = createRelationalOperation(baseGt);
        var gte = createRelationalOperation(function (value, other) {
          return value >= other;
        });
        var isArguments2 = baseIsArguments2(function () {
          return arguments;
        }()) ? baseIsArguments2 : function (value) {
          return isObjectLike2(value) && hasOwnProperty2.call(value, "callee") && !propertyIsEnumerable2.call(value, "callee");
        };
        var isArray2 = Array2.isArray;
        var isArrayBuffer = nodeIsArrayBuffer ? baseUnary2(nodeIsArrayBuffer) : baseIsArrayBuffer;
        function isArrayLike2(value) {
          return value != null && isLength2(value.length) && !isFunction2(value);
        }
        function isArrayLikeObject2(value) {
          return isObjectLike2(value) && isArrayLike2(value);
        }
        function isBoolean2(value) {
          return value === true || value === false || isObjectLike2(value) && baseGetTag2(value) == boolTag2;
        }
        var isBuffer2 = nativeIsBuffer || stubFalse2;
        var isDate2 = nodeIsDate ? baseUnary2(nodeIsDate) : baseIsDate;
        function isElement2(value) {
          return isObjectLike2(value) && value.nodeType === 1 && !isPlainObject2(value);
        }
        function isEmpty(value) {
          if (value == null) {
            return true;
          }
          if (isArrayLike2(value) && (isArray2(value) || typeof value == "string" || typeof value.splice == "function" || isBuffer2(value) || isTypedArray2(value) || isArguments2(value))) {
            return !value.length;
          }
          var tag = getTag2(value);
          if (tag == mapTag2 || tag == setTag2) {
            return !value.size;
          }
          if (isPrototype2(value)) {
            return !baseKeys2(value).length;
          }
          for (var key in value) {
            if (hasOwnProperty2.call(value, key)) {
              return false;
            }
          }
          return true;
        }
        function isEqual(value, other) {
          return baseIsEqual(value, other);
        }
        function isEqualWith(value, other, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$12;
          var result3 = customizer ? customizer(value, other) : undefined$12;
          return result3 === undefined$12 ? baseIsEqual(value, other, undefined$12, customizer) : !!result3;
        }
        function isError2(value) {
          if (!isObjectLike2(value)) {
            return false;
          }
          var tag = baseGetTag2(value);
          return tag == errorTag2 || tag == domExcTag || typeof value.message == "string" && typeof value.name == "string" && !isPlainObject2(value);
        }
        function isFinite2(value) {
          return typeof value == "number" && nativeIsFinite(value);
        }
        function isFunction2(value) {
          if (!isObject2(value)) {
            return false;
          }
          var tag = baseGetTag2(value);
          return tag == funcTag2 || tag == genTag2 || tag == asyncTag2 || tag == proxyTag2;
        }
        function isInteger(value) {
          return typeof value == "number" && value == toInteger(value);
        }
        function isLength2(value) {
          return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER2;
        }
        function isObject2(value) {
          var type2 = _typeof4(value);
          return value != null && (type2 == "object" || type2 == "function");
        }
        function isObjectLike2(value) {
          return value != null && _typeof4(value) == "object";
        }
        var isMap2 = nodeIsMap2 ? baseUnary2(nodeIsMap2) : baseIsMap2;
        function isMatch(object, source) {
          return object === source || baseIsMatch(object, source, getMatchData(source));
        }
        function isMatchWith(object, source, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$12;
          return baseIsMatch(object, source, getMatchData(source), customizer);
        }
        function isNaN2(value) {
          return isNumber2(value) && value != +value;
        }
        function isNative(value) {
          if (isMaskable(value)) {
            throw new Error2(CORE_ERROR_TEXT);
          }
          return baseIsNative2(value);
        }
        function isNull(value) {
          return value === null;
        }
        function isNil(value) {
          return value == null;
        }
        function isNumber2(value) {
          return typeof value == "number" || isObjectLike2(value) && baseGetTag2(value) == numberTag2;
        }
        function isPlainObject2(value) {
          if (!isObjectLike2(value) || baseGetTag2(value) != objectTag2) {
            return false;
          }
          var proto = getPrototype2(value);
          if (proto === null) {
            return true;
          }
          var Ctor = hasOwnProperty2.call(proto, "constructor") && proto.constructor;
          return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString2.call(Ctor) == objectCtorString2;
        }
        var isRegExp2 = nodeIsRegExp ? baseUnary2(nodeIsRegExp) : baseIsRegExp;
        function isSafeInteger(value) {
          return isInteger(value) && value >= -MAX_SAFE_INTEGER2 && value <= MAX_SAFE_INTEGER2;
        }
        var isSet2 = nodeIsSet2 ? baseUnary2(nodeIsSet2) : baseIsSet2;
        function isString2(value) {
          return typeof value == "string" || !isArray2(value) && isObjectLike2(value) && baseGetTag2(value) == stringTag2;
        }
        function isSymbol2(value) {
          return _typeof4(value) == "symbol" || isObjectLike2(value) && baseGetTag2(value) == symbolTag2;
        }
        var isTypedArray2 = nodeIsTypedArray2 ? baseUnary2(nodeIsTypedArray2) : baseIsTypedArray2;
        function isUndefined(value) {
          return value === undefined$12;
        }
        function isWeakMap2(value) {
          return isObjectLike2(value) && getTag2(value) == weakMapTag2;
        }
        function isWeakSet2(value) {
          return isObjectLike2(value) && baseGetTag2(value) == weakSetTag;
        }
        var lt2 = createRelationalOperation(baseLt);
        var lte = createRelationalOperation(function (value, other) {
          return value <= other;
        });
        function toArray(value) {
          if (!value) {
            return [];
          }
          if (isArrayLike2(value)) {
            return isString2(value) ? stringToArray(value) : copyArray2(value);
          }
          if (symIterator && value[symIterator]) {
            return iteratorToArray(value[symIterator]());
          }
          var tag = getTag2(value),
            func = tag == mapTag2 ? mapToArray : tag == setTag2 ? setToArray : values;
          return func(value);
        }
        function toFinite(value) {
          if (!value) {
            return value === 0 ? value : 0;
          }
          value = toNumber2(value);
          if (value === INFINITY2 || value === -INFINITY2) {
            var sign = value < 0 ? -1 : 1;
            return sign * MAX_INTEGER;
          }
          return value === value ? value : 0;
        }
        function toInteger(value) {
          var result3 = toFinite(value),
            remainder = result3 % 1;
          return result3 === result3 ? remainder ? result3 - remainder : result3 : 0;
        }
        function toLength(value) {
          return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;
        }
        function toNumber2(value) {
          if (typeof value == "number") {
            return value;
          }
          if (isSymbol2(value)) {
            return NAN2;
          }
          if (isObject2(value)) {
            var other = typeof value.valueOf == "function" ? value.valueOf() : value;
            value = isObject2(other) ? other + "" : other;
          }
          if (typeof value != "string") {
            return value === 0 ? value : +value;
          }
          value = baseTrim2(value);
          var isBinary = reIsBinary2.test(value);
          return isBinary || reIsOctal2.test(value) ? freeParseInt2(value.slice(2), isBinary ? 2 : 8) : reIsBadHex2.test(value) ? NAN2 : +value;
        }
        function toPlainObject2(value) {
          return copyObject2(value, keysIn2(value));
        }
        function toSafeInteger(value) {
          return value ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER2, MAX_SAFE_INTEGER2) : value === 0 ? value : 0;
        }
        function toString2(value) {
          return value == null ? "" : baseToString2(value);
        }
        var assign2 = createAssigner2(function (object, source) {
          if (isPrototype2(source) || isArrayLike2(source)) {
            copyObject2(source, keys2(source), object);
            return;
          }
          for (var key in source) {
            if (hasOwnProperty2.call(source, key)) {
              assignValue2(object, key, source[key]);
            }
          }
        });
        var assignIn = createAssigner2(function (object, source) {
          copyObject2(source, keysIn2(source), object);
        });
        var assignInWith = createAssigner2(function (object, source, srcIndex, customizer) {
          copyObject2(source, keysIn2(source), object, customizer);
        });
        var assignWith = createAssigner2(function (object, source, srcIndex, customizer) {
          copyObject2(source, keys2(source), object, customizer);
        });
        var at2 = flatRest2(baseAt);
        function create(prototype, properties) {
          var result3 = baseCreate2(prototype);
          return properties == null ? result3 : baseAssign2(result3, properties);
        }
        var defaults2 = baseRest2(function (object, sources) {
          object = Object2(object);
          var index2 = -1;
          var length = sources.length;
          var guard = length > 2 ? sources[2] : undefined$12;
          if (guard && isIterateeCall2(sources[0], sources[1], guard)) {
            length = 1;
          }
          while (++index2 < length) {
            var source = sources[index2];
            var props = keysIn2(source);
            var propsIndex = -1;
            var propsLength = props.length;
            while (++propsIndex < propsLength) {
              var key = props[propsIndex];
              var value = object[key];
              if (value === undefined$12 || eq2(value, objectProto2[key]) && !hasOwnProperty2.call(object, key)) {
                object[key] = source[key];
              }
            }
          }
          return object;
        });
        var defaultsDeep = baseRest2(function (args) {
          args.push(undefined$12, customDefaultsMerge);
          return apply2(mergeWith, undefined$12, args);
        });
        function findKey(object, predicate) {
          return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);
        }
        function findLastKey(object, predicate) {
          return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);
        }
        function forIn(object, iteratee2) {
          return object == null ? object : baseFor2(object, getIteratee(iteratee2, 3), keysIn2);
        }
        function forInRight(object, iteratee2) {
          return object == null ? object : baseForRight(object, getIteratee(iteratee2, 3), keysIn2);
        }
        function forOwn(object, iteratee2) {
          return object && baseForOwn(object, getIteratee(iteratee2, 3));
        }
        function forOwnRight(object, iteratee2) {
          return object && baseForOwnRight(object, getIteratee(iteratee2, 3));
        }
        function functions(object) {
          return object == null ? [] : baseFunctions(object, keys2(object));
        }
        function functionsIn(object) {
          return object == null ? [] : baseFunctions(object, keysIn2(object));
        }
        function get2(object, path, defaultValue) {
          var result3 = object == null ? undefined$12 : baseGet2(object, path);
          return result3 === undefined$12 ? defaultValue : result3;
        }
        function has2(object, path) {
          return object != null && hasPath2(object, path, baseHas);
        }
        function hasIn2(object, path) {
          return object != null && hasPath2(object, path, baseHasIn2);
        }
        var invert = createInverter(function (result3, value, key) {
          if (value != null && typeof value.toString != "function") {
            value = nativeObjectToString2.call(value);
          }
          result3[value] = key;
        }, constant2(identity2));
        var invertBy = createInverter(function (result3, value, key) {
          if (value != null && typeof value.toString != "function") {
            value = nativeObjectToString2.call(value);
          }
          if (hasOwnProperty2.call(result3, value)) {
            result3[value].push(key);
          } else {
            result3[value] = [key];
          }
        }, getIteratee);
        var invoke = baseRest2(baseInvoke);
        function keys2(object) {
          return isArrayLike2(object) ? arrayLikeKeys2(object) : baseKeys2(object);
        }
        function keysIn2(object) {
          return isArrayLike2(object) ? arrayLikeKeys2(object, true) : baseKeysIn2(object);
        }
        function mapKeys(object, iteratee2) {
          var result3 = {};
          iteratee2 = getIteratee(iteratee2, 3);
          baseForOwn(object, function (value, key, object2) {
            baseAssignValue2(result3, iteratee2(value, key, object2), value);
          });
          return result3;
        }
        function mapValues(object, iteratee2) {
          var result3 = {};
          iteratee2 = getIteratee(iteratee2, 3);
          baseForOwn(object, function (value, key, object2) {
            baseAssignValue2(result3, key, iteratee2(value, key, object2));
          });
          return result3;
        }
        var merge2 = createAssigner2(function (object, source, srcIndex) {
          baseMerge2(object, source, srcIndex);
        });
        var mergeWith = createAssigner2(function (object, source, srcIndex, customizer) {
          baseMerge2(object, source, srcIndex, customizer);
        });
        var omit = flatRest2(function (object, paths) {
          var result3 = {};
          if (object == null) {
            return result3;
          }
          var isDeep = false;
          paths = arrayMap2(paths, function (path) {
            path = castPath2(path, object);
            isDeep || (isDeep = path.length > 1);
            return path;
          });
          copyObject2(object, getAllKeysIn2(object), result3);
          if (isDeep) {
            result3 = baseClone2(result3, CLONE_DEEP_FLAG2 | CLONE_FLAT_FLAG2 | CLONE_SYMBOLS_FLAG2, customOmitClone2);
          }
          var length = paths.length;
          while (length--) {
            baseUnset2(result3, paths[length]);
          }
          return result3;
        });
        function omitBy(object, predicate) {
          return pickBy(object, negate(getIteratee(predicate)));
        }
        var pick2 = flatRest2(function (object, paths) {
          return object == null ? {} : basePick2(object, paths);
        });
        function pickBy(object, predicate) {
          if (object == null) {
            return {};
          }
          var props = arrayMap2(getAllKeysIn2(object), function (prop) {
            return [prop];
          });
          predicate = getIteratee(predicate);
          return basePickBy2(object, props, function (value, path) {
            return predicate(value, path[0]);
          });
        }
        function result2(object, path, defaultValue) {
          path = castPath2(path, object);
          var index2 = -1,
            length = path.length;
          if (!length) {
            length = 1;
            object = undefined$12;
          }
          while (++index2 < length) {
            var value = object == null ? undefined$12 : object[toKey2(path[index2])];
            if (value === undefined$12) {
              index2 = length;
              value = defaultValue;
            }
            object = isFunction2(value) ? value.call(object) : value;
          }
          return object;
        }
        function set(object, path, value) {
          return object == null ? object : baseSet2(object, path, value);
        }
        function setWith(object, path, value, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$12;
          return object == null ? object : baseSet2(object, path, value, customizer);
        }
        var toPairs = createToPairs(keys2);
        var toPairsIn = createToPairs(keysIn2);
        function transform(object, iteratee2, accumulator) {
          var isArr = isArray2(object),
            isArrLike = isArr || isBuffer2(object) || isTypedArray2(object);
          iteratee2 = getIteratee(iteratee2, 4);
          if (accumulator == null) {
            var Ctor = object && object.constructor;
            if (isArrLike) {
              accumulator = isArr ? new Ctor() : [];
            } else if (isObject2(object)) {
              accumulator = isFunction2(Ctor) ? baseCreate2(getPrototype2(object)) : {};
            } else {
              accumulator = {};
            }
          }
          (isArrLike ? arrayEach2 : baseForOwn)(object, function (value, index2, object2) {
            return iteratee2(accumulator, value, index2, object2);
          });
          return accumulator;
        }
        function unset(object, path) {
          return object == null ? true : baseUnset2(object, path);
        }
        function update(object, path, updater) {
          return object == null ? object : baseUpdate(object, path, castFunction(updater));
        }
        function updateWith(object, path, updater, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$12;
          return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);
        }
        function values(object) {
          return object == null ? [] : baseValues(object, keys2(object));
        }
        function valuesIn(object) {
          return object == null ? [] : baseValues(object, keysIn2(object));
        }
        function clamp(number, lower, upper) {
          if (upper === undefined$12) {
            upper = lower;
            lower = undefined$12;
          }
          if (upper !== undefined$12) {
            upper = toNumber2(upper);
            upper = upper === upper ? upper : 0;
          }
          if (lower !== undefined$12) {
            lower = toNumber2(lower);
            lower = lower === lower ? lower : 0;
          }
          return baseClamp(toNumber2(number), lower, upper);
        }
        function inRange(number, start, end) {
          start = toFinite(start);
          if (end === undefined$12) {
            end = start;
            start = 0;
          } else {
            end = toFinite(end);
          }
          number = toNumber2(number);
          return baseInRange(number, start, end);
        }
        function random(lower, upper, floating) {
          if (floating && typeof floating != "boolean" && isIterateeCall2(lower, upper, floating)) {
            upper = floating = undefined$12;
          }
          if (floating === undefined$12) {
            if (typeof upper == "boolean") {
              floating = upper;
              upper = undefined$12;
            } else if (typeof lower == "boolean") {
              floating = lower;
              lower = undefined$12;
            }
          }
          if (lower === undefined$12 && upper === undefined$12) {
            lower = 0;
            upper = 1;
          } else {
            lower = toFinite(lower);
            if (upper === undefined$12) {
              upper = lower;
              lower = 0;
            } else {
              upper = toFinite(upper);
            }
          }
          if (lower > upper) {
            var temp = lower;
            lower = upper;
            upper = temp;
          }
          if (floating || lower % 1 || upper % 1) {
            var rand = nativeRandom();
            return nativeMin2(lower + rand * (upper - lower + freeParseFloat("1e-" + ((rand + "").length - 1))), upper);
          }
          return baseRandom(lower, upper);
        }
        var camelCase = createCompounder(function (result3, word, index2) {
          word = word.toLowerCase();
          return result3 + (index2 ? capitalize(word) : word);
        });
        function capitalize(string) {
          return upperFirst(toString2(string).toLowerCase());
        }
        function deburr(string) {
          string = toString2(string);
          return string && string.replace(reLatin, deburrLetter).replace(reComboMark, "");
        }
        function endsWith(string, target, position) {
          string = toString2(string);
          target = baseToString2(target);
          var length = string.length;
          position = position === undefined$12 ? length : baseClamp(toInteger(position), 0, length);
          var end = position;
          position -= target.length;
          return position >= 0 && string.slice(position, end) == target;
        }
        function escape2(string) {
          string = toString2(string);
          return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;
        }
        function escapeRegExp(string) {
          string = toString2(string);
          return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar2, "\\$&") : string;
        }
        var kebabCase = createCompounder(function (result3, word, index2) {
          return result3 + (index2 ? "-" : "") + word.toLowerCase();
        });
        var lowerCase = createCompounder(function (result3, word, index2) {
          return result3 + (index2 ? " " : "") + word.toLowerCase();
        });
        var lowerFirst = createCaseFirst("toLowerCase");
        function pad(string, length, chars) {
          string = toString2(string);
          length = toInteger(length);
          var strLength = length ? stringSize(string) : 0;
          if (!length || strLength >= length) {
            return string;
          }
          var mid = (length - strLength) / 2;
          return createPadding(nativeFloor(mid), chars) + string + createPadding(nativeCeil(mid), chars);
        }
        function padEnd(string, length, chars) {
          string = toString2(string);
          length = toInteger(length);
          var strLength = length ? stringSize(string) : 0;
          return length && strLength < length ? string + createPadding(length - strLength, chars) : string;
        }
        function padStart(string, length, chars) {
          string = toString2(string);
          length = toInteger(length);
          var strLength = length ? stringSize(string) : 0;
          return length && strLength < length ? createPadding(length - strLength, chars) + string : string;
        }
        function parseInt2(string, radix, guard) {
          if (guard || radix == null) {
            radix = 0;
          } else if (radix) {
            radix = +radix;
          }
          return nativeParseInt(toString2(string).replace(reTrimStart2, ""), radix || 0);
        }
        function repeat(string, n2, guard) {
          if (guard ? isIterateeCall2(string, n2, guard) : n2 === undefined$12) {
            n2 = 1;
          } else {
            n2 = toInteger(n2);
          }
          return baseRepeat(toString2(string), n2);
        }
        function replace2() {
          var args = arguments,
            string = toString2(args[0]);
          return args.length < 3 ? string : string.replace(args[1], args[2]);
        }
        var snakeCase = createCompounder(function (result3, word, index2) {
          return result3 + (index2 ? "_" : "") + word.toLowerCase();
        });
        function split2(string, separator, limit2) {
          if (limit2 && typeof limit2 != "number" && isIterateeCall2(string, separator, limit2)) {
            separator = limit2 = undefined$12;
          }
          limit2 = limit2 === undefined$12 ? MAX_ARRAY_LENGTH : limit2 >>> 0;
          if (!limit2) {
            return [];
          }
          string = toString2(string);
          if (string && (typeof separator == "string" || separator != null && !isRegExp2(separator))) {
            separator = baseToString2(separator);
            if (!separator && hasUnicode(string)) {
              return castSlice(stringToArray(string), 0, limit2);
            }
          }
          return string.split(separator, limit2);
        }
        var startCase = createCompounder(function (result3, word, index2) {
          return result3 + (index2 ? " " : "") + upperFirst(word);
        });
        function startsWith(string, target, position) {
          string = toString2(string);
          position = position == null ? 0 : baseClamp(toInteger(position), 0, string.length);
          target = baseToString2(target);
          return string.slice(position, position + target.length) == target;
        }
        function template(string, options, guard) {
          var settings = lodash2.templateSettings;
          if (guard && isIterateeCall2(string, options, guard)) {
            options = undefined$12;
          }
          string = toString2(string);
          options = assignInWith({}, options, settings, customDefaultsAssignIn);
          var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),
            importsKeys = keys2(imports),
            importsValues = baseValues(imports, importsKeys);
          var isEscaping,
            isEvaluating,
            index2 = 0,
            interpolate = options.interpolate || reNoMatch,
            source = "__p += '";
          var reDelimiters = RegExp2((options.escape || reNoMatch).source + "|" + interpolate.source + "|" + (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + "|" + (options.evaluate || reNoMatch).source + "|$", "g");
          var sourceURL = "//# sourceURL=" + (hasOwnProperty2.call(options, "sourceURL") ? (options.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++templateCounter + "]") + "\n";
          string.replace(reDelimiters, function (match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
            interpolateValue || (interpolateValue = esTemplateValue);
            source += string.slice(index2, offset).replace(reUnescapedString, escapeStringChar);
            if (escapeValue) {
              isEscaping = true;
              source += "' +\n__e(" + escapeValue + ") +\n'";
            }
            if (evaluateValue) {
              isEvaluating = true;
              source += "';\n" + evaluateValue + ";\n__p += '";
            }
            if (interpolateValue) {
              source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
            }
            index2 = offset + match.length;
            return match;
          });
          source += "';\n";
          var variable = hasOwnProperty2.call(options, "variable") && options.variable;
          if (!variable) {
            source = "with (obj) {\n" + source + "\n}\n";
          } else if (reForbiddenIdentifierChars.test(variable)) {
            throw new Error2(INVALID_TEMPL_VAR_ERROR_TEXT);
          }
          source = (isEvaluating ? source.replace(reEmptyStringLeading, "") : source).replace(reEmptyStringMiddle, "$1").replace(reEmptyStringTrailing, "$1;");
          source = "function(" + (variable || "obj") + ") {\n" + (variable ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (isEscaping ? ", __e = _.escape" : "") + (isEvaluating ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + source + "return __p\n}";
          var result3 = attempt(function () {
            return Function2(importsKeys, sourceURL + "return " + source).apply(undefined$12, importsValues);
          });
          result3.source = source;
          if (isError2(result3)) {
            throw result3;
          }
          return result3;
        }
        function toLower(value) {
          return toString2(value).toLowerCase();
        }
        function toUpper(value) {
          return toString2(value).toUpperCase();
        }
        function trim(string, chars, guard) {
          string = toString2(string);
          if (string && (guard || chars === undefined$12)) {
            return baseTrim2(string);
          }
          if (!string || !(chars = baseToString2(chars))) {
            return string;
          }
          var strSymbols = stringToArray(string),
            chrSymbols = stringToArray(chars),
            start = charsStartIndex(strSymbols, chrSymbols),
            end = charsEndIndex(strSymbols, chrSymbols) + 1;
          return castSlice(strSymbols, start, end).join("");
        }
        function trimEnd(string, chars, guard) {
          string = toString2(string);
          if (string && (guard || chars === undefined$12)) {
            return string.slice(0, trimmedEndIndex2(string) + 1);
          }
          if (!string || !(chars = baseToString2(chars))) {
            return string;
          }
          var strSymbols = stringToArray(string),
            end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;
          return castSlice(strSymbols, 0, end).join("");
        }
        function trimStart(string, chars, guard) {
          string = toString2(string);
          if (string && (guard || chars === undefined$12)) {
            return string.replace(reTrimStart2, "");
          }
          if (!string || !(chars = baseToString2(chars))) {
            return string;
          }
          var strSymbols = stringToArray(string),
            start = charsStartIndex(strSymbols, stringToArray(chars));
          return castSlice(strSymbols, start).join("");
        }
        function truncate(string, options) {
          var length = DEFAULT_TRUNC_LENGTH,
            omission = DEFAULT_TRUNC_OMISSION;
          if (isObject2(options)) {
            var separator = "separator" in options ? options.separator : separator;
            length = "length" in options ? toInteger(options.length) : length;
            omission = "omission" in options ? baseToString2(options.omission) : omission;
          }
          string = toString2(string);
          var strLength = string.length;
          if (hasUnicode(string)) {
            var strSymbols = stringToArray(string);
            strLength = strSymbols.length;
          }
          if (length >= strLength) {
            return string;
          }
          var end = length - stringSize(omission);
          if (end < 1) {
            return omission;
          }
          var result3 = strSymbols ? castSlice(strSymbols, 0, end).join("") : string.slice(0, end);
          if (separator === undefined$12) {
            return result3 + omission;
          }
          if (strSymbols) {
            end += result3.length - end;
          }
          if (isRegExp2(separator)) {
            if (string.slice(end).search(separator)) {
              var match,
                substring = result3;
              if (!separator.global) {
                separator = RegExp2(separator.source, toString2(reFlags2.exec(separator)) + "g");
              }
              separator.lastIndex = 0;
              while (match = separator.exec(substring)) {
                var newEnd = match.index;
              }
              result3 = result3.slice(0, newEnd === undefined$12 ? end : newEnd);
            }
          } else if (string.indexOf(baseToString2(separator), end) != end) {
            var index2 = result3.lastIndexOf(separator);
            if (index2 > -1) {
              result3 = result3.slice(0, index2);
            }
          }
          return result3 + omission;
        }
        function unescape2(string) {
          string = toString2(string);
          return string && reHasEscapedHtml.test(string) ? string.replace(reEscapedHtml, unescapeHtmlChar) : string;
        }
        var upperCase = createCompounder(function (result3, word, index2) {
          return result3 + (index2 ? " " : "") + word.toUpperCase();
        });
        var upperFirst = createCaseFirst("toUpperCase");
        function words(string, pattern, guard) {
          string = toString2(string);
          pattern = guard ? undefined$12 : pattern;
          if (pattern === undefined$12) {
            return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);
          }
          return string.match(pattern) || [];
        }
        var attempt = baseRest2(function (func, args) {
          try {
            return apply2(func, undefined$12, args);
          } catch (e2) {
            return isError2(e2) ? e2 : new Error2(e2);
          }
        });
        var bindAll = flatRest2(function (object, methodNames) {
          arrayEach2(methodNames, function (key) {
            key = toKey2(key);
            baseAssignValue2(object, key, bind2(object[key], object));
          });
          return object;
        });
        function cond(pairs) {
          var length = pairs == null ? 0 : pairs.length,
            toIteratee = getIteratee();
          pairs = !length ? [] : arrayMap2(pairs, function (pair) {
            if (typeof pair[1] != "function") {
              throw new TypeError2(FUNC_ERROR_TEXT2);
            }
            return [toIteratee(pair[0]), pair[1]];
          });
          return baseRest2(function (args) {
            var index2 = -1;
            while (++index2 < length) {
              var pair = pairs[index2];
              if (apply2(pair[0], this, args)) {
                return apply2(pair[1], this, args);
              }
            }
          });
        }
        function conforms(source) {
          return baseConforms(baseClone2(source, CLONE_DEEP_FLAG2));
        }
        function constant2(value) {
          return function () {
            return value;
          };
        }
        function defaultTo(value, defaultValue) {
          return value == null || value !== value ? defaultValue : value;
        }
        var flow = createFlow();
        var flowRight = createFlow(true);
        function identity2(value) {
          return value;
        }
        function iteratee(func) {
          return baseIteratee(typeof func == "function" ? func : baseClone2(func, CLONE_DEEP_FLAG2));
        }
        function matches(source) {
          return baseMatches(baseClone2(source, CLONE_DEEP_FLAG2));
        }
        function matchesProperty(path, srcValue) {
          return baseMatchesProperty(path, baseClone2(srcValue, CLONE_DEEP_FLAG2));
        }
        var method = baseRest2(function (path, args) {
          return function (object) {
            return baseInvoke(object, path, args);
          };
        });
        var methodOf = baseRest2(function (object, args) {
          return function (path) {
            return baseInvoke(object, path, args);
          };
        });
        function mixin2(object, source, options) {
          var props = keys2(source),
            methodNames = baseFunctions(source, props);
          if (options == null && !(isObject2(source) && (methodNames.length || !props.length))) {
            options = source;
            source = object;
            object = this;
            methodNames = baseFunctions(source, keys2(source));
          }
          var chain2 = !(isObject2(options) && "chain" in options) || !!options.chain,
            isFunc = isFunction2(object);
          arrayEach2(methodNames, function (methodName) {
            var func = source[methodName];
            object[methodName] = func;
            if (isFunc) {
              object.prototype[methodName] = function () {
                var chainAll = this.__chain__;
                if (chain2 || chainAll) {
                  var result3 = object(this.__wrapped__),
                    actions = result3.__actions__ = copyArray2(this.__actions__);
                  actions.push({
                    "func": func,
                    "args": arguments,
                    "thisArg": object
                  });
                  result3.__chain__ = chainAll;
                  return result3;
                }
                return func.apply(object, arrayPush2([this.value()], arguments));
              };
            }
          });
          return object;
        }
        function noConflict() {
          if (root2._ === this) {
            root2._ = oldDash;
          }
          return this;
        }
        function noop() {}
        function nthArg(n2) {
          n2 = toInteger(n2);
          return baseRest2(function (args) {
            return baseNth(args, n2);
          });
        }
        var over = createOver(arrayMap2);
        var overEvery = createOver(arrayEvery);
        var overSome = createOver(arraySome);
        function property(path) {
          return isKey2(path) ? baseProperty(toKey2(path)) : basePropertyDeep(path);
        }
        function propertyOf(object) {
          return function (path) {
            return object == null ? undefined$12 : baseGet2(object, path);
          };
        }
        var range2 = createRange();
        var rangeRight = createRange(true);
        function stubArray2() {
          return [];
        }
        function stubFalse2() {
          return false;
        }
        function stubObject() {
          return {};
        }
        function stubString() {
          return "";
        }
        function stubTrue() {
          return true;
        }
        function times(n2, iteratee2) {
          n2 = toInteger(n2);
          if (n2 < 1 || n2 > MAX_SAFE_INTEGER2) {
            return [];
          }
          var index2 = MAX_ARRAY_LENGTH,
            length = nativeMin2(n2, MAX_ARRAY_LENGTH);
          iteratee2 = getIteratee(iteratee2);
          n2 -= MAX_ARRAY_LENGTH;
          var result3 = baseTimes2(length, iteratee2);
          while (++index2 < n2) {
            iteratee2(index2);
          }
          return result3;
        }
        function toPath(value) {
          if (isArray2(value)) {
            return arrayMap2(value, toKey2);
          }
          return isSymbol2(value) ? [value] : copyArray2(stringToPath2(toString2(value)));
        }
        function uniqueId(prefix) {
          var id = ++idCounter;
          return toString2(prefix) + id;
        }
        var add = createMathOperation(function (augend, addend) {
          return augend + addend;
        }, 0);
        var ceil = createRound("ceil");
        var divide = createMathOperation(function (dividend, divisor) {
          return dividend / divisor;
        }, 1);
        var floor = createRound("floor");
        function max2(array) {
          return array && array.length ? baseExtremum(array, identity2, baseGt) : undefined$12;
        }
        function maxBy(array, iteratee2) {
          return array && array.length ? baseExtremum(array, getIteratee(iteratee2, 2), baseGt) : undefined$12;
        }
        function mean(array) {
          return baseMean(array, identity2);
        }
        function meanBy(array, iteratee2) {
          return baseMean(array, getIteratee(iteratee2, 2));
        }
        function min(array) {
          return array && array.length ? baseExtremum(array, identity2, baseLt) : undefined$12;
        }
        function minBy(array, iteratee2) {
          return array && array.length ? baseExtremum(array, getIteratee(iteratee2, 2), baseLt) : undefined$12;
        }
        var multiply = createMathOperation(function (multiplier, multiplicand) {
          return multiplier * multiplicand;
        }, 1);
        var round = createRound("round");
        var subtract = createMathOperation(function (minuend, subtrahend) {
          return minuend - subtrahend;
        }, 0);
        function sum(array) {
          return array && array.length ? baseSum(array, identity2) : 0;
        }
        function sumBy(array, iteratee2) {
          return array && array.length ? baseSum(array, getIteratee(iteratee2, 2)) : 0;
        }
        lodash2.after = after;
        lodash2.ary = ary;
        lodash2.assign = assign2;
        lodash2.assignIn = assignIn;
        lodash2.assignInWith = assignInWith;
        lodash2.assignWith = assignWith;
        lodash2.at = at2;
        lodash2.before = before;
        lodash2.bind = bind2;
        lodash2.bindAll = bindAll;
        lodash2.bindKey = bindKey;
        lodash2.castArray = castArray;
        lodash2.chain = chain;
        lodash2.chunk = chunk;
        lodash2.compact = compact2;
        lodash2.concat = concat;
        lodash2.cond = cond;
        lodash2.conforms = conforms;
        lodash2.constant = constant2;
        lodash2.countBy = countBy;
        lodash2.create = create;
        lodash2.curry = curry;
        lodash2.curryRight = curryRight;
        lodash2.debounce = debounce2;
        lodash2.defaults = defaults2;
        lodash2.defaultsDeep = defaultsDeep;
        lodash2.defer = defer;
        lodash2.delay = delay;
        lodash2.difference = difference;
        lodash2.differenceBy = differenceBy;
        lodash2.differenceWith = differenceWith;
        lodash2.drop = drop;
        lodash2.dropRight = dropRight;
        lodash2.dropRightWhile = dropRightWhile;
        lodash2.dropWhile = dropWhile;
        lodash2.fill = fill;
        lodash2.filter = filter;
        lodash2.flatMap = flatMap;
        lodash2.flatMapDeep = flatMapDeep;
        lodash2.flatMapDepth = flatMapDepth;
        lodash2.flatten = flatten2;
        lodash2.flattenDeep = flattenDeep;
        lodash2.flattenDepth = flattenDepth;
        lodash2.flip = flip;
        lodash2.flow = flow;
        lodash2.flowRight = flowRight;
        lodash2.fromPairs = fromPairs;
        lodash2.functions = functions;
        lodash2.functionsIn = functionsIn;
        lodash2.groupBy = groupBy;
        lodash2.initial = initial;
        lodash2.intersection = intersection;
        lodash2.intersectionBy = intersectionBy;
        lodash2.intersectionWith = intersectionWith;
        lodash2.invert = invert;
        lodash2.invertBy = invertBy;
        lodash2.invokeMap = invokeMap;
        lodash2.iteratee = iteratee;
        lodash2.keyBy = keyBy;
        lodash2.keys = keys2;
        lodash2.keysIn = keysIn2;
        lodash2.map = map;
        lodash2.mapKeys = mapKeys;
        lodash2.mapValues = mapValues;
        lodash2.matches = matches;
        lodash2.matchesProperty = matchesProperty;
        lodash2.memoize = memoize2;
        lodash2.merge = merge2;
        lodash2.mergeWith = mergeWith;
        lodash2.method = method;
        lodash2.methodOf = methodOf;
        lodash2.mixin = mixin2;
        lodash2.negate = negate;
        lodash2.nthArg = nthArg;
        lodash2.omit = omit;
        lodash2.omitBy = omitBy;
        lodash2.once = once;
        lodash2.orderBy = orderBy;
        lodash2.over = over;
        lodash2.overArgs = overArgs;
        lodash2.overEvery = overEvery;
        lodash2.overSome = overSome;
        lodash2.partial = partial;
        lodash2.partialRight = partialRight;
        lodash2.partition = partition;
        lodash2.pick = pick2;
        lodash2.pickBy = pickBy;
        lodash2.property = property;
        lodash2.propertyOf = propertyOf;
        lodash2.pull = pull;
        lodash2.pullAll = pullAll;
        lodash2.pullAllBy = pullAllBy;
        lodash2.pullAllWith = pullAllWith;
        lodash2.pullAt = pullAt;
        lodash2.range = range2;
        lodash2.rangeRight = rangeRight;
        lodash2.rearg = rearg;
        lodash2.reject = reject;
        lodash2.remove = remove;
        lodash2.rest = rest;
        lodash2.reverse = reverse;
        lodash2.sampleSize = sampleSize;
        lodash2.set = set;
        lodash2.setWith = setWith;
        lodash2.shuffle = shuffle;
        lodash2.slice = slice;
        lodash2.sortBy = sortBy;
        lodash2.sortedUniq = sortedUniq;
        lodash2.sortedUniqBy = sortedUniqBy;
        lodash2.split = split2;
        lodash2.spread = spread;
        lodash2.tail = tail;
        lodash2.take = take;
        lodash2.takeRight = takeRight;
        lodash2.takeRightWhile = takeRightWhile;
        lodash2.takeWhile = takeWhile;
        lodash2.tap = tap;
        lodash2.throttle = throttle2;
        lodash2.thru = thru;
        lodash2.toArray = toArray;
        lodash2.toPairs = toPairs;
        lodash2.toPairsIn = toPairsIn;
        lodash2.toPath = toPath;
        lodash2.toPlainObject = toPlainObject2;
        lodash2.transform = transform;
        lodash2.unary = unary;
        lodash2.union = union;
        lodash2.unionBy = unionBy;
        lodash2.unionWith = unionWith;
        lodash2.uniq = uniq;
        lodash2.uniqBy = uniqBy;
        lodash2.uniqWith = uniqWith;
        lodash2.unset = unset;
        lodash2.unzip = unzip;
        lodash2.unzipWith = unzipWith;
        lodash2.update = update;
        lodash2.updateWith = updateWith;
        lodash2.values = values;
        lodash2.valuesIn = valuesIn;
        lodash2.without = without;
        lodash2.words = words;
        lodash2.wrap = wrap;
        lodash2.xor = xor;
        lodash2.xorBy = xorBy;
        lodash2.xorWith = xorWith;
        lodash2.zip = zip;
        lodash2.zipObject = zipObject;
        lodash2.zipObjectDeep = zipObjectDeep;
        lodash2.zipWith = zipWith;
        lodash2.entries = toPairs;
        lodash2.entriesIn = toPairsIn;
        lodash2.extend = assignIn;
        lodash2.extendWith = assignInWith;
        mixin2(lodash2, lodash2);
        lodash2.add = add;
        lodash2.attempt = attempt;
        lodash2.camelCase = camelCase;
        lodash2.capitalize = capitalize;
        lodash2.ceil = ceil;
        lodash2.clamp = clamp;
        lodash2.clone = clone;
        lodash2.cloneDeep = cloneDeep;
        lodash2.cloneDeepWith = cloneDeepWith;
        lodash2.cloneWith = cloneWith;
        lodash2.conformsTo = conformsTo;
        lodash2.deburr = deburr;
        lodash2.defaultTo = defaultTo;
        lodash2.divide = divide;
        lodash2.endsWith = endsWith;
        lodash2.eq = eq2;
        lodash2.escape = escape2;
        lodash2.escapeRegExp = escapeRegExp;
        lodash2.every = every;
        lodash2.find = find;
        lodash2.findIndex = findIndex;
        lodash2.findKey = findKey;
        lodash2.findLast = findLast;
        lodash2.findLastIndex = findLastIndex;
        lodash2.findLastKey = findLastKey;
        lodash2.floor = floor;
        lodash2.forEach = forEach2;
        lodash2.forEachRight = forEachRight;
        lodash2.forIn = forIn;
        lodash2.forInRight = forInRight;
        lodash2.forOwn = forOwn;
        lodash2.forOwnRight = forOwnRight;
        lodash2.get = get2;
        lodash2.gt = gt2;
        lodash2.gte = gte;
        lodash2.has = has2;
        lodash2.hasIn = hasIn2;
        lodash2.head = head;
        lodash2.identity = identity2;
        lodash2.includes = includes;
        lodash2.indexOf = indexOf2;
        lodash2.inRange = inRange;
        lodash2.invoke = invoke;
        lodash2.isArguments = isArguments2;
        lodash2.isArray = isArray2;
        lodash2.isArrayBuffer = isArrayBuffer;
        lodash2.isArrayLike = isArrayLike2;
        lodash2.isArrayLikeObject = isArrayLikeObject2;
        lodash2.isBoolean = isBoolean2;
        lodash2.isBuffer = isBuffer2;
        lodash2.isDate = isDate2;
        lodash2.isElement = isElement2;
        lodash2.isEmpty = isEmpty;
        lodash2.isEqual = isEqual;
        lodash2.isEqualWith = isEqualWith;
        lodash2.isError = isError2;
        lodash2.isFinite = isFinite2;
        lodash2.isFunction = isFunction2;
        lodash2.isInteger = isInteger;
        lodash2.isLength = isLength2;
        lodash2.isMap = isMap2;
        lodash2.isMatch = isMatch;
        lodash2.isMatchWith = isMatchWith;
        lodash2.isNaN = isNaN2;
        lodash2.isNative = isNative;
        lodash2.isNil = isNil;
        lodash2.isNull = isNull;
        lodash2.isNumber = isNumber2;
        lodash2.isObject = isObject2;
        lodash2.isObjectLike = isObjectLike2;
        lodash2.isPlainObject = isPlainObject2;
        lodash2.isRegExp = isRegExp2;
        lodash2.isSafeInteger = isSafeInteger;
        lodash2.isSet = isSet2;
        lodash2.isString = isString2;
        lodash2.isSymbol = isSymbol2;
        lodash2.isTypedArray = isTypedArray2;
        lodash2.isUndefined = isUndefined;
        lodash2.isWeakMap = isWeakMap2;
        lodash2.isWeakSet = isWeakSet2;
        lodash2.join = join;
        lodash2.kebabCase = kebabCase;
        lodash2.last = last2;
        lodash2.lastIndexOf = lastIndexOf;
        lodash2.lowerCase = lowerCase;
        lodash2.lowerFirst = lowerFirst;
        lodash2.lt = lt2;
        lodash2.lte = lte;
        lodash2.max = max2;
        lodash2.maxBy = maxBy;
        lodash2.mean = mean;
        lodash2.meanBy = meanBy;
        lodash2.min = min;
        lodash2.minBy = minBy;
        lodash2.stubArray = stubArray2;
        lodash2.stubFalse = stubFalse2;
        lodash2.stubObject = stubObject;
        lodash2.stubString = stubString;
        lodash2.stubTrue = stubTrue;
        lodash2.multiply = multiply;
        lodash2.nth = nth;
        lodash2.noConflict = noConflict;
        lodash2.noop = noop;
        lodash2.now = now2;
        lodash2.pad = pad;
        lodash2.padEnd = padEnd;
        lodash2.padStart = padStart;
        lodash2.parseInt = parseInt2;
        lodash2.random = random;
        lodash2.reduce = reduce;
        lodash2.reduceRight = reduceRight;
        lodash2.repeat = repeat;
        lodash2.replace = replace2;
        lodash2.result = result2;
        lodash2.round = round;
        lodash2.runInContext = runInContext2;
        lodash2.sample = sample;
        lodash2.size = size;
        lodash2.snakeCase = snakeCase;
        lodash2.some = some;
        lodash2.sortedIndex = sortedIndex;
        lodash2.sortedIndexBy = sortedIndexBy;
        lodash2.sortedIndexOf = sortedIndexOf;
        lodash2.sortedLastIndex = sortedLastIndex;
        lodash2.sortedLastIndexBy = sortedLastIndexBy;
        lodash2.sortedLastIndexOf = sortedLastIndexOf;
        lodash2.startCase = startCase;
        lodash2.startsWith = startsWith;
        lodash2.subtract = subtract;
        lodash2.sum = sum;
        lodash2.sumBy = sumBy;
        lodash2.template = template;
        lodash2.times = times;
        lodash2.toFinite = toFinite;
        lodash2.toInteger = toInteger;
        lodash2.toLength = toLength;
        lodash2.toLower = toLower;
        lodash2.toNumber = toNumber2;
        lodash2.toSafeInteger = toSafeInteger;
        lodash2.toString = toString2;
        lodash2.toUpper = toUpper;
        lodash2.trim = trim;
        lodash2.trimEnd = trimEnd;
        lodash2.trimStart = trimStart;
        lodash2.truncate = truncate;
        lodash2.unescape = unescape2;
        lodash2.uniqueId = uniqueId;
        lodash2.upperCase = upperCase;
        lodash2.upperFirst = upperFirst;
        lodash2.each = forEach2;
        lodash2.eachRight = forEachRight;
        lodash2.first = head;
        mixin2(lodash2, function () {
          var source = {};
          baseForOwn(lodash2, function (func, methodName) {
            if (!hasOwnProperty2.call(lodash2.prototype, methodName)) {
              source[methodName] = func;
            }
          });
          return source;
        }(), {
          "chain": false
        });
        lodash2.VERSION = VERSION;
        arrayEach2(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function (methodName) {
          lodash2[methodName].placeholder = lodash2;
        });
        arrayEach2(["drop", "take"], function (methodName, index2) {
          LazyWrapper.prototype[methodName] = function (n2) {
            n2 = n2 === undefined$12 ? 1 : nativeMax2(toInteger(n2), 0);
            var result3 = this.__filtered__ && !index2 ? new LazyWrapper(this) : this.clone();
            if (result3.__filtered__) {
              result3.__takeCount__ = nativeMin2(n2, result3.__takeCount__);
            } else {
              result3.__views__.push({
                "size": nativeMin2(n2, MAX_ARRAY_LENGTH),
                "type": methodName + (result3.__dir__ < 0 ? "Right" : "")
              });
            }
            return result3;
          };
          LazyWrapper.prototype[methodName + "Right"] = function (n2) {
            return this.reverse()[methodName](n2).reverse();
          };
        });
        arrayEach2(["filter", "map", "takeWhile"], function (methodName, index2) {
          var type2 = index2 + 1,
            isFilter = type2 == LAZY_FILTER_FLAG || type2 == LAZY_WHILE_FLAG;
          LazyWrapper.prototype[methodName] = function (iteratee2) {
            var result3 = this.clone();
            result3.__iteratees__.push({
              "iteratee": getIteratee(iteratee2, 3),
              "type": type2
            });
            result3.__filtered__ = result3.__filtered__ || isFilter;
            return result3;
          };
        });
        arrayEach2(["head", "last"], function (methodName, index2) {
          var takeName = "take" + (index2 ? "Right" : "");
          LazyWrapper.prototype[methodName] = function () {
            return this[takeName](1).value()[0];
          };
        });
        arrayEach2(["initial", "tail"], function (methodName, index2) {
          var dropName = "drop" + (index2 ? "" : "Right");
          LazyWrapper.prototype[methodName] = function () {
            return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
          };
        });
        LazyWrapper.prototype.compact = function () {
          return this.filter(identity2);
        };
        LazyWrapper.prototype.find = function (predicate) {
          return this.filter(predicate).head();
        };
        LazyWrapper.prototype.findLast = function (predicate) {
          return this.reverse().find(predicate);
        };
        LazyWrapper.prototype.invokeMap = baseRest2(function (path, args) {
          if (typeof path == "function") {
            return new LazyWrapper(this);
          }
          return this.map(function (value) {
            return baseInvoke(value, path, args);
          });
        });
        LazyWrapper.prototype.reject = function (predicate) {
          return this.filter(negate(getIteratee(predicate)));
        };
        LazyWrapper.prototype.slice = function (start, end) {
          start = toInteger(start);
          var result3 = this;
          if (result3.__filtered__ && (start > 0 || end < 0)) {
            return new LazyWrapper(result3);
          }
          if (start < 0) {
            result3 = result3.takeRight(-start);
          } else if (start) {
            result3 = result3.drop(start);
          }
          if (end !== undefined$12) {
            end = toInteger(end);
            result3 = end < 0 ? result3.dropRight(-end) : result3.take(end - start);
          }
          return result3;
        };
        LazyWrapper.prototype.takeRightWhile = function (predicate) {
          return this.reverse().takeWhile(predicate).reverse();
        };
        LazyWrapper.prototype.toArray = function () {
          return this.take(MAX_ARRAY_LENGTH);
        };
        baseForOwn(LazyWrapper.prototype, function (func, methodName) {
          var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),
            isTaker = /^(?:head|last)$/.test(methodName),
            lodashFunc = lodash2[isTaker ? "take" + (methodName == "last" ? "Right" : "") : methodName],
            retUnwrapped = isTaker || /^find/.test(methodName);
          if (!lodashFunc) {
            return;
          }
          lodash2.prototype[methodName] = function () {
            var value = this.__wrapped__,
              args = isTaker ? [1] : arguments,
              isLazy = value instanceof LazyWrapper,
              iteratee2 = args[0],
              useLazy = isLazy || isArray2(value);
            var interceptor = function interceptor(value2) {
              var result4 = lodashFunc.apply(lodash2, arrayPush2([value2], args));
              return isTaker && chainAll ? result4[0] : result4;
            };
            if (useLazy && checkIteratee && typeof iteratee2 == "function" && iteratee2.length != 1) {
              isLazy = useLazy = false;
            }
            var chainAll = this.__chain__,
              isHybrid = !!this.__actions__.length,
              isUnwrapped = retUnwrapped && !chainAll,
              onlyLazy = isLazy && !isHybrid;
            if (!retUnwrapped && useLazy) {
              value = onlyLazy ? value : new LazyWrapper(this);
              var result3 = func.apply(value, args);
              result3.__actions__.push({
                "func": thru,
                "args": [interceptor],
                "thisArg": undefined$12
              });
              return new LodashWrapper(result3, chainAll);
            }
            if (isUnwrapped && onlyLazy) {
              return func.apply(this, args);
            }
            result3 = this.thru(interceptor);
            return isUnwrapped ? isTaker ? result3.value()[0] : result3.value() : result3;
          };
        });
        arrayEach2(["pop", "push", "shift", "sort", "splice", "unshift"], function (methodName) {
          var func = arrayProto2[methodName],
            chainName = /^(?:push|sort|unshift)$/.test(methodName) ? "tap" : "thru",
            retUnwrapped = /^(?:pop|shift)$/.test(methodName);
          lodash2.prototype[methodName] = function () {
            var args = arguments;
            if (retUnwrapped && !this.__chain__) {
              var value = this.value();
              return func.apply(isArray2(value) ? value : [], args);
            }
            return this[chainName](function (value2) {
              return func.apply(isArray2(value2) ? value2 : [], args);
            });
          };
        });
        baseForOwn(LazyWrapper.prototype, function (func, methodName) {
          var lodashFunc = lodash2[methodName];
          if (lodashFunc) {
            var key = lodashFunc.name + "";
            if (!hasOwnProperty2.call(realNames, key)) {
              realNames[key] = [];
            }
            realNames[key].push({
              "name": methodName,
              "func": lodashFunc
            });
          }
        });
        realNames[createHybrid(undefined$12, WRAP_BIND_KEY_FLAG).name] = [{
          "name": "wrapper",
          "func": undefined$12
        }];
        LazyWrapper.prototype.clone = lazyClone;
        LazyWrapper.prototype.reverse = lazyReverse;
        LazyWrapper.prototype.value = lazyValue;
        lodash2.prototype.at = wrapperAt;
        lodash2.prototype.chain = wrapperChain;
        lodash2.prototype.commit = wrapperCommit;
        lodash2.prototype.next = wrapperNext;
        lodash2.prototype.plant = wrapperPlant;
        lodash2.prototype.reverse = wrapperReverse;
        lodash2.prototype.toJSON = lodash2.prototype.valueOf = lodash2.prototype.value = wrapperValue;
        lodash2.prototype.first = lodash2.prototype.head;
        if (symIterator) {
          lodash2.prototype[symIterator] = wrapperToIterator;
        }
        return lodash2;
      };
      var _2 = runInContext();
      if (freeModule) {
        (freeModule.exports = _2)._ = _2;
        freeExports._ = _2;
      } else {
        root2._ = _2;
      }
    }).call(commonjsGlobal);
  })(lodash, lodash.exports);
  lodash.exports;
  function check_webp_feature$1(feature, callback) {
    var kTestImages = {
      lossy: "UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",
      lossless: "UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",
      alpha: "UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",
      animation: "UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"
    };
    var img = new Image();
    img.onload = function () {
      var result2 = img.width > 0 && img.height > 0;
      callback(feature, result2);
    };
    img.onerror = function () {
      callback(feature, false);
    };
    img.src = "data:image/webp;base64," + kTestImages[feature];
  }
  if (typeof window !== "undefined") {
    check_webp_feature$1("lossy", function (_2, res) {});
  }
  ({
    isWebp: function () {
      try {
        return document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp") === 0;
      } catch (err) {
        return false;
      }
    }(),
    setSrc: function setSrc(str) {
      var _url = this._urlFormat(str);
      str = !_url ? str : _url;
      var src = "";
      var arr2 = str.match(/\*(\d+)x(\d+)./);
      if (arr2 === null) {
        if (this.isWebp) {
          if (/@/.test(str)) {
            var newStr = str.substring(0, str.lastIndexOf("."));
            src = "".concat(newStr, ".webp");
          } else {
            src = "".concat(str, "@.webp");
          }
        } else {
          src = str;
        }
      } else if (this.isWebp) {
        src = "".concat(str.split("*")[0], "@").concat(arr2[1], "w_").concat(arr2[2], "h.webp");
      } else {
        src = "".concat(str.split("*")[0], "@").concat(arr2[1], "w_").concat(arr2[2], "h");
      }
      return src;
    },
    _urlFormat: function _urlFormat(url2) {
      var reg1 = /\/\d+?_\d+?\/bfs/;
      var newUrl = url2.replace(reg1, "/bfs");
      if (!reg1.test(url2)) return false;
      return "".concat(newUrl, "_").concat(RegExp.$1, "x").concat(RegExp.$2).concat(RegExp.$3);
    }
  });
  document.querySelector.bind(document);
  window.fontsize = 100;
  document.querySelector.bind(document);
  window.fontsize = 100;
  if (isApp$1) {
    N$1();
  }
  _$1.callNative({
    method: "global.import",
    data: {
      namespace: "auth"
    }
  });
  new HttpService({
    fetch: new HttpSvcAppFetch$1(),
    middlewares: [new HttpSvcRuntime$1(), new HttpSvcCsrf$1(), new HttpSvcBody$1()]
  });
  new HttpService();
  var bundle = {
    exports: {}
  };
  (function (module2, exports2) {
    (function (global2, factory) {
      factory(exports2);
    })(commonjsGlobal, function (exports3) {
      function isMobileSafari() {
        var ua2 = navigator.userAgent;
        var isIos2 = / OS \d/.test(ua2);
        var notChrome = !~ua2.indexOf("CriOS");
        var notMozilla = !ua2.indexOf("Mozilla");
        var isSafari = /Safari\/[\d\.]+$/.test(ua2);
        return isIos2 && notChrome && notMozilla && isSafari;
      }
      var getBrowserVersion = function getBrowserVersion2() {
        var ua2 = navigator.userAgent;
        return {
          baiduspider: /Baiduspider/.test(ua2),
          QQLive: /QQLive/i.test(ua2),
          mqq: /QQ\/([\d\.]+)/i.test(ua2),
          //是否为手机QQ
          weibo: /Weibo/i.test(ua2),
          //是否为微博
          MicroMessenger: /MicroMessenger/i.test(ua2),
          //是否为微信
          mbaidu: /baiduboxapp/i.test(ua2),
          //是否为手机百度
          iqiyi: /iqiyi/i.test(ua2),
          qq: /MQQBrowser/i.test(ua2),
          //是否为QQ浏览器
          mobile: /AppleWebKit.*Mobile.*/i.test(ua2),
          //是否为移动终端
          uc: /UCBrowser/i.test(ua2),
          //是否为UC
          xiaomiqjs: /MiuiQuickSearchBox/.test(ua2),
          dianping: /dianping/.test(ua2),
          ios: /\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(ua2),
          //ios终端
          android: /Android/i.test(ua2) || /Linux/i.test(ua2),
          //android终端或者uc浏览器
          windowsphone: /Windows Phone/i.test(ua2),
          //Windows Phone
          iPhone: /iPhone/i.test(ua2),
          //是否为iPhone或者QQHD浏览器
          iPad: /iPad/i.test(ua2),
          //是否iPad
          webApp: !/Safari/i.test(ua2),
          //是否web应该程序，没有头部与底部
          baidu: /Baidu/i.test(ua2),
          //是否为百度浏览器
          Safari: isMobileSafari(),
          Youku: /youku/i.test(ua2),
          chrome: /CriOS/i.test(ua2),
          CMDC: /CMDC/i.test(ua2),
          BiliApp: /BiliApp/i.test(ua2),
          Mac: /Macintosh/.test(ua2)
        };
      };
      var customReport = function customReport2(name, ops) {
        if (window.reportConfig && window[reportConfig["msgObjects"]]) {
          var reportObj = window[reportConfig["msgObjects"]];
          var obj = ops ? ops : name;
          reportObj[name] = obj;
        }
        if (window.reportObserver) {
          window.reportObserver.forceCommit();
        }
      };
      var ajax = function ajax2(url2, callback) {
        var req = new XMLHttpRequest();
        req.onreadystatechange = function (e2) {
          if (this.readyState === 4 && this.status === 200) {
            var data = JSON.parse(this.response);
            callback(data);
          }
        };
        req.onerror = function () {};
        req.ontimeout = function () {};
        req.open("GET", url2);
        req.send();
      };
      var _typeof2 = typeof Symbol === "function" && _typeof4(Symbol.iterator) === "symbol" ? function (obj) {
        return _typeof4(obj);
      } : function (obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof4(obj);
      };
      function getDownloadLink(schema, directDownload, delayDownload, extra, wxDownloadKey) {
        var browser2 = getBrowserVersion();
        if (browser2.MicroMessenger) {
          var keyMap = {
            share_source_weixinchat: "CK1463338442777",
            share_source_weixin_moments: "CK1463338350392",
            share_source_more: "CK1463338994314",
            share_source_copy_link: "CK1474482145968",
            wechat: "CK1385399615180"
          };
          if ((typeof wxDownloadKey === "undefined" ? "undefined" : _typeof2(wxDownloadKey)) === "object") {
            for (var i2 in wxDownloadKey) {
              keyMap[i2] = wxDownloadKey[i2];
            }
          }
          var ckey = keyMap[window.bsource] || "CK1389719810898";
          if (window.bsource === "app_bili") {
            return "//a.app.qq.com/o/simple.jsp?pkgname=tv.danmaku.bili&ckey=" + ckey;
          } else if (browser2.android) {
            var downloadLink = "//a.app.qq.com/o/simple.jsp?pkgname=tv.danmaku.bili&ckey=" + ckey;
            var realSchema = schema.indexOf("?") > 0 ? schema + "&" + extra : schema + "?" + extra;
            return downloadLink + "&android_schema=" + encodeURIComponent(realSchema);
          } else {
            return "//a.app.qq.com/o/simple.jsp?pkgname=tv.danmaku.bili&ckey=" + ckey;
          }
        }
        if (browser2.android) {
          var href = "//dl.hdslb.com/mobile/latest/iBiliPlayer-bilih5.apk";
          if (window.isOverSea) {
            href = "https://dl.hdslb.com/mobile/upload/iBiliPlayer-internation-default.apk";
          }
          if (browser2.weibo || window.WeiboJSBridge || window.WebViewJavascriptBridge || window.__WeiboJSBridge) {
            href = "https://dl.hdslb.com/mobile/latest/iBiliPlayer-html5_weibo.apk";
          }
          if (browser2.baidu || window.bd_searchbox_interface || window.bdbox_android_common) {
            href = "https://dl.hdslb.com/mobile/latest/iBiliPlayer-html5_bdbox.apk";
          }
          if ((browser2.uc || window.ucbrowser || window.ucapi) && document.referrer && document.referrer.indexOf("tv.uc.cn") >= 0) {
            href = "https://dl.hdslb.com/mobile/latest/iBiliPlayer-html5_uc_video.apk";
          }
          if (window.bsource) {
            href = "https://dl.hdslb.com/mobile/latest/iBiliPlayer-html5_" + window.bsource + ".apk";
          }
          if (!directDownload && !delayDownload) {
            href = "https://d.bilibili.com/download_app.html?download_url=" + encodeURIComponent(href) + "&schema=" + encodeURIComponent(schema);
          }
          var timestamp = (/* @__PURE__ */new Date()).getTime();
          if (/.apk$/g.test(href)) {
            return href + "?key=" + timestamp;
          }
          return href;
        }
        if (browser2.ios || browser2.Mac) {
          var _href = "https://itunes.apple.com/cn/app/bi-li-bi-li-dong-hua/id736536022";
          if (browser2.weibo || browser2.chrome) {
            _href = "https://itunes.apple.com/cn/app/id736536022?mt=8#id1047562725";
          }
          if (!directDownload) {
            return "https://d.bilibili.com/download_app.html?download_url=" + encodeURIComponent(_href) + "&schema=" + encodeURIComponent(schema);
          }
          return _href;
        }
        if (browser2.windowsphone) {
          return "https://www.windowsphone.com/zh-cn/store/purchase/validate?app=75620dee-4a7a-4dae-8677-0d930e05f57e&apptype=regular&offer=3869edb1-e34c-469a-af6e-2c8a7856cb61";
        }
      }
      function openAppLink(redirectLink, downloadLink, autoDownload, delayDownload) {
        if (!redirectLink || !downloadLink) {
          return;
        }
        if (delayDownload) {
          if (autoDownload) {
            setTimeout(function () {
              if (!document.hidden) {
                location.href = downloadLink;
              }
            }, 2e3);
          }
          location.href = redirectLink;
        } else {
          if (autoDownload) {
            setTimeout(function () {
              location.href = downloadLink;
            }, 500);
          }
          location.href = redirectLink;
        }
      }
      var openApp = function openApp2(options) {
        options = options || {};
        var _options = options,
          schema = _options.schema,
          universalLink = _options.universalLink,
          autoDownload = _options.autoDownload,
          onlySchema = _options.onlySchema,
          directDownload = _options.directDownload,
          delayDownload = _options.delayDownload,
          downloadUrl = _options.downloadUrl,
          extra = _options.extra,
          wxDownloadKey = _options.wxDownloadKey;
        if (typeof autoDownload === "undefined") {
          autoDownload = true;
        }
        extra = extra || "";
        schema = schema || "bilibili://rank";
        universalLink = universalLink || "https://m.bilibili.com/index.html";
        var browser2 = getBrowserVersion();
        if (browser2.BiliApp) {
          location.href = schema;
          return;
        }
        var downloadLink = downloadUrl || getDownloadLink(schema, directDownload, delayDownload, extra, wxDownloadKey);
        if (downloadLink.indexOf(".apk") > 0 || downloadLink.indexOf("d.bilibili.com") > 0 || downloadLink.indexOf("app.qq.com") > 0) {
          customReport("request_download", 1);
        }
        if (browser2.android && browser2.MicroMessenger) {
          location.href = downloadLink;
          return;
        }
        var needJumpMiddlePage = browser2.weibo || browser2.qq || browser2.wechat || window.bsource === "xxqg1";
        if ((browser2.ios || needJumpMiddlePage || browser2.Mac) && !onlySchema && !directDownload) {
          location.href = "https://d.bilibili.com/download_app.html?preUrl=" + encodeURIComponent(universalLink) + "&schema=" + encodeURIComponent(schema) + "&" + extra;
          return;
        }
        var realSchema = schema.indexOf("?") > 0 ? schema + "&" + extra : schema + "?" + extra;
        openAppLink(realSchema, downloadLink, autoDownload, delayDownload);
      };
      var judgeOverSea = function judgeOverSea2() {
        ajax("//api.bilibili.com/x/web-interface/zone?jsonp=jsonp", function (data) {
          if (data.code === 0 && data.data && data.data.country && data.data.country !== "中国") {
            window.isOverSea = true;
          }
        });
      };
      var createOpenAppBtn = function createOpenAppBtn2(options) {
        var el = options.el,
          onClick = options.onClick,
          onWxLaunch = options.onWxLaunch,
          onWxError = options.onWxError,
          schema = options.schema,
          extra = options.extra;
        if (!el instanceof HTMLElement) {
          return;
        }
        var browser2 = getBrowserVersion();
        if (browser2.MicroMessenger) {
          var realSchema = schema.indexOf("?") > 0 ? schema + "&" + extra : schema + "?" + extra;
          var container = document.createElement("div");
          container.className = "wx-open-app";
          container.innerHTML = '<wx-open-launch-app\n      appid="' + options.appid + '"\n      extinfo="' + realSchema + '"\n      class="wx-open-app-btn"\n    >\n      <script type="text/wxtag-template">\n        <style>\n          .template {\n            width: 100%;\n            height: 100%;\n          }\n        </style>\n        <div class="template"><br><br><br><br><br><br><br><br><br><br><br><br></div>\n      <\/script>\n    </wx-open-launch-app>';
          el.appendChild(container);
          var wxBtn = container.querySelector(".wx-open-app-btn");
          wxBtn.addEventListener("launch", function (e2) {
            if (typeof onWxLaunch === "function") {
              onWxLaunch(e2);
            }
          });
          wxBtn.addEventListener("error", function (e2) {
            if (typeof onWxError === "function") {
              onWxError(e2);
            }
            openApp(options);
          });
          return;
        }
        el.addEventListener("click", function (e2) {
          if (typeof onClick === "function") {
            onClick(e2);
          }
          openApp(options);
        });
      };
      var init = function init2() {
        var style = document.createElement("style");
        style.innerHTML = "\n    .wx-open-app, .wx-open-app-btn {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      z-index: 20;\n      overflow: hidden;\n    }\n  ";
        document.body.appendChild(style);
      };
      exports3.createOpenAppBtn = createOpenAppBtn;
      exports3.init = init;
      exports3.judgeOverSea = judgeOverSea;
      exports3.openApp = openApp;
      Object.defineProperty(exports3, "__esModule", {
        value: true
      });
    });
  })(bundle, bundle.exports);
  var bundleExports = bundle.exports;
  var getUserInfo$2 = function getUserInfo$2() {
    return new Promise(function (resolve, reject) {
      if (f$2) {
        _$1.callNative({
          method: "auth.getUserInfo",
          data: {
            type: "default"
          },
          callback: function callback(userInfo) {
            try {
              if (userInfo.state.toString() === "0") {
                resolve(null);
                return;
              }
              resolve({
                mid: userInfo.mid,
                avatar: userInfo.face,
                nickname: userInfo.userName
              });
            } catch (e2) {
              reject(userInfo);
            }
          }
        });
      } else {
        request$1({
          url: "https://api.bilibili.com/x/web-interface/nav",
          method: "GET"
        }).then(function (res) {
          if (res.code) {
            reject(res);
            return;
          }
          if (!res.data.isLogin) {
            resolve(null);
            return;
          }
          resolve({
            mid: res.data.mid,
            avatar: res.data.face,
            nickname: res.data.uname
          });
        })["catch"](reject);
      }
    });
  };
  new HttpService();
  var biliAppLogin$1 = function biliAppLogin$1() {
    N$1();
    _$1.callNative({
      method: "auth.login",
      data: {
        type: "default",
        callbackUrl: location.href
      },
      onLogin: function onLogin(data) {
        if (data) {
          if (data.state === 0) {
            console.log("not login, failed, canceled");
          } else {
            console.log("logined");
          }
        } else {
          console.log("failed");
        }
      },
      callback: function callback() {
        console.log("调起登陆窗口");
      }
    });
  };
  var openBiliApp$1 = function openBiliApp$1() {
    var activityName2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
    var schema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "bilibili://browser/?url=".concat(encodeURIComponent(location.href));
    var universalLink = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : location.href;
    bundleExports.init();
    try {
      bundleExports.openApp({
        schema: schema,
        universalLink: universalLink,
        autoDownload: true,
        onlySchema: false,
        // 传递埋点等额外参数
        extra: "h5awaken=".concat(activityName2)
      });
    } catch (err) {
      console.error("站外唤端失败", err);
    }
  };
  var evoke4login$1 = /*#__PURE__*/function () {
    var _ref41 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee44() {
      var _a3, mid;
      return _regeneratorRuntime().wrap(function _callee44$(_context45) {
        while (1) switch (_context45.prev = _context45.next) {
          case 0:
            _context45.next = 2;
            return getUserInfo$1();
          case 2:
            _context45.t0 = _a3 = _context45.sent;
            if (!(_context45.t0 == null)) {
              _context45.next = 7;
              break;
            }
            _context45.t1 = void 0;
            _context45.next = 8;
            break;
          case 7:
            _context45.t1 = _a3.mid;
          case 8:
            mid = _context45.t1;
            if (!(isPC && !mid)) {
              _context45.next = 14;
              break;
            }
            openQuickLogin$1();
            return _context45.abrupt("return", false);
          case 14:
            if (!(f$2 && !mid)) {
              _context45.next = 19;
              break;
            }
            biliAppLogin$1();
            return _context45.abrupt("return", false);
          case 19:
            if (!(!isPC && !f$2)) {
              _context45.next = 22;
              break;
            }
            openBiliApp$1(activityName);
            return _context45.abrupt("return", false);
          case 22:
            return _context45.abrupt("return", true);
          case 23:
          case "end":
            return _context45.stop();
        }
      }, _callee44);
    }));
    return function evoke4login$1() {
      return _ref41.apply(this, arguments);
    };
  }();
  var responseHandler$1 = function responseHandler$1(res) {
    var mustLogin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var enableToast = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
    var code = res.code,
      message = res.message;
    if (code === 0) return Promise.resolve(res);
    if (code === -101) {
      mustLogin && evoke4login$1();
      if (!mustLogin) return Promise.resolve(res);else return Promise.reject(message || "请先登录");
    }
    enableToast && message && toast$1.info(message);
    return Promise.reject(message || "服务出现一点小问题，请稍后重试");
  };
  var getUserInfo$1 = function getUserInfo$1() {
    return getUserInfo$2();
  };
  var getListTotal = /*#__PURE__*/function () {
    var _ref42 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee45(task_ids) {
      var res;
      return _regeneratorRuntime().wrap(function _callee45$(_context46) {
        while (1) switch (_context46.prev = _context46.next) {
          case 0:
            _context46.next = 2;
            return baseRequest.request({
              url: "".concat(actApiPrefix$1, "/x/task/totalv2"),
              method: "GET",
              params: {
                task_ids: task_ids
              },
              credentials: "include"
            });
          case 2:
            res = _context46.sent;
            return _context46.abrupt("return", responseHandler$1(res, false, false));
          case 4:
          case "end":
            return _context46.stop();
        }
      }, _callee45);
    }));
    return function getListTotal(_x57) {
      return _ref42.apply(this, arguments);
    };
  }();
  var getListTotalFromTaskCombinService = function getListTotalFromTaskCombinService(task_ids) {
    var task_ids_arr = task_ids.split(",");
    if (!Array.isArray(task_ids_arr)) {
      return Promise.reject("task_ids参数错误");
    }
    var resultPromise = [];
    var _iterator6 = _createForOfIteratorHelper2(task_ids_arr),
      _step6;
    try {
      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
        var task_id = _step6.value;
        var tmpRes = TaskCombinService.getResponseData(task_id);
        resultPromise.push(tmpRes);
      }
    } catch (err) {
      _iterator6.e(err);
    } finally {
      _iterator6.f();
    }
    return Promise.all(resultPromise).then(function (res) {
      var result2 = {
        list: [],
        task_refresh_conf: {
          is_switch_on: false
        }
      };
      var hasPolling = false;
      Array.isArray(res) && res.forEach(function (item) {
        var _a3;
        result2.list = [].concat(_toConsumableArray2(result2.list), _toConsumableArray2(item.list));
        result2.task_refresh_conf = item.task_refresh_conf;
        if ((_a3 = item.task_refresh_conf) == null ? void 0 : _a3.is_switch_on) {
          hasPolling = true;
        }
      });
      result2.task_refresh_conf.is_switch_on = hasPolling;
      return result2;
    });
  };
  function taskResMapMethod(res, uid) {
    var _a3;
    var list = ((_a3 = res == null ? void 0 : res.data) == null ? void 0 : _a3.list) || [];
    var data = {};
    list.forEach(function (item) {
      data[item.task_id] = {
        list: [item],
        task_refresh_conf: _objectSpread(_objectSpread({}, res.data.task_refresh_conf), {}, {
          is_switch_on: item.is_need_polling
        })
      };
    });
    if (!data[uid]) {
      data[uid] = {};
    }
    return data[uid];
  }
  if (!((_g = window == null ? void 0 : window.__BILI_EVA_COMMON_FUNC) == null ? void 0 : _g.TaskCombinService)) {
    var TaskCombinService2 = new BatchRequestService(getListTotal, taskResMapMethod);
    window.__BILI_EVA_COMMON_FUNC = _objectSpread(_objectSpread({}, window.__BILI_EVA_COMMON_FUNC), {}, {
      TaskCombinService: TaskCombinService2
    });
  }
  var TaskCombinService = window.__BILI_EVA_COMMON_FUNC.TaskCombinService;
  N$1();
  var ImageService = /*#__PURE__*/function () {
    "use strict";

    function ImageService() {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, ImageService);
      var defaultParams = {
        standardRemRate: 37.5,
        autoRemoveProtocol: true
      };
      this.standardRemRate = options.standardRemRate || defaultParams.standardRemRate;
      this.autoRemoveProtocol = options.autoRemoveProtocol || defaultParams.autoRemoveProtocol;
      this.checkIsEnvSupportedWebp();
      this.checkIsEnvSupportAvif();
    }
    return _createClass(ImageService, [{
      key: "checkIsEnvSupportedWebp",
      value: function checkIsEnvSupportedWebp() {
        if (typeof this.isSupportedWebp === "boolean") {
          return;
        }
        try {
          var elem = document.createElement("canvas");
          this.isSupportedWebp = elem.getContext && elem.getContext("2d") && elem.toDataURL("image/webp").indexOf("data:image/webp") === 0;
        } catch (err) {
          this.isSupportedWebp = false;
        }
      }
    }, {
      key: "checkIsEnvSupportAvif",
      value: function () {
        var _checkIsEnvSupportAvif = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee46() {
          var _this27 = this;
          return _regeneratorRuntime().wrap(function _callee46$(_context47) {
            while (1) switch (_context47.prev = _context47.next) {
              case 0:
                this.isSupportedAvif = new Promise(function (resolve) {
                  var avif = new Image();
                  avif.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=";
                  avif.onload = function () {
                    resolve(true);
                    _this27.isSupportedAvif = true;
                  };
                  avif.onerror = function () {
                    resolve(false);
                    _this27.isSupportedAvif = false;
                  };
                });
              case 1:
              case "end":
                return _context47.stop();
            }
          }, _callee46, this);
        }));
        function checkIsEnvSupportAvif() {
          return _checkIsEnvSupportAvif.apply(this, arguments);
        }
        return checkIsEnvSupportAvif;
      }()
    }, {
      key: "isBfsImageUrl",
      value: function isBfsImageUrl(url2) {
        if (/@/.test(url2)) {
          return false;
        }
        return /^(https?:)?\/\/(uat-|pre-)?(i|s)\d\.hdslb\.com\/bfs\/.*(jpg|jpeg|png|webp|gif)$/.test(url2);
      }
    }, {
      key: "convertUrl",
      value: function convertUrl(url2) {
        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        if (!url2) {
          return url2;
        }
        var formattedUrl = this.autoRemoveProtocol ? url2.replace(/^https?:\/\//, "//") : url2;
        if (!this.isBfsImageUrl(formattedUrl)) {
          return formattedUrl;
        }
        var formattedOptions = this.formatWebpOptions(options);
        var webpQueryString = this.createWebpQuerystring(formattedOptions);
        return "".concat(formattedUrl).concat(webpQueryString);
      }
    }, {
      key: "formatWebpOptions",
      value: function formatWebpOptions() {
        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var width = options.width,
          height = options.height,
          _options$fitType = options.fitType,
          fitType = _options$fitType === void 0 ? 2 : _options$fitType,
          _options$quality = options.quality,
          quality = _options$quality === void 0 ? 80 : _options$quality;
        var sizeRate = window.devicePixelRatio;
        var formattedOptions = {
          fitType: fitType,
          quality: quality
        };
        if (width) {
          formattedOptions.width = this.getRenderPixelValue(width * sizeRate);
        }
        if (height) {
          formattedOptions.height = this.getRenderPixelValue(height * sizeRate);
        }
        return formattedOptions;
      }
    }, {
      key: "createWebpQuery",
      value: function createWebpQuery() {
        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var width = options.width,
          height = options.height,
          _options$fitType2 = options.fitType,
          fitType = _options$fitType2 === void 0 ? 2 : _options$fitType2,
          _options$quality2 = options.quality,
          quality = _options$quality2 === void 0 ? 80 : _options$quality2;
        var qs2 = {
          e: fitType,
          q: quality
        };
        if (width) {
          qs2.w = width;
        }
        if (height) {
          qs2.h = height;
        }
        return qs2;
      }
    }, {
      key: "createWebpQuerystring",
      value: function createWebpQuerystring() {
        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var width = options.width,
          height = options.height,
          _options$fitType3 = options.fitType,
          fitType = _options$fitType3 === void 0 ? 2 : _options$fitType3,
          _options$quality3 = options.quality,
          quality = _options$quality3 === void 0 ? 80 : _options$quality3;
        var qs2 = {
          e: fitType,
          q: quality
        };
        if (width) {
          qs2.w = Math.floor(width);
        }
        if (height) {
          qs2.h = Math.floor(height);
        }
        var qsString = Object.entries(qs2).filter(function (key, value) {
          return value !== void 0;
        }).map(function (_ref43) {
          var _ref44 = _slicedToArray(_ref43, 2),
            key = _ref44[0],
            value = _ref44[1];
          return "".concat(value).concat(key);
        }).join("_");
        var extension =
        // 由于 isSupportedAvif 是异步获取的，可能有一定的延迟
        // 又不想把调用链全改为异步，所以这里做一点降级处理
        // 如果 isSupportedAvif 不是 true 的都走后面逻辑
        this.isSupportedAvif === true ? ".avif" : this.isSupportedWebp ? ".webp" : "";
        return "@".concat(qsString).concat(extension);
      }
      // @deprecated 使用 getImageRawSizeAsync 替代
      // TODO 2.0.0 移除
    }, {
      key: "getImageSizeAsync",
      value: function () {
        var _getImageSizeAsync = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee47(url2) {
          return _regeneratorRuntime().wrap(function _callee47$(_context48) {
            while (1) switch (_context48.prev = _context48.next) {
              case 0:
                console.warn("@deprecated 使用 getImageRawSizeAsync 替代, 将于 2.0 移除");
                _context48.next = 3;
                return this.getImageRawSizeAsync(url2);
              case 3:
                return _context48.abrupt("return", _context48.sent);
              case 4:
              case "end":
                return _context48.stop();
            }
          }, _callee47, this);
        }));
        function getImageSizeAsync(_x58) {
          return _getImageSizeAsync.apply(this, arguments);
        }
        return getImageSizeAsync;
      }()
    }, {
      key: "getImageRawSizeAsync",
      value: function () {
        var _getImageRawSizeAsync = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee48(url2) {
          var image;
          return _regeneratorRuntime().wrap(function _callee48$(_context49) {
            while (1) switch (_context49.prev = _context49.next) {
              case 0:
                image = new Image();
                image.src = url2;
                _context49.next = 4;
                return new Promise(function (resolve) {
                  if (image.complete) {
                    resolve({
                      width: image.width,
                      height: image.height
                    });
                  } else {
                    image.onload = function () {
                      resolve({
                        width: image.width,
                        height: image.height
                      });
                    };
                    image.onerror = function () {
                      resolve({
                        width: null,
                        height: null
                      });
                    };
                  }
                });
              case 4:
                return _context49.abrupt("return", _context49.sent);
              case 5:
              case "end":
                return _context49.stop();
            }
          }, _callee48);
        }));
        function getImageRawSizeAsync(_x59) {
          return _getImageRawSizeAsync.apply(this, arguments);
        }
        return getImageRawSizeAsync;
      }()
      /*
       * 传入标准尺寸，根据浏览器环境的 rem 单位值，返回对应的渲染尺寸
       */
    }, {
      key: "getRenderPixelValue",
      value: function getRenderPixelValue(pixel) {
        var rootFontSizeString = document.documentElement.style.fontSize.replace("px", "");
        var rootFontSize = rootFontSizeString ? Number(rootFontSizeString) : this.standardRemRate;
        return Math.floor(pixel * (rootFontSize / this.standardRemRate));
      }
    }]);
  }();
  new ImageService();
  var uaParser = {
    exports: {}
  };
  (function (module2, exports2) {
    (function (window2, undefined$12) {
      var LIBVERSION = "1.0.39",
        EMPTY = "",
        UNKNOWN = "?",
        FUNC_TYPE = "function",
        UNDEF_TYPE = "undefined",
        OBJ_TYPE = "object",
        STR_TYPE = "string",
        MAJOR = "major",
        MODEL = "model",
        NAME = "name",
        TYPE = "type",
        VENDOR = "vendor",
        VERSION = "version",
        ARCHITECTURE = "architecture",
        CONSOLE = "console",
        MOBILE = "mobile",
        TABLET = "tablet",
        SMARTTV = "smarttv",
        WEARABLE = "wearable",
        EMBEDDED = "embedded",
        UA_MAX_LENGTH = 500;
      var AMAZON = "Amazon",
        APPLE = "Apple",
        ASUS = "ASUS",
        BLACKBERRY = "BlackBerry",
        BROWSER = "Browser",
        CHROME = "Chrome",
        EDGE = "Edge",
        FIREFOX = "Firefox",
        GOOGLE = "Google",
        HUAWEI = "Huawei",
        LG = "LG",
        MICROSOFT = "Microsoft",
        MOTOROLA = "Motorola",
        OPERA = "Opera",
        SAMSUNG = "Samsung",
        SHARP = "Sharp",
        SONY = "Sony",
        XIAOMI = "Xiaomi",
        ZEBRA = "Zebra",
        FACEBOOK = "Facebook",
        CHROMIUM_OS = "Chromium OS",
        MAC_OS = "Mac OS",
        SUFFIX_BROWSER = " Browser";
      var extend = function extend(regexes2, extensions) {
          var mergedRegexes = {};
          for (var i2 in regexes2) {
            if (extensions[i2] && extensions[i2].length % 2 === 0) {
              mergedRegexes[i2] = extensions[i2].concat(regexes2[i2]);
            } else {
              mergedRegexes[i2] = regexes2[i2];
            }
          }
          return mergedRegexes;
        },
        enumerize = function enumerize(arr2) {
          var enums = {};
          for (var i2 = 0; i2 < arr2.length; i2++) {
            enums[arr2[i2].toUpperCase()] = arr2[i2];
          }
          return enums;
        },
        has2 = function has2(str1, str2) {
          return _typeof4(str1) === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;
        },
        lowerize = function lowerize(str) {
          return str.toLowerCase();
        },
        majorize = function majorize(version2) {
          return _typeof4(version2) === STR_TYPE ? version2.replace(/[^\d\.]/g, EMPTY).split(".")[0] : undefined$12;
        },
        trim = function trim(str, len) {
          if (_typeof4(str) === STR_TYPE) {
            str = str.replace(/^\s\s*/, EMPTY);
            return _typeof4(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);
          }
        };
      var rgxMapper = function rgxMapper(ua2, arrays) {
          var i2 = 0,
            j2,
            k2,
            p2,
            q2,
            matches,
            match;
          while (i2 < arrays.length && !matches) {
            var regex2 = arrays[i2],
              props = arrays[i2 + 1];
            j2 = k2 = 0;
            while (j2 < regex2.length && !matches) {
              if (!regex2[j2]) {
                break;
              }
              matches = regex2[j2++].exec(ua2);
              if (!!matches) {
                for (p2 = 0; p2 < props.length; p2++) {
                  match = matches[++k2];
                  q2 = props[p2];
                  if (_typeof4(q2) === OBJ_TYPE && q2.length > 0) {
                    if (q2.length === 2) {
                      if (_typeof4(q2[1]) == FUNC_TYPE) {
                        this[q2[0]] = q2[1].call(this, match);
                      } else {
                        this[q2[0]] = q2[1];
                      }
                    } else if (q2.length === 3) {
                      if (_typeof4(q2[1]) === FUNC_TYPE && !(q2[1].exec && q2[1].test)) {
                        this[q2[0]] = match ? q2[1].call(this, match, q2[2]) : undefined$12;
                      } else {
                        this[q2[0]] = match ? match.replace(q2[1], q2[2]) : undefined$12;
                      }
                    } else if (q2.length === 4) {
                      this[q2[0]] = match ? q2[3].call(this, match.replace(q2[1], q2[2])) : undefined$12;
                    }
                  } else {
                    this[q2] = match ? match : undefined$12;
                  }
                }
              }
            }
            i2 += 2;
          }
        },
        strMapper = function strMapper(str, map) {
          for (var i2 in map) {
            if (_typeof4(map[i2]) === OBJ_TYPE && map[i2].length > 0) {
              for (var j2 = 0; j2 < map[i2].length; j2++) {
                if (has2(map[i2][j2], str)) {
                  return i2 === UNKNOWN ? undefined$12 : i2;
                }
              }
            } else if (has2(map[i2], str)) {
              return i2 === UNKNOWN ? undefined$12 : i2;
            }
          }
          return map.hasOwnProperty("*") ? map["*"] : str;
        };
      var oldSafariMap = {
          "1.0": "/8",
          "1.2": "/1",
          "1.3": "/3",
          "2.0": "/412",
          "2.0.2": "/416",
          "2.0.3": "/417",
          "2.0.4": "/419",
          "?": "/"
        },
        windowsVersionMap = {
          "ME": "4.90",
          "NT 3.11": "NT3.51",
          "NT 4.0": "NT4.0",
          "2000": "NT 5.0",
          "XP": ["NT 5.1", "NT 5.2"],
          "Vista": "NT 6.0",
          "7": "NT 6.1",
          "8": "NT 6.2",
          "8.1": "NT 6.3",
          "10": ["NT 6.4", "NT 10.0"],
          "RT": "ARM"
        };
      var regexes = {
        browser: [[/\b(?:crmo|crios)\/([\w\.]+)/i
        // Chrome for Android/iOS
        ], [VERSION, [NAME, "Chrome"]], [/edg(?:e|ios|a)?\/([\w\.]+)/i
        // Microsoft Edge
        ], [VERSION, [NAME, "Edge"]], [
        // Presto based
        /(opera mini)\/([-\w\.]+)/i,
        // Opera Mini
        /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,
        // Opera Mobi/Tablet
        /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i
        // Opera
        ], [NAME, VERSION], [/opios[\/ ]+([\w\.]+)/i
        // Opera mini on iphone >= 8.0
        ], [VERSION, [NAME, OPERA + " Mini"]], [/\bop(?:rg)?x\/([\w\.]+)/i
        // Opera GX
        ], [VERSION, [NAME, OPERA + " GX"]], [/\bopr\/([\w\.]+)/i
        // Opera Webkit
        ], [VERSION, [NAME, OPERA]], [
        // Mixed
        /\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i
        // Baidu
        ], [VERSION, [NAME, "Baidu"]], [/(kindle)\/([\w\.]+)/i,
        // Kindle
        /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,
        // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir
        // Trident based
        /(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,
        // Avant/IEMobile/SlimBrowser
        /(?:ms|\()(ie) ([\w\.]+)/i,
        // Internet Explorer
        // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon
        /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,
        // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio
        /(heytap|ovi)browser\/([\d\.]+)/i,
        // HeyTap/Ovi
        /(weibo)__([\d\.]+)/i
        // Weibo
        ], [NAME, VERSION], [/quark(?:pc)?\/([-\w\.]+)/i
        // Quark
        ], [VERSION, [NAME, "Quark"]], [/\bddg\/([\w\.]+)/i
        // DuckDuckGo
        ], [VERSION, [NAME, "DuckDuckGo"]], [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i
        // UCBrowser
        ], [VERSION, [NAME, "UC" + BROWSER]], [/microm.+\bqbcore\/([\w\.]+)/i,
        // WeChat Desktop for Windows Built-in Browser
        /\bqbcore\/([\w\.]+).+microm/i, /micromessenger\/([\w\.]+)/i
        // WeChat
        ], [VERSION, [NAME, "WeChat"]], [/konqueror\/([\w\.]+)/i
        // Konqueror
        ], [VERSION, [NAME, "Konqueror"]], [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i
        // IE11
        ], [VERSION, [NAME, "IE"]], [/ya(?:search)?browser\/([\w\.]+)/i
        // Yandex
        ], [VERSION, [NAME, "Yandex"]], [/slbrowser\/([\w\.]+)/i
        // Smart Lenovo Browser
        ], [VERSION, [NAME, "Smart Lenovo " + BROWSER]], [/(avast|avg)\/([\w\.]+)/i
        // Avast/AVG Secure Browser
        ], [[NAME, /(.+)/, "$1 Secure " + BROWSER], VERSION], [/\bfocus\/([\w\.]+)/i
        // Firefox Focus
        ], [VERSION, [NAME, FIREFOX + " Focus"]], [/\bopt\/([\w\.]+)/i
        // Opera Touch
        ], [VERSION, [NAME, OPERA + " Touch"]], [/coc_coc\w+\/([\w\.]+)/i
        // Coc Coc Browser
        ], [VERSION, [NAME, "Coc Coc"]], [/dolfin\/([\w\.]+)/i
        // Dolphin
        ], [VERSION, [NAME, "Dolphin"]], [/coast\/([\w\.]+)/i
        // Opera Coast
        ], [VERSION, [NAME, OPERA + " Coast"]], [/miuibrowser\/([\w\.]+)/i
        // MIUI Browser
        ], [VERSION, [NAME, "MIUI " + BROWSER]], [/fxios\/([-\w\.]+)/i
        // Firefox for iOS
        ], [VERSION, [NAME, FIREFOX]], [/\bqihu|(qi?ho?o?|360)browser/i
        // 360
        ], [[NAME, "360" + SUFFIX_BROWSER]], [/\b(qq)\/([\w\.]+)/i
        // QQ
        ], [[NAME, /(.+)/, "$1Browser"], VERSION], [/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i], [[NAME, /(.+)/, "$1" + SUFFIX_BROWSER], VERSION], [
        // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser
        /samsungbrowser\/([\w\.]+)/i
        // Samsung Internet
        ], [VERSION, [NAME, SAMSUNG + " Internet"]], [/(comodo_dragon)\/([\w\.]+)/i
        // Comodo Dragon
        ], [[NAME, /_/g, " "], VERSION], [/metasr[\/ ]?([\d\.]+)/i
        // Sogou Explorer
        ], [VERSION, [NAME, "Sogou Explorer"]], [/(sogou)mo\w+\/([\d\.]+)/i
        // Sogou Mobile
        ], [[NAME, "Sogou Mobile"], VERSION], [/(electron)\/([\w\.]+) safari/i,
        // Electron-based App
        /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,
        // Tesla
        /m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i
        // QQBrowser/2345 Browser
        ], [NAME, VERSION], [/(lbbrowser|rekonq)/i,
        // LieBao Browser/Rekonq
        /\[(linkedin)app\]/i
        // LinkedIn App for iOS & Android
        ], [NAME], [
        // WebView
        /((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i
        // Facebook App for iOS & Android
        ], [[NAME, FACEBOOK], VERSION], [/(Klarna)\/([\w\.]+)/i,
        // Klarna Shopping Browser for iOS & Android
        /(kakao(?:talk|story))[\/ ]([\w\.]+)/i,
        // Kakao App
        /(naver)\(.*?(\d+\.[\w\.]+).*\)/i,
        // Naver InApp
        /safari (line)\/([\w\.]+)/i,
        // Line App for iOS
        /\b(line)\/([\w\.]+)\/iab/i,
        // Line App for Android
        /(alipay)client\/([\w\.]+)/i,
        // Alipay
        /(twitter)(?:and| f.+e\/([\w\.]+))/i,
        // Twitter
        /(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i
        // Chromium/Instagram/Snapchat
        ], [NAME, VERSION], [/\bgsa\/([\w\.]+) .*safari\//i
        // Google Search Appliance on iOS
        ], [VERSION, [NAME, "GSA"]], [/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i
        // TikTok
        ], [VERSION, [NAME, "TikTok"]], [/headlesschrome(?:\/([\w\.]+)| )/i
        // Chrome Headless
        ], [VERSION, [NAME, CHROME + " Headless"]], [/ wv\).+(chrome)\/([\w\.]+)/i
        // Chrome WebView
        ], [[NAME, CHROME + " WebView"], VERSION], [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i
        // Android Browser
        ], [VERSION, [NAME, "Android " + BROWSER]], [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i
        // Chrome/OmniWeb/Arora/Tizen/Nokia
        ], [NAME, VERSION], [/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i
        // Mobile Safari
        ], [VERSION, [NAME, "Mobile Safari"]], [/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i
        // Safari & Safari Mobile
        ], [VERSION, NAME], [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i
        // Safari < 3.0
        ], [NAME, [VERSION, strMapper, oldSafariMap]], [/(webkit|khtml)\/([\w\.]+)/i], [NAME, VERSION], [
        // Gecko based
        /(navigator|netscape\d?)\/([-\w\.]+)/i
        // Netscape
        ], [[NAME, "Netscape"], VERSION], [/(wolvic)\/([\w\.]+)/i
        // Wolvic
        ], [NAME, VERSION], [/mobile vr; rv:([\w\.]+)\).+firefox/i
        // Firefox Reality
        ], [VERSION, [NAME, FIREFOX + " Reality"]], [/ekiohf.+(flow)\/([\w\.]+)/i,
        // Flow
        /(swiftfox)/i,
        // Swiftfox
        /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,
        // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror
        /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,
        // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix
        /(firefox)\/([\w\.]+)/i,
        // Other Firefox-based
        /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,
        // Mozilla
        // Other
        /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,
        // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser
        /(links) \(([\w\.]+)/i
        // Links
        ], [NAME, [VERSION, /_/g, "."]], [/(cobalt)\/([\w\.]+)/i
        // Cobalt
        ], [NAME, [VERSION, /master.|lts./, ""]]],
        cpu: [[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i
        // AMD64 (x64)
        ], [[ARCHITECTURE, "amd64"]], [/(ia32(?=;))/i
        // IA32 (quicktime)
        ], [[ARCHITECTURE, lowerize]], [/((?:i[346]|x)86)[;\)]/i
        // IA32 (x86)
        ], [[ARCHITECTURE, "ia32"]], [/\b(aarch64|arm(v?8e?l?|_?64))\b/i
        // ARM64
        ], [[ARCHITECTURE, "arm64"]], [/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i
        // ARMHF
        ], [[ARCHITECTURE, "armhf"]], [
        // PocketPC mistakenly identified as PowerPC
        /windows (ce|mobile); ppc;/i], [[ARCHITECTURE, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i
        // PowerPC
        ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [/(sun4\w)[;\)]/i
        // SPARC
        ], [[ARCHITECTURE, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i
        // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC
        ], [[ARCHITECTURE, lowerize]]],
        device: [[
        //////////////////////////
        // MOBILES & TABLETS
        /////////////////////////
        // Samsung
        /\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i, /samsung[- ]((?!sm-[lr])[-\w]+)/i, /sec-(sgh\w+)/i], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [
        // Apple
        /(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i
        // iPod/iPhone
        ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [/\((ipad);[-\w\),; ]+apple/i,
        // iPad
        /applecoremedia\/[\w\.]+ \((ipad)/i, /\b(ipad)\d\d?,\d\d?[;\]].+ios/i], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [/(macintosh);/i], [MODEL, [VENDOR, APPLE]], [
        // Sharp
        /\b(sh-?[altvz]?\d\d[a-ekm]?)/i], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [
        // Huawei
        /\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [/(?:huawei|honor)([-\w ]+)[;\)]/i, /\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [
        // Xiaomi
        /\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,
        // Xiaomi POCO
        /\b; (\w+) build\/hm\1/i,
        // Xiaomi Hongmi 'numeric' models
        /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,
        // Xiaomi Hongmi
        /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,
        // Xiaomi Redmi
        /oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,
        // Xiaomi Redmi 'numeric' models
        /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i
        // Xiaomi Mi
        ], [[MODEL, /_/g, " "], [VENDOR, XIAOMI], [TYPE, MOBILE]], [/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,
        // Redmi Pad
        /\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i
        // Mi Pad tablets
        ], [[MODEL, /_/g, " "], [VENDOR, XIAOMI], [TYPE, TABLET]], [
        // OPPO
        /; (\w+) bui.+ oppo/i, /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i], [MODEL, [VENDOR, "OPPO"], [TYPE, MOBILE]], [/\b(opd2\d{3}a?) bui/i], [MODEL, [VENDOR, "OPPO"], [TYPE, TABLET]], [
        // Vivo
        /vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i], [MODEL, [VENDOR, "Vivo"], [TYPE, MOBILE]], [
        // Realme
        /\b(rmx[1-3]\d{3})(?: bui|;|\))/i], [MODEL, [VENDOR, "Realme"], [TYPE, MOBILE]], [
        // Motorola
        /\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i, /\bmot(?:orola)?[- ](\w*)/i, /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [/\b(mz60\d|xoom[2 ]{0,2}) build\//i], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [
        // LG
        /((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i, /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i, /\blg-?([\d\w]+) bui/i], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [
        // Lenovo
        /(ideatab[-\w ]+)/i, /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i], [MODEL, [VENDOR, "Lenovo"], [TYPE, TABLET]], [
        // Nokia
        /(?:maemo|nokia).*(n900|lumia \d+)/i, /nokia[-_ ]?([-\w\.]*)/i], [[MODEL, /_/g, " "], [VENDOR, "Nokia"], [TYPE, MOBILE]], [
        // Google
        /(pixel c)\b/i
        // Google Pixel C
        ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i
        // Google Pixel
        ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [
        // Sony
        /droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i], [[MODEL, "Xperia Tablet"], [VENDOR, SONY], [TYPE, TABLET]], [
        // OnePlus
        / (kb2005|in20[12]5|be20[12][59])\b/i, /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i], [MODEL, [VENDOR, "OnePlus"], [TYPE, MOBILE]], [
        // Amazon
        /(alexa)webm/i, /(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,
        // Kindle Fire without Silk / Echo Show
        /(kf[a-z]+)( bui|\)).+silk\//i
        // Kindle Fire HD
        ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i
        // Fire Phone
        ], [[MODEL, /(.+)/g, "Fire Phone $1"], [VENDOR, AMAZON], [TYPE, MOBILE]], [
        // BlackBerry
        /(playbook);[-\w\),; ]+(rim)/i
        // BlackBerry PlayBook
        ], [MODEL, VENDOR, [TYPE, TABLET]], [/\b((?:bb[a-f]|st[hv])100-\d)/i, /\(bb10; (\w+)/i
        // BlackBerry 10
        ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [
        // Asus
        /(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [
        // HTC
        /(nexus 9)/i
        // HTC Nexus 9
        ], [MODEL, [VENDOR, "HTC"], [TYPE, TABLET]], [/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,
        // HTC
        // ZTE
        /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i, /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i
        // Alcatel/GeeksPhone/Nexian/Panasonic/Sony
        ], [VENDOR, [MODEL, /_/g, " "], [TYPE, MOBILE]], [
        // TCL
        /droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i], [MODEL, [VENDOR, "TCL"], [TYPE, TABLET]], [
        // itel
        /(itel) ((\w+))/i], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, {
          "tablet": ["p10001l", "w7001"],
          "*": "mobile"
        }]], [
        // Acer
        /droid.+; ([ab][1-7]-?[0178a]\d\d?)/i], [MODEL, [VENDOR, "Acer"], [TYPE, TABLET]], [
        // Meizu
        /droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i], [MODEL, [VENDOR, "Meizu"], [TYPE, MOBILE]], [
        // Ulefone
        /; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i], [MODEL, [VENDOR, "Ulefone"], [TYPE, MOBILE]], [
        // Nothing
        /droid.+; (a(?:015|06[35]|142p?))/i], [MODEL, [VENDOR, "Nothing"], [TYPE, MOBILE]], [
        // MIXED
        /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,
        // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron
        /(hp) ([\w ]+\w)/i,
        // HP iPAQ
        /(asus)-?(\w+)/i,
        // Asus
        /(microsoft); (lumia[\w ]+)/i,
        // Microsoft Lumia
        /(lenovo)[-_ ]?([-\w]+)/i,
        // Lenovo
        /(jolla)/i,
        // Jolla
        /(oppo) ?([\w ]+) bui/i
        // OPPO
        ], [VENDOR, MODEL, [TYPE, MOBILE]], [/(kobo)\s(ereader|touch)/i,
        // Kobo
        /(archos) (gamepad2?)/i,
        // Archos
        /(hp).+(touchpad(?!.+tablet)|tablet)/i,
        // HP TouchPad
        /(kindle)\/([\w\.]+)/i,
        // Kindle
        /(nook)[\w ]+build\/(\w+)/i,
        // Nook
        /(dell) (strea[kpr\d ]*[\dko])/i,
        // Dell Streak
        /(le[- ]+pan)[- ]+(\w{1,9}) bui/i,
        // Le Pan Tablets
        /(trinity)[- ]*(t\d{3}) bui/i,
        // Trinity Tablets
        /(gigaset)[- ]+(q\w{1,9}) bui/i,
        // Gigaset Tablets
        /(vodafone) ([\w ]+)(?:\)| bui)/i
        // Vodafone
        ], [VENDOR, MODEL, [TYPE, TABLET]], [/(surface duo)/i
        // Surface Duo
        ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [/droid [\d\.]+; (fp\du?)(?: b|\))/i
        // Fairphone
        ], [MODEL, [VENDOR, "Fairphone"], [TYPE, MOBILE]], [/(u304aa)/i
        // AT&T
        ], [MODEL, [VENDOR, "AT&T"], [TYPE, MOBILE]], [/\bsie-(\w*)/i
        // Siemens
        ], [MODEL, [VENDOR, "Siemens"], [TYPE, MOBILE]], [/\b(rct\w+) b/i
        // RCA Tablets
        ], [MODEL, [VENDOR, "RCA"], [TYPE, TABLET]], [/\b(venue[\d ]{2,7}) b/i
        // Dell Venue Tablets
        ], [MODEL, [VENDOR, "Dell"], [TYPE, TABLET]], [/\b(q(?:mv|ta)\w+) b/i
        // Verizon Tablet
        ], [MODEL, [VENDOR, "Verizon"], [TYPE, TABLET]], [/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i
        // Barnes & Noble Tablet
        ], [MODEL, [VENDOR, "Barnes & Noble"], [TYPE, TABLET]], [/\b(tm\d{3}\w+) b/i], [MODEL, [VENDOR, "NuVision"], [TYPE, TABLET]], [/\b(k88) b/i
        // ZTE K Series Tablet
        ], [MODEL, [VENDOR, "ZTE"], [TYPE, TABLET]], [/\b(nx\d{3}j) b/i
        // ZTE Nubia
        ], [MODEL, [VENDOR, "ZTE"], [TYPE, MOBILE]], [/\b(gen\d{3}) b.+49h/i
        // Swiss GEN Mobile
        ], [MODEL, [VENDOR, "Swiss"], [TYPE, MOBILE]], [/\b(zur\d{3}) b/i
        // Swiss ZUR Tablet
        ], [MODEL, [VENDOR, "Swiss"], [TYPE, TABLET]], [/\b((zeki)?tb.*\b) b/i
        // Zeki Tablets
        ], [MODEL, [VENDOR, "Zeki"], [TYPE, TABLET]], [/\b([yr]\d{2}) b/i, /\b(dragon[- ]+touch |dt)(\w{5}) b/i
        // Dragon Touch Tablet
        ], [[VENDOR, "Dragon Touch"], MODEL, [TYPE, TABLET]], [/\b(ns-?\w{0,9}) b/i
        // Insignia Tablets
        ], [MODEL, [VENDOR, "Insignia"], [TYPE, TABLET]], [/\b((nxa|next)-?\w{0,9}) b/i
        // NextBook Tablets
        ], [MODEL, [VENDOR, "NextBook"], [TYPE, TABLET]], [/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i
        // Voice Xtreme Phones
        ], [[VENDOR, "Voice"], MODEL, [TYPE, MOBILE]], [/\b(lvtel\-)?(v1[12]) b/i
        // LvTel Phones
        ], [[VENDOR, "LvTel"], MODEL, [TYPE, MOBILE]], [/\b(ph-1) /i
        // Essential PH-1
        ], [MODEL, [VENDOR, "Essential"], [TYPE, MOBILE]], [/\b(v(100md|700na|7011|917g).*\b) b/i
        // Envizen Tablets
        ], [MODEL, [VENDOR, "Envizen"], [TYPE, TABLET]], [/\b(trio[-\w\. ]+) b/i
        // MachSpeed Tablets
        ], [MODEL, [VENDOR, "MachSpeed"], [TYPE, TABLET]], [/\btu_(1491) b/i
        // Rotor Tablets
        ], [MODEL, [VENDOR, "Rotor"], [TYPE, TABLET]], [/(shield[\w ]+) b/i
        // Nvidia Shield Tablets
        ], [MODEL, [VENDOR, "Nvidia"], [TYPE, TABLET]], [/(sprint) (\w+)/i
        // Sprint Phones
        ], [VENDOR, MODEL, [TYPE, MOBILE]], [/(kin\.[onetw]{3})/i
        // Microsoft Kin
        ], [[MODEL, /\./g, " "], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i
        // Zebra
        ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [
        ///////////////////
        // SMARTTVS
        ///////////////////
        /smart-tv.+(samsung)/i
        // Samsung
        ], [VENDOR, [TYPE, SMARTTV]], [/hbbtv.+maple;(\d+)/i], [[MODEL, /^/, "SmartTV"], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i
        // LG SmartTV
        ], [[VENDOR, LG], [TYPE, SMARTTV]], [/(apple) ?tv/i
        // Apple TV
        ], [VENDOR, [MODEL, APPLE + " TV"], [TYPE, SMARTTV]], [/crkey/i
        // Google Chromecast
        ], [[MODEL, CHROME + "cast"], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [/droid.+aft(\w+)( bui|\))/i
        // Fire TV
        ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [/\(dtv[\);].+(aquos)/i, /(aquos-tv[\w ]+)\)/i
        // Sharp
        ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]], [/(bravia[\w ]+)( bui|\))/i
        // Sony
        ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [/(mitv-\w{5}) bui/i
        // Xiaomi
        ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [/Hbbtv.*(technisat) (.*);/i
        // TechniSAT
        ], [VENDOR, MODEL, [TYPE, SMARTTV]], [/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,
        // Roku
        /hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i
        // HbbTV devices
        ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i
        // SmartTV from Unidentified Vendors
        ], [[TYPE, SMARTTV]], [
        ///////////////////
        // CONSOLES
        ///////////////////
        /(ouya)/i,
        // Ouya
        /(nintendo) ([wids3utch]+)/i
        // Nintendo
        ], [VENDOR, MODEL, [TYPE, CONSOLE]], [/droid.+; (shield) bui/i
        // Nvidia
        ], [MODEL, [VENDOR, "Nvidia"], [TYPE, CONSOLE]], [/(playstation [345portablevi]+)/i
        // Playstation
        ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [/\b(xbox(?: one)?(?!; xbox))[\); ]/i
        // Microsoft Xbox
        ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [
        ///////////////////
        // WEARABLES
        ///////////////////
        /\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i
        // Samsung Galaxy Watch
        ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [/((pebble))app/i
        // Pebble
        ], [VENDOR, MODEL, [TYPE, WEARABLE]], [/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i
        // Apple Watch
        ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [/droid.+; (glass) \d/i
        // Google Glass
        ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [/droid.+; (wt63?0{2,3})\)/i], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [/(quest( \d| pro)?)/i
        // Oculus Quest
        ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [
        ///////////////////
        // EMBEDDED
        ///////////////////
        /(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i
        // Tesla
        ], [VENDOR, [TYPE, EMBEDDED]], [/(aeobc)\b/i
        // Echo Dot
        ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [
        ////////////////////
        // MIXED (GENERIC)
        ///////////////////
        /droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i
        // Android Phones from Unidentified Vendors
        ], [MODEL, [TYPE, MOBILE]], [/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i
        // Android Tablets from Unidentified Vendors
        ], [MODEL, [TYPE, TABLET]], [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i
        // Unidentifiable Tablet
        ], [[TYPE, TABLET]], [/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i
        // Unidentifiable Mobile
        ], [[TYPE, MOBILE]], [/(android[-\w\. ]{0,9});.+buil/i
        // Generic Android Device
        ], [MODEL, [VENDOR, "Generic"]]],
        engine: [[/windows.+ edge\/([\w\.]+)/i
        // EdgeHTML
        ], [VERSION, [NAME, EDGE + "HTML"]], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i
        // Blink
        ], [VERSION, [NAME, "Blink"]], [/(presto)\/([\w\.]+)/i,
        // Presto
        /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,
        // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna
        /ekioh(flow)\/([\w\.]+)/i,
        // Flow
        /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,
        // KHTML/Tasman/Links
        /(icab)[\/ ]([23]\.[\d\.]+)/i,
        // iCab
        /\b(libweb)/i], [NAME, VERSION], [/rv\:([\w\.]{1,9})\b.+(gecko)/i
        // Gecko
        ], [VERSION, NAME]],
        os: [[
        // Windows
        /microsoft (windows) (vista|xp)/i
        // Windows (iTunes)
        ], [NAME, VERSION], [/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i
        // Windows Phone
        ], [NAME, [VERSION, strMapper, windowsVersionMap]], [/windows nt 6\.2; (arm)/i,
        // Windows RT
        /windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i, /(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i], [[VERSION, strMapper, windowsVersionMap], [NAME, "Windows"]], [
        // iOS/macOS
        /ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,
        // iOS
        /(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i, /cfnetwork\/.+darwin/i], [[VERSION, /_/g, "."], [NAME, "iOS"]], [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+haiku)/i
        // Mac OS
        ], [[NAME, MAC_OS], [VERSION, /_/g, "."]], [
        // Mobile OSes
        /droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i
        // Android-x86/HarmonyOS
        ], [VERSION, NAME], [
        // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS
        /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i, /(blackberry)\w*\/([\w\.]*)/i,
        // Blackberry
        /(tizen|kaios)[\/ ]([\w\.]+)/i,
        // Tizen/KaiOS
        /\((series40);/i
        // Series 40
        ], [NAME, VERSION], [/\(bb(10);/i
        // BlackBerry 10
        ], [VERSION, [NAME, BLACKBERRY]], [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i
        // Symbian
        ], [VERSION, [NAME, "Symbian"]], [/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i
        // Firefox OS
        ], [VERSION, [NAME, FIREFOX + " OS"]], [/web0s;.+rt(tv)/i, /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i
        // WebOS
        ], [VERSION, [NAME, "webOS"]], [/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i
        // watchOS
        ], [VERSION, [NAME, "watchOS"]], [
        // Google Chromecast
        /crkey\/([\d\.]+)/i
        // Google Chromecast
        ], [VERSION, [NAME, CHROME + "cast"]], [/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i
        // Chromium OS
        ], [[NAME, CHROMIUM_OS], VERSION], [
        // Smart TVs
        /panasonic;(viera)/i,
        // Panasonic Viera
        /(netrange)mmh/i,
        // Netrange
        /(nettv)\/(\d+\.[\w\.]+)/i,
        // NetTV
        // Console
        /(nintendo|playstation) ([wids345portablevuch]+)/i,
        // Nintendo/Playstation
        /(xbox); +xbox ([^\);]+)/i,
        // Microsoft Xbox (360, One, X, S, Series X, Series S)
        // Other
        /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,
        // Joli/Palm
        /(mint)[\/\(\) ]?(\w*)/i,
        // Mint
        /(mageia|vectorlinux)[; ]/i,
        // Mageia/VectorLinux
        /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,
        // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire
        /(hurd|linux) ?([\w\.]*)/i,
        // Hurd/Linux
        /(gnu) ?([\w\.]*)/i,
        // GNU
        /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,
        // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly
        /(haiku) (\w+)/i
        // Haiku
        ], [NAME, VERSION], [/(sunos) ?([\w\.\d]*)/i
        // Solaris
        ], [[NAME, "Solaris"], VERSION], [/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,
        // Solaris
        /(aix) ((\d)(?=\.|\)| )[\w\.])*/i,
        // AIX
        /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,
        // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS
        /(unix) ?([\w\.]*)/i
        // UNIX
        ], [NAME, VERSION]]
      };
      var _UAParser = function UAParser2(ua2, extensions) {
        if (_typeof4(ua2) === OBJ_TYPE) {
          extensions = ua2;
          ua2 = undefined$12;
        }
        if (!(this instanceof _UAParser)) {
          return new _UAParser(ua2, extensions).getResult();
        }
        var _navigator = _typeof4(window2) !== UNDEF_TYPE && window2.navigator ? window2.navigator : undefined$12;
        var _ua = ua2 || (_navigator && _navigator.userAgent ? _navigator.userAgent : EMPTY);
        var _uach = _navigator && _navigator.userAgentData ? _navigator.userAgentData : undefined$12;
        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;
        var _isSelfNav = _navigator && _navigator.userAgent == _ua;
        this.getBrowser = function () {
          var _browser = {};
          _browser[NAME] = undefined$12;
          _browser[VERSION] = undefined$12;
          rgxMapper.call(_browser, _ua, _rgxmap.browser);
          _browser[MAJOR] = majorize(_browser[VERSION]);
          if (_isSelfNav && _navigator && _navigator.brave && _typeof4(_navigator.brave.isBrave) == FUNC_TYPE) {
            _browser[NAME] = "Brave";
          }
          return _browser;
        };
        this.getCPU = function () {
          var _cpu = {};
          _cpu[ARCHITECTURE] = undefined$12;
          rgxMapper.call(_cpu, _ua, _rgxmap.cpu);
          return _cpu;
        };
        this.getDevice = function () {
          var _device = {};
          _device[VENDOR] = undefined$12;
          _device[MODEL] = undefined$12;
          _device[TYPE] = undefined$12;
          rgxMapper.call(_device, _ua, _rgxmap.device);
          if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {
            _device[TYPE] = MOBILE;
          }
          if (_isSelfNav && _device[MODEL] == "Macintosh" && _navigator && _typeof4(_navigator.standalone) !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {
            _device[MODEL] = "iPad";
            _device[TYPE] = TABLET;
          }
          return _device;
        };
        this.getEngine = function () {
          var _engine = {};
          _engine[NAME] = undefined$12;
          _engine[VERSION] = undefined$12;
          rgxMapper.call(_engine, _ua, _rgxmap.engine);
          return _engine;
        };
        this.getOS = function () {
          var _os = {};
          _os[NAME] = undefined$12;
          _os[VERSION] = undefined$12;
          rgxMapper.call(_os, _ua, _rgxmap.os);
          if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != "Unknown") {
            _os[NAME] = _uach.platform.replace(/chrome os/i, CHROMIUM_OS).replace(/macos/i, MAC_OS);
          }
          return _os;
        };
        this.getResult = function () {
          return {
            ua: this.getUA(),
            browser: this.getBrowser(),
            engine: this.getEngine(),
            os: this.getOS(),
            device: this.getDevice(),
            cpu: this.getCPU()
          };
        };
        this.getUA = function () {
          return _ua;
        };
        this.setUA = function (ua3) {
          _ua = _typeof4(ua3) === STR_TYPE && ua3.length > UA_MAX_LENGTH ? trim(ua3, UA_MAX_LENGTH) : ua3;
          return this;
        };
        this.setUA(_ua);
        return this;
      };
      _UAParser.VERSION = LIBVERSION;
      _UAParser.BROWSER = enumerize([NAME, VERSION, MAJOR]);
      _UAParser.CPU = enumerize([ARCHITECTURE]);
      _UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);
      _UAParser.ENGINE = _UAParser.OS = enumerize([NAME, VERSION]);
      {
        if (module2.exports) {
          exports2 = module2.exports = _UAParser;
        }
        exports2.UAParser = _UAParser;
      }
      var $2 = _typeof4(window2) !== UNDEF_TYPE && (window2.jQuery || window2.Zepto);
      if ($2 && !$2.ua) {
        var parser = new _UAParser();
        $2.ua = parser.getResult();
        $2.ua.get = function () {
          return parser.getUA();
        };
        $2.ua.set = function (ua2) {
          parser.setUA(ua2);
          var result2 = parser.getResult();
          for (var prop in result2) {
            $2.ua[prop] = result2[prop];
          }
        };
      }
    })((typeof window === "undefined" ? "undefined" : _typeof4(window)) === "object" ? window : commonjsGlobal);
  })(uaParser, uaParser.exports);
  var uaParserExports = uaParser.exports;
  var UAParser = /* @__PURE__ */getDefaultExportFromCjs(uaParserExports);
  var _RuntimeInfoService = /*#__PURE__*/function () {
    "use strict";

    function _RuntimeInfoService2(useragent) {
      _classCallCheck(this, _RuntimeInfoService2);
      this.minFontSize = null;
      if (!String.prototype.replaceAll) {
        String.prototype.replaceAll = function (str, newStr) {
          if (Object.prototype.toString.call(str).toLowerCase() === "[object regexp]") {
            return this.replace(str, newStr);
          }
          return this.replace(new RegExp(str, "g"), newStr);
        };
      }
      this.useragent = useragent || window.navigator.userAgent;
      this.exec();
      this.getPlatformSupportMinFontSize();
    }
    return _createClass(_RuntimeInfoService2, [{
      key: "exec",
      value: function exec() {
        var res = new UAParser(this.useragent).getResult();
        this.deviceType = res.device.type || "desktop";
        this.deviceOS = res.os.name;
        this.deviceBrand = res.device.vendor;
        this.hostApp = getHostApp.call(this);
        this.hostWebview = res.engine.name;
        function getHostApp() {
          var _a3, _b2;
          var loopCount = 5;
          var mostTopWindow = window;
          try {
            while (loopCount-- && mostTopWindow && mostTopWindow !== mostTopWindow.top) {
              mostTopWindow = mostTopWindow.top;
            }
          } catch (err) {
            console.warn('If the iframe subpage has cross domain, you need to set the document in<head> domain = "bilibili.com".');
          }
          var isBilibiliInPC = /bilibili_pc/.test(this.useragent);
          if (isBilibiliInPC) {
            return "Bilibili";
          }
          var isBilibiliInMobile = /BiliApp/.test(this.useragent);
          if (isBilibiliInMobile) {
            var isBilibiliLinkInMobile = /biliLink/.test(this.useragent);
            if (isBilibiliLinkInMobile) {
              return "BilibiliLink";
            }
            return "Bilibili";
          }
          try {
            var isBilibiliLinkInPC = (_b2 = (_a3 = mostTopWindow == null ? void 0 : mostTopWindow.browser) == null ? void 0 : _a3.version) == null ? void 0 : _b2.pc_link;
            if (isBilibiliLinkInPC) {
              return "BilibiliLink";
            }
            return res.browser.name;
          } catch (error) {}
        }
      }
    }, {
      key: "is",
      value: function is(params) {
        var _this28 = this;
        if (!params) {
          return false;
        }
        var entries = Object.entries(_RuntimeInfoService2.getTrueParams(params));
        if (!entries.length) {
          return false;
        }
        return entries.every(function (_ref45) {
          var _ref46 = _slicedToArray(_ref45, 2),
            key = _ref46[0],
            optionList = _ref46[1];
          return check(_this28[key], optionList);
        });
        function check(value, optionList) {
          var formattedValue = value.replaceAll(" ", "").toLowerCase();
          var formattedOptionList = optionList.map(function (option) {
            return option.replaceAll(" ", "").toLowerCase();
          });
          var positiveOptionList = formattedOptionList.filter(function (option) {
            return !/^!/.test(option);
          });
          var negativeOptionList = formattedOptionList.filter(function (option) {
            return /^!/.test(option);
          }).map(function (option) {
            return option.replace(/^!/, "");
          });
          if (negativeOptionList.includes(formattedValue)) {
            return false;
          }
          return positiveOptionList.length ? positiveOptionList.includes(formattedValue) : true;
        }
      }
    }, {
      key: "getPlatformSupportMinFontSize",
      value: function getPlatformSupportMinFontSize() {
        var fontSizeDiv = document.createElement("div");
        fontSizeDiv.style.position = "absolute";
        fontSizeDiv.style.visibility = "hidden";
        fontSizeDiv.innerHTML = "a";
        document.body.appendChild(fontSizeDiv);
        var fontSize = 1;
        var maxLoopLength = 30;
        var isMinFontSize = false;
        var notFindFontSize = false;
        while (!isMinFontSize) {
          fontSizeDiv.style.fontSize = fontSize + "px";
          var currentFontSizeHeight = fontSizeDiv.offsetHeight;
          fontSizeDiv.style.fontSize = fontSize + 1 + "px";
          var nextFontSizeHeight = fontSizeDiv.offsetHeight;
          if (fontSize >= maxLoopLength) {
            isMinFontSize = true;
            notFindFontSize = true;
          } else if (currentFontSizeHeight !== nextFontSizeHeight) {
            isMinFontSize = true;
          } else {
            fontSize++;
          }
        }
        document.body.removeChild(fontSizeDiv);
        !notFindFontSize ? this.minFontSize = fontSize : this.minFontSize = null;
      }
    }], [{
      key: "getTrueParams",
      value: function getTrueParams(params) {
        if (!params) {
          return params;
        }
        return Object.keys(params).reduce(function (trueParams, key) {
          var option = params[key];
          if (!option) {
            return trueParams;
          }
          if (!(typeof option === "string" || Array.isArray(option))) {
            return trueParams;
          }
          if (Array.isArray(option) && !option.length) {
            return trueParams;
          }
          var optionList = option;
          if (typeof option === "string") {
            optionList = [option];
          }
          trueParams[key] = optionList;
          return trueParams;
        }, {});
      }
    }]);
  }();
  _RuntimeInfoService.optionAliasMap = {
    "@BilibiliApp": ["Bilibili", "BilibiliLink"]
  };
  var RuntimeInfoService = _RuntimeInfoService;
  new RuntimeInfoService();
  smoothscroll.polyfill();
  function go2position(type2, targetId) {
    var justify = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
    if (!targetId) return toast$1.error("滚动区无法定位");
    var el = document.querySelector("[data-layer-id=\"".concat(targetId, "\"]"));
    if (!el) return toast$1.error("滚动元素不存在");
    if (type2 === "h5") {
      var scrollTop = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;
      var y2 = el.getBoundingClientRect().top + scrollTop;
      window.scrollTo({
        left: 0,
        top: y2 + justify,
        behavior: "smooth"
      });
    } else {
      var scroll = new SmoothScroll('a[href*="#"]', {
        speed: 1e3,
        justify: justify,
        updateURL: false,
        // Update the URL on scroll
        popstate: false
      });
      scroll.animateScroll(el);
    }
  }
  var biliAppLogin = function biliAppLogin() {
    N$1();
    _$1.callNative({
      method: "auth.login",
      data: {
        type: "default",
        callbackUrl: location.href
      },
      onLogin: function onLogin(data) {
        if (data) {
          if (data.state === 0) {
            console.log("not login, failed, canceled");
          } else {
            console.log("logined");
          }
        } else {
          console.log("failed");
        }
      },
      callback: function callback() {
        console.log("调起登陆窗口");
      }
    });
  };
  var openBiliApp = function openBiliApp() {
    var activityName2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
    var schema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "bilibili://browser/?url=".concat(encodeURIComponent(location.href));
    var universalLink = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : location.href;
    bundleExports.init();
    try {
      bundleExports.openApp({
        schema: schema,
        universalLink: universalLink,
        autoDownload: true,
        onlySchema: false,
        // 传递埋点等额外参数
        extra: "h5awaken=".concat(activityName2)
      });
    } catch (err) {
      console.error("站外唤端失败", err);
    }
  };
  var evoke4login = /*#__PURE__*/function () {
    var _ref47 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee49() {
      var _a3, mid;
      return _regeneratorRuntime().wrap(function _callee49$(_context50) {
        while (1) switch (_context50.prev = _context50.next) {
          case 0:
            _context50.next = 2;
            return getUserInfo();
          case 2:
            _context50.t0 = _a3 = _context50.sent;
            if (!(_context50.t0 == null)) {
              _context50.next = 7;
              break;
            }
            _context50.t1 = void 0;
            _context50.next = 8;
            break;
          case 7:
            _context50.t1 = _a3.mid;
          case 8:
            mid = _context50.t1;
            console.log(mid);
            if (!(isPC && !mid)) {
              _context50.next = 15;
              break;
            }
            openQuickLogin$1();
            return _context50.abrupt("return", false);
          case 15:
            if (!(f$2 && !mid)) {
              _context50.next = 20;
              break;
            }
            biliAppLogin();
            return _context50.abrupt("return", false);
          case 20:
            if (!(!isPC && !f$2)) {
              _context50.next = 25;
              break;
            }
            openBiliApp(activityName$1);
            return _context50.abrupt("return", false);
          case 25:
            if (!(isPC && mid)) {
              _context50.next = 28;
              break;
            }
            toast$1.info("请在客户端中打开页面");
            return _context50.abrupt("return", false);
          case 28:
            return _context50.abrupt("return", true);
          case 29:
          case "end":
            return _context50.stop();
        }
      }, _callee49);
    }));
    return function evoke4login() {
      return _ref47.apply(this, arguments);
    };
  }();
  var responseHandler = function responseHandler(res) {
    var mustLogin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var enableToast = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
    var cusMsg = arguments.length > 3 ? arguments[3] : undefined;
    var code = res.code,
      message = res.message;
    if (code === 0) return Promise.resolve(res);
    if (code === -101) {
      mustLogin && evoke4login();
      if (!mustLogin) return Promise.resolve(res);else return Promise.reject(message || "请先登录");
    }
    if (cusMsg) {
      enableToast && cusMsg && toast$1.info(cusMsg);
    } else {
      enableToast && message && toast$1.info(message);
    }
    return Promise.reject(message || "服务出现一点小问题，请稍后重试");
  };
  var getUserInfo = function getUserInfo() {
    return getUserInfo$2();
  };
  var finishTask = /*#__PURE__*/function () {
    var _ref48 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee50(sid, counter) {
      var res;
      return _regeneratorRuntime().wrap(function _callee50$(_context51) {
        while (1) switch (_context51.prev = _context51.next) {
          case 0:
            _context51.next = 2;
            return baseRequest.request({
              url: "".concat(actApiPrefix$2, "/x/activity/task/send_points"),
              method: "POST",
              data: {
                activity: sid,
                business: counter,
                timestamp: (/* @__PURE__ */new Date()).getTime()
              },
              headers: {
                "Content-Type": "application/x-www-form-urlencoded"
              }
            });
          case 2:
            res = _context51.sent;
            return _context51.abrupt("return", responseHandler(res, true));
          case 4:
          case "end":
            return _context51.stop();
        }
      }, _callee50);
    }));
    return function finishTask(_x60, _x61) {
      return _ref48.apply(this, arguments);
    };
  }();
  var finishReserve = /*#__PURE__*/function () {
    var _ref49 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee51(apptId) {
      var res;
      return _regeneratorRuntime().wrap(function _callee51$(_context52) {
        while (1) switch (_context52.prev = _context52.next) {
          case 0:
            _context52.next = 2;
            return baseRequest.request({
              url: "".concat(actApiPrefix$2, "/x/activity/reserve"),
              method: "POST",
              data: {
                sid: apptId
              },
              headers: {
                "Content-Type": "application/x-www-form-urlencoded"
              }
            });
          case 2:
            res = _context52.sent;
            return _context52.abrupt("return", responseHandler(res, true, true, "预约失败"));
          case 4:
          case "end":
            return _context52.stop();
        }
      }, _callee51);
    }));
    return function finishReserve(_x62) {
      return _ref49.apply(this, arguments);
    };
  }();
  function sleep(timeout2) {
    return new Promise(function (resolve) {
      setTimeout(function () {
        resolve(null);
      }, timeout2);
    });
  }
  function retryRequest(fn2) {
    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      count: 3
    };
    return /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee52() {
      var res,
        retryFn,
        _args53 = arguments;
      return _regeneratorRuntime().wrap(function _callee52$(_context53) {
        while (1) switch (_context53.prev = _context53.next) {
          case 0:
            _context53.next = 2;
            return fn2.apply(void 0, _args53);
          case 2:
            res = _context53.sent;
            if (!(res.code === -101)) {
              _context53.next = 5;
              break;
            }
            return _context53.abrupt("return", res);
          case 5:
            if (!(res.code !== 0 && opts.count >= 1)) {
              _context53.next = 10;
              break;
            }
            _context53.next = 8;
            return sleep(opts.interval || 300);
          case 8:
            retryFn = retryRequest(fn2, _objectSpread(_objectSpread({}, opts), {}, {
              count: opts.count - 1
            }));
            return _context53.abrupt("return", retryFn.apply(void 0, _args53));
          case 10:
            return _context53.abrupt("return", res);
          case 11:
          case "end":
            return _context53.stop();
        }
      }, _callee52);
    }));
  }
  function combineRequest(fn2) {
    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    window.__COMBINE_MAP = window.__COMBINE_MAP || /* @__PURE__ */new Map();
    var combineMap = window.__COMBINE_MAP;
    return function (params) {
      var k2 = JSON.stringify(params);
      var kMap = combineMap.get(opts.name) || {};
      var promise = kMap[k2];
      if (promise) {
        return promise;
      }
      var retryFn = retryRequest(fn2);
      for (var _len2 = arguments.length, others = new Array(_len2 > 1 ? _len2 - 1 : 0), _key11 = 1; _key11 < _len2; _key11++) {
        others[_key11 - 1] = arguments[_key11];
      }
      promise = retryFn.apply(void 0, [params].concat(others));
      kMap[k2] = promise;
      combineMap.set(opts.name, kMap);
      if (opts.timeout) {
        setTimeout(function () {
          delete kMap[k2];
          combineMap.set(fn2, kMap);
        }, opts.timeout);
      }
      return promise;
    };
  }
  var getWatchwordCombine = combineRequest(getWatchword, {
    name: "getWatchword",
    timeout: 500
  });
  var bindWatchwordCombine = combineRequest(bindWatchword, {
    name: "bindWatchword",
    timeout: 500
  });
  function getWatchword(_x63) {
    return _getWatchword.apply(this, arguments);
  }
  function _getWatchword() {
    _getWatchword = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee76(params) {
      var res;
      return _regeneratorRuntime().wrap(function _callee76$(_context77) {
        while (1) switch (_context77.prev = _context77.next) {
          case 0:
            _context77.next = 2;
            return baseRequest.request({
              url: "".concat(actApiPrefix$2, "/x/fission/activity/watchword"),
              method: "GET",
              params: params,
              credentials: "include"
            });
          case 2:
            res = _context77.sent;
            return _context77.abrupt("return", responseHandler(res, false, false));
          case 4:
          case "end":
            return _context77.stop();
        }
      }, _callee76);
    }));
    return _getWatchword.apply(this, arguments);
  }
  function bindWatchword(_x64) {
    return _bindWatchword.apply(this, arguments);
  }
  function _bindWatchword() {
    _bindWatchword = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee77(params) {
      var res;
      return _regeneratorRuntime().wrap(function _callee77$(_context78) {
        while (1) switch (_context78.prev = _context78.next) {
          case 0:
            _context78.next = 2;
            return baseRequest.request({
              url: "".concat(actApiPrefix$2, "/x/fission/bind/watchword/mid"),
              method: "POST",
              params: params,
              credentials: "include"
            });
          case 2:
            res = _context78.sent;
            return _context78.abrupt("return", responseHandler(res, false, false));
          case 4:
          case "end":
            return _context78.stop();
        }
      }, _callee77);
    }));
    return _bindWatchword.apply(this, arguments);
  }
  var dist = {
    exports: {}
  };
  (function (module2, exports2) {
    !function (t2, e2) {
      module2.exports = e2();
    }(window, function () {
      return (r2 = {}, t2.m = e2 = [function (t3, e3, r3) {
        t3.exports = r3(3);
      }, function (t3, e3, r3) {
        var n2 = r3(4),
          o2 = r3(5),
          i2 = r3(6);
        t3.exports = function (t4) {
          return n2(t4) || o2(t4) || i2();
        };
      }, function (t3, e3) {
        function r3(t4) {
          return (r3 = "function" == typeof Symbol && "symbol" == _typeof4(Symbol.iterator) ? function (t5) {
            return _typeof4(t5);
          } : function (t5) {
            return t5 && "function" == typeof Symbol && t5.constructor === Symbol && t5 !== Symbol.prototype ? "symbol" : _typeof4(t5);
          })(t4);
        }
        function n2(e4) {
          return "function" == typeof Symbol && "symbol" === r3(Symbol.iterator) ? t3.exports = n2 = function n2(t4) {
            return r3(t4);
          } : t3.exports = n2 = function n2(t4) {
            return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : r3(t4);
          }, n2(e4);
        }
        t3.exports = n2;
      }, function (t3, e3, r3) {
        var n2 = function (t4) {
          var e4,
            r4 = Object.prototype,
            n3 = r4.hasOwnProperty,
            o2 = "function" == typeof Symbol ? Symbol : {},
            i2 = o2.iterator || "@@iterator",
            a2 = o2.asyncIterator || "@@asyncIterator",
            u2 = o2.toStringTag || "@@toStringTag";
          function c2(t5, e5, r5, n4) {
            var o3 = e5 && e5.prototype instanceof g2 ? e5 : g2,
              i3 = Object.create(o3.prototype),
              a3 = new R2(n4 || []);
            return i3._invoke = function (t6, e6, r6) {
              var n5 = f2;
              return function (o4, i4) {
                if (n5 === d2) throw new Error("Generator is already running");
                if (n5 === h2) {
                  if ("throw" === o4) throw i4;
                  return L2();
                }
                for (r6.method = o4, r6.arg = i4;;) {
                  var a4 = r6.delegate;
                  if (a4) {
                    var u3 = S2(a4, r6);
                    if (u3) {
                      if (u3 === p2) continue;
                      return u3;
                    }
                  }
                  if ("next" === r6.method) r6.sent = r6._sent = r6.arg;else if ("throw" === r6.method) {
                    if (n5 === f2) throw n5 = h2, r6.arg;
                    r6.dispatchException(r6.arg);
                  } else "return" === r6.method && r6.abrupt("return", r6.arg);
                  n5 = d2;
                  var c3 = s2(t6, e6, r6);
                  if ("normal" === c3.type) {
                    if (n5 = r6.done ? h2 : l2, c3.arg === p2) continue;
                    return {
                      value: c3.arg,
                      done: r6.done
                    };
                  }
                  "throw" === c3.type && (n5 = h2, r6.method = "throw", r6.arg = c3.arg);
                }
              };
            }(t5, r5, a3), i3;
          }
          function s2(t5, e5, r5) {
            try {
              return {
                type: "normal",
                arg: t5.call(e5, r5)
              };
            } catch (t6) {
              return {
                type: "throw",
                arg: t6
              };
            }
          }
          t4.wrap = c2;
          var f2 = "suspendedStart",
            l2 = "suspendedYield",
            d2 = "executing",
            h2 = "completed",
            p2 = {};
          function g2() {}
          function y2() {}
          function E2() {}
          var _2 = {};
          _2[i2] = function () {
            return this;
          };
          var v2 = Object.getPrototypeOf,
            w2 = v2 && v2(v2(I2([])));
          w2 && w2 !== r4 && n3.call(w2, i2) && (_2 = w2);
          var b2 = E2.prototype = g2.prototype = Object.create(_2);
          function m2(t5) {
            ["next", "throw", "return"].forEach(function (e5) {
              t5[e5] = function (t6) {
                return this._invoke(e5, t6);
              };
            });
          }
          function O2(t5) {
            var e5;
            this._invoke = function (r5, o3) {
              function i3() {
                return new Promise(function (e6, i4) {
                  !function e7(r6, o4, i5, a3) {
                    var u3 = s2(t5[r6], t5, o4);
                    if ("throw" !== u3.type) {
                      var c3 = u3.arg,
                        f3 = c3.value;
                      return f3 && "object" == _typeof4(f3) && n3.call(f3, "__await") ? Promise.resolve(f3.__await).then(function (t6) {
                        e7("next", t6, i5, a3);
                      }, function (t6) {
                        e7("throw", t6, i5, a3);
                      }) : Promise.resolve(f3).then(function (t6) {
                        c3.value = t6, i5(c3);
                      }, function (t6) {
                        return e7("throw", t6, i5, a3);
                      });
                    }
                    a3(u3.arg);
                  }(r5, o3, e6, i4);
                });
              }
              return e5 = e5 ? e5.then(i3, i3) : i3();
            };
          }
          function S2(t5, r5) {
            var n4 = t5.iterator[r5.method];
            if (n4 === e4) {
              if (r5.delegate = null, "throw" === r5.method) {
                if (t5.iterator["return"] && (r5.method = "return", r5.arg = e4, S2(t5, r5), "throw" === r5.method)) return p2;
                r5.method = "throw", r5.arg = new TypeError("The iterator does not provide a 'throw' method");
              }
              return p2;
            }
            var o3 = s2(n4, t5.iterator, r5.arg);
            if ("throw" === o3.type) return r5.method = "throw", r5.arg = o3.arg, r5.delegate = null, p2;
            var i3 = o3.arg;
            return i3 ? i3.done ? (r5[t5.resultName] = i3.value, r5.next = t5.nextLoc, "return" !== r5.method && (r5.method = "next", r5.arg = e4), r5.delegate = null, p2) : i3 : (r5.method = "throw", r5.arg = new TypeError("iterator result is not an object"), r5.delegate = null, p2);
          }
          function T2(t5) {
            var e5 = {
              tryLoc: t5[0]
            };
            1 in t5 && (e5.catchLoc = t5[1]), 2 in t5 && (e5.finallyLoc = t5[2], e5.afterLoc = t5[3]), this.tryEntries.push(e5);
          }
          function x2(t5) {
            var e5 = t5.completion || {};
            e5.type = "normal", delete e5.arg, t5.completion = e5;
          }
          function R2(t5) {
            this.tryEntries = [{
              tryLoc: "root"
            }], t5.forEach(T2, this), this.reset(true);
          }
          function I2(t5) {
            if (t5) {
              var r5 = t5[i2];
              if (r5) return r5.call(t5);
              if ("function" == typeof t5.next) return t5;
              if (!isNaN(t5.length)) {
                var o3 = -1,
                  a3 = function r6() {
                    for (; ++o3 < t5.length;) if (n3.call(t5, o3)) return r6.value = t5[o3], r6.done = false, r6;
                    return r6.value = e4, r6.done = true, r6;
                  };
                return a3.next = a3;
              }
            }
            return {
              next: L2
            };
          }
          function L2() {
            return {
              value: e4,
              done: true
            };
          }
          return y2.prototype = b2.constructor = E2, E2.constructor = y2, E2[u2] = y2.displayName = "GeneratorFunction", t4.isGeneratorFunction = function (t5) {
            var e5 = "function" == typeof t5 && t5.constructor;
            return !!e5 && (e5 === y2 || "GeneratorFunction" === (e5.displayName || e5.name));
          }, t4.mark = function (t5) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(t5, E2) : (t5.__proto__ = E2, u2 in t5 || (t5[u2] = "GeneratorFunction")), t5.prototype = Object.create(b2), t5;
          }, t4.awrap = function (t5) {
            return {
              __await: t5
            };
          }, m2(O2.prototype), O2.prototype[a2] = function () {
            return this;
          }, t4.AsyncIterator = O2, t4.async = function (e5, r5, n4, o3) {
            var i3 = new O2(c2(e5, r5, n4, o3));
            return t4.isGeneratorFunction(r5) ? i3 : i3.next().then(function (t5) {
              return t5.done ? t5.value : i3.next();
            });
          }, m2(b2), b2[u2] = "Generator", b2[i2] = function () {
            return this;
          }, b2.toString = function () {
            return "[object Generator]";
          }, t4.keys = function (t5) {
            var e5 = [];
            for (var r5 in t5) e5.push(r5);
            return e5.reverse(), function r6() {
              for (; e5.length;) {
                var n4 = e5.pop();
                if (n4 in t5) return r6.value = n4, r6.done = false, r6;
              }
              return r6.done = true, r6;
            };
          }, t4.values = I2, R2.prototype = {
            constructor: R2,
            reset: function reset(t5) {
              if (this.prev = 0, this.next = 0, this.sent = this._sent = e4, this.done = false, this.delegate = null, this.method = "next", this.arg = e4, this.tryEntries.forEach(x2), !t5) for (var r5 in this) "t" === r5.charAt(0) && n3.call(this, r5) && !isNaN(+r5.slice(1)) && (this[r5] = e4);
            },
            stop: function stop() {
              this.done = true;
              var t5 = this.tryEntries[0].completion;
              if ("throw" === t5.type) throw t5.arg;
              return this.rval;
            },
            dispatchException: function dispatchException(t5) {
              if (this.done) throw t5;
              var r5 = this;
              function o3(n4, o4) {
                return u3.type = "throw", u3.arg = t5, r5.next = n4, o4 && (r5.method = "next", r5.arg = e4), !!o4;
              }
              for (var i3 = this.tryEntries.length - 1; 0 <= i3; --i3) {
                var a3 = this.tryEntries[i3],
                  u3 = a3.completion;
                if ("root" === a3.tryLoc) return o3("end");
                if (a3.tryLoc <= this.prev) {
                  var c3 = n3.call(a3, "catchLoc"),
                    s3 = n3.call(a3, "finallyLoc");
                  if (c3 && s3) {
                    if (this.prev < a3.catchLoc) return o3(a3.catchLoc, true);
                    if (this.prev < a3.finallyLoc) return o3(a3.finallyLoc);
                  } else if (c3) {
                    if (this.prev < a3.catchLoc) return o3(a3.catchLoc, true);
                  } else {
                    if (!s3) throw new Error("try statement without catch or finally");
                    if (this.prev < a3.finallyLoc) return o3(a3.finallyLoc);
                  }
                }
              }
            },
            abrupt: function abrupt(t5, e5) {
              for (var r5 = this.tryEntries.length - 1; 0 <= r5; --r5) {
                var o3 = this.tryEntries[r5];
                if (o3.tryLoc <= this.prev && n3.call(o3, "finallyLoc") && this.prev < o3.finallyLoc) {
                  var i3 = o3;
                  break;
                }
              }
              i3 && ("break" === t5 || "continue" === t5) && i3.tryLoc <= e5 && e5 <= i3.finallyLoc && (i3 = null);
              var a3 = i3 ? i3.completion : {};
              return a3.type = t5, a3.arg = e5, i3 ? (this.method = "next", this.next = i3.finallyLoc, p2) : this.complete(a3);
            },
            complete: function complete(t5, e5) {
              if ("throw" === t5.type) throw t5.arg;
              return "break" === t5.type || "continue" === t5.type ? this.next = t5.arg : "return" === t5.type ? (this.rval = this.arg = t5.arg, this.method = "return", this.next = "end") : "normal" === t5.type && e5 && (this.next = e5), p2;
            },
            finish: function finish(t5) {
              for (var e5 = this.tryEntries.length - 1; 0 <= e5; --e5) {
                var r5 = this.tryEntries[e5];
                if (r5.finallyLoc === t5) return this.complete(r5.completion, r5.afterLoc), x2(r5), p2;
              }
            },
            "catch": function _catch(t5) {
              for (var e5 = this.tryEntries.length - 1; 0 <= e5; --e5) {
                var r5 = this.tryEntries[e5];
                if (r5.tryLoc === t5) {
                  var n4 = r5.completion;
                  if ("throw" === n4.type) {
                    var o3 = n4.arg;
                    x2(r5);
                  }
                  return o3;
                }
              }
              throw new Error("illegal catch attempt");
            },
            delegateYield: function delegateYield(t5, r5, n4) {
              return this.delegate = {
                iterator: I2(t5),
                resultName: r5,
                nextLoc: n4
              }, "next" === this.method && (this.arg = e4), p2;
            }
          }, t4;
        }(t3.exports);
        try {
          regeneratorRuntime = n2;
        } catch (t4) {
          Function("r", "regeneratorRuntime = r")(n2);
        }
      }, function (t3, e3) {
        t3.exports = function (t4) {
          if (Array.isArray(t4)) {
            for (var e4 = 0, r3 = new Array(t4.length); e4 < t4.length; e4++) r3[e4] = t4[e4];
            return r3;
          }
        };
      }, function (t3, e3) {
        t3.exports = function (t4) {
          if (Symbol.iterator in Object(t4) || "[object Arguments]" === Object.prototype.toString.call(t4)) return Array.from(t4);
        };
      }, function (t3, e3) {
        t3.exports = function () {
          throw new TypeError("Invalid attempt to spread non-iterable instance");
        };
      }, function (t3, e3, r3) {
        r3.r(e3);
        var n2 = r3(0),
          o2 = r3.n(n2),
          i2 = r3(1),
          a2 = r3.n(i2),
          u2 = r3(2),
          c2 = r3.n(u2),
          s2 = navigator.userAgent.toLowerCase(),
          f2 = -1 < s2.indexOf("bbq-ios"),
          l2 = -1 < s2.indexOf("bbq-android"),
          d2 = {
            _bridge: null,
            _initIOS: function _initIOS(t4) {
              var e4 = this;
              !function (t5) {
                if (window.WebViewJavascriptBridge) return t5(window.WebViewJavascriptBridge);
                if (window.WVJBCallbacks) return window.WVJBCallbacks.push(t5);
                window.WVJBCallbacks = [t5];
                var e5 = document.createElement("iframe");
                e5.style.display = "none", e5.src = "https://__bridge_loaded__", document.documentElement.appendChild(e5), setTimeout(function () {
                  document.documentElement.removeChild(e5);
                }, 0);
              }(function (r4) {
                e4._init(r4), t4();
              });
            },
            _initAndroid: function _initAndroid(t4) {
              var e4 = this;
              window.WebViewJavascriptBridge ? (this._init(window.WebViewJavascriptBridge), t4()) : document.addEventListener("WebViewJavascriptBridgeReady", function () {
                e4._init(window.WebViewJavascriptBridge), t4();
              }, {
                once: true
              });
            },
            _init: function _init(t4) {
              this._bridge = t4;
            },
            initBridge: function initBridge() {
              var t4 = this;
              return new Promise(function (e4) {
                t4._bridge ? e4() : f2 ? t4._initIOS(e4) : t4._initAndroid(e4);
              });
            },
            callBridge: function callBridge(t4, e4, r4) {
              if (console.info(t4, e4), this._bridge) {
                if ("string" != typeof t4) throw {
                  code: -1,
                  message: "bridge name must be a string"
                };
                if ("object" !== c2()(e4) || "function" != typeof r4) throw {
                  code: -1,
                  message: "bridge arguments are invalid"
                };
                this._bridge.callHandler(t4, e4, function (t5) {
                  if ("string" == typeof t5) try {
                    t5 = JSON.parse(t5);
                  } catch (e5) {
                    throw console.error(e5), {
                      code: -2,
                      message: "unexpected error in parsing json",
                      data: t5
                    };
                  }
                  "object" === c2()(t5) && r4(t5);
                });
              }
            }
          },
          h2 = d2.initBridge.bind(d2),
          p2 = d2.callBridge.bind(d2),
          g2 = {
            GET_USER_INFO: "auth.getUserInfo",
            GET_ACCESS_TOKEN: "auth.getAccessToken",
            GET_BASE_INFO: "auth.getBaseInfo",
            GET_PUSH_STATUS: "func.push.status",
            CHECK_BRIDGE_ENABLE: "auth.checkBridgeEnable",
            GET_ALL_BRIDGE: "auth.getAllBridge",
            VIEW_GOBACK: "view.goBack",
            VIEW_CLOSE: "view.closeBrowser",
            VIEW_TOAST: "view.toast",
            VIEW_REFRESH: "view.refresh",
            SHARE: "func.share",
            SET_SHARE: "func.setShare",
            VIEW_TITLE: "view.setTitle",
            ROUTE: "func.route",
            ROUTE_LOGIN: "route.login",
            ROUTE_EDIT_USER: "route.editUserInfo",
            ROUTE_RECORD: "route.record",
            ROUTE_RECOMMEND: "route.recommend",
            TEEN_STATUS: "auth.getTeenable",
            TEEN_ON: "func.childrenOn",
            TEEN_OFF: "func.childrenOff",
            NET_ENV: "auth.getNetEnv",
            VIP_DRAW_RESULT: "func.vipDraw.result",
            REPORT_RESULT: "func.report.success",
            COPY: "func.copy",
            FIX_WINDOW: "func.fixWindow",
            IS_LONG_SCREEN: "view.isLongScreen",
            CLOUD_EDITOR_SYNC: "func.cloud-editor.sync",
            CREATION_CENTER_SWITCH_TAB_VISIBLE: "func.creation-center.switchTabVisible"
          },
          y2 = {
            500: "调用失败",
            501: "参数解析错误"
          },
          E2 = {
            BEFORE_INIT: 0,
            V1: 1,
            V2: 2
          },
          _2 = [],
          v2 = ["auth.getAllBridge"],
          w2 = ["auth.getAccessToken", "auth.getUserInfo", "view.goBack", "view.closeBrowser", "route.login", "func.route", "view.toast", "func.share", "func.childrenOn", "func.childrenOff"],
          b2 = E2.BEFORE_INIT;
        function m2(t4) {
          var e4 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
            r4 = function (t5, e5) {
              return t5 === g2.SHARE && (e5.pics = e5.pic), {
                bridgeName: t5,
                data: e5
              };
            }(t4, e4);
          return t4 = r4.bridgeName, e4 = r4.data, new Promise(function (r5, n3) {
            b2 === E2.BEFORE_INIT ? function (t5, e5, r6) {
              _2.push([t5, e5, r6]);
            }(t4, e4, r5) : ((b2 === E2.V1 && -1 === w2.indexOf(t4) || b2 === E2.V2 && -1 === v2.indexOf(t4)) && n3({
              code: 404,
              message: "".concat(t4, " not found")
            }), p2(t4, e4, r5));
          }).then(function (r5) {
            var n3 = {};
            if (b2 === E2.V1 ? n3 = {
              code: 0,
              data: r5
            } : b2 === E2.V2 && (n3 = r5), console.log("version:", b2, t4, "response", n3), 0 !== n3.code) throw {
              code: n3.code,
              message: y2[n3.code],
              params: e4,
              response: n3.data
            };
            return n3.data || {};
          })["catch"](function (t5) {
            throw console.error(t5), t5;
          });
        }
        var O2 = f2 || l2;
        window.bbqBrowser && window.bbqBrowser.__bbq_init__ || (window.bbqBrowser = {
          version: function () {
            var t4 = navigator.userAgent;
            return {
              mobile: /AppleWebKit.*Mobile.*/i.test(t4),
              ios: /\(i[^]+( U)? CPU.+Mac OS X/i.test(t4),
              android: /Android/i.test(t4) || /Linux/i.test(t4),
              windowsphone: /Windows Phone/i.test(t4),
              iPhone: /iPhone/i.test(t4),
              iPad: /iPad/i.test(t4),
              webApp: !/Safari/i.test(t4),
              MicroMessenger: /MicroMessenger/i.test(t4),
              weibo: /Weibo/i.test(t4),
              uc: /UCBrowser/i.test(t4),
              qq: /MQQBrowser/i.test(t4),
              baidu: /Baidu/i.test(t4),
              mqq: /QQ\/([\d\.]+)/i.test(t4),
              mbaidu: /baiduboxapp/i.test(t4),
              iqiyi: /iqiyi/i.test(t4),
              QQLive: /QQLive/i.test(t4),
              Safari: function () {
                var t5 = navigator.userAgent;
                return !(!/ OS \d/.test(t5) || ~t5.indexOf("CriOS") || t5.indexOf("Mozilla") || !/Safari\/[\d\.]+$/.test(t5));
              }(),
              Youku: /youku/i.test(t4),
              chrome: /CriOS/i.test(t4),
              CMDC: /CMDC/i.test(t4),
              BiliApp: /BiliApp/i.test(t4),
              xiaomiqjs: /MiuiQuickSearchBox/.test(t4),
              baiduspider: /Baiduspider/.test(t4),
              dianping: /dianping/.test(t4),
              QingApp: /bbq-/.test(t4)
            };
          }(),
          language: (navigator.browserLanguage || navigator.language).toLowerCase(),
          __bbq_init__: true
        });
        var S2 = {
          user: {
            info: function info() {
              return m2(g2.GET_USER_INFO);
            },
            accessKey: function accessKey() {
              return m2(g2.GET_ACCESS_TOKEN);
            },
            pushStatus: function pushStatus() {
              return m2(g2.GET_PUSH_STATUS);
            }
          },
          view: {
            toast: function toast(t4) {
              return m2(g2.VIEW_TOAST, {
                msg: t4
              });
            },
            setTitle: function setTitle(t4) {
              return m2(g2.VIEW_TITLE, {
                title: t4
              });
            },
            setShare: function setShare(t4) {
              return m2(g2.SET_SHARE, t4);
            },
            callShare: function callShare(t4) {
              return m2(g2.SHARE, t4);
            },
            close: function close() {
              return m2(g2.VIEW_CLOSE);
            },
            back: function back() {
              return m2(g2.VIEW_GOBACK);
            },
            androidFixWindow: function androidFixWindow() {
              var t4 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1;
              return m2(g2.FIX_WINDOW, {
                status: t4
              });
            },
            refresh: function refresh() {
              return m2(g2.VIEW_REFRESH);
            },
            isLongScreen: function isLongScreen() {
              return m2(g2.IS_LONG_SCREEN);
            }
          },
          route: {
            scheme: function scheme(t4) {
              return m2(g2.ROUTE, {
                route: t4
              });
            },
            login: function login() {
              return m2(g2.ROUTE_LOGIN);
            },
            editUser: function editUser() {
              return m2(g2.ROUTE_EDIT_USER);
            },
            record: function record() {
              return m2(g2.ROUTE_RECORD);
            },
            recommend: function recommend() {
              return m2(g2.ROUTE_RECOMMEND);
            }
          },
          teen: {
            status: function status() {
              return m2(g2.TEEN_STATUS);
            },
            on: function on() {
              return m2(g2.TEEN_ON);
            },
            off: function off() {
              return m2(g2.TEEN_OFF);
            }
          },
          util: {
            compareVersion: function compareVersion(t4, e4) {
              if ("string" != typeof t4 || "string" != typeof e4) throw new Error("versionCompare", " invalid args");
              if (t4 === e4) return 0;
              for (var r4 = t4.split("."), n3 = e4.split("."), o3 = 0; o3 < Math.max(r4.length, n3.length); o3++) {
                var i3 = Number(r4[o3] || 0),
                  a3 = Number(n3[o3] || 0);
                if (i3 !== a3) return a3 < i3 ? 1 : -1;
              }
              return 0;
            },
            netEnv: function netEnv() {
              return m2(g2.NET_ENV);
            },
            checkBridge: function checkBridge(t4) {
              return m2(g2.CHECK_BRIDGE_ENABLE, {
                bridge: t4
              });
            },
            allBridges: function allBridges() {
              return m2(g2.GET_ALL_BRIDGE);
            },
            getBaseInfo: function getBaseInfo() {
              return m2(g2.GET_BASE_INFO);
            },
            isV2: function isV2() {
              return !window.__RazorOldVersion__;
            },
            copy: function copy(t4) {
              return m2(g2.COPY, {
                text: t4
              });
            },
            inQing: window.bbqBrowser.version.QingApp
          },
          award: {
            result: function result(t4) {
              return m2(g2.VIP_DRAW_RESULT, t4);
            }
          },
          report: {
            reportSuccess: function reportSuccess(t4) {
              return m2(g2.REPORT_RESULT, t4);
            }
          },
          cloudEditor: {
            sync: function sync() {
              return m2(g2.CLOUD_EDITOR_SYNC);
            }
          },
          creationCenter: {
            switchTabVisible: function switchTabVisible() {
              for (var t4 = arguments.length, e4 = new Array(t4), r4 = 0; r4 < t4; r4++) e4[r4] = arguments[r4];
              return m2.apply(void 0, [g2.CREATION_CENTER_SWITCH_TAB_VISIBLE].concat(e4));
            }
          },
          initBridge: function initBridge() {
            var t4, e4;
            return o2.a.async(function (r4) {
              for (;;) switch (r4.prev = r4.next) {
                case 0:
                  return r4.next = 2, o2.a.awrap(h2());
                case 2:
                  return b2 = E2.V1, r4.next = 5, o2.a.awrap(new Promise(function (t5) {
                    p2("auth.getAccessToken", {}, function (e5) {
                      t5(!e5.hasOwnProperty("code"));
                    });
                  }));
                case 5:
                  if (t4 = r4.sent, !(window.__RazorOldVersion__ = t4)) {
                    r4.next = 11;
                    break;
                  }
                  b2 = E2.V1, r4.next = 23;
                  break;
                case 11:
                  return b2 = E2.V2, r4.prev = 12, r4.next = 15, o2.a.awrap(m2("auth.getAllBridge").then(function (t5) {
                    return t5.bridge;
                  }));
                case 15:
                  e4 = r4.sent, v2 = a2()(e4), r4.next = 23;
                  break;
                case 19:
                  throw r4.prev = 19, r4.t0 = r4["catch"](12), window.__RazorOldeVersion__ = false, r4.t0;
                case 23:
                  for (window.__RazorOldeVersion__ = true; _2.length;) p2.apply(void 0, a2()(_2.shift()));
                case 25:
                case "end":
                  return r4.stop();
              }
            }, null, null, [[12, 19]]);
          }
        };
        S2.callBridge = m2, S2.ios = f2, S2.android = l2, S2.inApp = O2, e3["default"] = S2;
      }], t2.c = r2, t2.d = function (e3, r3, n2) {
        t2.o(e3, r3) || Object.defineProperty(e3, r3, {
          enumerable: true,
          get: n2
        });
      }, t2.r = function (t3) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t3, Symbol.toStringTag, {
          value: "Module"
        }), Object.defineProperty(t3, "__esModule", {
          value: true
        });
      }, t2.t = function (e3, r3) {
        if (1 & r3 && (e3 = t2(e3)), 8 & r3) return e3;
        if (4 & r3 && "object" == _typeof4(e3) && e3 && e3.__esModule) return e3;
        var n2 = /* @__PURE__ */Object.create(null);
        if (t2.r(n2), Object.defineProperty(n2, "default", {
          enumerable: true,
          value: e3
        }), 2 & r3 && "string" != typeof e3) for (var o2 in e3) t2.d(n2, o2, function (t3) {
          return e3[t3];
        }.bind(null, o2));
        return n2;
      }, t2.n = function (e3) {
        var r3 = e3 && e3.__esModule ? function () {
          return e3["default"];
        } : function () {
          return e3;
        };
        return t2.d(r3, "a", r3), r3;
      }, t2.o = function (t3, e3) {
        return Object.prototype.hasOwnProperty.call(t3, e3);
      }, t2.p = "", t2(t2.s = 7))["default"];
      function t2(n2) {
        if (r2[n2]) return r2[n2].exports;
        var o2 = r2[n2] = {
          i: n2,
          l: false,
          exports: {}
        };
        return e2[n2].call(o2.exports, o2, o2.exports, t2), o2.l = true, o2.exports;
      }
      var e2, r2;
    });
  })(dist);
  var distExports = dist.exports;
  if (distExports.inApp) {
    distExports.initBridge();
  }
  var UA$1 = window.navigator.userAgent;
  var isWechat$1 = /MicroMessenger/i.test(UA$1);
  var isQQ$1 = /QQ\/([\d.]+)/.test(UA$1);
  var isIos$2 = /\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(UA$1);
  var isIphone$1 = /(iPhone\sOS)\s([\d_]+)/i.test(UA$1);
  var isAndroid$1 = /(Android);?[\s/]+([\d.]+)?/i.test(UA$1);
  var isUCBrowser$1 = /ucweb|UCBrowser/i.test(UA$1);
  var isQQMBrowser$1 = /MQQBrowser/i.test(UA$1) && !isWechat$1 && !isQQ$1;
  var ucVersion$1 = isUCBrowser$1 ? getVersion$1(/UCBrowser\/(\d+\.\d*)/i) : 0;
  var isUC$1 = isUCBrowser$1 && (ucVersion$1 > 10.2 && isIphone$1 || ucVersion$1 > 9.7 && isAndroid$1);
  var databus = {
    shareConfig: {
      title: document.title || "哔哩哔哩弹幕视频网",
      desc: "来自哔哩哔哩",
      link: window.location.href,
      pics: "https://i0.hdslb.com/bfs/activity-plat/static/20210428/b8f2b74d0482aed61472c7065dc1ed56/ZhmqfNne5w.png",
      type: "web",
      isMpc: true,
      biz_type: 3,
      font_size: 100,
      change_share: false,
      bili: {
        text_area: ""
      },
      weibo: {},
      qq: {},
      qzone: {},
      weixin: {},
      weixin_moment: {},
      baidu_tieba: {},
      success: function success(info) {
        console.log("success: ", info);
      },
      cancel: function cancel(info) {
        console.log("cancel: ", info);
      }
    },
    channel: [{
      name: "weibo",
      title: "新浪微博",
      link: "https://service.weibo.com/share/share.php?appkey=2841902482&language=zh_cn&",
      toApp: ["kSinaWeibo", "SinaWeibo", 11],
      wxApi: "onMenuShareWeibo"
    }, {
      name: "qzone",
      title: "QQ空间",
      link: "https://h5.qzone.qq.com/q/qzs/open/connect/widget/mobile/qzshare/index.html?",
      toApp: ["kQZone", "QZone", 3],
      wxApi: "onMenuShareQZone",
      scheme: isIos$2 ? "mqqapi://share/to_fri?file_type=news&src_type=web&version=1&generalpastboard=1&shareType=1&cflag=1&objectlocation=pasteboard&callback_type=scheme&callback_name=QQ41AF4B2A" : "mqqapi://share/to_qzone?src_type=app&version=1&file_type=news&req_type=1"
    }, {
      name: "qq",
      title: "QQ好友",
      link: "https://connect.qq.com/widget/shareqq/index.html?",
      toApp: ["kQQ", "QQ", 4],
      wxApi: "onMenuShareQQ",
      scheme: "mqqapi://share/to_fri?src_type=web&version=1&file_type=news"
    }, {
      name: "baidu_tieba",
      title: "百度贴吧",
      link: "https://tieba.baidu.com/f/commit/share/openShareApi?"
    }, {
      name: "bili",
      title: "动态",
      link: "javascript:void(0)"
    }, {
      name: "weixin",
      title: "微信好友",
      toApp: ["kWeixin", "WechatFriends", 1],
      wxApi: "onMenuShareAppMessage"
    }, {
      name: "weixin_moment",
      title: "朋友圈",
      wxApi: "onMenuShareTimeline",
      toApp: ["kWeixinFriend", "WechatTimeline", 8]
    }, {
      name: "more",
      title: "其它"
    }, {
      name: "copy_link",
      type: "COPY",
      title: "复制链接"
    }],
    wechatConfig: {
      wxconfigappid: "wx108457cda8a1b9f9",
      timestamp: Date.now() / 1e3,
      jsApiList: ["showOptionMenu", "onMenuShareTimeline", "onMenuShareAppMessage", "onMenuShareQQ", "onMenuShareWeibo", "onMenuShareQZone"],
      nonceStr: getRandomString(32)
    },
    browser: {
      isWechat: isWechat$1,
      isQQ: isQQ$1,
      isUC: isUC$1,
      isIos: isIos$2,
      isUCBrowser: isUCBrowser$1,
      isQQMBrowser: isQQMBrowser$1,
      ucVersion: ucVersion$1,
      isIphone: isIphone$1,
      isAndroid: isAndroid$1,
      isIpod: /(iPod)(.*OS\s([\d_]+))?/i.test(UA$1),
      isIpad: /(iPad).*OS\s([\d_]+)/i.test(UA$1),
      isPad: /PAD|pad/i.test(UA$1),
      isQZone: /Qzone\//i.test(UA$1),
      isBaiduApp: /baiduboxapp/i.test(UA$1),
      isSafari: isIos$2 && /Safari\//i.test(UA$1) && !isQQ$1 && !isUCBrowser$1 && !isQQMBrowser$1,
      qqVersion: isQQMBrowser$1 ? getVersion$1(/MQQBrowser\/(\d+\.\d*)/i) : 0,
      isBiliApp: /BiliApp\/\d+/i.test(UA$1),
      isBiliComicApp: /BiliComic\/\d+/i.test(UA$1),
      isBbqApp: distExports.inApp,
      biliVersion: UA$1.match(/BiliApp\/([^ ]*)/) ? Number(UA$1.match(/BiliApp\/([^ ]*)/)[1]) || 0 : 0,
      hasMangaMallSdk: /mallSdkVersion/i.test(UA$1),
      biliMangaMallSdkVersion: UA$1.match(/mallSdkVersion\/([^ ]*)/) ? Number(UA$1.match(/mallSdkVersion\/([^ ]*)/)[1]) || 0 : 0
    }
  };
  function getSpmid$1() {
    if (window.activity && window.activity.spmId) {
      return window.activity.spmId;
    }
    var metas = document.getElementsByTagName("meta");
    for (var i2 = 0; i2 < metas.length; i2++) {
      if (metas[i2].getAttribute("name") === "spm_prefix") {
        return metas[i2].getAttribute("content");
      }
    }
    return "888.1";
  }
  var isBiliHttps$1 = location.href.indexOf("bilihttps") === 0;
  var isLoad$1 = false;
  var loadQueue$1 = [];
  function loadReportScript$1(_cb) {
    loadQueue$1.push(_cb);
    if (isLoad$1) {
      return;
    }
    window.reportMsgObj = {};
    window.reportConfig = {
      sample: 1,
      scrollTracker: false,
      msgObjects: "reportMsgObj",
      errorTracker: true
    };
    var reportScript = document.createElement("script");
    reportScript.src = "".concat(isBiliHttps$1 ? "bilihttps:" : "", "//s1.hdslb.com/bfs/seed/log/report/log-reporter.js");
    isLoad$1 = true;
    reportScript.onload = function () {
      isLoad$1 = true;
      loadQueue$1.forEach(function (cb) {
        return cb && cb();
      });
      loadQueue$1 = [];
    };
    reportScript.onerror = function () {
      isLoad$1 = false;
    };
    document.getElementsByTagName("body")[0].appendChild(reportScript);
  }
  function parseParamToObj$2(obj) {
    if (!obj) return {};
    var str = obj.search;
    if (!str) {
      str = obj.hash;
    }
    var index2 = str.indexOf("?");
    str = str.substring(index2 + 1);
    var result2 = {};
    var paramArray = str.split("&");
    for (var i2 = 0, len = paramArray.length; i2 < len; i2++) {
      var pair = paramArray[i2].split("=");
      result2[pair[0]] = pair[1];
    }
    return result2;
  }
  var ua$1 = window.navigator.userAgent;
  var buvidMatch$1 = ua$1.match(/Buvid\/([a-zA-Z0-9]+)/);
  var appBuvid$1 = buvidMatch$1 && buvidMatch$1.length > 0 ? buvidMatch$1[1] : "";
  var searchObj$1 = parseParamToObj$2(window.location);
  var spmid$1 = getSpmid$1();
  function logger$2(type2, modulePath, msg) {
    var msgData = msg || {};
    if (Object.prototype.toString.call(msgData) !== "[object Object]") {
      msgData = {};
    }
    try {
      setTimeout(function () {
        var data = {
          spm_id: spmid$1 + "." + modulePath + "." + type2,
          msg: JSON.stringify(_assign$2({
            appBuvid: appBuvid$1,
            form: searchObj$1.msource || searchObj$1.from_spmid || searchObj$1.spm_id_from || searchObj$1.topic_from || searchObj$1.from
          }, msgData))
        };
        if (!window.reportObserver || !window.reportObserver.reportCustomData) {
          loadReportScript$1(function () {
            return window.reportObserver.reportCustomData("click", data);
          });
        } else {
          window.reportObserver.reportCustomData("click", data);
        }
      }, 0);
    } catch (e2) {}
  }
  var __assign$6 = globalThis && globalThis.__assign || function () {
    __assign$6 = Object.assign || function (t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return __assign$6.apply(this, arguments);
  };
  var __awaiter$1 = globalThis && globalThis.__awaiter || function (thisArg, _arguments, P2, generator) {
    function adopt(value) {
      return value instanceof P2 ? value : new P2(function (resolve) {
        resolve(value);
      });
    }
    return new (P2 || (P2 = Promise))(function (resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e2) {
          reject(e2);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e2) {
          reject(e2);
        }
      }
      function step(result2) {
        result2.done ? resolve(result2.value) : adopt(result2.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
  var __generator$1 = globalThis && globalThis.__generator || function (thisArg, body2) {
    var _2 = {
        label: 0,
        sent: function sent() {
          if (t2[0] & 1) throw t2[1];
          return t2[1];
        },
        trys: [],
        ops: []
      },
      f2,
      y2,
      t2,
      g2;
    return g2 = {
      next: verb(0),
      "throw": verb(1),
      "return": verb(2)
    }, typeof Symbol === "function" && (g2[Symbol.iterator] = function () {
      return this;
    }), g2;
    function verb(n2) {
      return function (v2) {
        return step([n2, v2]);
      };
    }
    function step(op) {
      if (f2) throw new TypeError("Generator is already executing.");
      while (g2 && (g2 = 0, op[0] && (_2 = 0)), _2) try {
        if (f2 = 1, y2 && (t2 = op[0] & 2 ? y2["return"] : op[0] ? y2["throw"] || ((t2 = y2["return"]) && t2.call(y2), 0) : y2.next) && !(t2 = t2.call(y2, op[1])).done) return t2;
        if (y2 = 0, t2) op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _2.label++;
            return {
              value: op[1],
              done: false
            };
          case 5:
            _2.label++;
            y2 = op[1];
            op = [0];
            continue;
          case 7:
            op = _2.ops.pop();
            _2.trys.pop();
            continue;
          default:
            if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _2 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _2.label = op[1];
              break;
            }
            if (op[0] === 6 && _2.label < t2[1]) {
              _2.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _2.label < t2[2]) {
              _2.label = t2[2];
              _2.ops.push(op);
              break;
            }
            if (t2[2]) _2.ops.pop();
            _2.trys.pop();
            continue;
        }
        op = body2.call(thisArg, _2);
      } catch (e2) {
        op = [6, e2];
        y2 = 0;
      } finally {
        f2 = t2 = 0;
      }
      if (op[0] & 5) throw op[1];
      return {
        value: op[0] ? op[1] : void 0,
        done: true
      };
    }
  };
  var isUat$1 = window.location.href.indexOf("uat=1") >= 0;
  var isPre = window.location.href.indexOf("pre=1") >= 0;
  var envPrefix = isUat$1 ? "uat-" : isPre ? "pre-" : "";
  var actApiPrefix = "".concat(window.location.protocol, "//").concat(envPrefix, "api.bilibili.com");
  var dynamicConfig = {};
  var doudiImg = "";
  var dynamic = false;
  var openDynamicDomain = window.location.href.indexOf("dynamicUrl=true") >= 0;
  function getDynamicUrl() {
    var _a3;
    var isOpen = openDynamicDomain;
    if (isOpen) {
      return request$1({
        url: "".concat(actApiPrefix, "/x/fission/share/url"),
        method: "GET",
        params: {
          activity_uid: (_a3 = window.location.href.split("/").pop()) === null || _a3 === void 0 ? void 0 : _a3.split(".html")[0]
        }
      }).then(function (res) {
        var _a4;
        if (!((_a4 = res.data) === null || _a4 === void 0 ? void 0 : _a4.url)) {
          dynamic = false;
          doudiImg = res.data.degraded_url;
        } else {
          dynamic = true;
          dynamicConfig = {
            link: res.data.url
          };
        }
        return res;
      });
    } else {
      return Promise.resolve();
    }
  }
  function protocolReg$1(url2) {
    if (url2 === void 0) {
      url2 = "";
    }
    if (url2.indexOf("https") == -1) {
      url2 = url2.replace(/(\w+:)?\/\//, "https://");
    }
    return url2;
  }
  function getRandomString(l2) {
    var n2 = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");
    var e2 = "";
    for (var g2 = 0; g2 < l2; g2 += 1) {
      var h2 = Math.floor(62 * Math.random());
      e2 += n2[h2];
    }
    return e2;
  }
  function getScript(url2, callback, options) {
    if (url2 === void 0) {
      url2 = "";
    }
    if (options === void 0) {
      options = {};
    }
    var script = document.createElement("script");
    if (typeof callback === "function") {
      script.onload = callback;
    }
    script.id = options.id || "";
    script.src = url2;
    document.body.appendChild(script);
  }
  function getJsonp(url2, data, callback) {
    var jsonpKey = "jsonpCallback_" + getRandomString(20);
    var formatParam = generateQueryString$1(__assign$6(__assign$6({}, data), {
      callback: jsonpKey
    }));
    window[jsonpKey] = function (res) {
      console.log("jsonpKey: ", jsonpKey);
      callback && callback(res);
      window[jsonpKey] = null;
      var getKeyDom = document.getElementById(jsonpKey);
      if (getKeyDom) {
        document.body.removeChild(getKeyDom);
      }
    };
    var getUrl = "".concat(url2).concat(url2.indexOf("?") >= 0 ? "&" : "?").concat(formatParam);
    getScript(getUrl, void 0, {
      id: jsonpKey
    });
  }
  function getList(key, shareChannelQueue) {
    var channels;
    if (shareChannelQueue) {
      var keyMap_1 = {
        "qq": "qq",
        "q_zone": "qzone",
        "weixin": "weixin",
        "sina": "weibo",
        "weixin_monment": "weixin_moment",
        "dynamic": "bili",
        "copy": "copy_link",
        "generic": "more"
      };
      channels = shareChannelQueue.map(function (channelName) {
        return databus.channel.find(function (item) {
          return item.name === keyMap_1[channelName];
        });
      });
      var tieba = databus.channel.find(function (item) {
        return item.name === "baidu_tieba";
      });
      channels.push(tieba);
    } else {
      channels = databus.channel;
    }
    return channels.filter(function (item) {
      return item[key];
    });
  }
  function getItem(name) {
    var item = databus.channel.filter(function (obj) {
      return obj.name === name;
    });
    return item.length > 0 ? item[0] : {};
  }
  function setChannelKey$1(url2, type2, noBbid) {
    if (noBbid === void 0) {
      noBbid = false;
    }
    var hashSplit = url2.split("#");
    var hash = hashSplit[1] ? "#".concat(hashSplit[1]) : "";
    var searchSplit = (hashSplit[0] || "").split("?");
    var query2 = (searchSplit[1] || "").split("&");
    var shareQuery = __assign$6(__assign$6({}, arrtoObj(query2)), {
      share_source: type2,
      share_medium: getMedium(),
      bbid: noBbid ? "" : getCookie$2("buvid3") || "",
      ts: (/* @__PURE__ */new Date()).getTime()
    });
    var paramStr = generateQueryString$1(shareQuery);
    return "".concat(searchSplit[0], "?").concat(paramStr).concat(hash);
  }
  function generateQueryString$1(obj) {
    return Object.keys(obj).map(function (key) {
      return "".concat(key, "=").concat(encodeURIComponent(obj[key] || ""));
    }).join("&");
  }
  function getCookie$2(name) {
    var arr2 = [];
    var reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
    if (arr2 = document.cookie.match(reg)) return unescape(arr2[2]);else return null;
  }
  function getObjectPath(obj, path) {
    var pathArr = path.split(".");
    var keyName = "";
    var newObj = obj;
    while (newObj && pathArr.length > 0) {
      keyName = pathArr.shift();
      newObj = newObj[keyName];
    }
    return newObj;
  }
  function formatShare(share) {
    return __awaiter$1(this, void 0, void 0, function () {
      var shareConfig, title, desc, link, pics, type2, base, formattedConfig, channels;
      return __generator$1(this, function (_a3) {
        shareConfig = databus.shareConfig;
        title = share.title, desc = share.desc, link = share.link, pics = share.pics, type2 = share.type;
        base = {
          title: title || shareConfig.title,
          desc: desc || shareConfig.desc,
          link: link || shareConfig.link,
          pics: pics || shareConfig.pics,
          type: type2 || shareConfig.type
        };
        formattedConfig = __assign$6(__assign$6({}, shareConfig), share);
        channels = ["weibo", "qzone", "qq", "baidu_tieba", "bili", "weixin", "weixin_moment"];
        channels.forEach(function (channelName) {
          if (channelName === "bili") {
            formattedConfig[channelName] = __assign$6(__assign$6({}, formatAddr(base)), formatAddr(formattedConfig[channelName]));
          } else {
            formattedConfig[channelName] = __assign$6(__assign$6(__assign$6({}, formatAddr(base)), formatAddr(formattedConfig[channelName])), dynamicConfig);
          }
        });
        return [2, formattedConfig];
      });
    });
  }
  function formatAddr(share) {
    if (share === void 0) {
      share = {};
    }
    if (share.link && /bilibili\.com/.test(share.link)) {
      share.link = protocolReg$1(share.link);
    }
    if (share.pics) {
      share.pics = protocolReg$1(share.pics);
    }
    return share;
  }
  function getVersion$1(rel) {
    var matchVersion = window.navigator.appVersion.match(rel);
    return matchVersion ? matchVersion[1] : 0;
  }
  function setSize$1(font) {
    if (font === void 0) {
      font = 100;
    }
    var result2 = "";
    var doc = document.documentElement;
    var uiWidth = 750;
    var bili = uiWidth / font;
    var screenWidth = doc.offsetWidth;
    if (screenWidth >= uiWidth) {
      result2 = "".concat(font, "px");
    } else if (screenWidth <= 320) {
      result2 = "".concat(320 / bili, "px");
    } else {
      result2 = "".concat(screenWidth / bili, "px");
    }
    return result2;
  }
  function createDiv(html, style, container) {
    var div = document.createElement("div");
    div.innerHTML = html;
    for (var key in style) {
      div.style[key] = style[key];
    }
    if (container) {
      container.appendChild(div);
      return;
    }
    document.body.appendChild(div);
  }
  function dialogAddClass($el, name) {
    if ($el.className.indexOf(name) > -1) return;
    return $el.className = $el.className + " " + name;
  }
  function dialogDeleteClass($el, name) {
    return $el.className = $el.className.replace(" ".concat(name), "");
  }
  function deleteDOM($el, ts) {
    setTimeout(function () {
      $el && $el.parentNode && $el.parentNode.parentNode && $el.parentNode.parentNode.removeChild($el.parentNode);
    }, ts);
  }
  function showWarning(warns) {
    var toast2 = document.getElementsByClassName("center-toast")[0];
    if (!toast2) {
      var html = '\n      <div class="center-toast">\n        <div class="info">'.concat(warns, "</div>\n      </div>\n    ");
      var div = document.createElement("div");
      div.style.fontSize = setSize$1();
      div.innerHTML = html;
      document.body.appendChild(div);
      toast2 = document.getElementsByClassName("center-toast")[0];
      deleteDOM(toast2, 2e3);
    }
  }
  function openAppByScheme(scheme) {
    if (databus.browser.isIos) {
      window.location.href = scheme;
    } else {
      var iframe_1 = document.createElement("iframe");
      iframe_1.style.display = "none";
      iframe_1.src = scheme;
      document.body.appendChild(iframe_1);
      setTimeout(function () {
        iframe_1 && iframe_1.parentNode && iframe_1.parentNode.removeChild(iframe_1);
      }, 2e3);
    }
  }
  function arrtoObj(arr2) {
    var obj = new Object();
    if (arr2.length == 1 && arr2[0] == "") {
      return {};
    } else {
      for (var x2 in arr2) {
        var split2 = arr2[x2].split("=");
        obj[split2[0]] = split2[1];
      }
      return obj;
    }
  }
  function getMedium() {
    if (databus.browser.isIphone) {
      return "iphone";
    } else if (databus.browser.isIpad) {
      return "ipad";
    } else if (databus.browser.isAndroid) {
      return "android";
    } else {
      return "h5";
    }
  }
  function preloadImages(srcArr) {
    var loadImage = function loadImage(src) {
      return new Promise(function (resolve, reject) {
        var img = new Image();
        img.onload = function () {
          resolve(img);
        };
        img.onerror = function (err) {
          reject(err);
        };
        img.src = src;
      });
    };
    return Promise.all(srcArr.map(loadImage));
  }
  function jumpLogin() {
    if (databus.browser.isBiliApp) {
      try {
        _$1.callNative({
          method: "auth.login",
          data: {
            type: "default",
            callbackUrl: window.location.href
          }
        });
      } catch (err) {
        showWarning(err.message || err.msg);
      }
    } else {
      window.location.href = "https://passport.bilibili.com/login?gourl=" + window.location.href;
    }
  }
  var typeMap = {
    "wechat": "weixin",
    "weichat": "weixin",
    "sina": "weibo",
    "bili": "biliDynamic",
    "bilidynamic": "biliDynamic",
    "biliim": "biliIm",
    "baidu_tieba": "tieba",
    "weixin_moment": "weixin_monment",
    "weixin_moments": "weixin_monment"
  };
  function loggerChannel(platform) {
    var type2 = "";
    if (typeMap[platform.toLowerCase()]) {
      type2 = typeMap[platform.toLowerCase()];
    } else {
      type2 = platform.toLowerCase();
    }
    logger$2("share", "0.0", {
      type: type2
    });
  }
  function sourceType(platform) {
    return typeMap[platform] ? typeMap[platform] : platform;
  }
  /**
   * tua-body-scroll-lock v1.2.1
   * (c) 2021 Evinma, BuptStEve
   * @license MIT
   */
  var isServer = function isServer2() {
    return typeof window === "undefined";
  };
  var detectOS = function detectOS2(ua2) {
    ua2 = ua2 || navigator.userAgent;
    var ipad = /(iPad).*OS\s([\d_]+)/.test(ua2);
    var iphone = !ipad && /(iPhone\sOS)\s([\d_]+)/.test(ua2);
    var android = /(Android);?[\s/]+([\d.]+)?/.test(ua2);
    var ios = iphone || ipad;
    return {
      ios: ios,
      android: android
    };
  };
  function getEventListenerOptions(options) {
    if (isServer()) return false;
    if (!options) {
      throw new Error("options must be provided");
    }
    var isSupportOptions = false;
    var listenerOptions = {
      get passive() {
        isSupportOptions = true;
        return;
      }
    };
    var noop = function noop2() {};
    var testEvent = "__TUA_BSL_TEST_PASSIVE__";
    window.addEventListener(testEvent, noop, listenerOptions);
    window.removeEventListener(testEvent, noop, listenerOptions);
    var capture = options.capture;
    return isSupportOptions ? options : typeof capture !== "undefined" ? capture : false;
  }
  var lockedNum = 0;
  var initialClientY = 0;
  var initialClientX = 0;
  var unLockCallback = null;
  var documentListenerAdded = false;
  var lockedElements = [];
  var eventListenerOptions = getEventListenerOptions({
    passive: false
  });
  var supportsNativeSmoothScroll = !isServer() && "scrollBehavior" in document.documentElement.style;
  var setOverflowHiddenPc = function setOverflowHiddenPc2() {
    var $body = document.body;
    var bodyStyle = Object.assign({}, $body.style);
    var scrollBarWidth = window.innerWidth - $body.clientWidth;
    $body.style.overflow = "hidden";
    $body.style.boxSizing = "border-box";
    $body.style.paddingRight = "".concat(scrollBarWidth, "px");
    return function () {
      ["overflow", "boxSizing", "paddingRight"].forEach(function (x2) {
        $body.style[x2] = bodyStyle[x2] || "";
      });
    };
  };
  var setOverflowHiddenMobile = function setOverflowHiddenMobile2() {
    var $html = document.documentElement;
    var $body = document.body;
    var scrollTop = $html.scrollTop || $body.scrollTop;
    var htmlStyle = Object.assign({}, $html.style);
    var bodyStyle = Object.assign({}, $body.style);
    $html.style.height = "100%";
    $html.style.overflow = "hidden";
    $body.style.top = "-".concat(scrollTop, "px");
    $body.style.width = "100%";
    $body.style.height = "auto";
    $body.style.position = "fixed";
    $body.style.overflow = "hidden";
    return function () {
      $html.style.height = htmlStyle.height || "";
      $html.style.overflow = htmlStyle.overflow || "";
      ["top", "width", "height", "overflow", "position"].forEach(function (x2) {
        $body.style[x2] = bodyStyle[x2] || "";
      });
      supportsNativeSmoothScroll ? window.scrollTo({
        top: scrollTop,
        // @ts-ignore
        behavior: "instant"
      }) : window.scrollTo(0, scrollTop);
    };
  };
  var preventDefault = function preventDefault2(event2) {
    if (!event2.cancelable) return;
    event2.preventDefault();
  };
  var handleScroll = function handleScroll2(event2, targetElement) {
    if (targetElement) {
      var scrollTop = targetElement.scrollTop,
        scrollLeft = targetElement.scrollLeft,
        scrollWidth = targetElement.scrollWidth,
        scrollHeight = targetElement.scrollHeight,
        clientWidth = targetElement.clientWidth,
        clientHeight = targetElement.clientHeight;
      var clientX = event2.targetTouches[0].clientX - initialClientX;
      var clientY = event2.targetTouches[0].clientY - initialClientY;
      var isVertical = Math.abs(clientY) > Math.abs(clientX);
      var isOnTop = clientY > 0 && scrollTop === 0;
      var isOnLeft = clientX > 0 && scrollLeft === 0;
      var isOnRight = clientX < 0 && scrollLeft + clientWidth + 1 >= scrollWidth;
      var isOnBottom = clientY < 0 && scrollTop + clientHeight + 1 >= scrollHeight;
      if (isVertical && (isOnTop || isOnBottom) || !isVertical && (isOnLeft || isOnRight)) {
        return preventDefault(event2);
      }
    }
    event2.stopPropagation();
    return true;
  };
  var lock = function lock2(targetElement) {
    if (isServer()) return;
    if (detectOS().ios) {
      if (targetElement) {
        var elementArray = Array.isArray(targetElement) ? targetElement : [targetElement];
        elementArray.forEach(function (element) {
          if (element && lockedElements.indexOf(element) === -1) {
            element.ontouchstart = function (event2) {
              initialClientY = event2.targetTouches[0].clientY;
              initialClientX = event2.targetTouches[0].clientX;
            };
            element.ontouchmove = function (event2) {
              if (event2.targetTouches.length !== 1) return;
              handleScroll(event2, element);
            };
            lockedElements.push(element);
          }
        });
      }
      if (!documentListenerAdded) {
        document.addEventListener("touchmove", preventDefault, eventListenerOptions);
        documentListenerAdded = true;
      }
    } else if (lockedNum <= 0) {
      unLockCallback = detectOS().android ? setOverflowHiddenMobile() : setOverflowHiddenPc();
    }
    lockedNum += 1;
  };
  var unlock = function unlock2(targetElement) {
    if (isServer()) return;
    lockedNum -= 1;
    if (lockedNum > 0) return;
    if (!detectOS().ios && typeof unLockCallback === "function") {
      unLockCallback();
      return;
    }
    if (targetElement) {
      var elementArray = Array.isArray(targetElement) ? targetElement : [targetElement];
      elementArray.forEach(function (element) {
        var index2 = lockedElements.indexOf(element);
        if (index2 !== -1) {
          element.ontouchmove = null;
          element.ontouchstart = null;
          lockedElements.splice(index2, 1);
        }
      });
    }
    if (documentListenerAdded) {
      document.removeEventListener("touchmove", preventDefault, eventListenerOptions);
      documentListenerAdded = false;
    }
  };
  var urls = {
    nav: "https://api.bilibili.com/x/web-interface/nav",
    vcShare: "https://api.vc.bilibili.com/dynamic_repost/v1/dynamic_repost/share",
    vcCreateDraw: "https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/create_draw",
    createDyn: "https://api.bilibili.com/x/dynamic/feed/create/dyn?csrf=".concat(getCookie$2("bili_jct"))
  };
  _default.on("SHARE_H5_NEXT_MODIFY_DYNAMIC_URLS", function (u2) {
    var vcShare = u2.vcShare,
      vcCreateDraw = u2.vcCreateDraw,
      nav = u2.nav,
      createDyn = u2.createDyn;
    if (nav) {
      urls.nav = nav;
    }
    if (vcShare) {
      urls.vcShare = vcShare;
    }
    if (vcCreateDraw) {
      urls.vcCreateDraw = vcCreateDraw;
    }
    if (createDyn) {
      urls.createDyn = createDyn;
    }
  });
  function biliDialog(share) {
    var dialogDom = document.getElementsByClassName("share-dynamic-dialog")[0];
    var useCard = share.bili.type !== "image";
    initBiliDialog();
    function initBiliDialog() {
      var font_size = share.font_size,
        templateEl = share.templateEl;
      var _a3 = share.bili,
        title = _a3.title,
        pics = _a3.pics,
        desc = _a3.desc,
        text_area = _a3.text_area;
      if (!dialogDom) {
        var dialog = '\n        <div class="share-dynamic-dialog mobile">\n          <div class="sdd-head">\n            <span>分享至动态</span>\n            <i class="sdd-close"></i>\n          </div>\n          <div class="sdd-body-wrap">\n            <textarea class="sdd-input" placeholder="说点什么...">'.concat(text_area, "</textarea>\n            ").concat(useCard ? '<div class="sdd-card">\n                <div class="name">@'.concat(title, "</div>\n                <div class=\"sdd-card-content\">\n                  <div class=\"pic\" style=\"background-image: url('").concat(pics, "')\"></div>\n                  <div class=\"title\">").concat(title, '</div>\n                  <div class="summary">').concat(desc, "</div>\n                </div>\n              </div>") : "<div class=\"sdd-card-pic-wrapper\">\n                <div class=\"pic\" style=\"background-image: url('".concat(pics, "')\"></div>\n              </div>"), '\n          </div>\n          <div class="sdd-action-bar">\n            <div class="sdd-submit">发布</div>\n            <div class="sdd-input-num">233</div>\n          </div>\n        </div>\n      ');
        createDiv(dialog, {
          fontSize: setSize$1(font_size)
        }, templateEl);
        dialogDom = document.getElementsByClassName("share-dynamic-dialog")[0];
      }
      getUserId();
      biliDialogShow(dialogDom, true);
      bindDialogEvent();
    }
    function biliDialogShow($el, status) {
      if (status) {
        setTimeout(function () {
          lock(dialogDom);
          dialogAddClass($el, "active");
        }, 300);
      } else {
        unlock(dialogDom);
        dialogDeleteClass($el, "active");
      }
    }
    function bindDialogEvent() {
      var close = document.getElementsByClassName("sdd-close")[0];
      var input = document.getElementsByClassName("sdd-input")[0];
      var num = document.getElementsByClassName("sdd-input-num")[0];
      var submit = document.getElementsByClassName("sdd-submit")[0];
      console.log(share);
      var _a3 = share.bili,
        title = _a3.title,
        pics = _a3.pics,
        desc = _a3.desc,
        link = _a3.link,
        text_area = _a3.text_area;
      var share_from_topic_name = share.share_from_topic_name,
        share_from_topic_id = share.share_from_topic_id;
      var text = text_area;
      close.addEventListener("click", function () {
        biliDialogShow(dialogDom, false);
        deleteDOM(dialogDom, 200);
      });
      input.addEventListener("input", function (ev) {
        var target = ev.target;
        text = target.value;
        var length = 233 - target.textLength;
        num.innerHTML = "" + length;
        length < 0 ? (dialogAddClass(num, "warning"), dialogAddClass(submit, "disable")) : (dialogDeleteClass(num, "warning"), dialogDeleteClass(submit, "disable"));
      });
      var postCardDynamic = function postCardDynamic() {
        return request$1({
          method: "post",
          url: urls.createDyn,
          headers: {
            "Content-Type": "application/json"
          },
          data: {
            dyn_req: {
              content: {
                contents: [{
                  raw_text: text,
                  type: 1,
                  biz_id: ""
                }]
              },
              scene: 6,
              sketch_type: 2048,
              sketch: {
                title: title,
                desc_text: desc,
                biz_type: share.biz_type || 3,
                cover_url: pics,
                target_url: setChannelKey$1(link, "biliDynamic")
              },
              topic: {
                id: share_from_topic_id,
                name: share_from_topic_name,
                from_source: "dyn.web.list",
                from_topic_id: share_from_topic_id
              }
            }
          }
        });
      };
      var postCreateDraw = function postCreateDraw() {
        return preloadImages(pics ? [pics] : []).then(function (imgs) {
          return request$1({
            method: "post",
            url: urls.vcCreateDraw,
            headers: {
              "Content-Type": "application/x-www-form-urlencoded"
            },
            timeout: 6e3,
            data: {
              biz: 3,
              category: 3,
              type: 0,
              title: "",
              tags: "",
              description: text,
              pictures: JSON.stringify(imgs.map(function (img) {
                return {
                  img_src: img.src,
                  img_width: img.width,
                  img_height: img.height,
                  img_size: 500
                };
              }))
            }
          });
        });
      };
      submit.addEventListener("click", function () {
        if (document.querySelector(".sdd-submit.disable")) return;
        var success = share.success,
          cancel = share.cancel;
        var postPromise = useCard ? postCardDynamic : postCreateDraw;
        postPromise().then(function () {
          if (typeof success === "function") {
            success({
              platform: "biliDynamic"
            });
          }
          biliDialogShow(dialogDom, false);
          deleteDOM(dialogDom, 200);
          showSuccess();
        })["catch"](function (error) {
          if (typeof cancel === "function") {
            cancel(error);
          }
          switch (+error.code) {
            case -6:
              jumpLogin();
              break;
            default:
              showWarning(error.message || error.msg || "服务器出问题啦～请稍后在分享吧～");
          }
        });
      });
    }
    function getUserId() {
      request$1({
        method: "get",
        url: urls.nav
      }).then(function (res) {
        if (res.code == 0) {
          res.data.mid;
        } else if (res.code === -101) {
          jumpLogin();
        }
      })["catch"](function (err) {
        if (err.code === -101) {
          jumpLogin();
        }
      });
    }
    function showSuccess() {
      var dialogSuccess = document.getElementsByClassName("share-success-dialog")[0];
      if (!dialogSuccess) {
        var html = '\n        <div class="share-success-mask on"></div>\n        <div class="share-success-dialog mobile">\n          <div class="suc-img"></div>\n          <div class="info">分享成功</div>\n          <div class="hint">请在客户端中查看~</div>\n          <div class="dialog-close ">确定</div>\n        </div>\n      ';
        createDiv(html, {
          fontSize: setSize$1(share.font_size)
        }, share.templateEl);
        dialogSuccess = document.getElementsByClassName("share-success-dialog")[0];
      }
      biliDialogShow(dialogSuccess, true);
      bindSuccess(dialogSuccess);
    }
    function bindSuccess(dialogSuccess) {
      var mask = document.getElementsByClassName("share-success-mask")[0];
      var close = document.getElementsByClassName("dialog-close")[0];
      close.addEventListener("click", function () {
        biliDialogShow(dialogSuccess, false);
        setTimeout(function () {
          dialogDeleteClass(mask, "on");
          deleteDOM(dialogSuccess, 200);
        }, 100);
      });
    }
  }
  var Base64 = {
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    encode: function encode(a2) {
      var b2,
        c2,
        d2,
        e2,
        f2,
        g2,
        h2,
        i2 = "",
        j2 = 0;
      for (a2 = Base64._utf8_encode(a2); j2 < a2.length;) b2 = a2.charCodeAt(j2++), c2 = a2.charCodeAt(j2++), d2 = a2.charCodeAt(j2++), e2 = b2 >> 2, f2 = (3 & b2) << 4 | c2 >> 4, g2 = (15 & c2) << 2 | d2 >> 6, h2 = 63 & d2, isNaN(c2) ? g2 = h2 = 64 : isNaN(d2) && (h2 = 64), i2 = i2 + this._keyStr.charAt(e2) + this._keyStr.charAt(f2) + this._keyStr.charAt(g2) + this._keyStr.charAt(h2);
      return i2;
    },
    decode: function decode(a2) {
      var b2,
        c2,
        d2,
        e2,
        f2,
        g2,
        h2,
        i2 = "",
        j2 = 0;
      for (a2 = a2.replace(/[^A-Za-z0-9\+\/\=]/g, ""); j2 < a2.length;) e2 = this._keyStr.indexOf(a2.charAt(j2++)), f2 = this._keyStr.indexOf(a2.charAt(j2++)), g2 = this._keyStr.indexOf(a2.charAt(j2++)), h2 = this._keyStr.indexOf(a2.charAt(j2++)), b2 = e2 << 2 | f2 >> 4, c2 = (15 & f2) << 4 | g2 >> 2, d2 = (3 & g2) << 6 | h2, i2 += String.fromCharCode(b2), 64 != g2 && (i2 += String.fromCharCode(c2)), 64 != h2 && (i2 += String.fromCharCode(d2));
      return i2 = Base64._utf8_decode(i2);
    },
    _utf8_encode: function _utf8_encode(a2) {
      a2 = a2.replace(/\r\n/g, "\n");
      for (var b2 = "", c2 = 0; c2 < a2.length; c2++) {
        var d2 = a2.charCodeAt(c2);
        d2 < 128 ? b2 += String.fromCharCode(d2) : d2 > 127 && d2 < 2048 ? (b2 += String.fromCharCode(d2 >> 6 | 192), b2 += String.fromCharCode(63 & d2 | 128)) : (b2 += String.fromCharCode(d2 >> 12 | 224), b2 += String.fromCharCode(d2 >> 6 & 63 | 128), b2 += String.fromCharCode(63 & d2 | 128));
      }
      return b2;
    },
    _utf8_decode: function _utf8_decode(a2) {
      for (var b2 = "", c2 = 0, d2 = 0, c22 = 0, c3; c2 < a2.length;) d2 = a2.charCodeAt(c2), d2 < 128 ? (b2 += String.fromCharCode(d2), c2++) : d2 > 191 && d2 < 224 ? (c22 = a2.charCodeAt(c2 + 1), b2 += String.fromCharCode((31 & d2) << 6 | 63 & c22), c2 += 2) : (c22 = a2.charCodeAt(c2 + 1), c3 = a2.charCodeAt(c2 + 2), b2 += String.fromCharCode((15 & d2) << 12 | (63 & c22) << 6 | 63 & c3), c2 += 3);
      return b2;
    }
  };
  function ucqqBrowser(share, browser2, way, callback) {
    if (browser2 === "UC") setShareUC(way, callback);
    if (browser2 === "QQ") {
      document.getElementById("qqApi") ? setShareQQ(way, callback) : getScript("https://jsapi.qq.com/get?api=app.share", function () {
        window.console.log("have jsapi.qq.com api");
        setShareQQ(way, callback);
      }, {
        id: "qqApi"
      });
    }
    function setShareUC(type2, callback2) {
      var _a3 = share[type2 === "weixin_moment" ? "weixin_moment" : type2],
        pics = _a3.pics,
        title = _a3.title,
        desc = _a3.desc,
        link = _a3.link;
      var isIos2 = databus.browser.isIos;
      var linkType = sourceType(type2);
      var _link = setChannelKey$1(link, linkType);
      var toApp = getObjectPath(getItem(type2), "toApp.".concat(isIos2 ? 0 : 1));
      window.console.log("toApp", toApp);
      if (toApp === "QZone") {
        var scheme = generateQueryString$1({
          share_id: "1101685683",
          url: Base64.encode(link),
          title: Base64.encode(title),
          description: Base64.encode(desc),
          previewimageUrl: Base64.encode(pics),
          image_url: Base64.encode(pics)
        });
        openAppByScheme("".concat(getItem("qzone").scheme, "?").concat(scheme));
      }
      if (typeof window.ucweb !== "undefined") {
        window.ucweb.startRequest("shell.page_share", [title, desc, _link, toApp, "", "@".concat(window.location.host), ""]);
      } else if (getObjectPath(window, "ucbrowser.web_shareEX")) {
        window.ucbrowser.web_shareEX(JSON.stringify({
          title: title,
          content: desc,
          sourceUrl: _link,
          imageUrl: pics,
          source: "@".concat(window.location.host),
          target: toApp
        }));
      } else if (getObjectPath(window, "ucbrowser.web_share")) {
        window.ucbrowser.web_share(title, desc, _link, toApp, "", "@".concat(window.location.host), "");
      } else {
        callback2 && callback2();
      }
    }
    function setShareQQ(type2, callback2) {
      var _a3 = share[type2 === "weixin_moment" ? "weixin_moment" : type2],
        link = _a3.link,
        title = _a3.title,
        desc = _a3.desc,
        pics = _a3.pics;
      var linkType = sourceType(type2);
      var qqShareConfig = {
        title: title,
        url: setChannelKey$1(link, linkType),
        description: desc,
        img_url: pics,
        to_app: getObjectPath(getItem(type2), "toApp.2")
      };
      var browserQqShare = getObjectPath(window.browser, "app.share");
      var browserQbShare = getObjectPath(window.qb, "share");
      if (browserQqShare) {
        window.browser.app.share(qqShareConfig);
      } else if (browserQbShare) {
        window.qb.share(qqShareConfig);
      } else {
        callback2 && callback2();
      }
    }
  }
  var __assign$5 = globalThis && globalThis.__assign || function () {
    __assign$5 = Object.assign || function (t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return __assign$5.apply(this, arguments);
  };
  function templateContent(shareConfig) {
    var biliShareWrapper;
    var _a3 = databus.browser,
      isWechat2 = _a3.isWechat,
      isIos2 = _a3.isIos,
      isSafari = _a3.isSafari,
      isAndroid2 = _a3.isAndroid,
      isUC2 = _a3.isUC,
      isQQMBrowser2 = _a3.isQQMBrowser,
      isQQ2 = _a3.isQQ;
    temInit();
    function temInit() {
      var font_size = shareConfig.font_size,
        shareChannelQueue = shareConfig.shareChannelQueue,
        templateEl = shareConfig.templateEl;
      if (isQQ2) return showWarning("可以使用QQ内置分享功能分享给好友哦~");
      var channels = getList(isUC2 || isQQMBrowser2 ? "toApp" : "link", shareChannelQueue);
      var html = createTemplate(channels);
      createDiv(html, {
        fontSize: setSize$1(font_size)
      }, templateEl);
      biliShareWrapper = document.querySelector("#bili-share-wrap");
      eventBind();
      isShow(true);
    }
    function createTemplate(ways) {
      if (isAndroid2 && isUC2) {
        var qzoneIdx = ways.findIndex(function (item) {
          return item.name === "qzone";
        });
        ways.splice(qzoneIdx, 1);
      }
      var safariHtml = '\n      <div class="share-box-content">\n        <div>点击<i class="icons icons-safari"></i>可以分享到更多地方哦~</div>\n        <p>还可以收藏和复制链接哦</p>\n      </div>\n    ';
      var shareList = ways.map(function (item) {
        return '\n        <li>\n          <a data-type="'.concat(item.name, '" rel="noopener noreferrer" class="share-box-item" href="javascript:void(0);">\n            <i class="icon icon_').concat(item.name, '"></i>\n            <span>').concat(item.title, "</span>\n          </a>\n        </li>");
      }).join("");
      return '\n      <div id="bili-share-wrap" class="bili-share-wrap hidden '.concat(isWechat2 ? "wechat" : "bili-share-aimation", '">\n        ').concat(isWechat2 ? "" : '\n          <div id="mobile-share" class="report-wrap-module share-box bili-share-aimation">\n            <ul class="share-box-list">'.concat(shareList, "</ul>\n            ").concat(isIos2 && isSafari ? safariHtml : "", '\n            <div class="share-box-cancel">取消</div>\n          </div>\n          '), "\n      </div>\n    ");
    }
    function eventBind() {
      biliShareWrapper.addEventListener("click", function (ev) {
        var targetClassName = ev.target.className;
        if (targetClassName.indexOf("bili-share-wrap") >= 0 || targetClassName.indexOf("share-box-cancel") >= 0) {
          shareConfig.cancel();
          isShow(false);
        }
      });
      [].forEach.call(biliShareWrapper.querySelectorAll(".share-box-item"), function (item) {
        item.addEventListener("click", function (shareItem) {
          return function () {
            var success = shareConfig.success;
            var shareType = shareItem.getAttribute("data-type");
            loggerChannel(shareType);
            if (shareType !== "bili") {
              typeof success === "function" && success({
                platform: shareType
              });
            }
            if (isUC2) {
              ucqqBrowser(shareConfig, "UC", shareType, function () {
                setShareLink(shareType);
              });
            } else if (isQQMBrowser2) {
              ucqqBrowser(shareConfig, "QQ", shareType, function () {
                setShareLink(shareType);
              });
            } else {
              setShareLink(shareType);
              isShow(false);
            }
          };
        }(item));
      });
    }
    function isShow(state) {
      if (state) {
        logger$2("sharePanel", "0.0");
        biliShareWrapper.style.display = "block";
        lock(biliShareWrapper);
        requestAnimationFrame(function () {
          requestAnimationFrame(function () {
            biliShareWrapper.classList.add("show-box");
          });
        });
      } else {
        if (isWechat2) biliShareWrapper.style.display = "none";
        biliShareWrapper.classList.remove("show-box");
        unlock(biliShareWrapper);
        deleteDOM(biliShareWrapper, 500);
      }
    }
    function setShareLink(type2) {
      var linkShareConfig = returnLink(shareConfig[type2], type2);
      var locationUrl = "";
      switch (type2) {
        case "weibo":
          locationUrl = generateQueryString$1({
            url: linkShareConfig.url,
            title: "".concat(linkShareConfig.title),
            searchPic: "false",
            pic: linkShareConfig.pics
          });
          break;
        case "qzone":
          locationUrl = generateQueryString$1(__assign$5({}, linkShareConfig));
          break;
        case "qq":
          locationUrl = generateQueryString$1(linkShareConfig);
          break;
        case "baidu_tieba":
          locationUrl = generateQueryString$1(__assign$5({
            pic: linkShareConfig.pics.replace("https", "http")
          }, linkShareConfig));
          break;
        case "bili":
          biliDialog(shareConfig);
          break;
      }
      location.href = "".concat(getItem(type2).link).concat(locationUrl);
      return false;
    }
    function returnLink(obj, type2) {
      var linkType = sourceType(type2);
      return {
        title: obj.title,
        desc: obj.desc,
        url: setChannelKey$1(obj.link, linkType, true),
        summary: obj.desc,
        pics: obj.pics,
        searchPic: "false"
      };
    }
  }
  var __assign$4 = globalThis && globalThis.__assign || function () {
    __assign$4 = Object.assign || function (t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return __assign$4.apply(this, arguments);
  };
  function clientContent(share) {
    var _a3 = databus.browser,
      isBbqApp2 = _a3.isBbqApp,
      isWechat2 = _a3.isWechat,
      isQQ2 = _a3.isQQ;
    clientInit();
    function clientInit() {
      if (isBbqApp2) {
        distExports.view.setShare({
          showBtn: 1,
          config: {
            title: share.title,
            content: share.desc,
            pic: share.pics,
            url: share.link
          }
        });
        return;
      }
      if (isQQ2) {
        qqReady();
      } else if (isWechat2) {
        weChatReady(function (signature) {
          setWeChatContent(signature);
        });
      }
    }
    function qqReady() {
      var _a4 = share.qq,
        title = _a4.title,
        link = _a4.link,
        desc = _a4.desc,
        pics = _a4.pics;
      var qqShare = {
        title: title,
        url: link,
        summary: desc,
        pic: pics
      };
      if (!window.setShareInfo) {
        getScript("https://qzonestyle.gtimg.cn/qzone/qzact/common/share/share.js", function () {
          window.setShareInfo && window.setShareInfo(qqShare);
        });
      } else {
        window.setShareInfo(qqShare);
      }
    }
    function weChatReady(callback) {
      var _a4 = databus.wechatConfig,
        timestamp = _a4.timestamp,
        nonceStr = _a4.nonceStr;
      getJsonp("https://app.bilibili.com/x/display/wechat/sign", {
        timestamp: timestamp,
        url: window.location.href,
        nonce: nonceStr,
        jsonp: "jsonp"
      }, function (res) {
        console.log("wechat sign: ", res);
        if (res.code === 0) {
          if (!window.wx) {
            getScript("https://res.wx.qq.com/open/js/jweixin-1.6.0.js", function () {
              callback && callback(res.data);
            });
          } else {
            callback && callback(res.data);
          }
          return;
        }
        console.warn("getting wechat sign in share-h5 error: ", res);
        throw new Error(res);
      });
    }
    function setWeChatContent(signature) {
      var _a4 = databus.wechatConfig,
        wxconfigappid = _a4.wxconfigappid,
        nonceStr = _a4.nonceStr,
        timestamp = _a4.timestamp,
        jsApiList = _a4.jsApiList;
      if (window.wx) {
        window.wx.config({
          beta: true,
          debug: false,
          appId: wxconfigappid,
          nonceStr: nonceStr,
          timestamp: timestamp,
          signature: signature,
          jsApiList: jsApiList
        });
        window.wx.ready(function () {
          setWeChatDetails();
        });
      }
    }
    function setWeChatDetails() {
      var shareChannelQueue = share.shareChannelQueue,
        weixin = share.weixin,
        weixin_moment = share.weixin_moment,
        _success = share.success,
        _cancel = share.cancel;
      var wxShare = {
        title: weixin.title,
        desc: weixin.desc,
        link: weixin.link,
        imgUrl: weixin.pics
      };
      var timeShare = {
        title: weixin_moment.title,
        desc: weixin_moment.desc,
        link: weixin_moment.link,
        imgUrl: weixin_moment.pics
      };
      getList("wxApi", shareChannelQueue).forEach(function (item) {
        var channelKey = item.name;
        var key = item.wxApi || "";
        var linkType = sourceType(channelKey);
        var wechatShareConfig = __assign$4(__assign$4({}, key === "onMenuShareTimeline" ? timeShare : wxShare), {
          link: decodeURIComponent(setChannelKey$1(key === "onMenuShareTimeline" ? timeShare.link : wxShare.link, linkType)),
          success: function success() {
            loggerChannel(channelKey);
            _success({
              platform: channelKey
            });
          },
          cancel: function cancel() {
            _cancel({
              platform: channelKey
            });
          }
        });
        window.wx[key](wechatShareConfig);
      });
    }
  }
  function AppContent(share, behavior) {
    var shareChannelQueue = share.shareChannelQueue,
      weibo = share.weibo,
      qzone = share.qzone,
      qq = share.qq,
      bili = share.bili,
      weixin = share.weixin,
      weixin_moment = share.weixin_moment,
      edit_content = share.edit_content,
      share_id = share.share_id,
      share_origin = share.share_origin,
      sid = share.sid,
      oid = share.oid,
      success = share.success,
      cancel = share.cancel,
      biz_type = share.biz_type,
      type2 = share.type,
      share_from_topic_name = share.share_from_topic_name,
      share_from_topic_id = share.share_from_topic_id,
      materials = share.materials;
    var title = bili.title,
      desc = bili.desc,
      link = bili.link,
      pics = bili.pics;
    var _a3 = databus.browser,
      isIpad2 = _a3.isIpad,
      isPad = _a3.isPad,
      isIos2 = _a3.isIos,
      isAndroid2 = _a3.isAndroid,
      biliVersion2 = _a3.biliVersion,
      isBiliApp2 = _a3.isBiliApp,
      hasMangaMallSdk2 = _a3.hasMangaMallSdk,
      biliMangaMallSdkVersion2 = _a3.biliMangaMallSdkVersion;
    if (!(window.biliios || window.biliandroid || window.biliapp || isBiliApp2)) {
      return;
    }
    var mpcBridgeData = share.customMpcData || parseMpcBridgeData();
    appInit();
    function appInit() {
      if ((isPad || isIpad2) && biliVersion2 <= 5291 || isIos2 && biliVersion2 < 6670 || isAndroid2 && biliVersion2 < 5250) {
        if (hasMangaMallSdk2 && biliMangaMallSdkVersion2 >= 300) {
          newBiliReady();
        } else {
          oldBiliReady();
        }
      } else {
        newBiliReady();
      }
    }
    function newBiliReady() {
      N$1();
      behavior === "show" ? newBiliShow() : behavior === "img" ? newBiliImg() : newBiliSet();
    }
    function onShare(shareResp) {
      console.log("onShare: ", shareResp);
      if (shareResp.state == 0) {
        if (shareResp.platform) {
          loggerChannel(shareResp.platform);
        }
        success(shareResp);
      } else {
        cancel(shareResp);
      }
    }
    function callback() {
      console.log("成功弹出分享窗口");
      logger$3("sharePanel", "0.0");
    }
    function newBiliShow() {
      if (isIos2 && biliVersion2 < 8270 || isAndroid2 && biliVersion2 < 5300) {
        var data_1 = {
          title: title,
          type: type2,
          text: desc,
          url: link,
          image_url: pics,
          share_from_topic_name: share_from_topic_name,
          share_from_topic_id: share_from_topic_id
        };
        newSupport("share.showShareWindow", function () {
          _$1.callNative({
            method: "share.showShareWindow",
            data: data_1,
            callback: callback,
            onShare: onShare
          });
        });
      } else {
        newSupport("share.showShareMpcWindow", function () {
          _$1.callNative({
            method: "share.showShareMpcWindow",
            data: mpcBridgeData,
            callback: callback,
            onShare: onShare
          });
        });
      }
    }
    function newBiliSet() {
      if (isIos2 && biliVersion2 < 8270 || isAndroid2 && biliVersion2 < 5300) {
        newSupport("share.setShareContent", function () {
          _$1.callNative({
            method: "share.setShareContent",
            data: {
              title: title,
              type: type2,
              text: desc,
              url: link,
              image_url: pics,
              share_from_topic_name: share_from_topic_name,
              share_from_topic_id: share_from_topic_id
            },
            callback: callback,
            onShare: onShare
          });
        });
      } else {
        newSupport("share.setShareMpcContent", function () {
          _$1.callNative({
            method: "share.setShareMpcContent",
            data: mpcBridgeData,
            callback: callback,
            onShare: onShare
          });
        });
      }
    }
    function newBiliImg() {
      if (isIos2 && biliVersion2 >= 631e5 || isAndroid2 && biliVersion2 >= 631e5) {
        var data_2 = {
          shareId: share_id,
          oid: oid,
          sid: sid,
          shareOrigin: share_origin,
          imageUrl: pics,
          imageBase64: pics,
          materials: materials,
          share_from_topic_name: share_from_topic_name,
          share_from_topic_id: share_from_topic_id
        };
        newSupport("share.sharePlacard", function () {
          _$1.callNative({
            method: "share.sharePlacard",
            data: data_2,
            callback: callback,
            onShare: onShare
          });
        });
      } else {
        newBiliShow();
      }
    }
    function parseMpcBridgeData() {
      return {
        share_id: share_id,
        share_origin: share_origin,
        sid: sid,
        oid: oid,
        shareChannelQueue: shareChannelQueue,
        dynamic: {
          title: bili.title,
          content_id: 0,
          content_type: isIos2 ? 2048 : 12,
          cover_url: bili.pics,
          description: bili.title,
          publish: false,
          edit_content: bili.text_area || edit_content,
          sketch: {
            title: bili.title,
            biz_type: biz_type || 3,
            cover_url: bili.pics,
            target_url: setChannelKey$1(bili.link, "biliDynamic"),
            desc_text: bili.desc
          },
          share_from_topic_name: share_from_topic_name,
          share_from_topic_id: share_from_topic_id
        },
        weixin: {
          type: weixin.type || type2,
          title: weixin.title,
          text: weixin.desc,
          url: setChannelKey$1(weixin.link, "weixin"),
          imageUrl: weixin.pics,
          media_src: weixin.media_src
        },
        weixin_monment: {
          type: weixin_moment.type || type2,
          title: weixin_moment.title,
          text: weixin_moment.desc,
          url: setChannelKey$1(weixin_moment.link, "weixin_monment"),
          imageUrl: weixin_moment.pics,
          media_src: weixin_moment.media_src
        },
        qq: {
          type: qq.type || type2,
          title: qq.title,
          text: qq.desc,
          url: setChannelKey$1(qq.link, "qq"),
          imageUrl: qq.pics,
          media_src: qq.media_src
        },
        q_zone: {
          type: qzone.type || type2,
          title: qzone.title,
          text: qzone.desc,
          url: setChannelKey$1(qzone.link, "qzone"),
          imageUrl: qzone.pics,
          media_src: qzone.media_src
        },
        sina: {
          type: weibo.type || type2,
          title: weibo.title,
          text: weibo.desc,
          url: setChannelKey$1(weibo.link, "weibo"),
          imageUrl: weibo.pics,
          media_src: weibo.media_src
        },
        copy: {
          type: "text",
          title: title,
          url: setChannelKey$1(link, "copy")
        },
        "default": {
          type: type2,
          title: title,
          text: desc,
          url: setChannelKey$1(link, ""),
          imageUrl: pics
        }
      };
    }
    function newSupport(funcName, callback2) {
      P$1(funcName).then(function (support) {
        if (support) {
          callback2 && callback2();
        } else {
          window.console.log("not support ".concat(funcName));
        }
      });
    }
    function oldBiliReady() {
      var biliShare2 = {
        title: title,
        biz_type: biz_type,
        text: desc,
        url: link,
        image_url: pics
      };
      if (behavior === "show") {
        biliJsBridge(function () {
          window.BiliApp.showShareWindow(biliShare2);
        });
      } else {
        biliJsBridge(function () {
          window.BiliApp.setShareContent(biliShare2);
        });
      }
      function biliJsBridge(callback2) {
        if (!window.BiliApp) {
          getScript("https://static.hdslb.com/biliapp/biliapp.js", function () {
            callback2 && callback2();
          });
        } else {
          callback2 && callback2();
        }
      }
    }
  }
  var __assign$3 = globalThis && globalThis.__assign || function () {
    __assign$3 = Object.assign || function (t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return __assign$3.apply(this, arguments);
  };
  var __awaiter = globalThis && globalThis.__awaiter || function (thisArg, _arguments, P2, generator) {
    function adopt(value) {
      return value instanceof P2 ? value : new P2(function (resolve) {
        resolve(value);
      });
    }
    return new (P2 || (P2 = Promise))(function (resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e2) {
          reject(e2);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e2) {
          reject(e2);
        }
      }
      function step(result2) {
        result2.done ? resolve(result2.value) : adopt(result2.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
  var __generator = globalThis && globalThis.__generator || function (thisArg, body2) {
    var _2 = {
        label: 0,
        sent: function sent() {
          if (t2[0] & 1) throw t2[1];
          return t2[1];
        },
        trys: [],
        ops: []
      },
      f2,
      y2,
      t2,
      g2;
    return g2 = {
      next: verb(0),
      "throw": verb(1),
      "return": verb(2)
    }, typeof Symbol === "function" && (g2[Symbol.iterator] = function () {
      return this;
    }), g2;
    function verb(n2) {
      return function (v2) {
        return step([n2, v2]);
      };
    }
    function step(op) {
      if (f2) throw new TypeError("Generator is already executing.");
      while (g2 && (g2 = 0, op[0] && (_2 = 0)), _2) try {
        if (f2 = 1, y2 && (t2 = op[0] & 2 ? y2["return"] : op[0] ? y2["throw"] || ((t2 = y2["return"]) && t2.call(y2), 0) : y2.next) && !(t2 = t2.call(y2, op[1])).done) return t2;
        if (y2 = 0, t2) op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _2.label++;
            return {
              value: op[1],
              done: false
            };
          case 5:
            _2.label++;
            y2 = op[1];
            op = [0];
            continue;
          case 7:
            op = _2.ops.pop();
            _2.trys.pop();
            continue;
          default:
            if (!(t2 = _2.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _2 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _2.label = op[1];
              break;
            }
            if (op[0] === 6 && _2.label < t2[1]) {
              _2.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _2.label < t2[2]) {
              _2.label = t2[2];
              _2.ops.push(op);
              break;
            }
            if (t2[2]) _2.ops.pop();
            _2.trys.pop();
            continue;
        }
        op = body2.call(thisArg, _2);
      } catch (e2) {
        op = [6, e2];
        y2 = 0;
      } finally {
        f2 = t2 = 0;
      }
      if (op[0] & 5) throw op[1];
      return {
        value: op[0] ? op[1] : void 0,
        done: true
      };
    }
  };
  var _a = databus.browser,
    isBiliApp = _a.isBiliApp,
    isBiliComicApp = _a.isBiliComicApp,
    isBbqApp = _a.isBbqApp,
    isIos$1 = _a.isIos,
    hasMangaMallSdk = _a.hasMangaMallSdk,
    biliMangaMallSdkVersion = _a.biliMangaMallSdkVersion;
  var biliShare = function () {
    function showWindow(config, isOpenDynamic) {
      return __awaiter(this, void 0, void 0, function () {
        var shareConfig, formattedConfig;
        return __generator(this, function (_b2) {
          switch (_b2.label) {
            case 0:
              if (!(isOpenDynamic === void 0)) return [3, 2];
              return [4, getDynamicUrl()];
            case 1:
              _b2.sent();
              return [3, 3];
            case 2:
              _b2.label = 3;
            case 3:
              shareConfig = openDynamicDomain && !dynamic ? formatImageShareConfig(config, doudiImg) : config;
              return [4, formatShare(shareConfig)];
            case 4:
              formattedConfig = _b2.sent();
              if (formattedConfig.change_share) {
                AppContent(formattedConfig, "set");
                clientContent(formattedConfig);
              }
              if (isBiliApp || isBiliComicApp || hasMangaMallSdk && biliMangaMallSdkVersion >= 300) {
                AppContent(formattedConfig, "show");
                return [2];
              }
              if (isBbqApp) {
                distExports.view.callShare({
                  title: formattedConfig.title,
                  content: formattedConfig.desc,
                  pic: formattedConfig.pics,
                  url: formattedConfig.link
                });
                return [2];
              }
              templateContent(formattedConfig);
              return [2];
          }
        });
      });
    }
    function setContent(config, isOpenDynamic) {
      return __awaiter(this, void 0, void 0, function () {
        var shareConfig, formattedConfig;
        return __generator(this, function (_b2) {
          switch (_b2.label) {
            case 0:
              if (!(isOpenDynamic === void 0)) return [3, 2];
              return [4, getDynamicUrl()];
            case 1:
              _b2.sent();
              return [3, 3];
            case 2:
              _b2.label = 3;
            case 3:
              shareConfig = openDynamicDomain && !dynamic ? formatImageShareConfig(config, doudiImg) : config;
              return [4, formatShare(shareConfig)];
            case 4:
              formattedConfig = _b2.sent();
              console.log("formattedConfig showContent ", formattedConfig, shareConfig);
              AppContent(formattedConfig, "set");
              clientContent(formattedConfig);
              return [2];
          }
        });
      });
    }
    function formatImageShareConfig(imageShareConfig, doudiImg2) {
      var title = imageShareConfig.title,
        desc = imageShareConfig.desc,
        link = imageShareConfig.link,
        pics = imageShareConfig.pics,
        edit_content = imageShareConfig.edit_content,
        shareChannelQueue = imageShareConfig.shareChannelQueue,
        share_id = imageShareConfig.share_id,
        share_origin = imageShareConfig.share_origin,
        sid = imageShareConfig.sid,
        oid = imageShareConfig.oid,
        share_from_topic_name = imageShareConfig.share_from_topic_name,
        share_from_topic_id = imageShareConfig.share_from_topic_id;
      var text = desc;
      var url2 = link;
      var imgSrc = get$2(imageShareConfig, "pictureList.0.img_src", "");
      var imageUrl = protocolReg$1(imgSrc || pics);
      var pictureList = doudiImg2 ? [{
        img_height: 100,
        img_size: 100,
        img_src: doudiImg2,
        img_width: 100
      }] : imageShareConfig.pictureList;
      var customMpcData = {
        share_id: share_id,
        share_origin: share_origin,
        sid: sid,
        oid: oid,
        shareChannelQueue: shareChannelQueue,
        dynamic: {
          title: title,
          content_id: 1,
          content_type: isIos$1 ? 2048 : 12,
          cover_url: imageUrl,
          description: doudiImg2 ? title : edit_content,
          author_id: 123,
          author_name: "",
          images: ["", "", ""],
          images_online: JSON.stringify({
            pictureList: pictureList
          }),
          publish: true,
          edit_content: doudiImg2 ? text : edit_content,
          repost_code: 123,
          sketch: {
            title: title,
            desc_text: text,
            biz_type: 3,
            cover_url: imageUrl,
            target_url: url2
          },
          share_from_topic_name: share_from_topic_name,
          share_from_topic_id: share_from_topic_id
        },
        copy: {
          type: "text",
          title: title,
          url: setChannelKey$1(link, "copy")
        },
        "default": {
          type: "image",
          title: title,
          text: text,
          url: url2,
          imageUrl: doudiImg2 ? protocolReg$1(doudiImg2) : protocolReg$1(imgSrc || pics)
        }
      };
      var _customParams = imageShareConfig.customMpcData || {};
      Object.keys(_customParams).forEach(function (key) {
        customMpcData[key] = _customParams[key];
      });
      var shareConfig = __assign$3(__assign$3({}, imageShareConfig), {
        customMpcData: customMpcData
      });
      return shareConfig;
    }
    function showWindowTypeImage(imageShareConfig, isDegrade) {
      return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a3) {
          switch (_a3.label) {
            case 0:
              if (!(isDegrade !== void 0 && !isDegrade)) return [3, 1];
              showWindow(formatImageShareConfig(imageShareConfig), false);
              return [3, 3];
            case 1:
              return [4, getDynamicUrl()];
            case 2:
              _a3.sent();
              if (openDynamicDomain && dynamic) {
                showWindow(imageShareConfig, true);
              } else {
                showWindow(formatImageShareConfig(imageShareConfig), false);
              }
              _a3.label = 3;
            case 3:
              return [2];
          }
        });
      });
    }
    function setContentTypeImage(imageShareConfig, isDegrade) {
      return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a3) {
          switch (_a3.label) {
            case 0:
              if (!(isDegrade !== void 0 && !isDegrade)) return [3, 1];
              setContent(formatImageShareConfig(imageShareConfig), false);
              return [3, 3];
            case 1:
              return [4, getDynamicUrl()];
            case 2:
              _a3.sent();
              if (openDynamicDomain && dynamic) {
                setContent(imageShareConfig, true);
              } else {
                setContent(formatImageShareConfig(imageShareConfig), false);
              }
              _a3.label = 3;
            case 3:
              return [2];
          }
        });
      });
    }
    function showImg(config) {
      return __awaiter(this, void 0, void 0, function () {
        var formattedConfig;
        return __generator(this, function (_a3) {
          switch (_a3.label) {
            case 0:
              return [4, formatShare(config)];
            case 1:
              formattedConfig = _a3.sent();
              if (isBiliApp || hasMangaMallSdk && biliMangaMallSdkVersion >= 300) {
                AppContent(formattedConfig, "img");
                return [2];
              }
              return [2];
          }
        });
      });
    }
    return {
      showImg: showImg,
      showWindow: showWindow,
      setContent: setContent,
      showWindowTypeImage: showWindowTypeImage,
      setContentTypeImage: setContentTypeImage
    };
  }();
  var shareH5 = "";
  function getCookie$1(name) {
    if (!name) {
      return "";
    }
    var cookie2 = "".concat(document.cookie);
    var indexStart = cookie2.indexOf("".concat(name, "="));
    if (indexStart === -1) {
      return "";
    }
    var indexEnd = cookie2.indexOf(";", indexStart);
    if (indexEnd === -1) {
      indexEnd = cookie2.length;
    }
    return decodeURIComponent(cookie2.substring(indexStart + name.length + 1, indexEnd));
  }
  function setCookie(name, value, days) {
    if (days === void 0) {
      days = 365;
    }
    var exp = /* @__PURE__ */new Date();
    exp.setTime(exp.getTime() + days * 24 * 60 * 60 * 1e3);
    document.cookie = "".concat(name, "=").concat(encodeURIComponent(value), ";expires=").concat(exp.toUTCString(), "; path=/; domain=.bilibili.com");
  }
  function deleteCookie(name) {
    setCookie(name, "", -1);
  }
  var cookie = {
    getCookie: getCookie$1,
    setCookie: setCookie,
    deleteCookie: deleteCookie
  };
  var requestPayload = {};
  var _requestQueue = [];
  function removeFromRequestQueue(req) {
    var findIndex = _requestQueue.findIndex(function (item) {
      return item.idx === req.idx;
    });
    _requestQueue.splice(findIndex, 1);
  }
  function resposneHandler(res) {
    removeFromRequestQueue(res.req);
  }
  function request(options) {
    return __awaiter$2(this, void 0, void 0, function () {
      var param, pendingRequest, throttleType, useCache, req, d2, result2, r2;
      return __generator$2(this, function (_a3) {
        switch (_a3.label) {
          case 0:
            param = _assign$2(_assign$2({}, options), {
              method: options.method || "GET",
              idx: options.idx || JSON.stringify(options),
              cache: options.cache === void 0 ? false : options.cache,
              noCredentials: options.noCredentials === void 0 ? false : options.noCredentials
            });
            pendingRequest = _requestQueue.find(function (item) {
              return item.idx === param.idx;
            });
            throttleType = options.throttleType || "drop";
            useCache = param.cache && param.method.toLocaleLowerCase() === "get";
            req = superagent(param.method, param.url);
            if (param.jsonp) {
              req = superagent(param.method || "GET", param.url).use(jsonp({
                callbackParam: param.callbackParam || "callback",
                callbackName: param.callbackName || "supercallback",
                timeout: param.jsonpTimeout || 1e4
              }));
            }
            if (!param.noCredentials) {
              req.withCredentials();
            }
            req.timeout(param.timeout || 1e4);
            if (param.method.toLowerCase() === "post" && !param.form) {
              d2 = get$1(param, "data", "");
              if (!d2) {
                param.data = {};
              }
              if (!param.data.csrf) {
                param.data.csrf = getCookie$1("bili_jct");
              }
              req.set("Content-Type", "application/x-www-form-urlencoded");
            }
            if (param.headers) {
              keys$4(param.headers).forEach(function (k2) {
                req.set(k2, param.headers[k2]);
              });
            }
            if (param.query) {
              req.query(param.query);
            }
            if (!param.files) return [3, 1];
            keys$4(param.data).forEach(function (key) {
              req.field(key, param.data[key]);
            });
            keys$4(param.files).forEach(function (key) {
              req.attach(key, param.files[key]);
            });
            return [3, 6];
          case 1:
            if (!useCache) return [3, 5];
            if (!(requestPayload[param.url] || pendingRequest)) return [3, 4];
            if (!(pendingRequest && throttleType)) return [3, 4];
            if (!(throttleType === "abort")) return [3, 2];
            pendingRequest._req.abort();
            removeFromRequestQueue(pendingRequest);
            return [3, 4];
          case 2:
            if (!(throttleType === "drop")) return [3, 4];
            result2 = requestPayload[param.url] || pendingRequest._req;
            return [4, result2];
          case 3:
            r2 = _a3.sent();
            return [2, r2.body || r2];
          case 4:
            req.send(param.data);
            if (throttleType) {
              req.idx = param.idx;
              _requestQueue.push({
                idx: param.idx,
                _req: req
              });
            }
            _a3.label = 5;
          case 5:
            req.send(param.data);
            _a3.label = 6;
          case 6:
            return [2, req.then(function (res) {
              if (param.customResolve) {
                return param.customResolve(res);
              }
              var body2 = res.body;
              if (useCache) {
                requestPayload[param.url] = body2;
              }
              if (!body2.code) {
                return Promise.resolve(body2);
              }
              if (+body2.code !== 0) {
                return Promise.reject(body2);
              }
              resposneHandler(res);
              return Promise.resolve(body2);
            })["catch"](function (error) {
              return Promise.reject(error);
            })];
        }
      });
    });
  }
  var u = navigator.userAgent;
  var biliVersion = (u.match(/BiliApp\/([^ ]*)/) || [])[1] || "0";
  var isApp = u.indexOf("Bili") > -1;
  var isUat = window.location.href.indexOf("uat") >= 0;
  window.location.href.indexOf("preview") > -1;
  biliVersion.length > 4 ? Number(biliVersion.toString().substr(0, 4)) : Number(biliVersion);
  function openQuickLogin() {
    var script = document.createElement("script");
    script.src = "//".concat(isUat ? "uat-" : "", "s1.hdslb.com/bfs/seed/jinkela/short/mini-login/miniLogin.umd.min.js");
    script.onload = function () {
      var miniLogin = new window.MiniLogin();
      miniLogin.showComponent();
      miniLogin.addEventListener("success", function () {
        window.location.reload();
      });
    };
    document.body.appendChild(script);
  }
  (function a2() {
    var styleName = "pc-dynamic-post";
    var exist = document.querySelector("." + styleName);
    if (exist) {
      return;
    }
    var styleContent = '\n    .pc-dynamic-dynamic-dialog {\n      position: fixed;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      z-index: 9990;\n      display: none;\n    }\n    \n    .pc-dynamic-dialog-mask {\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background-color: rgba(22, 22, 22, 0.7);\n    }\n    \n    .pc-dynamic-dialog-content {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      z-index: 1;\n      background: #fff;\n      border-radius: 10px;\n      transform-origin: 0 0;\n      display: none;\n      animation: bounceIn 0.3s ease-in-out both;\n    }\n    .pc-dynamic-dialog-content.slide-down {\n      animation: bounceOut 0.3s ease-in-out both;\n    }\n    .pc-dynamic-dialog-content .pc-dynamic-dialog-close {\n      position: absolute;\n      display: block;\n      width: 18px;\n      height: 18px;\n      top: 15px;\n      right: 11px;\n      cursor: pointer;\n    }\n    .pc-dynamic-dialog-content .pc-dynamic-dialog-close::before, .pc-dynamic-dialog-content .pc-dynamic-dialog-close::after {\n      content: "";\n      display: block;\n      width: 18px;\n      height: 2px;\n      border-radius: 2px;\n      background: #aaa;\n      position: absolute;\n      left: 0px;\n      top: 8px;\n      transition: background-color 0.3s ease-in-out;\n    }\n    .pc-dynamic-dialog-content .pc-dynamic-dialog-close::before {\n      -webkit-transform: rotate(45deg);\n      transform: rotate(45deg);\n    }\n    .pc-dynamic-dialog-content .pc-dynamic-dialog-close::after {\n      -webkit-transform: rotate(-45deg);\n      transform: rotate(-45deg);\n    }\n    .pc-dynamic-dialog-content .pc-dynamic-dialog-close:hover::before, .pc-dynamic-dialog-content .pc-dynamic-dialog-close:hover::after {\n      background: #02a0d8;\n    }\n    \n    .pc-dynamic-post-dialog {\n      width: 570px;\n      height: 300px;\n      padding-top: 10px;\n    }\n    .pc-dynamic-post-dialog .title {\n      font-size: 20px;\n      color: #212121;\n      padding: 8px 12px;\n      margin: -6px 2px 0;\n    }\n    .pc-dynamic-post-dialog textarea {\n      width: 520px;\n      height: 80px;\n      font-size: 14px;\n      line-height: 20px;\n      color: #222;\n      background: #fbfbfb;\n      border: 1px solid #e5e9ef;\n      border-radius: 6px;\n      resize: none;\n      padding: 10px;\n      display: block;\n      margin: 0 auto;\n      outline: 0;\n    }\n    .pc-dynamic-post-dialog textarea:focus {\n      border-color: #00a1d6;\n    }\n    .pc-dynamic-post-dialog .image-wrapper {\n      padding-left: 15px;\n      padding-top: 10px;\n    }\n    .pc-dynamic-post-dialog .desc-counter {\n      font-size: 12px;\n      color: #99a2aa;\n      position: absolute;\n      right: 92px;\n      line-height: 32px;\n      bottom: 10px;\n    }\n    .pc-dynamic-post-dialog .desc-counter p {\n      margin: 0;\n    }\n    .pc-dynamic-post-dialog img {\n      max-width: 100px;\n      max-height: 100px;\n      border: 1px solid #efefef;\n      padding: 4px;\n    }\n    .pc-dynamic-post-dialog .submit {\n      width: 64px;\n      height: 32px;\n      position: absolute;\n      right: 12px;\n      bottom: 10px;\n      background: #00a1d6;\n      border: none;\n      border-radius: 4px;\n      color: #fff;\n      font-size: 14px;\n      cursor: pointer;\n    }\n    \n    @keyframes bounceIn {\n      from, 50%, to {\n        animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n      }\n      0% {\n        transform: scale(0.8) translate(-50%, -50%);\n      }\n      50% {\n        transform: scale(1.02) translate(-50%, -50%);\n      }\n      to {\n        transform: scale(1) translate(-50%, -50%);\n      }\n    }\n    @keyframes bounceOut {\n      from {\n        transform: scale(1, 1) translate(-50%, -50%);\n      }\n      to {\n        transform: scale(0, 0) translate(-50%, -50%);\n      }\n    }\n  ';
    var styleTag = document.createElement("style");
    styleTag.type = "text/css";
    styleTag.className = styleName;
    styleTag.innerHTML = styleContent;
    document.head.appendChild(styleTag);
  })();
  var IMAGE_SIZE = 500;
  var DYNAMIC_MAX_LENGTH = 233;
  function toast(msg, duration) {
    if (duration === void 0) {
      duration = 2e3;
    }
    var msgStyle = {
      position: "fixed",
      left: "50%",
      top: "50%",
      transform: "translate(-50%, 0)",
      boxSizing: "border-box",
      width: "auto",
      padding: "6px 12px",
      borderRadius: "8px",
      maxWidth: "80%",
      background: "rgba(0, 0, 0, .7)",
      fontSize: "14px",
      color: "#fff",
      lineHeight: 1.5,
      userSelect: "none",
      wordWrap: "break-word",
      opacity: 0,
      zIndex: 99999,
      cursor: "default",
      transition: "all .3s ease-in-out",
      textAligin: "justify"
    };
    var node = document.createElement("div");
    Object.keys(msgStyle).forEach(function (key) {
      node.style[key] = msgStyle[key];
    });
    node.innerText = msg;
    document.body.appendChild(node);
    setTimeout(function () {
      node.style.transform = "translate(-50%, -50%)";
      node.style.opacity = "1";
    }, 10);
    setTimeout(function () {
      document.body.removeChild(node);
    }, duration);
  }
  function postBblog(desc, img) {
    return request({
      method: "post",
      url: "https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/create_draw",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      timeout: 6e3,
      data: {
        biz: 3,
        category: 3,
        type: 0,
        title: "",
        tags: "",
        description: desc,
        pictures: JSON.stringify([{
          img_src: img.src,
          img_width: img.width,
          img_height: img.height,
          img_size: img.size
        }])
      }
    });
  }
  function postDynamic(config, dialog, wrapperDom, cb) {
    var shareImage = config.image;
    var currentDescInput = document.querySelector("#pc-dynamic-post-dialog textarea");
    var currentValue = currentDescInput.value || config.descPre;
    var desc = currentValue || window.location.origin + window.location.pathname;
    if (desc.length > DYNAMIC_MAX_LENGTH) {
      return toast("已超出字数限制");
    }
    var img = new Image();
    img.onload = function () {
      postBblog(desc, {
        src: shareImage.replace(/^(\w+:)?\/\//, "https://"),
        width: img.width,
        height: img.height,
        size: IMAGE_SIZE
      }).then(function (res) {
        toast("发布成功");
        closeDialog(dialog);
        setTimeout(function () {
          triggerDialog(wrapperDom, "none");
        }, 300);
        cb && cb(res);
      })["catch"](function (err) {
        if (err.code === -6) {
          openQuickLogin();
        } else {
          toast(err.msg || err.message || err);
        }
      });
    };
    img.src = shareImage;
  }
  function closeDialog(dom) {
    dom.setAttribute("class", "pc-dynamic-dialog-content slide-down");
    setTimeout(function () {
      dom.setAttribute("class", "pc-dynamic-dialog-content");
      dom.style.display = "none";
    }, 300);
  }
  function triggerDialog(dom, action) {
    if (action === void 0) {
      action = "block";
    }
    dom.style.display = action;
  }
  function updateCounter(length) {
    query(".desc-counter .total").innerHTML = "" + (DYNAMIC_MAX_LENGTH - length);
  }
  function initDialog(updater, text) {
    text.value = updater.descPre;
    updateCounter(updater.descPre.length);
    text.setAttribute("maxlength", "" + DYNAMIC_MAX_LENGTH);
    query(".desc-counter .total").innerHTML = "" + (DYNAMIC_MAX_LENGTH - updater.descPre.length);
  }
  var textareaOnInput = debounce(function (event2) {
    var target = event2.target;
    updateCounter(target.value.length);
  }, 50);
  function query(selector) {
    var dom = document.querySelector(".pc-dynamic-dialog-content") || document.body;
    return dom.querySelector(selector);
  }
  var wrapper;
  function Component$1(defaultConfig, mountNode, defaultCb) {
    if (!wrapper) {
      wrapper = document.createElement("div");
      wrapper.innerHTML = '\n    <div class="pc-dynamic-dynamic-dialog">\n      <div class="pc-dynamic-dialog-mask"></div>\n      <div class="pc-dynamic-dialog-content">\n        <i class="pc-dynamic-dialog-close"></i>\n        <div id="pc-dynamic-post-dialog" class="pc-dynamic-post-dialog">\n          <div class="content">\n            <div class="desc-editor-wrapper">\n              <p class="title">分享到动态</p>\n              <textarea maxLength="120" value="" rows="10" placeholder="说点什么..."></textarea>\n            </div>\n            <div class="image-wrapper">\n              <img src="" alt="分享图片" />\n            </div>\n          </div>\n          <div class="option">\n            <div class="desc-counter">\n              <p><span class="total"></span></p>\n            </div>\n            <button class="submit">发布</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  ';
      document.body.appendChild(wrapper);
    }
    var dialog = document.querySelector(".pc-dynamic-dialog-content");
    var wrapperDom = document.querySelector(".pc-dynamic-dynamic-dialog");
    var submitBtn = query(".submit");
    var imgDom = query(".image-wrapper img");
    var closeBtn = query(".pc-dynamic-dialog-close");
    var textarea = query("textarea");
    var mask = document.querySelector(".pc-dynamic-dialog-mask");
    var show = function show(config, cb) {
      if (config === void 0) {
        config = defaultConfig;
      }
      if (cb === void 0) {
        cb = defaultCb;
      }
      imgDom.src = config.image;
      initDialog(config, textarea);
      triggerDialog(wrapperDom);
      triggerDialog(dialog);
      submitBtn.onclick = function () {
        postDynamic(config, dialog, wrapperDom, cb);
      };
    };
    if (mountNode) {
      mountNode.onclick = function () {
        return show();
      };
    }
    var hide = function hide() {
      closeDialog(dialog);
      setTimeout(function () {
        triggerDialog(wrapperDom, "none");
      }, 300);
      submitBtn.onclick = null;
    };
    closeBtn.addEventListener("click", hide);
    mask.addEventListener("click", hide);
    textarea.addEventListener("input", textareaOnInput);
    return {
      show: show,
      hide: hide,
      destroy: function destroy() {
        if (mountNode) {
          mountNode.onclick = null;
        }
        textarea.removeEventListener("input", textareaOnInput);
      }
    };
  }
  if (isApp) {
    N$1();
  }
  _$1.callNative({
    method: "global.import",
    data: {
      namespace: "auth"
    }
  });
  function check_webp_feature(feature, callback) {
    var kTestImages = {
      lossy: "UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",
      lossless: "UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",
      alpha: "UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",
      animation: "UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"
    };
    var img = new Image();
    img.onload = function () {
      var result2 = img.width > 0 && img.height > 0;
      callback(feature, result2);
    };
    img.onerror = function () {
      callback(feature, false);
    };
    img.src = "data:image/webp;base64," + kTestImages[feature];
  }
  if (typeof window !== "undefined") {
    check_webp_feature("lossy", function (_2, res) {});
  }
  ({
    isWebp: function () {
      try {
        return document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp") === 0;
      } catch (err) {
        return false;
      }
    }(),
    setSrc: function setSrc(str) {
      var _url = this._urlFormat(str);
      str = !_url ? str : _url;
      var src = "";
      var arr2 = str.match(/\*(\d+)x(\d+)./);
      if (arr2 === null) {
        if (this.isWebp) {
          if (/@/.test(str)) {
            var newStr = str.substring(0, str.lastIndexOf("."));
            src = "".concat(newStr, ".webp");
          } else {
            src = "".concat(str, "@.webp");
          }
        } else {
          src = str;
        }
      } else if (this.isWebp) {
        src = "".concat(str.split("*")[0], "@").concat(arr2[1], "w_").concat(arr2[2], "h.webp");
      } else {
        src = "".concat(str.split("*")[0], "@").concat(arr2[1], "w_").concat(arr2[2], "h");
      }
      return src;
    },
    _urlFormat: function _urlFormat(url2) {
      var reg1 = /\/\d+?_\d+?\/bfs/;
      var newUrl = url2.replace(reg1, "/bfs");
      if (!reg1.test(url2)) return false;
      return "".concat(newUrl, "_").concat(RegExp.$1, "x").concat(RegExp.$2).concat(RegExp.$3);
    }
  });
  document.querySelector.bind(document);
  window.fontsize = 100;
  document.querySelector.bind(document);
  window.fontsize = 100;
  if (isApp) {
    N$1();
  }
  _$1.callNative({
    method: "global.import",
    data: {
      namespace: "auth"
    }
  });
  function converToUrlParam(obj) {
    var str = keys$4(obj).map(function (key) {
      return "".concat(key, "=").concat(obj[key]);
    }).join("&");
    return str;
  }
  function parseParamToObj$1(obj) {
    if (!obj) return;
    var str = obj.search;
    if (!str) {
      str = obj.hash;
    }
    var index2 = str.indexOf("?");
    str = str.substring(index2 + 1);
    var result2 = {};
    var paramArray = str.split("&");
    for (var i2 = 0, len = paramArray.length; i2 < len; i2++) {
      var pair = paramArray[i2].split("=");
      if (pair[1] === "") {
        pair.push("");
      }
      result2[pair[0]] = pair[1];
    }
    return result2;
  }
  function checkUrl(str) {
    if (!str) return false;
    var reg = /https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/;
    return reg.test(str);
  }
  function parseToHttps(url2) {
    if (!url2) return "";
    if (!/^(http:|https:)?\/\//.test(url2)) {
      return "https://".concat(url2);
    }
    return url2.replace(/^(http:|https:)?(?=\/\/)/i, "https:");
  }
  function getMetaTag(name) {
    var meta = document.head.querySelector("[name=".concat(name, "]"));
    if (meta) {
      return meta.content;
    }
    return "";
  }
  var url = {
    converToUrlParam: converToUrlParam,
    parseParamToObj: parseParamToObj$1,
    checkUrl: checkUrl,
    parseToHttps: parseToHttps,
    getMetaTag: getMetaTag
  };
  function logger$1(key, value) {
    if (value === void 0) {
      value = 1;
    }
    var reportScript;
    var k2 = key.replace(/\./g, "-");
    var spmPrefix = url.getMetaTag("spm_prefix");
    var isBiliHttps2 = location.href.indexOf("bilihttps") === 0;
    if (!spmPrefix) {
      var meta = document.createElement("meta");
      meta.name = "spm_prefix";
      meta.content = "888.1";
      document.getElementsByTagName("head")[0].appendChild(meta);
    }
    if (!window.reportObserver) {
      window.reportMsgObj = {};
      window.reportConfig = {
        sample: 1,
        scrollTracker: false,
        msgObjects: "reportMsgObj",
        errorTracker: true
      };
      reportScript = document.createElement("script");
      reportScript.src = "".concat(isBiliHttps2 ? "bilihttps:" : "", "//s1.hdslb.com/bfs/seed/log/report/log-reporter.js");
      document.getElementsByTagName("body")[0].appendChild(reportScript);
    }
    var doReport = function doReport() {
      try {
        window.reportMsgObj && window.reportObserver && (window.reportMsgObj[k2] = value, window.reportObserver.forceCommit && window.reportObserver.forceCommit());
      } catch (error) {
        console.error("[logger]", error);
      }
    };
    if (reportScript) {
      reportScript.onload = doReport;
    } else {
      doReport();
    }
  }
  var esErrors = Error;
  var _eval = EvalError;
  var range = RangeError;
  var ref = ReferenceError;
  var syntax = SyntaxError;
  var type = TypeError;
  var uri = URIError;
  var shams = function hasSymbols2() {
    if (typeof Symbol !== "function" || typeof Object.getOwnPropertySymbols !== "function") {
      return false;
    }
    if (_typeof4(Symbol.iterator) === "symbol") {
      return true;
    }
    var obj = {};
    var sym = Symbol("test");
    var symObj = Object(sym);
    if (typeof sym === "string") {
      return false;
    }
    if (Object.prototype.toString.call(sym) !== "[object Symbol]") {
      return false;
    }
    if (Object.prototype.toString.call(symObj) !== "[object Symbol]") {
      return false;
    }
    var symVal = 42;
    obj[sym] = symVal;
    for (var _2 in obj) {
      return false;
    }
    if (typeof Object.keys === "function" && Object.keys(obj).length !== 0) {
      return false;
    }
    if (typeof Object.getOwnPropertyNames === "function" && Object.getOwnPropertyNames(obj).length !== 0) {
      return false;
    }
    var syms = Object.getOwnPropertySymbols(obj);
    if (syms.length !== 1 || syms[0] !== sym) {
      return false;
    }
    if (!Object.prototype.propertyIsEnumerable.call(obj, sym)) {
      return false;
    }
    if (typeof Object.getOwnPropertyDescriptor === "function") {
      var descriptor = /** @type {PropertyDescriptor} */
      Object.getOwnPropertyDescriptor(obj, sym);
      if (descriptor.value !== symVal || descriptor.enumerable !== true) {
        return false;
      }
    }
    return true;
  };
  var origSymbol = typeof Symbol !== "undefined" && Symbol;
  var hasSymbolSham = shams;
  var hasSymbols$1 = function hasNativeSymbols() {
    if (typeof origSymbol !== "function") {
      return false;
    }
    if (typeof Symbol !== "function") {
      return false;
    }
    if (_typeof4(origSymbol("foo")) !== "symbol") {
      return false;
    }
    if (_typeof4(Symbol("bar")) !== "symbol") {
      return false;
    }
    return hasSymbolSham();
  };
  var test = {
    __proto__: null,
    foo: {}
  };
  var result = {
    __proto__: test
  }.foo === test.foo && !(test instanceof Object);
  var hasProto$1 = function hasProto2() {
    return result;
  };
  var ERROR_MESSAGE = "Function.prototype.bind called on incompatible ";
  var toStr$1 = Object.prototype.toString;
  var max = Math.max;
  var funcType = "[object Function]";
  var concatty = function concatty2(a2, b2) {
    var arr2 = [];
    for (var i2 = 0; i2 < a2.length; i2 += 1) {
      arr2[i2] = a2[i2];
    }
    for (var j2 = 0; j2 < b2.length; j2 += 1) {
      arr2[j2 + a2.length] = b2[j2];
    }
    return arr2;
  };
  var slicy = function slicy2(arrLike, offset) {
    var arr2 = [];
    for (var i2 = offset || 0, j2 = 0; i2 < arrLike.length; i2 += 1, j2 += 1) {
      arr2[j2] = arrLike[i2];
    }
    return arr2;
  };
  var joiny = function joiny(arr2, joiner) {
    var str = "";
    for (var i2 = 0; i2 < arr2.length; i2 += 1) {
      str += arr2[i2];
      if (i2 + 1 < arr2.length) {
        str += joiner;
      }
    }
    return str;
  };
  var implementation$1 = function bind2(that) {
    var target = this;
    if (typeof target !== "function" || toStr$1.apply(target) !== funcType) {
      throw new TypeError(ERROR_MESSAGE + target);
    }
    var args = slicy(arguments, 1);
    var bound;
    var binder = function binder() {
      if (this instanceof bound) {
        var result2 = target.apply(this, concatty(args, arguments));
        if (Object(result2) === result2) {
          return result2;
        }
        return this;
      }
      return target.apply(that, concatty(args, arguments));
    };
    var boundLength = max(0, target.length - args.length);
    var boundArgs = [];
    for (var i2 = 0; i2 < boundLength; i2++) {
      boundArgs[i2] = "$" + i2;
    }
    bound = Function("binder", "return function (" + joiny(boundArgs, ",") + "){ return binder.apply(this,arguments); }")(binder);
    if (target.prototype) {
      var Empty = function Empty2() {};
      Empty.prototype = target.prototype;
      bound.prototype = new Empty();
      Empty.prototype = null;
    }
    return bound;
  };
  var implementation = implementation$1;
  var functionBind = Function.prototype.bind || implementation;
  var call = Function.prototype.call;
  var $hasOwn = Object.prototype.hasOwnProperty;
  var bind$1 = functionBind;
  var hasown = bind$1.call(call, $hasOwn);
  var undefined$1;
  var $Error = esErrors;
  var $EvalError = _eval;
  var $RangeError = range;
  var $ReferenceError = ref;
  var $SyntaxError$1 = syntax;
  var $TypeError$3 = type;
  var $URIError = uri;
  var $Function = Function;
  var getEvalledConstructor = function getEvalledConstructor(expressionSyntax) {
    try {
      return $Function('"use strict"; return (' + expressionSyntax + ").constructor;")();
    } catch (e2) {}
  };
  var $gOPD$1 = Object.getOwnPropertyDescriptor;
  if ($gOPD$1) {
    try {
      $gOPD$1({}, "");
    } catch (e2) {
      $gOPD$1 = null;
    }
  }
  var throwTypeError = function throwTypeError() {
    throw new $TypeError$3();
  };
  var ThrowTypeError = $gOPD$1 ? function () {
    try {
      arguments.callee;
      return throwTypeError;
    } catch (calleeThrows) {
      try {
        return $gOPD$1(arguments, "callee").get;
      } catch (gOPDthrows) {
        return throwTypeError;
      }
    }
  }() : throwTypeError;
  var hasSymbols = hasSymbols$1();
  var hasProto = hasProto$1();
  var getProto = Object.getPrototypeOf || (hasProto ? function (x2) {
    return x2.__proto__;
  } : null);
  var needsEval = {};
  var TypedArray = typeof Uint8Array === "undefined" || !getProto ? undefined$1 : getProto(Uint8Array);
  var INTRINSICS = {
    __proto__: null,
    "%AggregateError%": typeof AggregateError === "undefined" ? undefined$1 : AggregateError,
    "%Array%": Array,
    "%ArrayBuffer%": typeof ArrayBuffer === "undefined" ? undefined$1 : ArrayBuffer,
    "%ArrayIteratorPrototype%": hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined$1,
    "%AsyncFromSyncIteratorPrototype%": undefined$1,
    "%AsyncFunction%": needsEval,
    "%AsyncGenerator%": needsEval,
    "%AsyncGeneratorFunction%": needsEval,
    "%AsyncIteratorPrototype%": needsEval,
    "%Atomics%": typeof Atomics === "undefined" ? undefined$1 : Atomics,
    "%BigInt%": typeof BigInt === "undefined" ? undefined$1 : BigInt,
    "%BigInt64Array%": typeof BigInt64Array === "undefined" ? undefined$1 : BigInt64Array,
    "%BigUint64Array%": typeof BigUint64Array === "undefined" ? undefined$1 : BigUint64Array,
    "%Boolean%": Boolean,
    "%DataView%": typeof DataView === "undefined" ? undefined$1 : DataView,
    "%Date%": Date,
    "%decodeURI%": decodeURI,
    "%decodeURIComponent%": decodeURIComponent,
    "%encodeURI%": encodeURI,
    "%encodeURIComponent%": encodeURIComponent,
    "%Error%": $Error,
    "%eval%": eval,
    // eslint-disable-line no-eval
    "%EvalError%": $EvalError,
    "%Float32Array%": typeof Float32Array === "undefined" ? undefined$1 : Float32Array,
    "%Float64Array%": typeof Float64Array === "undefined" ? undefined$1 : Float64Array,
    "%FinalizationRegistry%": typeof FinalizationRegistry === "undefined" ? undefined$1 : FinalizationRegistry,
    "%Function%": $Function,
    "%GeneratorFunction%": needsEval,
    "%Int8Array%": typeof Int8Array === "undefined" ? undefined$1 : Int8Array,
    "%Int16Array%": typeof Int16Array === "undefined" ? undefined$1 : Int16Array,
    "%Int32Array%": typeof Int32Array === "undefined" ? undefined$1 : Int32Array,
    "%isFinite%": isFinite,
    "%isNaN%": isNaN,
    "%IteratorPrototype%": hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined$1,
    "%JSON%": (typeof JSON === "undefined" ? "undefined" : _typeof4(JSON)) === "object" ? JSON : undefined$1,
    "%Map%": typeof Map === "undefined" ? undefined$1 : Map,
    "%MapIteratorPrototype%": typeof Map === "undefined" || !hasSymbols || !getProto ? undefined$1 : getProto((/* @__PURE__ */new Map())[Symbol.iterator]()),
    "%Math%": Math,
    "%Number%": Number,
    "%Object%": Object,
    "%parseFloat%": parseFloat,
    "%parseInt%": parseInt,
    "%Promise%": typeof Promise === "undefined" ? undefined$1 : Promise,
    "%Proxy%": typeof Proxy === "undefined" ? undefined$1 : Proxy,
    "%RangeError%": $RangeError,
    "%ReferenceError%": $ReferenceError,
    "%Reflect%": typeof Reflect === "undefined" ? undefined$1 : Reflect,
    "%RegExp%": RegExp,
    "%Set%": typeof Set === "undefined" ? undefined$1 : Set,
    "%SetIteratorPrototype%": typeof Set === "undefined" || !hasSymbols || !getProto ? undefined$1 : getProto((/* @__PURE__ */new Set())[Symbol.iterator]()),
    "%SharedArrayBuffer%": typeof SharedArrayBuffer === "undefined" ? undefined$1 : SharedArrayBuffer,
    "%String%": String,
    "%StringIteratorPrototype%": hasSymbols && getProto ? getProto(""[Symbol.iterator]()) : undefined$1,
    "%Symbol%": hasSymbols ? Symbol : undefined$1,
    "%SyntaxError%": $SyntaxError$1,
    "%ThrowTypeError%": ThrowTypeError,
    "%TypedArray%": TypedArray,
    "%TypeError%": $TypeError$3,
    "%Uint8Array%": typeof Uint8Array === "undefined" ? undefined$1 : Uint8Array,
    "%Uint8ClampedArray%": typeof Uint8ClampedArray === "undefined" ? undefined$1 : Uint8ClampedArray,
    "%Uint16Array%": typeof Uint16Array === "undefined" ? undefined$1 : Uint16Array,
    "%Uint32Array%": typeof Uint32Array === "undefined" ? undefined$1 : Uint32Array,
    "%URIError%": $URIError,
    "%WeakMap%": typeof WeakMap === "undefined" ? undefined$1 : WeakMap,
    "%WeakRef%": typeof WeakRef === "undefined" ? undefined$1 : WeakRef,
    "%WeakSet%": typeof WeakSet === "undefined" ? undefined$1 : WeakSet
  };
  if (getProto) {
    try {
      null.error;
    } catch (e2) {
      var errorProto = getProto(getProto(e2));
      INTRINSICS["%Error.prototype%"] = errorProto;
    }
  }
  var doEval = function doEval2(name) {
    var value;
    if (name === "%AsyncFunction%") {
      value = getEvalledConstructor("async function () {}");
    } else if (name === "%GeneratorFunction%") {
      value = getEvalledConstructor("function* () {}");
    } else if (name === "%AsyncGeneratorFunction%") {
      value = getEvalledConstructor("async function* () {}");
    } else if (name === "%AsyncGenerator%") {
      var fn2 = doEval2("%AsyncGeneratorFunction%");
      if (fn2) {
        value = fn2.prototype;
      }
    } else if (name === "%AsyncIteratorPrototype%") {
      var gen = doEval2("%AsyncGenerator%");
      if (gen && getProto) {
        value = getProto(gen.prototype);
      }
    }
    INTRINSICS[name] = value;
    return value;
  };
  var LEGACY_ALIASES = {
    __proto__: null,
    "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
    "%ArrayPrototype%": ["Array", "prototype"],
    "%ArrayProto_entries%": ["Array", "prototype", "entries"],
    "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
    "%ArrayProto_keys%": ["Array", "prototype", "keys"],
    "%ArrayProto_values%": ["Array", "prototype", "values"],
    "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
    "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
    "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"],
    "%BooleanPrototype%": ["Boolean", "prototype"],
    "%DataViewPrototype%": ["DataView", "prototype"],
    "%DatePrototype%": ["Date", "prototype"],
    "%ErrorPrototype%": ["Error", "prototype"],
    "%EvalErrorPrototype%": ["EvalError", "prototype"],
    "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
    "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
    "%FunctionPrototype%": ["Function", "prototype"],
    "%Generator%": ["GeneratorFunction", "prototype"],
    "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"],
    "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
    "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
    "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
    "%JSONParse%": ["JSON", "parse"],
    "%JSONStringify%": ["JSON", "stringify"],
    "%MapPrototype%": ["Map", "prototype"],
    "%NumberPrototype%": ["Number", "prototype"],
    "%ObjectPrototype%": ["Object", "prototype"],
    "%ObjProto_toString%": ["Object", "prototype", "toString"],
    "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
    "%PromisePrototype%": ["Promise", "prototype"],
    "%PromiseProto_then%": ["Promise", "prototype", "then"],
    "%Promise_all%": ["Promise", "all"],
    "%Promise_reject%": ["Promise", "reject"],
    "%Promise_resolve%": ["Promise", "resolve"],
    "%RangeErrorPrototype%": ["RangeError", "prototype"],
    "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
    "%RegExpPrototype%": ["RegExp", "prototype"],
    "%SetPrototype%": ["Set", "prototype"],
    "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
    "%StringPrototype%": ["String", "prototype"],
    "%SymbolPrototype%": ["Symbol", "prototype"],
    "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
    "%TypedArrayPrototype%": ["TypedArray", "prototype"],
    "%TypeErrorPrototype%": ["TypeError", "prototype"],
    "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
    "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
    "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
    "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
    "%URIErrorPrototype%": ["URIError", "prototype"],
    "%WeakMapPrototype%": ["WeakMap", "prototype"],
    "%WeakSetPrototype%": ["WeakSet", "prototype"]
  };
  var bind = functionBind;
  var hasOwn$1 = hasown;
  var $concat$1 = bind.call(Function.call, Array.prototype.concat);
  var $spliceApply = bind.call(Function.apply, Array.prototype.splice);
  var $replace$1 = bind.call(Function.call, String.prototype.replace);
  var $strSlice = bind.call(Function.call, String.prototype.slice);
  var $exec = bind.call(Function.call, RegExp.prototype.exec);
  var rePropName = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;
  var reEscapeChar = /\\(\\)?/g;
  var stringToPath = function stringToPath2(string) {
    var first = $strSlice(string, 0, 1);
    var last2 = $strSlice(string, -1);
    if (first === "%" && last2 !== "%") {
      throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");
    } else if (last2 === "%" && first !== "%") {
      throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");
    }
    var result2 = [];
    $replace$1(string, rePropName, function (match, number, quote2, subString) {
      result2[result2.length] = quote2 ? $replace$1(subString, reEscapeChar, "$1") : number || match;
    });
    return result2;
  };
  var getBaseIntrinsic = function getBaseIntrinsic2(name, allowMissing) {
    var intrinsicName = name;
    var alias;
    if (hasOwn$1(LEGACY_ALIASES, intrinsicName)) {
      alias = LEGACY_ALIASES[intrinsicName];
      intrinsicName = "%" + alias[0] + "%";
    }
    if (hasOwn$1(INTRINSICS, intrinsicName)) {
      var value = INTRINSICS[intrinsicName];
      if (value === needsEval) {
        value = doEval(intrinsicName);
      }
      if (typeof value === "undefined" && !allowMissing) {
        throw new $TypeError$3("intrinsic " + name + " exists, but is not available. Please file an issue!");
      }
      return {
        alias: alias,
        name: intrinsicName,
        value: value
      };
    }
    throw new $SyntaxError$1("intrinsic " + name + " does not exist!");
  };
  var getIntrinsic = function GetIntrinsic2(name, allowMissing) {
    if (typeof name !== "string" || name.length === 0) {
      throw new $TypeError$3("intrinsic name must be a non-empty string");
    }
    if (arguments.length > 1 && typeof allowMissing !== "boolean") {
      throw new $TypeError$3('"allowMissing" argument must be a boolean');
    }
    if ($exec(/^%?[^%]*%?$/, name) === null) {
      throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
    }
    var parts = stringToPath(name);
    var intrinsicBaseName = parts.length > 0 ? parts[0] : "";
    var intrinsic = getBaseIntrinsic("%" + intrinsicBaseName + "%", allowMissing);
    var intrinsicRealName = intrinsic.name;
    var value = intrinsic.value;
    var skipFurtherCaching = false;
    var alias = intrinsic.alias;
    if (alias) {
      intrinsicBaseName = alias[0];
      $spliceApply(parts, $concat$1([0, 1], alias));
    }
    for (var i2 = 1, isOwn = true; i2 < parts.length; i2 += 1) {
      var part = parts[i2];
      var first = $strSlice(part, 0, 1);
      var last2 = $strSlice(part, -1);
      if ((first === '"' || first === "'" || first === "`" || last2 === '"' || last2 === "'" || last2 === "`") && first !== last2) {
        throw new $SyntaxError$1("property names with quotes must have matching quotes");
      }
      if (part === "constructor" || !isOwn) {
        skipFurtherCaching = true;
      }
      intrinsicBaseName += "." + part;
      intrinsicRealName = "%" + intrinsicBaseName + "%";
      if (hasOwn$1(INTRINSICS, intrinsicRealName)) {
        value = INTRINSICS[intrinsicRealName];
      } else if (value != null) {
        if (!(part in value)) {
          if (!allowMissing) {
            throw new $TypeError$3("base intrinsic for " + name + " exists, but the property is not available.");
          }
          return void 0;
        }
        if ($gOPD$1 && i2 + 1 >= parts.length) {
          var desc = $gOPD$1(value, part);
          isOwn = !!desc;
          if (isOwn && "get" in desc && !("originalValue" in desc.get)) {
            value = desc.get;
          } else {
            value = value[part];
          }
        } else {
          isOwn = hasOwn$1(value, part);
          value = value[part];
        }
        if (isOwn && !skipFurtherCaching) {
          INTRINSICS[intrinsicRealName] = value;
        }
      }
    }
    return value;
  };
  var callBind$1 = {
    exports: {}
  };
  var esDefineProperty;
  var hasRequiredEsDefineProperty;
  function requireEsDefineProperty() {
    if (hasRequiredEsDefineProperty) return esDefineProperty;
    hasRequiredEsDefineProperty = 1;
    var GetIntrinsic2 = getIntrinsic;
    var $defineProperty2 = GetIntrinsic2("%Object.defineProperty%", true) || false;
    if ($defineProperty2) {
      try {
        $defineProperty2({}, "a", {
          value: 1
        });
      } catch (e2) {
        $defineProperty2 = false;
      }
    }
    esDefineProperty = $defineProperty2;
    return esDefineProperty;
  }
  var GetIntrinsic$3 = getIntrinsic;
  var $gOPD = GetIntrinsic$3("%Object.getOwnPropertyDescriptor%", true);
  if ($gOPD) {
    try {
      $gOPD([], "length");
    } catch (e2) {
      $gOPD = null;
    }
  }
  var gopd$1 = $gOPD;
  var $defineProperty$1 = requireEsDefineProperty();
  var $SyntaxError = syntax;
  var $TypeError$2 = type;
  var gopd = gopd$1;
  var defineDataProperty = function defineDataProperty2(obj, property, value) {
    if (!obj || _typeof4(obj) !== "object" && typeof obj !== "function") {
      throw new $TypeError$2("`obj` must be an object or a function`");
    }
    if (typeof property !== "string" && _typeof4(property) !== "symbol") {
      throw new $TypeError$2("`property` must be a string or a symbol`");
    }
    if (arguments.length > 3 && typeof arguments[3] !== "boolean" && arguments[3] !== null) {
      throw new $TypeError$2("`nonEnumerable`, if provided, must be a boolean or null");
    }
    if (arguments.length > 4 && typeof arguments[4] !== "boolean" && arguments[4] !== null) {
      throw new $TypeError$2("`nonWritable`, if provided, must be a boolean or null");
    }
    if (arguments.length > 5 && typeof arguments[5] !== "boolean" && arguments[5] !== null) {
      throw new $TypeError$2("`nonConfigurable`, if provided, must be a boolean or null");
    }
    if (arguments.length > 6 && typeof arguments[6] !== "boolean") {
      throw new $TypeError$2("`loose`, if provided, must be a boolean");
    }
    var nonEnumerable = arguments.length > 3 ? arguments[3] : null;
    var nonWritable = arguments.length > 4 ? arguments[4] : null;
    var nonConfigurable = arguments.length > 5 ? arguments[5] : null;
    var loose = arguments.length > 6 ? arguments[6] : false;
    var desc = !!gopd && gopd(obj, property);
    if ($defineProperty$1) {
      $defineProperty$1(obj, property, {
        configurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,
        enumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,
        value: value,
        writable: nonWritable === null && desc ? desc.writable : !nonWritable
      });
    } else if (loose || !nonEnumerable && !nonWritable && !nonConfigurable) {
      obj[property] = value;
    } else {
      throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");
    }
  };
  var $defineProperty = requireEsDefineProperty();
  var hasPropertyDescriptors = function hasPropertyDescriptors2() {
    return !!$defineProperty;
  };
  hasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {
    if (!$defineProperty) {
      return null;
    }
    try {
      return $defineProperty([], "length", {
        value: 1
      }).length !== 1;
    } catch (e2) {
      return true;
    }
  };
  var hasPropertyDescriptors_1 = hasPropertyDescriptors;
  var GetIntrinsic$2 = getIntrinsic;
  var define2 = defineDataProperty;
  var hasDescriptors = hasPropertyDescriptors_1();
  var gOPD = gopd$1;
  var $TypeError$1 = type;
  var $floor$1 = GetIntrinsic$2("%Math.floor%");
  var setFunctionLength = function setFunctionLength2(fn2, length) {
    if (typeof fn2 !== "function") {
      throw new $TypeError$1("`fn` is not a function");
    }
    if (typeof length !== "number" || length < 0 || length > 4294967295 || $floor$1(length) !== length) {
      throw new $TypeError$1("`length` must be a positive 32-bit integer");
    }
    var loose = arguments.length > 2 && !!arguments[2];
    var functionLengthIsConfigurable = true;
    var functionLengthIsWritable = true;
    if ("length" in fn2 && gOPD) {
      var desc = gOPD(fn2, "length");
      if (desc && !desc.configurable) {
        functionLengthIsConfigurable = false;
      }
      if (desc && !desc.writable) {
        functionLengthIsWritable = false;
      }
    }
    if (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {
      if (hasDescriptors) {
        define2(/** @type {Parameters<define>[0]} */
        fn2, "length", length, true, true);
      } else {
        define2(/** @type {Parameters<define>[0]} */
        fn2, "length", length);
      }
    }
    return fn2;
  };
  (function (module2) {
    var bind2 = functionBind;
    var GetIntrinsic2 = getIntrinsic;
    var setFunctionLength$1 = setFunctionLength;
    var $TypeError2 = type;
    var $apply = GetIntrinsic2("%Function.prototype.apply%");
    var $call = GetIntrinsic2("%Function.prototype.call%");
    var $reflectApply = GetIntrinsic2("%Reflect.apply%", true) || bind2.call($call, $apply);
    var $defineProperty2 = requireEsDefineProperty();
    var $max = GetIntrinsic2("%Math.max%");
    module2.exports = function callBind2(originalFunction) {
      if (typeof originalFunction !== "function") {
        throw new $TypeError2("a function is required");
      }
      var func = $reflectApply(bind2, $call, arguments);
      return setFunctionLength$1(func, 1 + $max(0, originalFunction.length - (arguments.length - 1)), true);
    };
    var applyBind = function applyBind2() {
      return $reflectApply(bind2, $apply, arguments);
    };
    if ($defineProperty2) {
      $defineProperty2(module2.exports, "apply", {
        value: applyBind
      });
    } else {
      module2.exports.apply = applyBind;
    }
  })(callBind$1);
  var callBindExports = callBind$1.exports;
  var GetIntrinsic$1 = getIntrinsic;
  var callBind = callBindExports;
  var $indexOf = callBind(GetIntrinsic$1("String.prototype.indexOf"));
  var callBound$1 = function callBoundIntrinsic(name, allowMissing) {
    var intrinsic = GetIntrinsic$1(name, !!allowMissing);
    if (typeof intrinsic === "function" && $indexOf(name, ".prototype.") > -1) {
      return callBind(intrinsic);
    }
    return intrinsic;
  };
  var __viteBrowserExternal = {};
  var __viteBrowserExternal$1 = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({
    __proto__: null,
    "default": __viteBrowserExternal
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  var require$$0 = /* @__PURE__ */getAugmentedNamespace(__viteBrowserExternal$1);
  var hasMap = typeof Map === "function" && Map.prototype;
  var mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, "size") : null;
  var mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === "function" ? mapSizeDescriptor.get : null;
  var mapForEach = hasMap && Map.prototype.forEach;
  var hasSet = typeof Set === "function" && Set.prototype;
  var setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, "size") : null;
  var setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === "function" ? setSizeDescriptor.get : null;
  var setForEach = hasSet && Set.prototype.forEach;
  var hasWeakMap = typeof WeakMap === "function" && WeakMap.prototype;
  var weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;
  var hasWeakSet = typeof WeakSet === "function" && WeakSet.prototype;
  var weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;
  var hasWeakRef = typeof WeakRef === "function" && WeakRef.prototype;
  var weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;
  var booleanValueOf = Boolean.prototype.valueOf;
  var objectToString = Object.prototype.toString;
  var functionToString = Function.prototype.toString;
  var $match = String.prototype.match;
  var $slice = String.prototype.slice;
  var $replace = String.prototype.replace;
  var $toUpperCase = String.prototype.toUpperCase;
  var $toLowerCase = String.prototype.toLowerCase;
  var $test = RegExp.prototype.test;
  var $concat = Array.prototype.concat;
  var $join = Array.prototype.join;
  var $arrSlice = Array.prototype.slice;
  var $floor = Math.floor;
  var bigIntValueOf = typeof BigInt === "function" ? BigInt.prototype.valueOf : null;
  var gOPS = Object.getOwnPropertySymbols;
  var symToString = typeof Symbol === "function" && _typeof4(Symbol.iterator) === "symbol" ? Symbol.prototype.toString : null;
  var hasShammedSymbols = typeof Symbol === "function" && _typeof4(Symbol.iterator) === "object";
  var toStringTag = typeof Symbol === "function" && Symbol.toStringTag && (_typeof4(Symbol.toStringTag) === hasShammedSymbols ? "object" : "symbol") ? Symbol.toStringTag : null;
  var isEnumerable = Object.prototype.propertyIsEnumerable;
  var gPO = (typeof Reflect === "function" ? Reflect.getPrototypeOf : Object.getPrototypeOf) || ([].__proto__ === Array.prototype ? function (O2) {
    return O2.__proto__;
  } : null);
  function addNumericSeparator(num, str) {
    if (num === Infinity || num === -Infinity || num !== num || num && num > -1e3 && num < 1e3 || $test.call(/e/, str)) {
      return str;
    }
    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;
    if (typeof num === "number") {
      var _int = num < 0 ? -$floor(-num) : $floor(num);
      if (_int !== num) {
        var intStr = String(_int);
        var dec = $slice.call(str, intStr.length + 1);
        return $replace.call(intStr, sepRegex, "$&_") + "." + $replace.call($replace.call(dec, /([0-9]{3})/g, "$&_"), /_$/, "");
      }
    }
    return $replace.call(str, sepRegex, "$&_");
  }
  var utilInspect = require$$0;
  var inspectCustom = utilInspect.custom;
  var inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;
  var quotes = {
    __proto__: null,
    "double": '"',
    single: "'"
  };
  var quoteREs = {
    __proto__: null,
    "double": /(["\\])/g,
    single: /(['\\])/g
  };
  var objectInspect = function inspect_(obj, options, depth, seen) {
    var opts = options || {};
    if (has$3(opts, "quoteStyle") && !has$3(quotes, opts.quoteStyle)) {
      throw new TypeError('option "quoteStyle" must be "single" or "double"');
    }
    if (has$3(opts, "maxStringLength") && (typeof opts.maxStringLength === "number" ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity : opts.maxStringLength !== null)) {
      throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');
    }
    var customInspect = has$3(opts, "customInspect") ? opts.customInspect : true;
    if (typeof customInspect !== "boolean" && customInspect !== "symbol") {
      throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");
    }
    if (has$3(opts, "indent") && opts.indent !== null && opts.indent !== "	" && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)) {
      throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');
    }
    if (has$3(opts, "numericSeparator") && typeof opts.numericSeparator !== "boolean") {
      throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');
    }
    var numericSeparator = opts.numericSeparator;
    if (typeof obj === "undefined") {
      return "undefined";
    }
    if (obj === null) {
      return "null";
    }
    if (typeof obj === "boolean") {
      return obj ? "true" : "false";
    }
    if (typeof obj === "string") {
      return inspectString(obj, opts);
    }
    if (typeof obj === "number") {
      if (obj === 0) {
        return Infinity / obj > 0 ? "0" : "-0";
      }
      var str = String(obj);
      return numericSeparator ? addNumericSeparator(obj, str) : str;
    }
    if (typeof obj === "bigint") {
      var bigIntStr = String(obj) + "n";
      return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;
    }
    var maxDepth = typeof opts.depth === "undefined" ? 5 : opts.depth;
    if (typeof depth === "undefined") {
      depth = 0;
    }
    if (depth >= maxDepth && maxDepth > 0 && _typeof4(obj) === "object") {
      return isArray$4(obj) ? "[Array]" : "[Object]";
    }
    var indent = getIndent(opts, depth);
    if (typeof seen === "undefined") {
      seen = [];
    } else if (indexOf(seen, obj) >= 0) {
      return "[Circular]";
    }
    function inspect2(value, from, noIndent) {
      if (from) {
        seen = $arrSlice.call(seen);
        seen.push(from);
      }
      if (noIndent) {
        var newOpts = {
          depth: opts.depth
        };
        if (has$3(opts, "quoteStyle")) {
          newOpts.quoteStyle = opts.quoteStyle;
        }
        return inspect_(value, newOpts, depth + 1, seen);
      }
      return inspect_(value, opts, depth + 1, seen);
    }
    if (typeof obj === "function" && !isRegExp$1(obj)) {
      var name = nameOf(obj);
      var keys2 = arrObjKeys(obj, inspect2);
      return "[Function" + (name ? ": " + name : " (anonymous)") + "]" + (keys2.length > 0 ? " { " + $join.call(keys2, ", ") + " }" : "");
    }
    if (isSymbol(obj)) {
      var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\(.*\))_[^)]*$/, "$1") : symToString.call(obj);
      return _typeof4(obj) === "object" && !hasShammedSymbols ? markBoxed(symString) : symString;
    }
    if (isElement(obj)) {
      var s2 = "<" + $toLowerCase.call(String(obj.nodeName));
      var attrs = obj.attributes || [];
      for (var i2 = 0; i2 < attrs.length; i2++) {
        s2 += " " + attrs[i2].name + "=" + wrapQuotes(quote(attrs[i2].value), "double", opts);
      }
      s2 += ">";
      if (obj.childNodes && obj.childNodes.length) {
        s2 += "...";
      }
      s2 += "</" + $toLowerCase.call(String(obj.nodeName)) + ">";
      return s2;
    }
    if (isArray$4(obj)) {
      if (obj.length === 0) {
        return "[]";
      }
      var xs = arrObjKeys(obj, inspect2);
      if (indent && !singleLineValues(xs)) {
        return "[" + indentedJoin(xs, indent) + "]";
      }
      return "[ " + $join.call(xs, ", ") + " ]";
    }
    if (isError(obj)) {
      var parts = arrObjKeys(obj, inspect2);
      if (!("cause" in Error.prototype) && "cause" in obj && !isEnumerable.call(obj, "cause")) {
        return "{ [" + String(obj) + "] " + $join.call($concat.call("[cause]: " + inspect2(obj.cause), parts), ", ") + " }";
      }
      if (parts.length === 0) {
        return "[" + String(obj) + "]";
      }
      return "{ [" + String(obj) + "] " + $join.call(parts, ", ") + " }";
    }
    if (_typeof4(obj) === "object" && customInspect) {
      if (inspectSymbol && typeof obj[inspectSymbol] === "function" && utilInspect) {
        return utilInspect(obj, {
          depth: maxDepth - depth
        });
      } else if (customInspect !== "symbol" && typeof obj.inspect === "function") {
        return obj.inspect();
      }
    }
    if (isMap(obj)) {
      var mapParts = [];
      if (mapForEach) {
        mapForEach.call(obj, function (value, key) {
          mapParts.push(inspect2(key, obj, true) + " => " + inspect2(value, obj));
        });
      }
      return collectionOf("Map", mapSize.call(obj), mapParts, indent);
    }
    if (isSet(obj)) {
      var setParts = [];
      if (setForEach) {
        setForEach.call(obj, function (value) {
          setParts.push(inspect2(value, obj));
        });
      }
      return collectionOf("Set", setSize.call(obj), setParts, indent);
    }
    if (isWeakMap(obj)) {
      return weakCollectionOf("WeakMap");
    }
    if (isWeakSet(obj)) {
      return weakCollectionOf("WeakSet");
    }
    if (isWeakRef(obj)) {
      return weakCollectionOf("WeakRef");
    }
    if (isNumber(obj)) {
      return markBoxed(inspect2(Number(obj)));
    }
    if (isBigInt(obj)) {
      return markBoxed(inspect2(bigIntValueOf.call(obj)));
    }
    if (isBoolean(obj)) {
      return markBoxed(booleanValueOf.call(obj));
    }
    if (isString(obj)) {
      return markBoxed(inspect2(String(obj)));
    }
    if (typeof window !== "undefined" && obj === window) {
      return "{ [object Window] }";
    }
    if (typeof globalThis !== "undefined" && obj === globalThis || typeof commonjsGlobal !== "undefined" && obj === commonjsGlobal) {
      return "{ [object globalThis] }";
    }
    if (!isDate$1(obj) && !isRegExp$1(obj)) {
      var ys = arrObjKeys(obj, inspect2);
      var isPlainObject2 = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;
      var protoTag = obj instanceof Object ? "" : "null prototype";
      var stringTag2 = !isPlainObject2 && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? "Object" : "";
      var constructorTag = isPlainObject2 || typeof obj.constructor !== "function" ? "" : obj.constructor.name ? obj.constructor.name + " " : "";
      var tag = constructorTag + (stringTag2 || protoTag ? "[" + $join.call($concat.call([], stringTag2 || [], protoTag || []), ": ") + "] " : "");
      if (ys.length === 0) {
        return tag + "{}";
      }
      if (indent) {
        return tag + "{" + indentedJoin(ys, indent) + "}";
      }
      return tag + "{ " + $join.call(ys, ", ") + " }";
    }
    return String(obj);
  };
  function wrapQuotes(s2, defaultStyle, opts) {
    var style = opts.quoteStyle || defaultStyle;
    var quoteChar = quotes[style];
    return quoteChar + s2 + quoteChar;
  }
  function quote(s2) {
    return $replace.call(String(s2), /"/g, "&quot;");
  }
  function isArray$4(obj) {
    return toStr(obj) === "[object Array]" && (!toStringTag || !(_typeof4(obj) === "object" && toStringTag in obj));
  }
  function isDate$1(obj) {
    return toStr(obj) === "[object Date]" && (!toStringTag || !(_typeof4(obj) === "object" && toStringTag in obj));
  }
  function isRegExp$1(obj) {
    return toStr(obj) === "[object RegExp]" && (!toStringTag || !(_typeof4(obj) === "object" && toStringTag in obj));
  }
  function isError(obj) {
    return toStr(obj) === "[object Error]" && (!toStringTag || !(_typeof4(obj) === "object" && toStringTag in obj));
  }
  function isString(obj) {
    return toStr(obj) === "[object String]" && (!toStringTag || !(_typeof4(obj) === "object" && toStringTag in obj));
  }
  function isNumber(obj) {
    return toStr(obj) === "[object Number]" && (!toStringTag || !(_typeof4(obj) === "object" && toStringTag in obj));
  }
  function isBoolean(obj) {
    return toStr(obj) === "[object Boolean]" && (!toStringTag || !(_typeof4(obj) === "object" && toStringTag in obj));
  }
  function isSymbol(obj) {
    if (hasShammedSymbols) {
      return obj && _typeof4(obj) === "object" && obj instanceof Symbol;
    }
    if (_typeof4(obj) === "symbol") {
      return true;
    }
    if (!obj || _typeof4(obj) !== "object" || !symToString) {
      return false;
    }
    try {
      symToString.call(obj);
      return true;
    } catch (e2) {}
    return false;
  }
  function isBigInt(obj) {
    if (!obj || _typeof4(obj) !== "object" || !bigIntValueOf) {
      return false;
    }
    try {
      bigIntValueOf.call(obj);
      return true;
    } catch (e2) {}
    return false;
  }
  var hasOwn = Object.prototype.hasOwnProperty || function (key) {
    return key in this;
  };
  function has$3(obj, key) {
    return hasOwn.call(obj, key);
  }
  function toStr(obj) {
    return objectToString.call(obj);
  }
  function nameOf(f2) {
    if (f2.name) {
      return f2.name;
    }
    var m2 = $match.call(functionToString.call(f2), /^function\s*([\w$]+)/);
    if (m2) {
      return m2[1];
    }
    return null;
  }
  function indexOf(xs, x2) {
    if (xs.indexOf) {
      return xs.indexOf(x2);
    }
    for (var i2 = 0, l2 = xs.length; i2 < l2; i2++) {
      if (xs[i2] === x2) {
        return i2;
      }
    }
    return -1;
  }
  function isMap(x2) {
    if (!mapSize || !x2 || _typeof4(x2) !== "object") {
      return false;
    }
    try {
      mapSize.call(x2);
      try {
        setSize.call(x2);
      } catch (s2) {
        return true;
      }
      return x2 instanceof Map;
    } catch (e2) {}
    return false;
  }
  function isWeakMap(x2) {
    if (!weakMapHas || !x2 || _typeof4(x2) !== "object") {
      return false;
    }
    try {
      weakMapHas.call(x2, weakMapHas);
      try {
        weakSetHas.call(x2, weakSetHas);
      } catch (s2) {
        return true;
      }
      return x2 instanceof WeakMap;
    } catch (e2) {}
    return false;
  }
  function isWeakRef(x2) {
    if (!weakRefDeref || !x2 || _typeof4(x2) !== "object") {
      return false;
    }
    try {
      weakRefDeref.call(x2);
      return true;
    } catch (e2) {}
    return false;
  }
  function isSet(x2) {
    if (!setSize || !x2 || _typeof4(x2) !== "object") {
      return false;
    }
    try {
      setSize.call(x2);
      try {
        mapSize.call(x2);
      } catch (m2) {
        return true;
      }
      return x2 instanceof Set;
    } catch (e2) {}
    return false;
  }
  function isWeakSet(x2) {
    if (!weakSetHas || !x2 || _typeof4(x2) !== "object") {
      return false;
    }
    try {
      weakSetHas.call(x2, weakSetHas);
      try {
        weakMapHas.call(x2, weakMapHas);
      } catch (s2) {
        return true;
      }
      return x2 instanceof WeakSet;
    } catch (e2) {}
    return false;
  }
  function isElement(x2) {
    if (!x2 || _typeof4(x2) !== "object") {
      return false;
    }
    if (typeof HTMLElement !== "undefined" && x2 instanceof HTMLElement) {
      return true;
    }
    return typeof x2.nodeName === "string" && typeof x2.getAttribute === "function";
  }
  function inspectString(str, opts) {
    if (str.length > opts.maxStringLength) {
      var remaining = str.length - opts.maxStringLength;
      var trailer = "... " + remaining + " more character" + (remaining > 1 ? "s" : "");
      return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;
    }
    var quoteRE = quoteREs[opts.quoteStyle || "single"];
    quoteRE.lastIndex = 0;
    var s2 = $replace.call($replace.call(str, quoteRE, "\\$1"), /[\x00-\x1f]/g, lowbyte);
    return wrapQuotes(s2, "single", opts);
  }
  function lowbyte(c2) {
    var n2 = c2.charCodeAt(0);
    var x2 = {
      8: "b",
      9: "t",
      10: "n",
      12: "f",
      13: "r"
    }[n2];
    if (x2) {
      return "\\" + x2;
    }
    return "\\x" + (n2 < 16 ? "0" : "") + $toUpperCase.call(n2.toString(16));
  }
  function markBoxed(str) {
    return "Object(" + str + ")";
  }
  function weakCollectionOf(type2) {
    return type2 + " { ? }";
  }
  function collectionOf(type2, size, entries, indent) {
    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ", ");
    return type2 + " (" + size + ") {" + joinedEntries + "}";
  }
  function singleLineValues(xs) {
    for (var i2 = 0; i2 < xs.length; i2++) {
      if (indexOf(xs[i2], "\n") >= 0) {
        return false;
      }
    }
    return true;
  }
  function getIndent(opts, depth) {
    var baseIndent;
    if (opts.indent === "	") {
      baseIndent = "	";
    } else if (typeof opts.indent === "number" && opts.indent > 0) {
      baseIndent = $join.call(Array(opts.indent + 1), " ");
    } else {
      return null;
    }
    return {
      base: baseIndent,
      prev: $join.call(Array(depth + 1), baseIndent)
    };
  }
  function indentedJoin(xs, indent) {
    if (xs.length === 0) {
      return "";
    }
    var lineJoiner = "\n" + indent.prev + indent.base;
    return lineJoiner + $join.call(xs, "," + lineJoiner) + "\n" + indent.prev;
  }
  function arrObjKeys(obj, inspect2) {
    var isArr = isArray$4(obj);
    var xs = [];
    if (isArr) {
      xs.length = obj.length;
      for (var i2 = 0; i2 < obj.length; i2++) {
        xs[i2] = has$3(obj, i2) ? inspect2(obj[i2], obj) : "";
      }
    }
    var syms = typeof gOPS === "function" ? gOPS(obj) : [];
    var symMap;
    if (hasShammedSymbols) {
      symMap = {};
      for (var k2 = 0; k2 < syms.length; k2++) {
        symMap["$" + syms[k2]] = syms[k2];
      }
    }
    for (var key in obj) {
      if (!has$3(obj, key)) {
        continue;
      }
      if (isArr && String(Number(key)) === key && key < obj.length) {
        continue;
      }
      if (hasShammedSymbols && symMap["$" + key] instanceof Symbol) {
        continue;
      } else if ($test.call(/[^\w$]/, key)) {
        xs.push(inspect2(key, obj) + ": " + inspect2(obj[key], obj));
      } else {
        xs.push(key + ": " + inspect2(obj[key], obj));
      }
    }
    if (typeof gOPS === "function") {
      for (var j2 = 0; j2 < syms.length; j2++) {
        if (isEnumerable.call(obj, syms[j2])) {
          xs.push("[" + inspect2(syms[j2]) + "]: " + inspect2(obj[syms[j2]], obj));
        }
      }
    }
    return xs;
  }
  var GetIntrinsic = getIntrinsic;
  var callBound = callBound$1;
  var inspect = objectInspect;
  var $TypeError = type;
  var $WeakMap = GetIntrinsic("%WeakMap%", true);
  var $Map = GetIntrinsic("%Map%", true);
  var $weakMapGet = callBound("WeakMap.prototype.get", true);
  var $weakMapSet = callBound("WeakMap.prototype.set", true);
  var $weakMapHas = callBound("WeakMap.prototype.has", true);
  var $mapGet = callBound("Map.prototype.get", true);
  var $mapSet = callBound("Map.prototype.set", true);
  var $mapHas = callBound("Map.prototype.has", true);
  var listGetNode = function listGetNode(list, key) {
    var prev = list;
    var curr;
    for (; (curr = prev.next) !== null; prev = curr) {
      if (curr.key === key) {
        prev.next = curr.next;
        curr.next = /** @type {NonNullable<typeof list.next>} */
        list.next;
        list.next = curr;
        return curr;
      }
    }
  };
  var listGet = function listGet(objects, key) {
    var node = listGetNode(objects, key);
    return node && node.value;
  };
  var listSet = function listSet(objects, key, value) {
    var node = listGetNode(objects, key);
    if (node) {
      node.value = value;
    } else {
      objects.next = /** @type {import('.').ListNode<typeof value>} */
      {
        // eslint-disable-line no-param-reassign, no-extra-parens
        key: key,
        next: objects.next,
        value: value
      };
    }
  };
  var listHas = function listHas(objects, key) {
    return !!listGetNode(objects, key);
  };
  var sideChannel = function getSideChannel2() {
    var $wm;
    var $m;
    var $o;
    var channel = {
      assert: function assert(key) {
        if (!channel.has(key)) {
          throw new $TypeError("Side channel does not contain " + inspect(key));
        }
      },
      get: function get(key) {
        if ($WeakMap && key && (_typeof4(key) === "object" || typeof key === "function")) {
          if ($wm) {
            return $weakMapGet($wm, key);
          }
        } else if ($Map) {
          if ($m) {
            return $mapGet($m, key);
          }
        } else {
          if ($o) {
            return listGet($o, key);
          }
        }
      },
      has: function has(key) {
        if ($WeakMap && key && (_typeof4(key) === "object" || typeof key === "function")) {
          if ($wm) {
            return $weakMapHas($wm, key);
          }
        } else if ($Map) {
          if ($m) {
            return $mapHas($m, key);
          }
        } else {
          if ($o) {
            return listHas($o, key);
          }
        }
        return false;
      },
      set: function set(key, value) {
        if ($WeakMap && key && (_typeof4(key) === "object" || typeof key === "function")) {
          if (!$wm) {
            $wm = new $WeakMap();
          }
          $weakMapSet($wm, key, value);
        } else if ($Map) {
          if (!$m) {
            $m = new $Map();
          }
          $mapSet($m, key, value);
        } else {
          if (!$o) {
            $o = {
              key: {},
              next: null
            };
          }
          listSet($o, key, value);
        }
      }
    };
    return channel;
  };
  var replace = String.prototype.replace;
  var percentTwenties = /%20/g;
  var Format = {
    RFC1738: "RFC1738",
    RFC3986: "RFC3986"
  };
  var formats$3 = {
    "default": Format.RFC3986,
    formatters: {
      RFC1738: function RFC1738(value) {
        return replace.call(value, percentTwenties, "+");
      },
      RFC3986: function RFC3986(value) {
        return String(value);
      }
    },
    RFC1738: Format.RFC1738,
    RFC3986: Format.RFC3986
  };
  var formats$2 = formats$3;
  var has$2 = Object.prototype.hasOwnProperty;
  var isArray$3 = Array.isArray;
  var hexTable = function () {
    var array = [];
    for (var i2 = 0; i2 < 256; ++i2) {
      array.push("%" + ((i2 < 16 ? "0" : "") + i2.toString(16)).toUpperCase());
    }
    return array;
  }();
  var compactQueue = function compactQueue2(queue) {
    while (queue.length > 1) {
      var item = queue.pop();
      var obj = item.obj[item.prop];
      if (isArray$3(obj)) {
        var compacted = [];
        for (var j2 = 0; j2 < obj.length; ++j2) {
          if (typeof obj[j2] !== "undefined") {
            compacted.push(obj[j2]);
          }
        }
        item.obj[item.prop] = compacted;
      }
    }
  };
  var arrayToObject = function arrayToObject2(source, options) {
    var obj = options && options.plainObjects ? {
      __proto__: null
    } : {};
    for (var i2 = 0; i2 < source.length; ++i2) {
      if (typeof source[i2] !== "undefined") {
        obj[i2] = source[i2];
      }
    }
    return obj;
  };
  var merge = function merge2(target, source, options) {
    if (!source) {
      return target;
    }
    if (_typeof4(source) !== "object" && typeof source !== "function") {
      if (isArray$3(target)) {
        target.push(source);
      } else if (target && _typeof4(target) === "object") {
        if (options && (options.plainObjects || options.allowPrototypes) || !has$2.call(Object.prototype, source)) {
          target[source] = true;
        }
      } else {
        return [target, source];
      }
      return target;
    }
    if (!target || _typeof4(target) !== "object") {
      return [target].concat(source);
    }
    var mergeTarget = target;
    if (isArray$3(target) && !isArray$3(source)) {
      mergeTarget = arrayToObject(target, options);
    }
    if (isArray$3(target) && isArray$3(source)) {
      source.forEach(function (item, i2) {
        if (has$2.call(target, i2)) {
          var targetItem = target[i2];
          if (targetItem && _typeof4(targetItem) === "object" && item && _typeof4(item) === "object") {
            target[i2] = merge2(targetItem, item, options);
          } else {
            target.push(item);
          }
        } else {
          target[i2] = item;
        }
      });
      return target;
    }
    return Object.keys(source).reduce(function (acc, key) {
      var value = source[key];
      if (has$2.call(acc, key)) {
        acc[key] = merge2(acc[key], value, options);
      } else {
        acc[key] = value;
      }
      return acc;
    }, mergeTarget);
  };
  var assign = function assignSingleSource(target, source) {
    return Object.keys(source).reduce(function (acc, key) {
      acc[key] = source[key];
      return acc;
    }, target);
  };
  var decode$2 = function decode$2(str, defaultDecoder, charset) {
    var strWithoutPlus = str.replace(/\+/g, " ");
    if (charset === "iso-8859-1") {
      return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);
    }
    try {
      return decodeURIComponent(strWithoutPlus);
    } catch (e2) {
      return strWithoutPlus;
    }
  };
  var limit = 1024;
  var encode$2 = function encode2(str, defaultEncoder, charset, kind, format2) {
    if (str.length === 0) {
      return str;
    }
    var string = str;
    if (_typeof4(str) === "symbol") {
      string = Symbol.prototype.toString.call(str);
    } else if (typeof str !== "string") {
      string = String(str);
    }
    if (charset === "iso-8859-1") {
      return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {
        return "%26%23" + parseInt($0.slice(2), 16) + "%3B";
      });
    }
    var out = "";
    for (var j2 = 0; j2 < string.length; j2 += limit) {
      var segment = string.length >= limit ? string.slice(j2, j2 + limit) : string;
      var arr2 = [];
      for (var i2 = 0; i2 < segment.length; ++i2) {
        var c2 = segment.charCodeAt(i2);
        if (c2 === 45 || c2 === 46 || c2 === 95 || c2 === 126 || c2 >= 48 && c2 <= 57 || c2 >= 65 && c2 <= 90 || c2 >= 97 && c2 <= 122 || format2 === formats$2.RFC1738 && (c2 === 40 || c2 === 41)) {
          arr2[arr2.length] = segment.charAt(i2);
          continue;
        }
        if (c2 < 128) {
          arr2[arr2.length] = hexTable[c2];
          continue;
        }
        if (c2 < 2048) {
          arr2[arr2.length] = hexTable[192 | c2 >> 6] + hexTable[128 | c2 & 63];
          continue;
        }
        if (c2 < 55296 || c2 >= 57344) {
          arr2[arr2.length] = hexTable[224 | c2 >> 12] + hexTable[128 | c2 >> 6 & 63] + hexTable[128 | c2 & 63];
          continue;
        }
        i2 += 1;
        c2 = 65536 + ((c2 & 1023) << 10 | segment.charCodeAt(i2) & 1023);
        arr2[arr2.length] = hexTable[240 | c2 >> 18] + hexTable[128 | c2 >> 12 & 63] + hexTable[128 | c2 >> 6 & 63] + hexTable[128 | c2 & 63];
      }
      out += arr2.join("");
    }
    return out;
  };
  var compact = function compact2(value) {
    var queue = [{
      obj: {
        o: value
      },
      prop: "o"
    }];
    var refs = [];
    for (var i2 = 0; i2 < queue.length; ++i2) {
      var item = queue[i2];
      var obj = item.obj[item.prop];
      var keys2 = Object.keys(obj);
      for (var j2 = 0; j2 < keys2.length; ++j2) {
        var key = keys2[j2];
        var val = obj[key];
        if (_typeof4(val) === "object" && val !== null && refs.indexOf(val) === -1) {
          queue.push({
            obj: obj,
            prop: key
          });
          refs.push(val);
        }
      }
    }
    compactQueue(queue);
    return value;
  };
  var isRegExp = function isRegExp2(obj) {
    return Object.prototype.toString.call(obj) === "[object RegExp]";
  };
  var isBuffer = function isBuffer2(obj) {
    if (!obj || _typeof4(obj) !== "object") {
      return false;
    }
    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));
  };
  var combine = function combine2(a2, b2) {
    return [].concat(a2, b2);
  };
  var maybeMap = function maybeMap2(val, fn2) {
    if (isArray$3(val)) {
      var mapped = [];
      for (var i2 = 0; i2 < val.length; i2 += 1) {
        mapped.push(fn2(val[i2]));
      }
      return mapped;
    }
    return fn2(val);
  };
  var utils$5 = {
    arrayToObject: arrayToObject,
    assign: assign,
    combine: combine,
    compact: compact,
    decode: decode$2,
    encode: encode$2,
    isBuffer: isBuffer,
    isRegExp: isRegExp,
    maybeMap: maybeMap,
    merge: merge
  };
  var getSideChannel = sideChannel;
  var utils$4 = utils$5;
  var formats$1 = formats$3;
  var has$1 = Object.prototype.hasOwnProperty;
  var arrayPrefixGenerators = {
    brackets: function brackets(prefix) {
      return prefix + "[]";
    },
    comma: "comma",
    indices: function indices(prefix, key) {
      return prefix + "[" + key + "]";
    },
    repeat: function repeat(prefix) {
      return prefix;
    }
  };
  var isArray$2 = Array.isArray;
  var push = Array.prototype.push;
  var pushToArray = function pushToArray(arr2, valueOrArray) {
    push.apply(arr2, isArray$2(valueOrArray) ? valueOrArray : [valueOrArray]);
  };
  var toISO = Date.prototype.toISOString;
  var defaultFormat = formats$1["default"];
  var defaults$1 = {
    addQueryPrefix: false,
    allowDots: false,
    allowEmptyArrays: false,
    arrayFormat: "indices",
    charset: "utf-8",
    charsetSentinel: false,
    commaRoundTrip: false,
    delimiter: "&",
    encode: true,
    encodeDotInKeys: false,
    encoder: utils$4.encode,
    encodeValuesOnly: false,
    filter: void 0,
    format: defaultFormat,
    formatter: formats$1.formatters[defaultFormat],
    // deprecated
    indices: false,
    serializeDate: function serializeDate(date) {
      return toISO.call(date);
    },
    skipNulls: false,
    strictNullHandling: false
  };
  var isNonNullishPrimitive = function isNonNullishPrimitive2(v2) {
    return typeof v2 === "string" || typeof v2 === "number" || typeof v2 === "boolean" || _typeof4(v2) === "symbol" || typeof v2 === "bigint";
  };
  var sentinel = {};
  var stringify$2 = function stringify2(object, prefix, generateArrayPrefix, commaRoundTrip, allowEmptyArrays, strictNullHandling, skipNulls, encodeDotInKeys, encoder, filter, sort, allowDots, serializeDate, format2, formatter, encodeValuesOnly, charset, sideChannel2) {
    var obj = object;
    var tmpSc = sideChannel2;
    var step = 0;
    var findFlag = false;
    while ((tmpSc = tmpSc.get(sentinel)) !== void 0 && !findFlag) {
      var pos = tmpSc.get(object);
      step += 1;
      if (typeof pos !== "undefined") {
        if (pos === step) {
          throw new RangeError("Cyclic object value");
        } else {
          findFlag = true;
        }
      }
      if (typeof tmpSc.get(sentinel) === "undefined") {
        step = 0;
      }
    }
    if (typeof filter === "function") {
      obj = filter(prefix, obj);
    } else if (obj instanceof Date) {
      obj = serializeDate(obj);
    } else if (generateArrayPrefix === "comma" && isArray$2(obj)) {
      obj = utils$4.maybeMap(obj, function (value2) {
        if (value2 instanceof Date) {
          return serializeDate(value2);
        }
        return value2;
      });
    }
    if (obj === null) {
      if (strictNullHandling) {
        return encoder && !encodeValuesOnly ? encoder(prefix, defaults$1.encoder, charset, "key", format2) : prefix;
      }
      obj = "";
    }
    if (isNonNullishPrimitive(obj) || utils$4.isBuffer(obj)) {
      if (encoder) {
        var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults$1.encoder, charset, "key", format2);
        return [formatter(keyValue) + "=" + formatter(encoder(obj, defaults$1.encoder, charset, "value", format2))];
      }
      return [formatter(prefix) + "=" + formatter(String(obj))];
    }
    var values = [];
    if (typeof obj === "undefined") {
      return values;
    }
    var objKeys;
    if (generateArrayPrefix === "comma" && isArray$2(obj)) {
      if (encodeValuesOnly && encoder) {
        obj = utils$4.maybeMap(obj, encoder);
      }
      objKeys = [{
        value: obj.length > 0 ? obj.join(",") || null : void 0
      }];
    } else if (isArray$2(filter)) {
      objKeys = filter;
    } else {
      var keys2 = Object.keys(obj);
      objKeys = sort ? keys2.sort(sort) : keys2;
    }
    var encodedPrefix = encodeDotInKeys ? String(prefix).replace(/\./g, "%2E") : String(prefix);
    var adjustedPrefix = commaRoundTrip && isArray$2(obj) && obj.length === 1 ? encodedPrefix + "[]" : encodedPrefix;
    if (allowEmptyArrays && isArray$2(obj) && obj.length === 0) {
      return adjustedPrefix + "[]";
    }
    for (var j2 = 0; j2 < objKeys.length; ++j2) {
      var key = objKeys[j2];
      var value = _typeof4(key) === "object" && key && typeof key.value !== "undefined" ? key.value : obj[key];
      if (skipNulls && value === null) {
        continue;
      }
      var encodedKey = allowDots && encodeDotInKeys ? String(key).replace(/\./g, "%2E") : String(key);
      var keyPrefix = isArray$2(obj) ? typeof generateArrayPrefix === "function" ? generateArrayPrefix(adjustedPrefix, encodedKey) : adjustedPrefix : adjustedPrefix + (allowDots ? "." + encodedKey : "[" + encodedKey + "]");
      sideChannel2.set(object, step);
      var valueSideChannel = getSideChannel();
      valueSideChannel.set(sentinel, sideChannel2);
      pushToArray(values, stringify2(value, keyPrefix, generateArrayPrefix, commaRoundTrip, allowEmptyArrays, strictNullHandling, skipNulls, encodeDotInKeys, generateArrayPrefix === "comma" && encodeValuesOnly && isArray$2(obj) ? null : encoder, filter, sort, allowDots, serializeDate, format2, formatter, encodeValuesOnly, charset, valueSideChannel));
    }
    return values;
  };
  var normalizeStringifyOptions = function normalizeStringifyOptions2(opts) {
    if (!opts) {
      return defaults$1;
    }
    if (typeof opts.allowEmptyArrays !== "undefined" && typeof opts.allowEmptyArrays !== "boolean") {
      throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");
    }
    if (typeof opts.encodeDotInKeys !== "undefined" && typeof opts.encodeDotInKeys !== "boolean") {
      throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");
    }
    if (opts.encoder !== null && typeof opts.encoder !== "undefined" && typeof opts.encoder !== "function") {
      throw new TypeError("Encoder has to be a function.");
    }
    var charset = opts.charset || defaults$1.charset;
    if (typeof opts.charset !== "undefined" && opts.charset !== "utf-8" && opts.charset !== "iso-8859-1") {
      throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
    }
    var format2 = formats$1["default"];
    if (typeof opts.format !== "undefined") {
      if (!has$1.call(formats$1.formatters, opts.format)) {
        throw new TypeError("Unknown format option provided.");
      }
      format2 = opts.format;
    }
    var formatter = formats$1.formatters[format2];
    var filter = defaults$1.filter;
    if (typeof opts.filter === "function" || isArray$2(opts.filter)) {
      filter = opts.filter;
    }
    var arrayFormat;
    if (opts.arrayFormat in arrayPrefixGenerators) {
      arrayFormat = opts.arrayFormat;
    } else if ("indices" in opts) {
      arrayFormat = opts.indices ? "indices" : "repeat";
    } else {
      arrayFormat = defaults$1.arrayFormat;
    }
    if ("commaRoundTrip" in opts && typeof opts.commaRoundTrip !== "boolean") {
      throw new TypeError("`commaRoundTrip` must be a boolean, or absent");
    }
    var allowDots = typeof opts.allowDots === "undefined" ? opts.encodeDotInKeys === true ? true : defaults$1.allowDots : !!opts.allowDots;
    return {
      addQueryPrefix: typeof opts.addQueryPrefix === "boolean" ? opts.addQueryPrefix : defaults$1.addQueryPrefix,
      allowDots: allowDots,
      allowEmptyArrays: typeof opts.allowEmptyArrays === "boolean" ? !!opts.allowEmptyArrays : defaults$1.allowEmptyArrays,
      arrayFormat: arrayFormat,
      charset: charset,
      charsetSentinel: typeof opts.charsetSentinel === "boolean" ? opts.charsetSentinel : defaults$1.charsetSentinel,
      commaRoundTrip: !!opts.commaRoundTrip,
      delimiter: typeof opts.delimiter === "undefined" ? defaults$1.delimiter : opts.delimiter,
      encode: typeof opts.encode === "boolean" ? opts.encode : defaults$1.encode,
      encodeDotInKeys: typeof opts.encodeDotInKeys === "boolean" ? opts.encodeDotInKeys : defaults$1.encodeDotInKeys,
      encoder: typeof opts.encoder === "function" ? opts.encoder : defaults$1.encoder,
      encodeValuesOnly: typeof opts.encodeValuesOnly === "boolean" ? opts.encodeValuesOnly : defaults$1.encodeValuesOnly,
      filter: filter,
      format: format2,
      formatter: formatter,
      serializeDate: typeof opts.serializeDate === "function" ? opts.serializeDate : defaults$1.serializeDate,
      skipNulls: typeof opts.skipNulls === "boolean" ? opts.skipNulls : defaults$1.skipNulls,
      sort: typeof opts.sort === "function" ? opts.sort : null,
      strictNullHandling: typeof opts.strictNullHandling === "boolean" ? opts.strictNullHandling : defaults$1.strictNullHandling
    };
  };
  var stringify_1 = function stringify_1(object, opts) {
    var obj = object;
    var options = normalizeStringifyOptions(opts);
    var objKeys;
    var filter;
    if (typeof options.filter === "function") {
      filter = options.filter;
      obj = filter("", obj);
    } else if (isArray$2(options.filter)) {
      filter = options.filter;
      objKeys = filter;
    }
    var keys2 = [];
    if (_typeof4(obj) !== "object" || obj === null) {
      return "";
    }
    var generateArrayPrefix = arrayPrefixGenerators[options.arrayFormat];
    var commaRoundTrip = generateArrayPrefix === "comma" && options.commaRoundTrip;
    if (!objKeys) {
      objKeys = Object.keys(obj);
    }
    if (options.sort) {
      objKeys.sort(options.sort);
    }
    var sideChannel2 = getSideChannel();
    for (var i2 = 0; i2 < objKeys.length; ++i2) {
      var key = objKeys[i2];
      var value = obj[key];
      if (options.skipNulls && value === null) {
        continue;
      }
      pushToArray(keys2, stringify$2(value, key, generateArrayPrefix, commaRoundTrip, options.allowEmptyArrays, options.strictNullHandling, options.skipNulls, options.encodeDotInKeys, options.encode ? options.encoder : null, options.filter, options.sort, options.allowDots, options.serializeDate, options.format, options.formatter, options.encodeValuesOnly, options.charset, sideChannel2));
    }
    var joined = keys2.join(options.delimiter);
    var prefix = options.addQueryPrefix === true ? "?" : "";
    if (options.charsetSentinel) {
      if (options.charset === "iso-8859-1") {
        prefix += "utf8=%26%2310003%3B&";
      } else {
        prefix += "utf8=%E2%9C%93&";
      }
    }
    return joined.length > 0 ? prefix + joined : "";
  };
  var utils$3 = utils$5;
  var has = Object.prototype.hasOwnProperty;
  var isArray$1 = Array.isArray;
  var defaults = {
    allowDots: false,
    allowEmptyArrays: false,
    allowPrototypes: false,
    allowSparse: false,
    arrayLimit: 20,
    charset: "utf-8",
    charsetSentinel: false,
    comma: false,
    decodeDotInKeys: false,
    decoder: utils$3.decode,
    delimiter: "&",
    depth: 5,
    duplicates: "combine",
    ignoreQueryPrefix: false,
    interpretNumericEntities: false,
    parameterLimit: 1e3,
    parseArrays: true,
    plainObjects: false,
    strictDepth: false,
    strictNullHandling: false
  };
  var interpretNumericEntities = function interpretNumericEntities(str) {
    return str.replace(/&#(\d+);/g, function ($0, numberStr) {
      return String.fromCharCode(parseInt(numberStr, 10));
    });
  };
  var parseArrayValue = function parseArrayValue(val, options) {
    if (val && typeof val === "string" && options.comma && val.indexOf(",") > -1) {
      return val.split(",");
    }
    return val;
  };
  var isoSentinel = "utf8=%26%2310003%3B";
  var charsetSentinel = "utf8=%E2%9C%93";
  var parseValues = function parseQueryStringValues(str, options) {
    var obj = {
      __proto__: null
    };
    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\?/, "") : str;
    cleanStr = cleanStr.replace(/%5B/gi, "[").replace(/%5D/gi, "]");
    var limit2 = options.parameterLimit === Infinity ? void 0 : options.parameterLimit;
    var parts = cleanStr.split(options.delimiter, limit2);
    var skipIndex = -1;
    var i2;
    var charset = options.charset;
    if (options.charsetSentinel) {
      for (i2 = 0; i2 < parts.length; ++i2) {
        if (parts[i2].indexOf("utf8=") === 0) {
          if (parts[i2] === charsetSentinel) {
            charset = "utf-8";
          } else if (parts[i2] === isoSentinel) {
            charset = "iso-8859-1";
          }
          skipIndex = i2;
          i2 = parts.length;
        }
      }
    }
    for (i2 = 0; i2 < parts.length; ++i2) {
      if (i2 === skipIndex) {
        continue;
      }
      var part = parts[i2];
      var bracketEqualsPos = part.indexOf("]=");
      var pos = bracketEqualsPos === -1 ? part.indexOf("=") : bracketEqualsPos + 1;
      var key;
      var val;
      if (pos === -1) {
        key = options.decoder(part, defaults.decoder, charset, "key");
        val = options.strictNullHandling ? null : "";
      } else {
        key = options.decoder(part.slice(0, pos), defaults.decoder, charset, "key");
        val = utils$3.maybeMap(parseArrayValue(part.slice(pos + 1), options), function (encodedVal) {
          return options.decoder(encodedVal, defaults.decoder, charset, "value");
        });
      }
      if (val && options.interpretNumericEntities && charset === "iso-8859-1") {
        val = interpretNumericEntities(String(val));
      }
      if (part.indexOf("[]=") > -1) {
        val = isArray$1(val) ? [val] : val;
      }
      var existing = has.call(obj, key);
      if (existing && options.duplicates === "combine") {
        obj[key] = utils$3.combine(obj[key], val);
      } else if (!existing || options.duplicates === "last") {
        obj[key] = val;
      }
    }
    return obj;
  };
  var parseObject = function parseObject(chain, val, options, valuesParsed) {
    var leaf = valuesParsed ? val : parseArrayValue(val, options);
    for (var i2 = chain.length - 1; i2 >= 0; --i2) {
      var obj;
      var root2 = chain[i2];
      if (root2 === "[]" && options.parseArrays) {
        obj = options.allowEmptyArrays && (leaf === "" || options.strictNullHandling && leaf === null) ? [] : [].concat(leaf);
      } else {
        obj = options.plainObjects ? {
          __proto__: null
        } : {};
        var cleanRoot = root2.charAt(0) === "[" && root2.charAt(root2.length - 1) === "]" ? root2.slice(1, -1) : root2;
        var decodedRoot = options.decodeDotInKeys ? cleanRoot.replace(/%2E/g, ".") : cleanRoot;
        var index2 = parseInt(decodedRoot, 10);
        if (!options.parseArrays && decodedRoot === "") {
          obj = {
            0: leaf
          };
        } else if (!isNaN(index2) && root2 !== decodedRoot && String(index2) === decodedRoot && index2 >= 0 && options.parseArrays && index2 <= options.arrayLimit) {
          obj = [];
          obj[index2] = leaf;
        } else if (decodedRoot !== "__proto__") {
          obj[decodedRoot] = leaf;
        }
      }
      leaf = obj;
    }
    return leaf;
  };
  var parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {
    if (!givenKey) {
      return;
    }
    var key = options.allowDots ? givenKey.replace(/\.([^.[]+)/g, "[$1]") : givenKey;
    var brackets = /(\[[^[\]]*])/;
    var child = /(\[[^[\]]*])/g;
    var segment = options.depth > 0 && brackets.exec(key);
    var parent2 = segment ? key.slice(0, segment.index) : key;
    var keys2 = [];
    if (parent2) {
      if (!options.plainObjects && has.call(Object.prototype, parent2)) {
        if (!options.allowPrototypes) {
          return;
        }
      }
      keys2.push(parent2);
    }
    var i2 = 0;
    while (options.depth > 0 && (segment = child.exec(key)) !== null && i2 < options.depth) {
      i2 += 1;
      if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {
        if (!options.allowPrototypes) {
          return;
        }
      }
      keys2.push(segment[1]);
    }
    if (segment) {
      if (options.strictDepth === true) {
        throw new RangeError("Input depth exceeded depth option of " + options.depth + " and strictDepth is true");
      }
      keys2.push("[" + key.slice(segment.index) + "]");
    }
    return parseObject(keys2, val, options, valuesParsed);
  };
  var normalizeParseOptions = function normalizeParseOptions2(opts) {
    if (!opts) {
      return defaults;
    }
    if (typeof opts.allowEmptyArrays !== "undefined" && typeof opts.allowEmptyArrays !== "boolean") {
      throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");
    }
    if (typeof opts.decodeDotInKeys !== "undefined" && typeof opts.decodeDotInKeys !== "boolean") {
      throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");
    }
    if (opts.decoder !== null && typeof opts.decoder !== "undefined" && typeof opts.decoder !== "function") {
      throw new TypeError("Decoder has to be a function.");
    }
    if (typeof opts.charset !== "undefined" && opts.charset !== "utf-8" && opts.charset !== "iso-8859-1") {
      throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
    }
    var charset = typeof opts.charset === "undefined" ? defaults.charset : opts.charset;
    var duplicates = typeof opts.duplicates === "undefined" ? defaults.duplicates : opts.duplicates;
    if (duplicates !== "combine" && duplicates !== "first" && duplicates !== "last") {
      throw new TypeError("The duplicates option must be either combine, first, or last");
    }
    var allowDots = typeof opts.allowDots === "undefined" ? opts.decodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;
    return {
      allowDots: allowDots,
      allowEmptyArrays: typeof opts.allowEmptyArrays === "boolean" ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,
      allowPrototypes: typeof opts.allowPrototypes === "boolean" ? opts.allowPrototypes : defaults.allowPrototypes,
      allowSparse: typeof opts.allowSparse === "boolean" ? opts.allowSparse : defaults.allowSparse,
      arrayLimit: typeof opts.arrayLimit === "number" ? opts.arrayLimit : defaults.arrayLimit,
      charset: charset,
      charsetSentinel: typeof opts.charsetSentinel === "boolean" ? opts.charsetSentinel : defaults.charsetSentinel,
      comma: typeof opts.comma === "boolean" ? opts.comma : defaults.comma,
      decodeDotInKeys: typeof opts.decodeDotInKeys === "boolean" ? opts.decodeDotInKeys : defaults.decodeDotInKeys,
      decoder: typeof opts.decoder === "function" ? opts.decoder : defaults.decoder,
      delimiter: typeof opts.delimiter === "string" || utils$3.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,
      // eslint-disable-next-line no-implicit-coercion, no-extra-parens
      depth: typeof opts.depth === "number" || opts.depth === false ? +opts.depth : defaults.depth,
      duplicates: duplicates,
      ignoreQueryPrefix: opts.ignoreQueryPrefix === true,
      interpretNumericEntities: typeof opts.interpretNumericEntities === "boolean" ? opts.interpretNumericEntities : defaults.interpretNumericEntities,
      parameterLimit: typeof opts.parameterLimit === "number" ? opts.parameterLimit : defaults.parameterLimit,
      parseArrays: opts.parseArrays !== false,
      plainObjects: typeof opts.plainObjects === "boolean" ? opts.plainObjects : defaults.plainObjects,
      strictDepth: typeof opts.strictDepth === "boolean" ? !!opts.strictDepth : defaults.strictDepth,
      strictNullHandling: typeof opts.strictNullHandling === "boolean" ? opts.strictNullHandling : defaults.strictNullHandling
    };
  };
  var parse$2 = function parse$2(str, opts) {
    var options = normalizeParseOptions(opts);
    if (str === "" || str === null || typeof str === "undefined") {
      return options.plainObjects ? {
        __proto__: null
      } : {};
    }
    var tempObj = typeof str === "string" ? parseValues(str, options) : str;
    var obj = options.plainObjects ? {
      __proto__: null
    } : {};
    var keys2 = Object.keys(tempObj);
    for (var i2 = 0; i2 < keys2.length; ++i2) {
      var key = keys2[i2];
      var newObj = parseKeys(key, tempObj[key], options, typeof str === "string");
      obj = utils$3.merge(obj, newObj, options);
    }
    if (options.allowSparse === true) {
      return obj;
    }
    return utils$3.compact(obj);
  };
  var stringify$1 = stringify_1;
  var parse$1 = parse$2;
  var formats = formats$3;
  var lib$1 = {
    formats: formats,
    parse: parse$1,
    stringify: stringify$1
  };
  var qs = /* @__PURE__ */getDefaultExportFromCjs(lib$1);
  var IS_NODE = typeof window === "undefined";
  var IS_ANDROID = IS_NODE ? true : /android/i.test(window.navigator.userAgent);
  var CONTENT_TYPE_KEY = "Content-Type";
  var ContentType = /* @__PURE__ */function (ContentType2) {
    ContentType2["JSON"] = "application/json";
    ContentType2["Form"] = "application/x-www-form-urlencoded";
    ContentType2["FormData"] = "multipart/form-data";
    return ContentType2;
  }(ContentType || {});
  var BridgeMethod = /* @__PURE__ */function (BridgeMethod2) {
    BridgeMethod2["Request"] = "net.request";
    BridgeMethod2["RequestV2"] = "net.requestV2";
    BridgeMethod2["RequestWithSign"] = "net.requestWithSign";
    BridgeMethod2["RequestWithSignV2"] = "net.requestWithSignV2";
    BridgeMethod2["GetCsrf"] = "net.getCsrf";
    BridgeMethod2["UploadImage"] = "net.uploadImage";
    BridgeMethod2["UploadImageV2"] = "net.uploadImageV2";
    BridgeMethod2["GetContainerInfo"] = "global.getContainerInfo";
    return BridgeMethod2;
  }(BridgeMethod || {});
  var AppMiddlewareName = /* @__PURE__ */function (AppMiddlewareName2) {
    AppMiddlewareName2["Runtime"] = "APP_RUNTIME";
    AppMiddlewareName2["Csrf"] = "BUILT_IN_CSRF";
    AppMiddlewareName2["Body"] = "BUILT_IN_BODY";
    AppMiddlewareName2["AppFetch"] = "APP_FETCH";
    return AppMiddlewareName2;
  }(AppMiddlewareName || {});
  var getCookie = function getCookie(key, from) {
    var result2 = "";
    if (IS_NODE && !from) {
      return result2;
    }
    var cookies = from || document.cookie;
    if (!cookies) {
      return result2;
    }
    var arr2 = cookies.split(";");
    var reg = new RegExp("^".concat(key, "="));
    for (var i2 = 0; i2 < arr2.length; i2++) {
      var tmp = arr2[i2].trim();
      if (reg.test(tmp)) {
        result2 = tmp.split("=")[1];
        break;
      }
    }
    return result2;
  };
  var getMiddlewarePayloadFromCtx = function getMiddlewarePayloadFromCtx(ctx, name) {
    var _a3;
    return ((_a3 = ctx.middleware[name]) == null ? void 0 : _a3.payload) || {};
  };
  var setMiddlewarePayloadToCtx = function setMiddlewarePayloadToCtx(ctx, name, payload) {
    ctx.middleware[name] = {
      payload: payload
    };
  };
  var getContentType = function getContentType(headers) {
    return (headers == null ? void 0 : headers[CONTENT_TYPE_KEY]) || (headers == null ? void 0 : headers["content-type"]);
  };
  var getContentTypeFromData = function getContentTypeFromData(data) {
    if (isFormData(data)) {
      return ContentType.FormData;
    }
    if (isRecordObj(data)) {
      return ContentType.JSON;
    }
    return "";
  };
  var isArray = function isArray(val) {
    return toString.call(val) === "[object Array]";
  };
  var isObject = function isObject(val) {
    return val !== null && _typeof4(val) === "object";
  };
  var isRecordObj = function isRecordObj(obj) {
    return Object.prototype.toString.call(obj) === "[object Object]";
  };
  var isDate = function isDate(val) {
    return toString.call(val) === "[object Date]";
  };
  var isFormData = function isFormData(val) {
    return typeof FormData !== "undefined" && val instanceof FormData;
  };
  var isBlob = function isBlob(val) {
    return toString.call(val) === "[object Blob]" || toString.call(val) === "[object File]";
  };
  var isBase64 = function isBase64(val) {
    return val && typeof val === "string" && val.indexOf("base64") !== -1 && /^data:/.test(val);
  };
  var blob2Base64 = function blob2Base64(blob) {
    return new Promise(function (resolve) {
      var reader = new FileReader();
      reader.onload = function (event2) {
        var _a3;
        resolve((_a3 = event2.target) == null ? void 0 : _a3.result);
      };
      reader.readAsDataURL(blob);
    });
  };
  var encode$1 = function encode$1(val) {
    return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
  };
  function forEach(obj, fn2) {
    if (obj === null || typeof obj === "undefined") {
      return;
    }
    if (_typeof4(obj) !== "object") {
      obj = [obj];
    }
    if (isArray(obj)) {
      for (var i2 = 0, l2 = obj.length; i2 < l2; i2++) {
        fn2.call(null, obj[i2], i2, obj);
      }
    } else {
      for (var _key12 in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, _key12)) {
          fn2.call(null, obj[_key12], _key12, obj);
        }
      }
    }
  }
  var paramSerializer = function paramSerializer(dataObj, runtime2) {
    var parts = [];
    var useQS = !IS_ANDROID && ((runtime2 == null ? void 0 : runtime2.version) === 6 || (runtime2 == null ? void 0 : runtime2.version) === 7);
    if (useQS) {
      return qs.stringify(dataObj);
    }
    forEach(dataObj, function serialize(val, key) {
      if (val === null || typeof val === "undefined") {
        return;
      }
      if (isArray(val)) {
        key = key + "[]";
      } else {
        val = [val];
      }
      forEach(val, function parseValue2(v2) {
        if (isDate(v2)) {
          v2 = v2.toISOString();
        } else if (isObject(v2)) {
          v2 = JSON.stringify(v2);
        }
        if ((runtime2 == null ? void 0 : runtime2.version) === 1 && /^(pwd|password|seccode)/.test(key)) {
          parts.push(encode$1(key) + "=" + v2);
        } else {
          parts.push(encode$1(key) + "=" + encode$1(v2));
        }
      });
    });
    return parts.sort(function (a2, b2) {
      return a2 > b2 ? 1 : -1;
    }).join("&");
  };
  var buildURL = function buildURL(url2, params, runtime2) {
    var serializedParams = paramSerializer(params, runtime2);
    if (!url2) return serializedParams;
    if (serializedParams) {
      var hashMarkIndex = url2.indexOf("#");
      if (hashMarkIndex !== -1) {
        url2 = url2.slice(0, hashMarkIndex);
      }
      url2 += (url2.indexOf("?") === -1 ? "?" : "&") + serializedParams;
    }
    if ((runtime2 == null ? void 0 : runtime2.version) && !/^http/.test(url2)) {
      url2 = "".concat(IS_NODE ? "http:" : window.location.protocol, "//").concat(url2).replace("////", "//");
    }
    return url2;
  };
  var form2obj = function form2obj(form) {
    var obj = {};
    var _iterator7 = _createForOfIteratorHelper2(form.entries()),
      _step7;
    try {
      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
        var _step7$value = _slicedToArray(_step7.value, 2),
          _key13 = _step7$value[0],
          value = _step7$value[1];
        obj[_key13] = value;
      }
    } catch (err) {
      _iterator7.e(err);
    } finally {
      _iterator7.f();
    }
    return obj;
  };
  var obj2form = function obj2form(obj) {
    var form = new FormData();
    for (var _key14 in obj) {
      form.append(_key14, obj[_key14]);
    }
    return form;
  };
  var setWindowRuntime = function setWindowRuntime(runtime2) {
    window.__HTTP_SVC_APP_RUNTIME__ = runtime2;
  };
  var getWindowRuntime = function getWindowRuntime() {
    if (IS_NODE) return null;
    return window.__HTTP_SVC_APP_RUNTIME__ || null;
  };
  var execRuntime = /*#__PURE__*/function () {
    var _ref51 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee60() {
      var version2, device, bridgeIsV1, bridgeIsV2, bridgeIsV3, bridgeIsV4, bridgeIsV5, bridgeIsV6, bridgeIsV7, result2, _parseUA, _detectBridgeIsV1, _detectBridgeIsV2, _detectBridgeIsV3, _detectBridgeIsV4, _detectBridgeIsV5, _detectBridgeIsV6, _detectBridgeIsV7;
      return _regeneratorRuntime().wrap(function _callee60$(_context61) {
        while (1) switch (_context61.prev = _context61.next) {
          case 0:
            version2 = 0;
            device = "";
            bridgeIsV1 = false;
            bridgeIsV2 = false;
            bridgeIsV3 = false;
            bridgeIsV4 = false;
            bridgeIsV5 = false;
            bridgeIsV6 = false;
            bridgeIsV7 = false;
            result2 = {
              version: 0,
              uaDevice: "",
              uaVersion: 0,
              isMainApp: false,
              isWbTypeCommon: b$1
            };
            if (!(IS_NODE || !f$2)) {
              _context61.next = 12;
              break;
            }
            return _context61.abrupt("return", result2);
          case 12:
            if (!getWindowRuntime()) {
              _context61.next = 14;
              break;
            }
            return _context61.abrupt("return", getWindowRuntime());
          case 14:
            _parseUA = function _parseUA() {
              window.navigator.userAgent.split(" ").forEach(function (item) {
                if (/^biliapp/i.test(item)) {
                  version2 = +item.split("/")[1];
                } else if (/^mobi_app/i.test(item)) {
                  device = item.split("/")[1];
                } else if (/^bilicomic/i.test(item)) {
                  version2 = +item.split("/")[1];
                }
              });
            };
            _detectBridgeIsV1 = /*#__PURE__*/function () {
              var _ref52 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee53() {
                var disableV1;
                return _regeneratorRuntime().wrap(function _callee53$(_context54) {
                  while (1) switch (_context54.prev = _context54.next) {
                    case 0:
                      bridgeIsV1 = device === "android_i" ||
                      // 哔哩哔哩 Android 国际版
                      device === "android_comic" && version2 >= 214e5;
                      disableV1 = device === "iphone" && version2 < 8930 ||
                      // 哔哩哔哩 iOS 版
                      device === "ipad" && version2 < 12350 ||
                      // 哔哩哔哩 iPad 版
                      device === "iphone_b" && version2 < 8110;
                      if (!disableV1) {
                        _context54.next = 5;
                        break;
                      }
                      bridgeIsV1 = false;
                      return _context54.abrupt("return");
                    case 5:
                      _context54.next = 7;
                      return P$1(BridgeMethod.Request);
                    case 7:
                      bridgeIsV1 = _context54.sent;
                    case 8:
                    case "end":
                      return _context54.stop();
                  }
                }, _callee53);
              }));
              return function _detectBridgeIsV1() {
                return _ref52.apply(this, arguments);
              };
            }();
            _detectBridgeIsV2 = /*#__PURE__*/function () {
              var _ref53 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee54() {
                return _regeneratorRuntime().wrap(function _callee54$(_context55) {
                  while (1) switch (_context55.prev = _context55.next) {
                    case 0:
                      bridgeIsV2 = device === "bstar_i" && version2 >= 1e6 ||
                      // iOS 新国际版
                      device === "ios_bbs" || device === "UNKNOWN" ||
                      // 必剪 hot-fix
                      device === "bstar_a" && version2 >= 1000013 ||
                      // Android 新国际版
                      device === "iphone_i" && version2 >= 1e4 ||
                      // iOS 旧国际版
                      device === "android_i" && version2 >= 2050400 ||
                      // Android 旧国际版
                      device === "android" && version2 > 551e4 ||
                      // 哔哩哔哩 Android
                      device === "android_b" && version2 >= 535e4 ||
                      // 哔哩哔哩 Android 概念版
                      device === "iphone" && version2 > 8960 ||
                      // 哔哩哔哩 iOS 版
                      device === "ipad" && version2 > 12300 ||
                      // 哔哩哔哩 iPad 版
                      device === "iphone_b" && version2 > 8990 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "android_comic" && version2 >= 2161e4 ||
                      // 哔哩哔哩漫画 Android
                      device === "android_bbs" && version2 >= 1000200;
                      if (!bridgeIsV2) {
                        _context55.next = 5;
                        break;
                      }
                      _context55.next = 4;
                      return P$1(BridgeMethod.Request);
                    case 4:
                      bridgeIsV2 = _context55.sent;
                    case 5:
                    case "end":
                      return _context55.stop();
                  }
                }, _callee54);
              }));
              return function _detectBridgeIsV2() {
                return _ref53.apply(this, arguments);
              };
            }();
            _detectBridgeIsV3 = /*#__PURE__*/function () {
              var _ref54 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee55() {
                return _regeneratorRuntime().wrap(function _callee55$(_context56) {
                  while (1) switch (_context56.prev = _context56.next) {
                    case 0:
                      if (!IS_ANDROID) {
                        _context56.next = 2;
                        break;
                      }
                      return _context56.abrupt("return");
                    case 2:
                      if (!(device !== "iphone_comic" && device !== "ipad_comic")) {
                        _context56.next = 4;
                        break;
                      }
                      return _context56.abrupt("return");
                    case 4:
                      bridgeIsV3 = true;
                      _context56.next = 7;
                      return P$1(BridgeMethod.RequestWithSign);
                    case 7:
                      bridgeIsV3 = _context56.sent;
                    case 8:
                    case "end":
                      return _context56.stop();
                  }
                }, _callee55);
              }));
              return function _detectBridgeIsV3() {
                return _ref54.apply(this, arguments);
              };
            }();
            _detectBridgeIsV4 = /*#__PURE__*/function () {
              var _ref55 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee56() {
                return _regeneratorRuntime().wrap(function _callee56$(_context57) {
                  while (1) switch (_context57.prev = _context57.next) {
                    case 0:
                      bridgeIsV4 = device === "iphone" && version2 > 1e4 ||
                      // 哔哩哔哩 iOS 版
                      device === "iphone_i" && version2 >= 1e4 ||
                      // 哔哩哔哩 iOS 国际版
                      device === "iphone_b" && version2 > 9360 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "ipad" && version2 > 12390 ||
                      // 哔哩哔哩 iPad 版
                      device === "android" && version2 >= 601e4 ||
                      // 哔哩哔哩 Android
                      device === "android_b" && version2 >= 541e4 ||
                      // 哔哩哔哩 Android 概念版
                      device === "android_bbs" && version2 >= 1000200;
                      if (!bridgeIsV4) {
                        _context57.next = 5;
                        break;
                      }
                      _context57.next = 4;
                      return P$1(BridgeMethod.RequestWithSign);
                    case 4:
                      bridgeIsV4 = _context57.sent;
                    case 5:
                    case "end":
                      return _context57.stop();
                  }
                }, _callee56);
              }));
              return function _detectBridgeIsV4() {
                return _ref55.apply(this, arguments);
              };
            }();
            _detectBridgeIsV5 = /*#__PURE__*/function () {
              var _ref56 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee57() {
                return _regeneratorRuntime().wrap(function _callee57$(_context58) {
                  while (1) switch (_context58.prev = _context58.next) {
                    case 0:
                      bridgeIsV5 = device === "android" && version2 >= 6060100 && version2 <= 6060210;
                      if (!bridgeIsV5) {
                        _context58.next = 5;
                        break;
                      }
                      _context58.next = 4;
                      return P$1(BridgeMethod.RequestWithSign);
                    case 4:
                      bridgeIsV5 = _context58.sent;
                    case 5:
                    case "end":
                      return _context58.stop();
                  }
                }, _callee57);
              }));
              return function _detectBridgeIsV5() {
                return _ref56.apply(this, arguments);
              };
            }();
            _detectBridgeIsV6 = /*#__PURE__*/function () {
              var _ref57 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee58() {
                return _regeneratorRuntime().wrap(function _callee58$(_context59) {
                  while (1) switch (_context59.prev = _context59.next) {
                    case 0:
                      bridgeIsV6 = device === "android" && version2 >= 6070600 ||
                      // 哔哩哔哩 Android 版
                      device === "android_b" && version2 >= 6070520 ||
                      // 哔哩哔哩 Android 概念版
                      device === "bstar_a" && version2 >= 1041e3 ||
                      // 新 Android 国际版
                      device === "bstar_i" && version2 >= 1041e3 ||
                      // 新 iOS 国际版
                      device === "iphone" && version2 >= 10180 ||
                      // 哔哩哔哩 iOS 版
                      device === "iphone_b" && version2 >= 10182 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "ipad" && version2 >= 12391;
                      if (!bridgeIsV6) {
                        _context59.next = 5;
                        break;
                      }
                      _context59.next = 4;
                      return P$1(BridgeMethod.RequestV2);
                    case 4:
                      bridgeIsV6 = _context59.sent;
                    case 5:
                    case "end":
                      return _context59.stop();
                  }
                }, _callee58);
              }));
              return function _detectBridgeIsV6() {
                return _ref57.apply(this, arguments);
              };
            }();
            _detectBridgeIsV7 = /*#__PURE__*/function () {
              var _ref58 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee59() {
                return _regeneratorRuntime().wrap(function _callee59$(_context60) {
                  while (1) switch (_context60.prev = _context60.next) {
                    case 0:
                      bridgeIsV7 = device === "harmony" ||
                      // Huawei 鸿蒙
                      device === "pangu_android" ||
                      // 盘古 android
                      device === "pangu_ios" ||
                      // 盘古 iOS
                      device === "android_tv_yst" ||
                      // Android TV
                      device === "android_hd" ||
                      // Android HD 版
                      device === "ios_hikari" ||
                      // 光呆ios
                      device === "android_hikari" ||
                      // 光呆安卓
                      device === "android_tv_bst" ||
                      // Android 百世通
                      device === "iphone" && version2 >= 10030 ||
                      // 哔哩哔哩 iOS 版
                      device === "iphone_b" && version2 >= 10030 ||
                      // 哔哩哔哩 iOS 概念版
                      device === "iphone_i" && version2 >= 7e7 ||
                      // 哔哩哔哩 iOS 国际版
                      device === "ipad" && version2 >= 12420 ||
                      // 哔哩哔哩 iPad 版
                      device === "biliLink" && version2 >= 506e4 ||
                      // iOS 直播姬 APP
                      device === "biliLink_Android" && version2 >= 5070020;
                      if (!bridgeIsV7) {
                        _context60.next = 5;
                        break;
                      }
                      _context60.next = 4;
                      return P$1(BridgeMethod.RequestV2);
                    case 4:
                      bridgeIsV7 = _context60.sent;
                    case 5:
                    case "end":
                      return _context60.stop();
                  }
                }, _callee59);
              }));
              return function _detectBridgeIsV7() {
                return _ref58.apply(this, arguments);
              };
            }();
            _parseUA();
            _context61.next = 25;
            return _detectBridgeIsV7();
          case 25:
            _context61.next = 27;
            return _detectBridgeIsV6();
          case 27:
            _context61.next = 29;
            return _detectBridgeIsV5();
          case 29:
            _context61.next = 31;
            return _detectBridgeIsV4();
          case 31:
            _context61.next = 33;
            return _detectBridgeIsV3();
          case 33:
            _context61.next = 35;
            return _detectBridgeIsV2();
          case 35:
            _context61.next = 37;
            return _detectBridgeIsV1();
          case 37:
            if (bridgeIsV1) {
              result2.version = 1;
            }
            if (bridgeIsV2) {
              result2.version = 2;
            }
            if (bridgeIsV3) {
              result2.version = 3;
            }
            if (bridgeIsV4) {
              result2.version = 4;
            }
            if (bridgeIsV5) {
              result2.version = 5;
            }
            if (bridgeIsV6) {
              result2.version = 6;
            }
            if (bridgeIsV7) {
              result2.version = 7;
            }
            result2.isMainApp = ["iphone", "iphone_b", "ipad", "android", "android_b", "harmony"].indexOf(device) !== -1;
            result2.uaDevice = device;
            result2.uaVersion = version2;
            setWindowRuntime(result2);
            return _context61.abrupt("return", result2);
          case 49:
          case "end":
            return _context61.stop();
        }
      }, _callee60);
    }));
    return function execRuntime() {
      return _ref51.apply(this, arguments);
    };
  }();
  var runtime = /*#__PURE__*/function () {
    var _ref59 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee61(ctx, next) {
      return _regeneratorRuntime().wrap(function _callee61$(_context62) {
        while (1) switch (_context62.prev = _context62.next) {
          case 0:
            _context62.t0 = setMiddlewarePayloadToCtx;
            _context62.t1 = ctx;
            _context62.t2 = AppMiddlewareName.Runtime;
            _context62.next = 5;
            return execRuntime();
          case 5:
            _context62.t3 = _context62.sent;
            (0, _context62.t0)(_context62.t1, _context62.t2, _context62.t3);
            _context62.next = 9;
            return next();
          case 9:
            return _context62.abrupt("return", _context62.sent);
          case 10:
          case "end":
            return _context62.stop();
        }
      }, _callee61);
    }));
    return function runtime(_x65, _x66) {
      return _ref59.apply(this, arguments);
    };
  }();
  var HttpSvcRuntime = /*#__PURE__*/function (_HttpSvcMiddleware15) {
    "use strict";

    function HttpSvcRuntime() {
      var _this29;
      _classCallCheck(this, HttpSvcRuntime);
      _this29 = _callSuper(this, HttpSvcRuntime, arguments);
      __publicField(_this29, "handler", runtime);
      __publicField(_this29, "name", AppMiddlewareName.Runtime);
      return _this29;
    }
    _inherits(HttpSvcRuntime, _HttpSvcMiddleware15);
    return _createClass(HttpSvcRuntime);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcRuntime, "handler", runtime);
  var jsonBody = function jsonBody(ctx, data, contentType) {
    if (!ctx.request) return;
    ctx.request.data = JSON.stringify(data);
    if (!ctx.request.headers) {
      ctx.request.headers = _defineProperty2({}, CONTENT_TYPE_KEY, ContentType.JSON);
    } else if (!contentType) {
      ctx.request.headers[CONTENT_TYPE_KEY] = ContentType.JSON;
    }
  };
  var isEqualContentType = function isEqualContentType(target, current) {
    if (!current) return false;
    return current.indexOf(target) > -1;
  };
  var updatePayload = function updatePayload(ctx, rawData) {
    var payload = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Body);
    setMiddlewarePayloadToCtx(ctx, AppMiddlewareName.Body, _objectSpread(_objectSpread({}, payload || {}), {}, {
      rawData: rawData
    }));
  };
  function getDeviceInfo(injectDeviceInfo) {
    return new Promise(function (resolve) {
      if (IS_NODE) {
        resolve({});
        return;
      }
      if (!f$2) {
        resolve({
          buvid: getCookie("buvid3")
        });
        return;
      }
      P$1(BridgeMethod.GetContainerInfo).then(function (support) {
        if (support) {
          if (b$1) {
            T$1("global.getContainerInfo", {}).then(function (res) {
              if (res.code !== 0) return resolve({});
              var info = res.data || {};
              var result2 = _objectSpread(_objectSpread({}, info), {}, {
                device_id: info.fingerprint,
                build: info.build,
                buvid: info.buvid,
                device_name: info.deviceName ? decodeURIComponent(info.deviceName) : "",
                device_platform: IS_ANDROID ? info.devicePlatform : info.modelName,
                local_id: info.buvid,
                bili_local_id: info.localFingerprint
              });
              if (injectDeviceInfo === true || !isArray(injectDeviceInfo)) {
                resolve(result2);
                return;
              }
              var append = {};
              injectDeviceInfo.forEach(function (key) {
                if (result2[key]) {
                  append[key] = result2[key];
                }
              });
              resolve(append);
            });
            return;
          }
          W$1({
            method: BridgeMethod.GetContainerInfo,
            callback: function callback(info) {
              var result2 = _objectSpread(_objectSpread({}, info), {}, {
                device_id: info.fingerprint,
                build: info.build,
                buvid: info.buvid,
                device_name: decodeURIComponent(info.deviceName),
                device_platform: IS_ANDROID ? info.devicePlatform : info.modelName,
                local_id: info.buvid,
                bili_local_id: info.localFingerprint
              });
              if (injectDeviceInfo === true || !isArray(injectDeviceInfo)) {
                resolve(result2);
                return;
              }
              var append = {};
              injectDeviceInfo.forEach(function (key) {
                if (result2[key]) {
                  append[key] = result2[key];
                }
              });
              resolve(append);
            }
          });
        } else {
          resolve({});
        }
      })["catch"](function () {
        resolve({});
      });
    });
  }
  var body = /*#__PURE__*/function () {
    var _ref60 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee62(ctx, next, config) {
      var _ctx$request11, method, params, headers, data, runtime2, _ref61, stringify2, noTsParams, injectDeviceInfo, suppData, isContinue, rawData, contentType, raw2, cloneFormData, raw;
      return _regeneratorRuntime().wrap(function _callee62$(_context63) {
        while (1) switch (_context63.prev = _context63.next) {
          case 0:
            if (ctx.request) {
              _context63.next = 2;
              break;
            }
            return _context63.abrupt("return", next());
          case 2:
            _ctx$request11 = ctx.request, method = _ctx$request11.method, params = _ctx$request11.params, headers = _ctx$request11.headers, data = _ctx$request11.data;
            runtime2 = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Runtime);
            _ref61 = (config == null ? void 0 : config.payload) || {}, stringify2 = _ref61.stringify, noTsParams = _ref61.noTsParams, injectDeviceInfo = _ref61.injectDeviceInfo;
            suppData = {};
            if (IS_NODE) {
              _context63.next = 15;
              break;
            }
            if (!injectDeviceInfo) {
              _context63.next = 14;
              break;
            }
            _context63.t0 = Object;
            _context63.t1 = suppData;
            _context63.next = 12;
            return getDeviceInfo(injectDeviceInfo);
          case 12:
            _context63.t2 = _context63.sent;
            _context63.t0.assign.call(_context63.t0, _context63.t1, _context63.t2);
          case 14:
            if (f$2 && D$1()) {
              Object.assign(headers, {
                Accept: "application/json, text/plain, */*"
              }, runtime2.version ? {
                Referer: window.location.href,
                "User-Agent": window.navigator.userAgent
              } : {});
              if ((runtime2.version === 6 || runtime2.version === 7) && noTsParams !== true) {
                suppData.ts = Date.now() / 1e3 | 0;
              }
              if (!IS_ANDROID && runtime2.version === 4 && method === "POST") {
                suppData._bridge_v4_fixed_ = "1";
              }
            }
          case 15:
            if (method === "GET") {
              if (params) {
                Object.assign(params, suppData);
              } else {
                ctx.request.params = _objectSpread({}, suppData);
              }
            }
            ctx.request.url = buildURL(ctx.request.url, Object.assign(params || {}, method === "GET" && suppData || {}), runtime2);
            if (!(method === "POST")) {
              _context63.next = 51;
              break;
            }
            isContinue = !["[object Object]", "[object FormData]"].includes(Object.prototype.toString.call(data));
            if (isContinue) {
              _context63.next = 51;
              break;
            }
            rawData = data;
            contentType = getContentType(headers);
            if (!isFormData(rawData)) {
              _context63.next = 43;
              break;
            }
            raw2 = _objectSpread(_objectSpread({}, form2obj(rawData)), suppData);
            if (runtime2.version) {
              _context63.next = 32;
              break;
            }
            cloneFormData = new FormData();
            Object.keys(raw2).forEach(function (k2) {
              cloneFormData.append(k2, raw2[k2]);
            });
            ctx.request.data = cloneFormData;
            updatePayload(ctx, cloneFormData);
            _context63.next = 31;
            return next();
          case 31:
            return _context63.abrupt("return", _context63.sent);
          case 32:
            updatePayload(ctx, raw2);
            if (!stringify2) {
              _context63.next = 38;
              break;
            }
            jsonBody(ctx, raw2, ContentType.JSON);
            _context63.next = 37;
            return next();
          case 37:
            return _context63.abrupt("return", _context63.sent);
          case 38:
            if (!contentType) {
              if (ctx.request.headers) {
                ctx.request.headers[CONTENT_TYPE_KEY] = ContentType.FormData;
              } else {
                ctx.request.headers = _defineProperty2({}, CONTENT_TYPE_KEY, ContentType.FormData);
              }
            }
            ctx.request.data = paramSerializer(raw2, runtime2);
            _context63.next = 42;
            return next();
          case 42:
            return _context63.abrupt("return", _context63.sent);
          case 43:
            raw = _objectSpread(_objectSpread({}, rawData), suppData);
            updatePayload(ctx, raw);
            if (!stringify2) {
              _context63.next = 50;
              break;
            }
            jsonBody(ctx, raw, ContentType.JSON);
            _context63.next = 49;
            return next();
          case 49:
            return _context63.abrupt("return", _context63.sent);
          case 50:
            if (isEqualContentType(ContentType.Form, contentType)) {
              ctx.request.data = paramSerializer(raw, runtime2);
            } else if (isEqualContentType(ContentType.JSON, contentType || ContentType.JSON)) {
              jsonBody(ctx, raw, contentType);
            }
          case 51:
            _context63.next = 53;
            return next();
          case 53:
            return _context63.abrupt("return", _context63.sent);
          case 54:
          case "end":
            return _context63.stop();
        }
      }, _callee62);
    }));
    return function body(_x67, _x68, _x69) {
      return _ref60.apply(this, arguments);
    };
  }();
  var HttpSvcBody = /*#__PURE__*/function (_HttpSvcMiddleware16) {
    "use strict";

    function HttpSvcBody() {
      var _this30;
      _classCallCheck(this, HttpSvcBody);
      _this30 = _callSuper(this, HttpSvcBody, [body]);
      __publicField(_this30, "name", AppMiddlewareName.Body);
      return _this30;
    }
    _inherits(HttpSvcBody, _HttpSvcMiddleware16);
    return _createClass(HttpSvcBody);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcBody, "handler", body);
  var getCsrfToken = function getCsrfToken(from) {
    return new Promise(function (resolve) {
      var token2 = getCookie("bili_jct", IS_NODE ? from || "_" : "");
      if (!f$2) {
        resolve(token2);
        return;
      }
      P$1(BridgeMethod.GetCsrf).then(function (support) {
        if (!support) {
          resolve(token2);
          return;
        }
        if (b$1) {
          T$1(BridgeMethod.GetCsrf, {}).then(function (res) {
            if (res.code !== 0) return resolve(token2);
            return resolve(res.data.csrf || "");
          });
          return;
        }
        W$1({
          method: BridgeMethod.GetCsrf,
          callback: function callback(info) {
            resolve((info == null ? void 0 : info.csrf) || "");
          }
        });
      });
    });
  };
  var csrf = /*#__PURE__*/function () {
    var _ref62 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee63(ctx, next, config) {
      var _a3, _b2, _c2, _d2, _ctx$request12, method, data, headers, runtime2, csrf2, def, paramsFlag, dataFlag, contentType, isJsonPost, _key15;
      return _regeneratorRuntime().wrap(function _callee63$(_context64) {
        while (1) switch (_context64.prev = _context64.next) {
          case 0:
            if (ctx.request) {
              _context64.next = 2;
              break;
            }
            return _context64.abrupt("return", next());
          case 2:
            _ctx$request12 = ctx.request, method = _ctx$request12.method, data = _ctx$request12.data, headers = _ctx$request12.headers;
            runtime2 = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Runtime);
            csrf2 = "";
            def = runtime2.version !== 2 && runtime2.version !== 3;
            paramsFlag = false;
            dataFlag = false;
            if (method === "GET") {
              if (((_a3 = config == null ? void 0 : config.payload) == null ? void 0 : _a3.params) || def) {
                paramsFlag = true;
              }
            } else if (method === "POST") {
              contentType = getContentType(headers) || (data ? getContentTypeFromData(data) : ContentType.JSON);
              isJsonPost = isEqualContentType(ContentType.JSON, contentType);
              if ((_b2 = config == null ? void 0 : config.payload) == null ? void 0 : _b2.params) {
                paramsFlag = true;
              } else if (isJsonPost) {
                paramsFlag = true;
              }
              if ((_c2 = config == null ? void 0 : config.payload) == null ? void 0 : _c2.data) {
                dataFlag = true;
              } else if (!isJsonPost) {
                dataFlag = true;
              }
            }
            if (!(paramsFlag || dataFlag)) {
              _context64.next = 13;
              break;
            }
            _context64.next = 12;
            return getCsrfToken((headers == null ? void 0 : headers["cookie"]) || (headers == null ? void 0 : headers["Cookie"]));
          case 12:
            csrf2 = _context64.sent;
          case 13:
            if (csrf2) {
              if (config == null ? void 0 : config.payload) {
                config.payload.cache = csrf2;
              } else {
                setMiddlewarePayloadToCtx(ctx, AppMiddlewareName.Csrf, {
                  cache: csrf2
                });
              }
              _key15 = ((_d2 = config == null ? void 0 : config.payload) == null ? void 0 : _d2.key) || "csrf";
              if (paramsFlag) {
                if (ctx.request.params) {
                  ctx.request.params[_key15] = csrf2;
                } else {
                  ctx.request.params = _defineProperty2({}, _key15, csrf2);
                }
              }
              if (dataFlag && data) {
                if (isFormData(data)) {
                  data.append(_key15, csrf2);
                } else {
                  if (data) {
                    data[_key15] = csrf2;
                  } else {
                    ctx.request.data = _defineProperty2({}, _key15, csrf2);
                  }
                }
              }
            }
            _context64.next = 16;
            return next();
          case 16:
            return _context64.abrupt("return", _context64.sent);
          case 17:
          case "end":
            return _context64.stop();
        }
      }, _callee63);
    }));
    return function csrf(_x70, _x71, _x72) {
      return _ref62.apply(this, arguments);
    };
  }();
  var HttpSvcCsrf = /*#__PURE__*/function (_HttpSvcMiddleware17) {
    "use strict";

    function HttpSvcCsrf() {
      var _this31;
      _classCallCheck(this, HttpSvcCsrf);
      _this31 = _callSuper(this, HttpSvcCsrf, arguments);
      __publicField(_this31, "handler", csrf);
      __publicField(_this31, "name", AppMiddlewareName.Csrf);
      return _this31;
    }
    _inherits(HttpSvcCsrf, _HttpSvcMiddleware17);
    return _createClass(HttpSvcCsrf);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcCsrf, "handler", csrf);
  var execSupport = /*#__PURE__*/function () {
    var _ref63 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee64() {
      var result2;
      return _regeneratorRuntime().wrap(function _callee64$(_context65) {
        while (1) switch (_context65.prev = _context65.next) {
          case 0:
            result2 = {
              v1: false,
              v2: false
            };
            if (!(IS_NODE || !f$2 || !D$1())) {
              _context65.next = 3;
              break;
            }
            return _context65.abrupt("return", result2);
          case 3:
            if (!window.__HTTP_SVC_APP_UPLOAD_SUPPORT__) {
              _context65.next = 5;
              break;
            }
            return _context65.abrupt("return", window.__HTTP_SVC_APP_UPLOAD_SUPPORT__);
          case 5:
            if (IS_ANDROID) {
              _context65.next = 9;
              break;
            }
            _context65.next = 8;
            return P$1(BridgeMethod.UploadImage);
          case 8:
            result2.v1 = _context65.sent;
          case 9:
            _context65.next = 11;
            return P$1(BridgeMethod.UploadImageV2);
          case 11:
            result2.v2 = _context65.sent;
            window.__HTTP_SVC_APP_UPLOAD_SUPPORT__ = result2;
            return _context65.abrupt("return", result2);
          case 14:
          case "end":
            return _context65.stop();
        }
      }, _callee64);
    }));
    return function execSupport() {
      return _ref63.apply(this, arguments);
    };
  }();
  var parseData = /*#__PURE__*/function () {
    var _ref64 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee65(data, bridgeMethod) {
      var fileKey, fileName, fileValue, dataObj;
      return _regeneratorRuntime().wrap(function _callee65$(_context66) {
        while (1) switch (_context66.prev = _context66.next) {
          case 0:
            fileKey = "";
            fileName = "";
            fileValue = "";
            dataObj = {};
            Object.keys(data).forEach(function (key) {
              var val = data[key];
              if (isBlob(val) || isBase64(val)) {
                fileKey = key;
                fileValue = val;
                if (isBlob(fileValue)) {
                  fileName = fileValue.name || "";
                } else {
                  fileName = "upload.".concat(fileValue.substring("data:image/".length, fileValue.indexOf(";base64")));
                }
              } else {
                dataObj[key] = val;
              }
            });
            if (fileKey) {
              _context66.next = 7;
              break;
            }
            return _context66.abrupt("return", null);
          case 7:
            if (!(fileKey !== "file" && bridgeMethod === BridgeMethod.UploadImage && !b$1)) {
              _context66.next = 9;
              break;
            }
            return _context66.abrupt("return", null);
          case 9:
            if (!isBlob(fileValue)) {
              _context66.next = 13;
              break;
            }
            _context66.next = 12;
            return blob2Base64(fileValue);
          case 12:
            fileValue = _context66.sent;
          case 13:
            return _context66.abrupt("return", {
              fileKey: fileKey,
              fileName: fileName,
              fileValue: fileValue,
              dataObj: dataObj
            });
          case 14:
          case "end":
            return _context66.stop();
        }
      }, _callee65);
    }));
    return function parseData(_x73, _x74) {
      return _ref64.apply(this, arguments);
    };
  }();
  var callNativeUpload = /*#__PURE__*/function () {
    var _ref65 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee66(bridgeMethod, uploadData) {
      return _regeneratorRuntime().wrap(function _callee66$(_context67) {
        while (1) switch (_context67.prev = _context67.next) {
          case 0:
            return _context67.abrupt("return", new Promise(function (resolve, reject) {
              var handleData = function handleData(data) {
                if (typeof data === "string") {
                  return resolve(new Response(null, {
                    statusText: data,
                    status: 444,
                    headers: {}
                  }));
                }
                var response = data.response,
                  httpStatus = data.httpStatus;
                if (httpStatus < 200 || httpStatus >= 400) {
                  var statusText = "";
                  try {
                    var res = JSON.parse(response);
                    statusText = res.message || response;
                  } catch (_unused10) {
                    statusText = response;
                  }
                  resolve(new Response(null, {
                    statusText: statusText,
                    status: httpStatus,
                    headers: data.headers || {}
                  }));
                  return;
                }
                resolve(new Response(response, {
                  status: httpStatus,
                  headers: data.headers || {}
                }));
              };
              if (b$1) {
                T$1(bridgeMethod, uploadData).then(function (res) {
                  if (res.code !== 0) {
                    reject(new Error(res.message || "Request error, The callback status is not ok! code: ".concat(res.code)));
                    return;
                  }
                  handleData(res.data);
                });
                return;
              }
              W$1({
                method: bridgeMethod,
                data: uploadData,
                callback: function callback(status, message) {
                  if (status !== "ok") {
                    reject(new Error(message || "Request callback status is not ok!"));
                  }
                },
                onLoad: function onLoad(data) {
                  handleData(data);
                }
              });
            }));
          case 1:
          case "end":
            return _context67.stop();
        }
      }, _callee66);
    }));
    return function callNativeUpload(_x75, _x76) {
      return _ref65.apply(this, arguments);
    };
  }();
  var appUpload = /*#__PURE__*/function () {
    var _ref66 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee67(ctx) {
      var _ctx$request13, url2, _headers3, support, bridgeMethod, _getMiddlewarePayload4, rawData, uploadData, result2;
      return _regeneratorRuntime().wrap(function _callee67$(_context68) {
        while (1) switch (_context68.prev = _context68.next) {
          case 0:
            if (!IS_NODE) {
              _context68.next = 2;
              break;
            }
            throw new Error("When you are in a Node environment, please use server-side fetch middleware.");
          case 2:
            if (!(ctx.request && f$2)) {
              _context68.next = 29;
              break;
            }
            _ctx$request13 = ctx.request, url2 = _ctx$request13.url, _headers3 = _ctx$request13.headers;
            _context68.next = 6;
            return execSupport();
          case 6:
            support = _context68.sent;
            bridgeMethod = b$1 ? BridgeMethod.UploadImage : support.v2 ? BridgeMethod.UploadImageV2 : support.v1 ? BridgeMethod.UploadImage : "";
            if (!bridgeMethod) {
              _context68.next = 29;
              break;
            }
            _getMiddlewarePayload4 = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Body), rawData = _getMiddlewarePayload4.rawData;
            uploadData = {
              url: url2,
              base64Data: "",
              header: Object.assign({
                "Content-Type": ContentType.Form
              }, _headers3 || {})
            };
            _context68.prev = 11;
            _context68.next = 14;
            return parseData(rawData || ctx.request.data, bridgeMethod);
          case 14:
            result2 = _context68.sent;
            _context68.next = 20;
            break;
          case 17:
            _context68.prev = 17;
            _context68.t0 = _context68["catch"](11);
            result2 = null;
          case 20:
            if (!result2) {
              _context68.next = 29;
              break;
            }
            uploadData.fileName = result2.fileName;
            uploadData.name = result2.fileKey;
            uploadData.base64Data = result2.fileValue;
            uploadData.formData = result2.dataObj;
            _context68.next = 27;
            return callNativeUpload(bridgeMethod, uploadData);
          case 27:
            ctx.response = _context68.sent;
            return _context68.abrupt("return", true);
          case 29:
            return _context68.abrupt("return", false);
          case 30:
          case "end":
            return _context68.stop();
        }
      }, _callee67, null, [[11, 17]]);
    }));
    return function appUpload(_x77) {
      return _ref66.apply(this, arguments);
    };
  }();
  var getBridgeMethod = function getBridgeMethod(request2, runtime2, payload) {
    var contentType = getContentType(request2.headers) || ContentType.JSON;
    var isJsonPost = request2.method === "POST" && contentType === ContentType.JSON;
    if (isJsonPost) {
      if (runtime2.version < 6) {
        return "";
      }
      if (b$1) {
        return BridgeMethod.Request;
      }
      return BridgeMethod.RequestV2;
    }
    if (payload.auth === "app") {
      if (runtime2.version < 3) {
        return BridgeMethod.Request;
      }
      if (runtime2.version < 6) {
        return BridgeMethod.RequestWithSign;
      }
      if (b$1) {
        return BridgeMethod.RequestWithSign;
      }
      return BridgeMethod.RequestWithSignV2;
    }
    if (payload.auth === "web") {
      if (b$1) {
        return BridgeMethod.Request;
      }
      var isOldMainApp = runtime2.version < 6 && runtime2.isMainApp;
      if (isOldMainApp && !IS_ANDROID) {
        return "";
      }
      if (runtime2.version < 3) {
        return BridgeMethod.Request;
      }
      if (runtime2.version < 6) {
        return BridgeMethod.RequestWithSign;
      }
      return BridgeMethod.RequestV2;
    }
    if (runtime2.version < 3) {
      return BridgeMethod.Request;
    }
    if (runtime2.version < 6) {
      return BridgeMethod.RequestWithSign;
    }
    if (b$1) {
      return BridgeMethod.RequestWithSign;
    }
    return BridgeMethod.RequestWithSignV2;
  };
  var appFetch = /*#__PURE__*/function () {
    var _ref67 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee68(bridgeMethod, ctx, runtime2, payload) {
      return _regeneratorRuntime().wrap(function _callee68$(_context69) {
        while (1) switch (_context69.prev = _context69.next) {
          case 0:
            return _context69.abrupt("return", new Promise(function (resolve, reject) {
              var _ctx$request14 = ctx.request,
                data = _ctx$request14.data,
                method = _ctx$request14.method,
                url2 = _ctx$request14.url,
                headers = _ctx$request14.headers,
                params = _ctx$request14.params;
              var connectData = {
                method: method,
                url: url2,
                timeout: (ctx.config.timeout || 0) / 1e3,
                header: headers
              };
              if (bridgeMethod === BridgeMethod.Request) {
                connectData.policy = payload.auth === "web" ? "0" : "1";
                if (b$1) {
                  connectData.policy = Number(connectData.policy);
                }
              }
              var csrfPayload = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Csrf);
              if (runtime2.version < 6 && (csrfPayload == null ? void 0 : csrfPayload.cache)) {
                connectData.csrfKey = csrfPayload.cache;
              }
              if (b$1) {
                connectData.data = data || "";
              } else {
                if (bridgeMethod === BridgeMethod.RequestWithSign) {
                  if (method === "GET") {
                    connectData.params = params;
                  } else {
                    var _getMiddlewarePayload5 = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Body),
                      rawData = _getMiddlewarePayload5.rawData;
                    connectData.params = rawData || {};
                  }
                } else if (method === "POST") {
                  connectData.data = data;
                }
              }
              var handleData = function handleData(data2) {
                if (typeof data2 === "string") {
                  return resolve(new Response(null, {
                    statusText: data2,
                    status: 444,
                    headers: {}
                  }));
                }
                var response = data2.response;
                var httpStatus = data2.httpStatus;
                if (httpStatus < 200 || httpStatus >= 400) {
                  var statusText = "";
                  try {
                    var data3 = JSON.parse(response);
                    statusText = data3.message || response;
                  } catch (_unused12) {
                    statusText = response;
                  }
                  if (httpStatus > 599 || httpStatus < 200) {
                    statusText = "[Status: ".concat(httpStatus, "] ").concat(statusText);
                    httpStatus = 444;
                  }
                  resolve(new Response(null, {
                    statusText: statusText,
                    status: httpStatus,
                    headers: data2.headers || {}
                  }));
                  return;
                }
                resolve(new Response(response, {
                  status: httpStatus,
                  headers: data2.headers || {}
                }));
              };
              if (b$1) {
                T$1(bridgeMethod, connectData).then(function (res) {
                  if (res.code !== 0) {
                    reject(new Error(res.message || "Request $".concat(connectData.method, ":\"").concat(connectData.url, "\" error, The callback status is not ok! code: ").concat(res.code)));
                    return;
                  }
                  handleData(res.data);
                })["catch"](function (err) {
                  reject(err);
                });
                return;
              }
              W$1({
                method: bridgeMethod,
                data: connectData,
                callback: function callback(status, message) {
                  if (status !== "ok") {
                    reject(new Error(message || "Request $".concat(connectData.method, ":\"").concat(connectData.url, "\" error, The callback status is not ok!")));
                  }
                },
                onLoad: function onLoad(data2) {
                  handleData(data2);
                }
              });
            }));
          case 1:
          case "end":
            return _context69.stop();
        }
      }, _callee68);
    }));
    return function appFetch(_x78, _x79, _x80, _x81) {
      return _ref67.apply(this, arguments);
    };
  }();
  var fetch$1 = /*#__PURE__*/function () {
    var _ref68 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee69(ctx, next, config) {
      var _a3, _b2, _ctx$request15, url2, method, headers, credentials, upload, uploadWork, runtime2, bridgeMethod, body2, _getMiddlewarePayload6, rawData, contentType;
      return _regeneratorRuntime().wrap(function _callee69$(_context70) {
        while (1) switch (_context70.prev = _context70.next) {
          case 0:
            if (!IS_NODE) {
              _context70.next = 2;
              break;
            }
            throw new Error("When you are in a Node environment, please use server-side fetch middleware.");
          case 2:
            if (ctx.request) {
              _context70.next = 6;
              break;
            }
            _context70.next = 5;
            return next();
          case 5:
            return _context70.abrupt("return", _context70.sent);
          case 6:
            if (!ctx.response) {
              _context70.next = 10;
              break;
            }
            _context70.next = 9;
            return next();
          case 9:
            return _context70.abrupt("return", _context70.sent);
          case 10:
            _ctx$request15 = ctx.request, url2 = _ctx$request15.url, method = _ctx$request15.method, headers = _ctx$request15.headers, credentials = _ctx$request15.credentials;
            upload = (_a3 = config == null ? void 0 : config.payload) == null ? void 0 : _a3.upload;
            if (!(f$2 && D$1())) {
              _context70.next = 33;
              break;
            }
            if (!upload) {
              _context70.next = 23;
              break;
            }
            _context70.next = 16;
            return appUpload(ctx);
          case 16:
            uploadWork = _context70.sent;
            if (!uploadWork) {
              _context70.next = 21;
              break;
            }
            _context70.next = 20;
            return next();
          case 20:
            return _context70.abrupt("return", _context70.sent);
          case 21:
            _context70.next = 33;
            break;
          case 23:
            runtime2 = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Runtime);
            if (!(runtime2 == null ? void 0 : runtime2.version)) {
              _context70.next = 33;
              break;
            }
            bridgeMethod = getBridgeMethod(ctx.request, runtime2, (config == null ? void 0 : config.payload) || {});
            if (!bridgeMethod) {
              _context70.next = 33;
              break;
            }
            _context70.next = 29;
            return appFetch(bridgeMethod, ctx, runtime2, (config == null ? void 0 : config.payload) || {});
          case 29:
            ctx.response = _context70.sent;
            _context70.next = 32;
            return next();
          case 32:
            return _context70.abrupt("return", _context70.sent);
          case 33:
            if (window.fetch) {
              _context70.next = 35;
              break;
            }
            throw new Error("When you are in a non-modern browser, please manually polyfill fetch.");
          case 35:
            body2 = ctx.request.data;
            _getMiddlewarePayload6 = getMiddlewarePayloadFromCtx(ctx, AppMiddlewareName.Body), rawData = _getMiddlewarePayload6.rawData;
            contentType = getContentType(headers);
            if (contentType === ContentType.FormData && rawData) {
              body2 = obj2form(rawData);
            }
            _context70.next = 41;
            return window.fetch(url2, {
              method: method,
              body: body2,
              headers: headers,
              credentials: credentials,
              signal: (_b2 = ctx.abortController) == null ? void 0 : _b2.signal
            });
          case 41:
            ctx.response = _context70.sent;
            _context70.next = 44;
            return next();
          case 44:
            return _context70.abrupt("return", _context70.sent);
          case 45:
          case "end":
            return _context70.stop();
        }
      }, _callee69);
    }));
    return function fetch$1(_x82, _x83, _x84) {
      return _ref68.apply(this, arguments);
    };
  }();
  var HttpSvcAppFetch = /*#__PURE__*/function (_HttpSvcMiddleware18) {
    "use strict";

    function HttpSvcAppFetch(payload) {
      var _this32;
      _classCallCheck(this, HttpSvcAppFetch);
      _this32 = _callSuper(this, HttpSvcAppFetch, [{
        handler: fetch$1,
        payload: payload
      }]);
      __publicField(_this32, "name", AppMiddlewareName.AppFetch);
      return _this32;
    }
    _inherits(HttpSvcAppFetch, _HttpSvcMiddleware18);
    return _createClass(HttpSvcAppFetch);
  }(HttpSvcMiddleware);
  __publicField(HttpSvcAppFetch, "handler", fetch$1);
  new HttpService({
    fetch: new HttpSvcAppFetch(),
    middlewares: [new HttpSvcRuntime(), new HttpSvcCsrf(), new HttpSvcBody()]
  });
  new HttpService();
  new HttpService();
  var browser = {};
  var canPromise$1 = function canPromise$1() {
    return typeof Promise === "function" && Promise.prototype && Promise.prototype.then;
  };
  var qrcode = {};
  var utils$2 = {};
  var toSJISFunction;
  var CODEWORDS_COUNT = [0,
  // Not used
  26, 44, 70, 100, 134, 172, 196, 242, 292, 346, 404, 466, 532, 581, 655, 733, 815, 901, 991, 1085, 1156, 1258, 1364, 1474, 1588, 1706, 1828, 1921, 2051, 2185, 2323, 2465, 2611, 2761, 2876, 3034, 3196, 3362, 3532, 3706];
  utils$2.getSymbolSize = function getSymbolSize2(version2) {
    if (!version2) throw new Error('"version" cannot be null or undefined');
    if (version2 < 1 || version2 > 40) throw new Error('"version" should be in range from 1 to 40');
    return version2 * 4 + 17;
  };
  utils$2.getSymbolTotalCodewords = function getSymbolTotalCodewords(version2) {
    return CODEWORDS_COUNT[version2];
  };
  utils$2.getBCHDigit = function (data) {
    var digit = 0;
    while (data !== 0) {
      digit++;
      data >>>= 1;
    }
    return digit;
  };
  utils$2.setToSJISFunction = function setToSJISFunction(f2) {
    if (typeof f2 !== "function") {
      throw new Error('"toSJISFunc" is not a valid function.');
    }
    toSJISFunction = f2;
  };
  utils$2.isKanjiModeEnabled = function () {
    return typeof toSJISFunction !== "undefined";
  };
  utils$2.toSJIS = function toSJIS(kanji2) {
    return toSJISFunction(kanji2);
  };
  var errorCorrectionLevel = {};
  (function (exports2) {
    exports2.L = {
      bit: 1
    };
    exports2.M = {
      bit: 0
    };
    exports2.Q = {
      bit: 3
    };
    exports2.H = {
      bit: 2
    };
    function fromString(string) {
      if (typeof string !== "string") {
        throw new Error("Param is not a string");
      }
      var lcStr = string.toLowerCase();
      switch (lcStr) {
        case "l":
        case "low":
          return exports2.L;
        case "m":
        case "medium":
          return exports2.M;
        case "q":
        case "quartile":
          return exports2.Q;
        case "h":
        case "high":
          return exports2.H;
        default:
          throw new Error("Unknown EC Level: " + string);
      }
    }
    exports2.isValid = function isValid(level) {
      return level && typeof level.bit !== "undefined" && level.bit >= 0 && level.bit < 4;
    };
    exports2.from = function from(value, defaultValue) {
      if (exports2.isValid(value)) {
        return value;
      }
      try {
        return fromString(value);
      } catch (e2) {
        return defaultValue;
      }
    };
  })(errorCorrectionLevel);
  function BitBuffer$1() {
    this.buffer = [];
    this.length = 0;
  }
  BitBuffer$1.prototype = {
    get: function get(index2) {
      var bufIndex = Math.floor(index2 / 8);
      return (this.buffer[bufIndex] >>> 7 - index2 % 8 & 1) === 1;
    },
    put: function put(num, length) {
      for (var i2 = 0; i2 < length; i2++) {
        this.putBit((num >>> length - i2 - 1 & 1) === 1);
      }
    },
    getLengthInBits: function getLengthInBits() {
      return this.length;
    },
    putBit: function putBit(bit) {
      var bufIndex = Math.floor(this.length / 8);
      if (this.buffer.length <= bufIndex) {
        this.buffer.push(0);
      }
      if (bit) {
        this.buffer[bufIndex] |= 128 >>> this.length % 8;
      }
      this.length++;
    }
  };
  var bitBuffer = BitBuffer$1;
  function BitMatrix$1(size) {
    if (!size || size < 1) {
      throw new Error("BitMatrix size must be defined and greater than 0");
    }
    this.size = size;
    this.data = new Uint8Array(size * size);
    this.reservedBit = new Uint8Array(size * size);
  }
  BitMatrix$1.prototype.set = function (row, col, value, reserved) {
    var index2 = row * this.size + col;
    this.data[index2] = value;
    if (reserved) this.reservedBit[index2] = true;
  };
  BitMatrix$1.prototype.get = function (row, col) {
    return this.data[row * this.size + col];
  };
  BitMatrix$1.prototype.xor = function (row, col, value) {
    this.data[row * this.size + col] ^= value;
  };
  BitMatrix$1.prototype.isReserved = function (row, col) {
    return this.reservedBit[row * this.size + col];
  };
  var bitMatrix = BitMatrix$1;
  var alignmentPattern = {};
  (function (exports2) {
    var getSymbolSize2 = utils$2.getSymbolSize;
    exports2.getRowColCoords = function getRowColCoords(version2) {
      if (version2 === 1) return [];
      var posCount = Math.floor(version2 / 7) + 2;
      var size = getSymbolSize2(version2);
      var intervals = size === 145 ? 26 : Math.ceil((size - 13) / (2 * posCount - 2)) * 2;
      var positions = [size - 7];
      for (var i2 = 1; i2 < posCount - 1; i2++) {
        positions[i2] = positions[i2 - 1] - intervals;
      }
      positions.push(6);
      return positions.reverse();
    };
    exports2.getPositions = function getPositions(version2) {
      var coords = [];
      var pos = exports2.getRowColCoords(version2);
      var posLength = pos.length;
      for (var i2 = 0; i2 < posLength; i2++) {
        for (var j2 = 0; j2 < posLength; j2++) {
          if (i2 === 0 && j2 === 0 ||
          // top-left
          i2 === 0 && j2 === posLength - 1 ||
          // bottom-left
          i2 === posLength - 1 && j2 === 0) {
            continue;
          }
          coords.push([pos[i2], pos[j2]]);
        }
      }
      return coords;
    };
  })(alignmentPattern);
  var finderPattern = {};
  var getSymbolSize = utils$2.getSymbolSize;
  var FINDER_PATTERN_SIZE = 7;
  finderPattern.getPositions = function getPositions(version2) {
    var size = getSymbolSize(version2);
    return [
    // top-left
    [0, 0],
    // top-right
    [size - FINDER_PATTERN_SIZE, 0],
    // bottom-left
    [0, size - FINDER_PATTERN_SIZE]];
  };
  var maskPattern = {};
  (function (exports2) {
    exports2.Patterns = {
      PATTERN000: 0,
      PATTERN001: 1,
      PATTERN010: 2,
      PATTERN011: 3,
      PATTERN100: 4,
      PATTERN101: 5,
      PATTERN110: 6,
      PATTERN111: 7
    };
    var PenaltyScores = {
      N1: 3,
      N2: 3,
      N3: 40,
      N4: 10
    };
    exports2.isValid = function isValid(mask) {
      return mask != null && mask !== "" && !isNaN(mask) && mask >= 0 && mask <= 7;
    };
    exports2.from = function from(value) {
      return exports2.isValid(value) ? parseInt(value, 10) : void 0;
    };
    exports2.getPenaltyN1 = function getPenaltyN1(data) {
      var size = data.size;
      var points = 0;
      var sameCountCol = 0;
      var sameCountRow = 0;
      var lastCol = null;
      var lastRow = null;
      for (var row = 0; row < size; row++) {
        sameCountCol = sameCountRow = 0;
        lastCol = lastRow = null;
        for (var col = 0; col < size; col++) {
          var module2 = data.get(row, col);
          if (module2 === lastCol) {
            sameCountCol++;
          } else {
            if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5);
            lastCol = module2;
            sameCountCol = 1;
          }
          module2 = data.get(col, row);
          if (module2 === lastRow) {
            sameCountRow++;
          } else {
            if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5);
            lastRow = module2;
            sameCountRow = 1;
          }
        }
        if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5);
        if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5);
      }
      return points;
    };
    exports2.getPenaltyN2 = function getPenaltyN2(data) {
      var size = data.size;
      var points = 0;
      for (var row = 0; row < size - 1; row++) {
        for (var col = 0; col < size - 1; col++) {
          var last2 = data.get(row, col) + data.get(row, col + 1) + data.get(row + 1, col) + data.get(row + 1, col + 1);
          if (last2 === 4 || last2 === 0) points++;
        }
      }
      return points * PenaltyScores.N2;
    };
    exports2.getPenaltyN3 = function getPenaltyN3(data) {
      var size = data.size;
      var points = 0;
      var bitsCol = 0;
      var bitsRow = 0;
      for (var row = 0; row < size; row++) {
        bitsCol = bitsRow = 0;
        for (var col = 0; col < size; col++) {
          bitsCol = bitsCol << 1 & 2047 | data.get(row, col);
          if (col >= 10 && (bitsCol === 1488 || bitsCol === 93)) points++;
          bitsRow = bitsRow << 1 & 2047 | data.get(col, row);
          if (col >= 10 && (bitsRow === 1488 || bitsRow === 93)) points++;
        }
      }
      return points * PenaltyScores.N3;
    };
    exports2.getPenaltyN4 = function getPenaltyN4(data) {
      var darkCount = 0;
      var modulesCount = data.data.length;
      for (var i2 = 0; i2 < modulesCount; i2++) darkCount += data.data[i2];
      var k2 = Math.abs(Math.ceil(darkCount * 100 / modulesCount / 5) - 10);
      return k2 * PenaltyScores.N4;
    };
    function getMaskAt(maskPattern2, i2, j2) {
      switch (maskPattern2) {
        case exports2.Patterns.PATTERN000:
          return (i2 + j2) % 2 === 0;
        case exports2.Patterns.PATTERN001:
          return i2 % 2 === 0;
        case exports2.Patterns.PATTERN010:
          return j2 % 3 === 0;
        case exports2.Patterns.PATTERN011:
          return (i2 + j2) % 3 === 0;
        case exports2.Patterns.PATTERN100:
          return (Math.floor(i2 / 2) + Math.floor(j2 / 3)) % 2 === 0;
        case exports2.Patterns.PATTERN101:
          return i2 * j2 % 2 + i2 * j2 % 3 === 0;
        case exports2.Patterns.PATTERN110:
          return (i2 * j2 % 2 + i2 * j2 % 3) % 2 === 0;
        case exports2.Patterns.PATTERN111:
          return (i2 * j2 % 3 + (i2 + j2) % 2) % 2 === 0;
        default:
          throw new Error("bad maskPattern:" + maskPattern2);
      }
    }
    exports2.applyMask = function applyMask(pattern, data) {
      var size = data.size;
      for (var col = 0; col < size; col++) {
        for (var row = 0; row < size; row++) {
          if (data.isReserved(row, col)) continue;
          data.xor(row, col, getMaskAt(pattern, row, col));
        }
      }
    };
    exports2.getBestMask = function getBestMask(data, setupFormatFunc) {
      var numPatterns = Object.keys(exports2.Patterns).length;
      var bestPattern = 0;
      var lowerPenalty = Infinity;
      for (var p2 = 0; p2 < numPatterns; p2++) {
        setupFormatFunc(p2);
        exports2.applyMask(p2, data);
        var penalty = exports2.getPenaltyN1(data) + exports2.getPenaltyN2(data) + exports2.getPenaltyN3(data) + exports2.getPenaltyN4(data);
        exports2.applyMask(p2, data);
        if (penalty < lowerPenalty) {
          lowerPenalty = penalty;
          bestPattern = p2;
        }
      }
      return bestPattern;
    };
  })(maskPattern);
  var errorCorrectionCode = {};
  var ECLevel$1 = errorCorrectionLevel;
  var EC_BLOCKS_TABLE = [
  // L  M  Q  H
  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 2, 2, 4, 1, 2, 4, 4, 2, 4, 4, 4, 2, 4, 6, 5, 2, 4, 6, 6, 2, 5, 8, 8, 4, 5, 8, 8, 4, 5, 8, 11, 4, 8, 10, 11, 4, 9, 12, 16, 4, 9, 16, 16, 6, 10, 12, 18, 6, 10, 17, 16, 6, 11, 16, 19, 6, 13, 18, 21, 7, 14, 21, 25, 8, 16, 20, 25, 8, 17, 23, 25, 9, 17, 23, 34, 9, 18, 25, 30, 10, 20, 27, 32, 12, 21, 29, 35, 12, 23, 34, 37, 12, 25, 34, 40, 13, 26, 35, 42, 14, 28, 38, 45, 15, 29, 40, 48, 16, 31, 43, 51, 17, 33, 45, 54, 18, 35, 48, 57, 19, 37, 51, 60, 19, 38, 53, 63, 20, 40, 56, 66, 21, 43, 59, 70, 22, 45, 62, 74, 24, 47, 65, 77, 25, 49, 68, 81];
  var EC_CODEWORDS_TABLE = [
  // L  M  Q  H
  7, 10, 13, 17, 10, 16, 22, 28, 15, 26, 36, 44, 20, 36, 52, 64, 26, 48, 72, 88, 36, 64, 96, 112, 40, 72, 108, 130, 48, 88, 132, 156, 60, 110, 160, 192, 72, 130, 192, 224, 80, 150, 224, 264, 96, 176, 260, 308, 104, 198, 288, 352, 120, 216, 320, 384, 132, 240, 360, 432, 144, 280, 408, 480, 168, 308, 448, 532, 180, 338, 504, 588, 196, 364, 546, 650, 224, 416, 600, 700, 224, 442, 644, 750, 252, 476, 690, 816, 270, 504, 750, 900, 300, 560, 810, 960, 312, 588, 870, 1050, 336, 644, 952, 1110, 360, 700, 1020, 1200, 390, 728, 1050, 1260, 420, 784, 1140, 1350, 450, 812, 1200, 1440, 480, 868, 1290, 1530, 510, 924, 1350, 1620, 540, 980, 1440, 1710, 570, 1036, 1530, 1800, 570, 1064, 1590, 1890, 600, 1120, 1680, 1980, 630, 1204, 1770, 2100, 660, 1260, 1860, 2220, 720, 1316, 1950, 2310, 750, 1372, 2040, 2430];
  errorCorrectionCode.getBlocksCount = function getBlocksCount(version2, errorCorrectionLevel2) {
    switch (errorCorrectionLevel2) {
      case ECLevel$1.L:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 0];
      case ECLevel$1.M:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 1];
      case ECLevel$1.Q:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 2];
      case ECLevel$1.H:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 3];
      default:
        return void 0;
    }
  };
  errorCorrectionCode.getTotalCodewordsCount = function getTotalCodewordsCount(version2, errorCorrectionLevel2) {
    switch (errorCorrectionLevel2) {
      case ECLevel$1.L:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 0];
      case ECLevel$1.M:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 1];
      case ECLevel$1.Q:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 2];
      case ECLevel$1.H:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 3];
      default:
        return void 0;
    }
  };
  var polynomial = {};
  var galoisField = {};
  var EXP_TABLE = new Uint8Array(512);
  var LOG_TABLE = new Uint8Array(256);
  (function initTables() {
    var x2 = 1;
    for (var i2 = 0; i2 < 255; i2++) {
      EXP_TABLE[i2] = x2;
      LOG_TABLE[x2] = i2;
      x2 <<= 1;
      if (x2 & 256) {
        x2 ^= 285;
      }
    }
    for (var _i3 = 255; _i3 < 512; _i3++) {
      EXP_TABLE[_i3] = EXP_TABLE[_i3 - 255];
    }
  })();
  galoisField.log = function log(n2) {
    if (n2 < 1) throw new Error("log(" + n2 + ")");
    return LOG_TABLE[n2];
  };
  galoisField.exp = function exp(n2) {
    return EXP_TABLE[n2];
  };
  galoisField.mul = function mul(x2, y2) {
    if (x2 === 0 || y2 === 0) return 0;
    return EXP_TABLE[LOG_TABLE[x2] + LOG_TABLE[y2]];
  };
  (function (exports2) {
    var GF = galoisField;
    exports2.mul = function mul(p1, p2) {
      var coeff = new Uint8Array(p1.length + p2.length - 1);
      for (var i2 = 0; i2 < p1.length; i2++) {
        for (var j2 = 0; j2 < p2.length; j2++) {
          coeff[i2 + j2] ^= GF.mul(p1[i2], p2[j2]);
        }
      }
      return coeff;
    };
    exports2.mod = function mod(divident, divisor) {
      var result2 = new Uint8Array(divident);
      while (result2.length - divisor.length >= 0) {
        var coeff = result2[0];
        for (var i2 = 0; i2 < divisor.length; i2++) {
          result2[i2] ^= GF.mul(divisor[i2], coeff);
        }
        var offset = 0;
        while (offset < result2.length && result2[offset] === 0) offset++;
        result2 = result2.slice(offset);
      }
      return result2;
    };
    exports2.generateECPolynomial = function generateECPolynomial(degree) {
      var poly = new Uint8Array([1]);
      for (var i2 = 0; i2 < degree; i2++) {
        poly = exports2.mul(poly, new Uint8Array([1, GF.exp(i2)]));
      }
      return poly;
    };
  })(polynomial);
  var Polynomial = polynomial;
  function ReedSolomonEncoder$1(degree) {
    this.genPoly = void 0;
    this.degree = degree;
    if (this.degree) this.initialize(this.degree);
  }
  ReedSolomonEncoder$1.prototype.initialize = function initialize(degree) {
    this.degree = degree;
    this.genPoly = Polynomial.generateECPolynomial(this.degree);
  };
  ReedSolomonEncoder$1.prototype.encode = function encode2(data) {
    if (!this.genPoly) {
      throw new Error("Encoder not initialized");
    }
    var paddedData = new Uint8Array(data.length + this.degree);
    paddedData.set(data);
    var remainder = Polynomial.mod(paddedData, this.genPoly);
    var start = this.degree - remainder.length;
    if (start > 0) {
      var buff = new Uint8Array(this.degree);
      buff.set(remainder, start);
      return buff;
    }
    return remainder;
  };
  var reedSolomonEncoder = ReedSolomonEncoder$1;
  var version = {};
  var mode = {};
  var versionCheck = {};
  versionCheck.isValid = function isValid(version2) {
    return !isNaN(version2) && version2 >= 1 && version2 <= 40;
  };
  var regex = {};
  var numeric = "[0-9]+";
  var alphanumeric = "[A-Z $%*+\\-./:]+";
  var kanji = "(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";
  kanji = kanji.replace(/u/g, "\\u");
  var _byte = "(?:(?![A-Z0-9 $%*+\\-./:]|" + kanji + ")(?:.|[\r\n]))+";
  regex.KANJI = new RegExp(kanji, "g");
  regex.BYTE_KANJI = new RegExp("[^A-Z0-9 $%*+\\-./:]+", "g");
  regex.BYTE = new RegExp(_byte, "g");
  regex.NUMERIC = new RegExp(numeric, "g");
  regex.ALPHANUMERIC = new RegExp(alphanumeric, "g");
  var TEST_KANJI = new RegExp("^" + kanji + "$");
  var TEST_NUMERIC = new RegExp("^" + numeric + "$");
  var TEST_ALPHANUMERIC = new RegExp("^[A-Z0-9 $%*+\\-./:]+$");
  regex.testKanji = function testKanji(str) {
    return TEST_KANJI.test(str);
  };
  regex.testNumeric = function testNumeric(str) {
    return TEST_NUMERIC.test(str);
  };
  regex.testAlphanumeric = function testAlphanumeric(str) {
    return TEST_ALPHANUMERIC.test(str);
  };
  (function (exports2) {
    var VersionCheck = versionCheck;
    var Regex = regex;
    exports2.NUMERIC = {
      id: "Numeric",
      bit: 1 << 0,
      ccBits: [10, 12, 14]
    };
    exports2.ALPHANUMERIC = {
      id: "Alphanumeric",
      bit: 1 << 1,
      ccBits: [9, 11, 13]
    };
    exports2.BYTE = {
      id: "Byte",
      bit: 1 << 2,
      ccBits: [8, 16, 16]
    };
    exports2.KANJI = {
      id: "Kanji",
      bit: 1 << 3,
      ccBits: [8, 10, 12]
    };
    exports2.MIXED = {
      bit: -1
    };
    exports2.getCharCountIndicator = function getCharCountIndicator(mode2, version2) {
      if (!mode2.ccBits) throw new Error("Invalid mode: " + mode2);
      if (!VersionCheck.isValid(version2)) {
        throw new Error("Invalid version: " + version2);
      }
      if (version2 >= 1 && version2 < 10) return mode2.ccBits[0];else if (version2 < 27) return mode2.ccBits[1];
      return mode2.ccBits[2];
    };
    exports2.getBestModeForData = function getBestModeForData(dataStr) {
      if (Regex.testNumeric(dataStr)) return exports2.NUMERIC;else if (Regex.testAlphanumeric(dataStr)) return exports2.ALPHANUMERIC;else if (Regex.testKanji(dataStr)) return exports2.KANJI;else return exports2.BYTE;
    };
    exports2.toString = function toString2(mode2) {
      if (mode2 && mode2.id) return mode2.id;
      throw new Error("Invalid mode");
    };
    exports2.isValid = function isValid(mode2) {
      return mode2 && mode2.bit && mode2.ccBits;
    };
    function fromString(string) {
      if (typeof string !== "string") {
        throw new Error("Param is not a string");
      }
      var lcStr = string.toLowerCase();
      switch (lcStr) {
        case "numeric":
          return exports2.NUMERIC;
        case "alphanumeric":
          return exports2.ALPHANUMERIC;
        case "kanji":
          return exports2.KANJI;
        case "byte":
          return exports2.BYTE;
        default:
          throw new Error("Unknown mode: " + string);
      }
    }
    exports2.from = function from(value, defaultValue) {
      if (exports2.isValid(value)) {
        return value;
      }
      try {
        return fromString(value);
      } catch (e2) {
        return defaultValue;
      }
    };
  })(mode);
  (function (exports2) {
    var Utils2 = utils$2;
    var ECCode2 = errorCorrectionCode;
    var ECLevel2 = errorCorrectionLevel;
    var Mode2 = mode;
    var VersionCheck = versionCheck;
    var G18 = 1 << 12 | 1 << 11 | 1 << 10 | 1 << 9 | 1 << 8 | 1 << 5 | 1 << 2 | 1 << 0;
    var G18_BCH = Utils2.getBCHDigit(G18);
    function getBestVersionForDataLength(mode2, length, errorCorrectionLevel2) {
      for (var currentVersion = 1; currentVersion <= 40; currentVersion++) {
        if (length <= exports2.getCapacity(currentVersion, errorCorrectionLevel2, mode2)) {
          return currentVersion;
        }
      }
      return void 0;
    }
    function getReservedBitsCount(mode2, version2) {
      return Mode2.getCharCountIndicator(mode2, version2) + 4;
    }
    function getTotalBitsFromDataArray(segments2, version2) {
      var totalBits = 0;
      segments2.forEach(function (data) {
        var reservedBits = getReservedBitsCount(data.mode, version2);
        totalBits += reservedBits + data.getBitsLength();
      });
      return totalBits;
    }
    function getBestVersionForMixedData(segments2, errorCorrectionLevel2) {
      for (var currentVersion = 1; currentVersion <= 40; currentVersion++) {
        var length = getTotalBitsFromDataArray(segments2, currentVersion);
        if (length <= exports2.getCapacity(currentVersion, errorCorrectionLevel2, Mode2.MIXED)) {
          return currentVersion;
        }
      }
      return void 0;
    }
    exports2.from = function from(value, defaultValue) {
      if (VersionCheck.isValid(value)) {
        return parseInt(value, 10);
      }
      return defaultValue;
    };
    exports2.getCapacity = function getCapacity(version2, errorCorrectionLevel2, mode2) {
      if (!VersionCheck.isValid(version2)) {
        throw new Error("Invalid QR Code version");
      }
      if (typeof mode2 === "undefined") mode2 = Mode2.BYTE;
      var totalCodewords = Utils2.getSymbolTotalCodewords(version2);
      var ecTotalCodewords = ECCode2.getTotalCodewordsCount(version2, errorCorrectionLevel2);
      var dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8;
      if (mode2 === Mode2.MIXED) return dataTotalCodewordsBits;
      var usableBits = dataTotalCodewordsBits - getReservedBitsCount(mode2, version2);
      switch (mode2) {
        case Mode2.NUMERIC:
          return Math.floor(usableBits / 10 * 3);
        case Mode2.ALPHANUMERIC:
          return Math.floor(usableBits / 11 * 2);
        case Mode2.KANJI:
          return Math.floor(usableBits / 13);
        case Mode2.BYTE:
        default:
          return Math.floor(usableBits / 8);
      }
    };
    exports2.getBestVersionForData = function getBestVersionForData(data, errorCorrectionLevel2) {
      var seg;
      var ecl = ECLevel2.from(errorCorrectionLevel2, ECLevel2.M);
      if (Array.isArray(data)) {
        if (data.length > 1) {
          return getBestVersionForMixedData(data, ecl);
        }
        if (data.length === 0) {
          return 1;
        }
        seg = data[0];
      } else {
        seg = data;
      }
      return getBestVersionForDataLength(seg.mode, seg.getLength(), ecl);
    };
    exports2.getEncodedBits = function getEncodedBits(version2) {
      if (!VersionCheck.isValid(version2) || version2 < 7) {
        throw new Error("Invalid QR Code version");
      }
      var d2 = version2 << 12;
      while (Utils2.getBCHDigit(d2) - G18_BCH >= 0) {
        d2 ^= G18 << Utils2.getBCHDigit(d2) - G18_BCH;
      }
      return version2 << 12 | d2;
    };
  })(version);
  var formatInfo = {};
  var Utils$3 = utils$2;
  var G15 = 1 << 10 | 1 << 8 | 1 << 5 | 1 << 4 | 1 << 2 | 1 << 1 | 1 << 0;
  var G15_MASK = 1 << 14 | 1 << 12 | 1 << 10 | 1 << 4 | 1 << 1;
  var G15_BCH = Utils$3.getBCHDigit(G15);
  formatInfo.getEncodedBits = function getEncodedBits(errorCorrectionLevel2, mask) {
    var data = errorCorrectionLevel2.bit << 3 | mask;
    var d2 = data << 10;
    while (Utils$3.getBCHDigit(d2) - G15_BCH >= 0) {
      d2 ^= G15 << Utils$3.getBCHDigit(d2) - G15_BCH;
    }
    return (data << 10 | d2) ^ G15_MASK;
  };
  var segments = {};
  var Mode$4 = mode;
  function NumericData(data) {
    this.mode = Mode$4.NUMERIC;
    this.data = data.toString();
  }
  NumericData.getBitsLength = function getBitsLength(length) {
    return 10 * Math.floor(length / 3) + (length % 3 ? length % 3 * 3 + 1 : 0);
  };
  NumericData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  NumericData.prototype.getBitsLength = function getBitsLength() {
    return NumericData.getBitsLength(this.data.length);
  };
  NumericData.prototype.write = function write(bitBuffer2) {
    var i2, group, value;
    for (i2 = 0; i2 + 3 <= this.data.length; i2 += 3) {
      group = this.data.substr(i2, 3);
      value = parseInt(group, 10);
      bitBuffer2.put(value, 10);
    }
    var remainingNum = this.data.length - i2;
    if (remainingNum > 0) {
      group = this.data.substr(i2);
      value = parseInt(group, 10);
      bitBuffer2.put(value, remainingNum * 3 + 1);
    }
  };
  var numericData = NumericData;
  var Mode$3 = mode;
  var ALPHA_NUM_CHARS = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", " ", "$", "%", "*", "+", "-", ".", "/", ":"];
  function AlphanumericData(data) {
    this.mode = Mode$3.ALPHANUMERIC;
    this.data = data;
  }
  AlphanumericData.getBitsLength = function getBitsLength(length) {
    return 11 * Math.floor(length / 2) + 6 * (length % 2);
  };
  AlphanumericData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  AlphanumericData.prototype.getBitsLength = function getBitsLength() {
    return AlphanumericData.getBitsLength(this.data.length);
  };
  AlphanumericData.prototype.write = function write(bitBuffer2) {
    var i2;
    for (i2 = 0; i2 + 2 <= this.data.length; i2 += 2) {
      var value = ALPHA_NUM_CHARS.indexOf(this.data[i2]) * 45;
      value += ALPHA_NUM_CHARS.indexOf(this.data[i2 + 1]);
      bitBuffer2.put(value, 11);
    }
    if (this.data.length % 2) {
      bitBuffer2.put(ALPHA_NUM_CHARS.indexOf(this.data[i2]), 6);
    }
  };
  var alphanumericData = AlphanumericData;
  var Mode$2 = mode;
  function ByteData(data) {
    this.mode = Mode$2.BYTE;
    if (typeof data === "string") {
      this.data = new TextEncoder().encode(data);
    } else {
      this.data = new Uint8Array(data);
    }
  }
  ByteData.getBitsLength = function getBitsLength(length) {
    return length * 8;
  };
  ByteData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  ByteData.prototype.getBitsLength = function getBitsLength() {
    return ByteData.getBitsLength(this.data.length);
  };
  ByteData.prototype.write = function (bitBuffer2) {
    for (var i2 = 0, l2 = this.data.length; i2 < l2; i2++) {
      bitBuffer2.put(this.data[i2], 8);
    }
  };
  var byteData = ByteData;
  var Mode$1 = mode;
  var Utils$2 = utils$2;
  function KanjiData(data) {
    this.mode = Mode$1.KANJI;
    this.data = data;
  }
  KanjiData.getBitsLength = function getBitsLength(length) {
    return length * 13;
  };
  KanjiData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  KanjiData.prototype.getBitsLength = function getBitsLength() {
    return KanjiData.getBitsLength(this.data.length);
  };
  KanjiData.prototype.write = function (bitBuffer2) {
    var i2;
    for (i2 = 0; i2 < this.data.length; i2++) {
      var value = Utils$2.toSJIS(this.data[i2]);
      if (value >= 33088 && value <= 40956) {
        value -= 33088;
      } else if (value >= 57408 && value <= 60351) {
        value -= 49472;
      } else {
        throw new Error("Invalid SJIS character: " + this.data[i2] + "\nMake sure your charset is UTF-8");
      }
      value = (value >>> 8 & 255) * 192 + (value & 255);
      bitBuffer2.put(value, 13);
    }
  };
  var kanjiData = KanjiData;
  var dijkstra = {
    exports: {}
  };
  (function (module2) {
    var dijkstra2 = {
      single_source_shortest_paths: function single_source_shortest_paths(graph, s2, d2) {
        var predecessors = {};
        var costs = {};
        costs[s2] = 0;
        var open = dijkstra2.PriorityQueue.make();
        open.push(s2, 0);
        var closest, u2, v2, cost_of_s_to_u, adjacent_nodes, cost_of_e, cost_of_s_to_u_plus_cost_of_e, cost_of_s_to_v, first_visit;
        while (!open.empty()) {
          closest = open.pop();
          u2 = closest.value;
          cost_of_s_to_u = closest.cost;
          adjacent_nodes = graph[u2] || {};
          for (v2 in adjacent_nodes) {
            if (adjacent_nodes.hasOwnProperty(v2)) {
              cost_of_e = adjacent_nodes[v2];
              cost_of_s_to_u_plus_cost_of_e = cost_of_s_to_u + cost_of_e;
              cost_of_s_to_v = costs[v2];
              first_visit = typeof costs[v2] === "undefined";
              if (first_visit || cost_of_s_to_v > cost_of_s_to_u_plus_cost_of_e) {
                costs[v2] = cost_of_s_to_u_plus_cost_of_e;
                open.push(v2, cost_of_s_to_u_plus_cost_of_e);
                predecessors[v2] = u2;
              }
            }
          }
        }
        if (typeof d2 !== "undefined" && typeof costs[d2] === "undefined") {
          var msg = ["Could not find a path from ", s2, " to ", d2, "."].join("");
          throw new Error(msg);
        }
        return predecessors;
      },
      extract_shortest_path_from_predecessor_list: function extract_shortest_path_from_predecessor_list(predecessors, d2) {
        var nodes = [];
        var u2 = d2;
        while (u2) {
          nodes.push(u2);
          predecessors[u2];
          u2 = predecessors[u2];
        }
        nodes.reverse();
        return nodes;
      },
      find_path: function find_path(graph, s2, d2) {
        var predecessors = dijkstra2.single_source_shortest_paths(graph, s2, d2);
        return dijkstra2.extract_shortest_path_from_predecessor_list(predecessors, d2);
      },
      /**
       * A very naive priority queue implementation.
       */
      PriorityQueue: {
        make: function make(opts) {
          var T2 = dijkstra2.PriorityQueue,
            t2 = {},
            key;
          opts = opts || {};
          for (key in T2) {
            if (T2.hasOwnProperty(key)) {
              t2[key] = T2[key];
            }
          }
          t2.queue = [];
          t2.sorter = opts.sorter || T2.default_sorter;
          return t2;
        },
        default_sorter: function default_sorter(a2, b2) {
          return a2.cost - b2.cost;
        },
        /**
         * Add a new item to the queue and ensure the highest priority element
         * is at the front of the queue.
         */
        push: function push(value, cost) {
          var item = {
            value: value,
            cost: cost
          };
          this.queue.push(item);
          this.queue.sort(this.sorter);
        },
        /**
         * Return the highest priority element in the queue.
         */
        pop: function pop() {
          return this.queue.shift();
        },
        empty: function empty() {
          return this.queue.length === 0;
        }
      }
    };
    {
      module2.exports = dijkstra2;
    }
  })(dijkstra);
  var dijkstraExports = dijkstra.exports;
  (function (exports2) {
    var Mode2 = mode;
    var NumericData2 = numericData;
    var AlphanumericData2 = alphanumericData;
    var ByteData2 = byteData;
    var KanjiData2 = kanjiData;
    var Regex = regex;
    var Utils2 = utils$2;
    var dijkstra2 = dijkstraExports;
    function getStringByteLength(str) {
      return unescape(encodeURIComponent(str)).length;
    }
    function getSegments(regex2, mode2, str) {
      var segments2 = [];
      var result2;
      while ((result2 = regex2.exec(str)) !== null) {
        segments2.push({
          data: result2[0],
          index: result2.index,
          mode: mode2,
          length: result2[0].length
        });
      }
      return segments2;
    }
    function getSegmentsFromString(dataStr) {
      var numSegs = getSegments(Regex.NUMERIC, Mode2.NUMERIC, dataStr);
      var alphaNumSegs = getSegments(Regex.ALPHANUMERIC, Mode2.ALPHANUMERIC, dataStr);
      var byteSegs;
      var kanjiSegs;
      if (Utils2.isKanjiModeEnabled()) {
        byteSegs = getSegments(Regex.BYTE, Mode2.BYTE, dataStr);
        kanjiSegs = getSegments(Regex.KANJI, Mode2.KANJI, dataStr);
      } else {
        byteSegs = getSegments(Regex.BYTE_KANJI, Mode2.BYTE, dataStr);
        kanjiSegs = [];
      }
      var segs = numSegs.concat(alphaNumSegs, byteSegs, kanjiSegs);
      return segs.sort(function (s1, s2) {
        return s1.index - s2.index;
      }).map(function (obj) {
        return {
          data: obj.data,
          mode: obj.mode,
          length: obj.length
        };
      });
    }
    function getSegmentBitsLength(length, mode2) {
      switch (mode2) {
        case Mode2.NUMERIC:
          return NumericData2.getBitsLength(length);
        case Mode2.ALPHANUMERIC:
          return AlphanumericData2.getBitsLength(length);
        case Mode2.KANJI:
          return KanjiData2.getBitsLength(length);
        case Mode2.BYTE:
          return ByteData2.getBitsLength(length);
      }
    }
    function mergeSegments(segs) {
      return segs.reduce(function (acc, curr) {
        var prevSeg = acc.length - 1 >= 0 ? acc[acc.length - 1] : null;
        if (prevSeg && prevSeg.mode === curr.mode) {
          acc[acc.length - 1].data += curr.data;
          return acc;
        }
        acc.push(curr);
        return acc;
      }, []);
    }
    function buildNodes(segs) {
      var nodes = [];
      for (var i2 = 0; i2 < segs.length; i2++) {
        var seg = segs[i2];
        switch (seg.mode) {
          case Mode2.NUMERIC:
            nodes.push([seg, {
              data: seg.data,
              mode: Mode2.ALPHANUMERIC,
              length: seg.length
            }, {
              data: seg.data,
              mode: Mode2.BYTE,
              length: seg.length
            }]);
            break;
          case Mode2.ALPHANUMERIC:
            nodes.push([seg, {
              data: seg.data,
              mode: Mode2.BYTE,
              length: seg.length
            }]);
            break;
          case Mode2.KANJI:
            nodes.push([seg, {
              data: seg.data,
              mode: Mode2.BYTE,
              length: getStringByteLength(seg.data)
            }]);
            break;
          case Mode2.BYTE:
            nodes.push([{
              data: seg.data,
              mode: Mode2.BYTE,
              length: getStringByteLength(seg.data)
            }]);
        }
      }
      return nodes;
    }
    function buildGraph(nodes, version2) {
      var table = {};
      var graph = {
        start: {}
      };
      var prevNodeIds = ["start"];
      for (var i2 = 0; i2 < nodes.length; i2++) {
        var nodeGroup = nodes[i2];
        var currentNodeIds = [];
        for (var j2 = 0; j2 < nodeGroup.length; j2++) {
          var node = nodeGroup[j2];
          var _key16 = "" + i2 + j2;
          currentNodeIds.push(_key16);
          table[_key16] = {
            node: node,
            lastCount: 0
          };
          graph[_key16] = {};
          for (var n2 = 0; n2 < prevNodeIds.length; n2++) {
            var prevNodeId = prevNodeIds[n2];
            if (table[prevNodeId] && table[prevNodeId].node.mode === node.mode) {
              graph[prevNodeId][_key16] = getSegmentBitsLength(table[prevNodeId].lastCount + node.length, node.mode) - getSegmentBitsLength(table[prevNodeId].lastCount, node.mode);
              table[prevNodeId].lastCount += node.length;
            } else {
              if (table[prevNodeId]) table[prevNodeId].lastCount = node.length;
              graph[prevNodeId][_key16] = getSegmentBitsLength(node.length, node.mode) + 4 + Mode2.getCharCountIndicator(node.mode, version2);
            }
          }
        }
        prevNodeIds = currentNodeIds;
      }
      for (var _n3 = 0; _n3 < prevNodeIds.length; _n3++) {
        graph[prevNodeIds[_n3]].end = 0;
      }
      return {
        map: graph,
        table: table
      };
    }
    function buildSingleSegment(data, modesHint) {
      var mode2;
      var bestMode = Mode2.getBestModeForData(data);
      mode2 = Mode2.from(modesHint, bestMode);
      if (mode2 !== Mode2.BYTE && mode2.bit < bestMode.bit) {
        throw new Error('"' + data + '" cannot be encoded with mode ' + Mode2.toString(mode2) + ".\n Suggested mode is: " + Mode2.toString(bestMode));
      }
      if (mode2 === Mode2.KANJI && !Utils2.isKanjiModeEnabled()) {
        mode2 = Mode2.BYTE;
      }
      switch (mode2) {
        case Mode2.NUMERIC:
          return new NumericData2(data);
        case Mode2.ALPHANUMERIC:
          return new AlphanumericData2(data);
        case Mode2.KANJI:
          return new KanjiData2(data);
        case Mode2.BYTE:
          return new ByteData2(data);
      }
    }
    exports2.fromArray = function fromArray(array) {
      return array.reduce(function (acc, seg) {
        if (typeof seg === "string") {
          acc.push(buildSingleSegment(seg, null));
        } else if (seg.data) {
          acc.push(buildSingleSegment(seg.data, seg.mode));
        }
        return acc;
      }, []);
    };
    exports2.fromString = function fromString(data, version2) {
      var segs = getSegmentsFromString(data, Utils2.isKanjiModeEnabled());
      var nodes = buildNodes(segs);
      var graph = buildGraph(nodes, version2);
      var path = dijkstra2.find_path(graph.map, "start", "end");
      var optimizedSegs = [];
      for (var i2 = 1; i2 < path.length - 1; i2++) {
        optimizedSegs.push(graph.table[path[i2]].node);
      }
      return exports2.fromArray(mergeSegments(optimizedSegs));
    };
    exports2.rawSplit = function rawSplit(data) {
      return exports2.fromArray(getSegmentsFromString(data, Utils2.isKanjiModeEnabled()));
    };
  })(segments);
  var Utils$1 = utils$2;
  var ECLevel = errorCorrectionLevel;
  var BitBuffer = bitBuffer;
  var BitMatrix = bitMatrix;
  var AlignmentPattern = alignmentPattern;
  var FinderPattern = finderPattern;
  var MaskPattern = maskPattern;
  var ECCode = errorCorrectionCode;
  var ReedSolomonEncoder = reedSolomonEncoder;
  var Version = version;
  var FormatInfo = formatInfo;
  var Mode = mode;
  var Segments = segments;
  function setupFinderPattern(matrix, version2) {
    var size = matrix.size;
    var pos = FinderPattern.getPositions(version2);
    for (var i2 = 0; i2 < pos.length; i2++) {
      var row = pos[i2][0];
      var col = pos[i2][1];
      for (var r2 = -1; r2 <= 7; r2++) {
        if (row + r2 <= -1 || size <= row + r2) continue;
        for (var c2 = -1; c2 <= 7; c2++) {
          if (col + c2 <= -1 || size <= col + c2) continue;
          if (r2 >= 0 && r2 <= 6 && (c2 === 0 || c2 === 6) || c2 >= 0 && c2 <= 6 && (r2 === 0 || r2 === 6) || r2 >= 2 && r2 <= 4 && c2 >= 2 && c2 <= 4) {
            matrix.set(row + r2, col + c2, true, true);
          } else {
            matrix.set(row + r2, col + c2, false, true);
          }
        }
      }
    }
  }
  function setupTimingPattern(matrix) {
    var size = matrix.size;
    for (var r2 = 8; r2 < size - 8; r2++) {
      var value = r2 % 2 === 0;
      matrix.set(r2, 6, value, true);
      matrix.set(6, r2, value, true);
    }
  }
  function setupAlignmentPattern(matrix, version2) {
    var pos = AlignmentPattern.getPositions(version2);
    for (var i2 = 0; i2 < pos.length; i2++) {
      var row = pos[i2][0];
      var col = pos[i2][1];
      for (var r2 = -2; r2 <= 2; r2++) {
        for (var c2 = -2; c2 <= 2; c2++) {
          if (r2 === -2 || r2 === 2 || c2 === -2 || c2 === 2 || r2 === 0 && c2 === 0) {
            matrix.set(row + r2, col + c2, true, true);
          } else {
            matrix.set(row + r2, col + c2, false, true);
          }
        }
      }
    }
  }
  function setupVersionInfo(matrix, version2) {
    var size = matrix.size;
    var bits = Version.getEncodedBits(version2);
    var row, col, mod;
    for (var i2 = 0; i2 < 18; i2++) {
      row = Math.floor(i2 / 3);
      col = i2 % 3 + size - 8 - 3;
      mod = (bits >> i2 & 1) === 1;
      matrix.set(row, col, mod, true);
      matrix.set(col, row, mod, true);
    }
  }
  function setupFormatInfo(matrix, errorCorrectionLevel2, maskPattern2) {
    var size = matrix.size;
    var bits = FormatInfo.getEncodedBits(errorCorrectionLevel2, maskPattern2);
    var i2, mod;
    for (i2 = 0; i2 < 15; i2++) {
      mod = (bits >> i2 & 1) === 1;
      if (i2 < 6) {
        matrix.set(i2, 8, mod, true);
      } else if (i2 < 8) {
        matrix.set(i2 + 1, 8, mod, true);
      } else {
        matrix.set(size - 15 + i2, 8, mod, true);
      }
      if (i2 < 8) {
        matrix.set(8, size - i2 - 1, mod, true);
      } else if (i2 < 9) {
        matrix.set(8, 15 - i2 - 1 + 1, mod, true);
      } else {
        matrix.set(8, 15 - i2 - 1, mod, true);
      }
    }
    matrix.set(size - 8, 8, 1, true);
  }
  function setupData(matrix, data) {
    var size = matrix.size;
    var inc = -1;
    var row = size - 1;
    var bitIndex = 7;
    var byteIndex = 0;
    for (var col = size - 1; col > 0; col -= 2) {
      if (col === 6) col--;
      while (true) {
        for (var c2 = 0; c2 < 2; c2++) {
          if (!matrix.isReserved(row, col - c2)) {
            var dark = false;
            if (byteIndex < data.length) {
              dark = (data[byteIndex] >>> bitIndex & 1) === 1;
            }
            matrix.set(row, col - c2, dark);
            bitIndex--;
            if (bitIndex === -1) {
              byteIndex++;
              bitIndex = 7;
            }
          }
        }
        row += inc;
        if (row < 0 || size <= row) {
          row -= inc;
          inc = -inc;
          break;
        }
      }
    }
  }
  function createData(version2, errorCorrectionLevel2, segments2) {
    var buffer = new BitBuffer();
    segments2.forEach(function (data) {
      buffer.put(data.mode.bit, 4);
      buffer.put(data.getLength(), Mode.getCharCountIndicator(data.mode, version2));
      data.write(buffer);
    });
    var totalCodewords = Utils$1.getSymbolTotalCodewords(version2);
    var ecTotalCodewords = ECCode.getTotalCodewordsCount(version2, errorCorrectionLevel2);
    var dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8;
    if (buffer.getLengthInBits() + 4 <= dataTotalCodewordsBits) {
      buffer.put(0, 4);
    }
    while (buffer.getLengthInBits() % 8 !== 0) {
      buffer.putBit(0);
    }
    var remainingByte = (dataTotalCodewordsBits - buffer.getLengthInBits()) / 8;
    for (var i2 = 0; i2 < remainingByte; i2++) {
      buffer.put(i2 % 2 ? 17 : 236, 8);
    }
    return createCodewords(buffer, version2, errorCorrectionLevel2);
  }
  function createCodewords(bitBuffer2, version2, errorCorrectionLevel2) {
    var totalCodewords = Utils$1.getSymbolTotalCodewords(version2);
    var ecTotalCodewords = ECCode.getTotalCodewordsCount(version2, errorCorrectionLevel2);
    var dataTotalCodewords = totalCodewords - ecTotalCodewords;
    var ecTotalBlocks = ECCode.getBlocksCount(version2, errorCorrectionLevel2);
    var blocksInGroup2 = totalCodewords % ecTotalBlocks;
    var blocksInGroup1 = ecTotalBlocks - blocksInGroup2;
    var totalCodewordsInGroup1 = Math.floor(totalCodewords / ecTotalBlocks);
    var dataCodewordsInGroup1 = Math.floor(dataTotalCodewords / ecTotalBlocks);
    var dataCodewordsInGroup2 = dataCodewordsInGroup1 + 1;
    var ecCount = totalCodewordsInGroup1 - dataCodewordsInGroup1;
    var rs = new ReedSolomonEncoder(ecCount);
    var offset = 0;
    var dcData = new Array(ecTotalBlocks);
    var ecData = new Array(ecTotalBlocks);
    var maxDataSize = 0;
    var buffer = new Uint8Array(bitBuffer2.buffer);
    for (var b2 = 0; b2 < ecTotalBlocks; b2++) {
      var dataSize = b2 < blocksInGroup1 ? dataCodewordsInGroup1 : dataCodewordsInGroup2;
      dcData[b2] = buffer.slice(offset, offset + dataSize);
      ecData[b2] = rs.encode(dcData[b2]);
      offset += dataSize;
      maxDataSize = Math.max(maxDataSize, dataSize);
    }
    var data = new Uint8Array(totalCodewords);
    var index2 = 0;
    var i2, r2;
    for (i2 = 0; i2 < maxDataSize; i2++) {
      for (r2 = 0; r2 < ecTotalBlocks; r2++) {
        if (i2 < dcData[r2].length) {
          data[index2++] = dcData[r2][i2];
        }
      }
    }
    for (i2 = 0; i2 < ecCount; i2++) {
      for (r2 = 0; r2 < ecTotalBlocks; r2++) {
        data[index2++] = ecData[r2][i2];
      }
    }
    return data;
  }
  function createSymbol(data, version2, errorCorrectionLevel2, maskPattern2) {
    var segments2;
    if (Array.isArray(data)) {
      segments2 = Segments.fromArray(data);
    } else if (typeof data === "string") {
      var estimatedVersion = version2;
      if (!estimatedVersion) {
        var rawSegments = Segments.rawSplit(data);
        estimatedVersion = Version.getBestVersionForData(rawSegments, errorCorrectionLevel2);
      }
      segments2 = Segments.fromString(data, estimatedVersion || 40);
    } else {
      throw new Error("Invalid data");
    }
    var bestVersion = Version.getBestVersionForData(segments2, errorCorrectionLevel2);
    if (!bestVersion) {
      throw new Error("The amount of data is too big to be stored in a QR Code");
    }
    if (!version2) {
      version2 = bestVersion;
    } else if (version2 < bestVersion) {
      throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: " + bestVersion + ".\n");
    }
    var dataBits = createData(version2, errorCorrectionLevel2, segments2);
    var moduleCount = Utils$1.getSymbolSize(version2);
    var modules = new BitMatrix(moduleCount);
    setupFinderPattern(modules, version2);
    setupTimingPattern(modules);
    setupAlignmentPattern(modules, version2);
    setupFormatInfo(modules, errorCorrectionLevel2, 0);
    if (version2 >= 7) {
      setupVersionInfo(modules, version2);
    }
    setupData(modules, dataBits);
    if (isNaN(maskPattern2)) {
      maskPattern2 = MaskPattern.getBestMask(modules, setupFormatInfo.bind(null, modules, errorCorrectionLevel2));
    }
    MaskPattern.applyMask(maskPattern2, modules);
    setupFormatInfo(modules, errorCorrectionLevel2, maskPattern2);
    return {
      modules: modules,
      version: version2,
      errorCorrectionLevel: errorCorrectionLevel2,
      maskPattern: maskPattern2,
      segments: segments2
    };
  }
  qrcode.create = function create(data, options) {
    if (typeof data === "undefined" || data === "") {
      throw new Error("No input text");
    }
    var errorCorrectionLevel2 = ECLevel.M;
    var version2;
    var mask;
    if (typeof options !== "undefined") {
      errorCorrectionLevel2 = ECLevel.from(options.errorCorrectionLevel, ECLevel.M);
      version2 = Version.from(options.version);
      mask = MaskPattern.from(options.maskPattern);
      if (options.toSJISFunc) {
        Utils$1.setToSJISFunction(options.toSJISFunc);
      }
    }
    return createSymbol(data, version2, errorCorrectionLevel2, mask);
  };
  var canvas = {};
  var utils$1 = {};
  (function (exports2) {
    function hex2rgba(hex) {
      if (typeof hex === "number") {
        hex = hex.toString();
      }
      if (typeof hex !== "string") {
        throw new Error("Color should be defined as hex string");
      }
      var hexCode = hex.slice().replace("#", "").split("");
      if (hexCode.length < 3 || hexCode.length === 5 || hexCode.length > 8) {
        throw new Error("Invalid hex color: " + hex);
      }
      if (hexCode.length === 3 || hexCode.length === 4) {
        hexCode = Array.prototype.concat.apply([], hexCode.map(function (c2) {
          return [c2, c2];
        }));
      }
      if (hexCode.length === 6) hexCode.push("F", "F");
      var hexValue = parseInt(hexCode.join(""), 16);
      return {
        r: hexValue >> 24 & 255,
        g: hexValue >> 16 & 255,
        b: hexValue >> 8 & 255,
        a: hexValue & 255,
        hex: "#" + hexCode.slice(0, 6).join("")
      };
    }
    exports2.getOptions = function getOptions(options) {
      if (!options) options = {};
      if (!options.color) options.color = {};
      var margin = typeof options.margin === "undefined" || options.margin === null || options.margin < 0 ? 4 : options.margin;
      var width = options.width && options.width >= 21 ? options.width : void 0;
      var scale = options.scale || 4;
      return {
        width: width,
        scale: width ? 4 : scale,
        margin: margin,
        color: {
          dark: hex2rgba(options.color.dark || "#000000ff"),
          light: hex2rgba(options.color.light || "#ffffffff")
        },
        type: options.type,
        rendererOpts: options.rendererOpts || {}
      };
    };
    exports2.getScale = function getScale(qrSize, opts) {
      return opts.width && opts.width >= qrSize + opts.margin * 2 ? opts.width / (qrSize + opts.margin * 2) : opts.scale;
    };
    exports2.getImageWidth = function getImageWidth(qrSize, opts) {
      var scale = exports2.getScale(qrSize, opts);
      return Math.floor((qrSize + opts.margin * 2) * scale);
    };
    exports2.qrToImageData = function qrToImageData(imgData, qr2, opts) {
      var size = qr2.modules.size;
      var data = qr2.modules.data;
      var scale = exports2.getScale(size, opts);
      var symbolSize = Math.floor((size + opts.margin * 2) * scale);
      var scaledMargin = opts.margin * scale;
      var palette = [opts.color.light, opts.color.dark];
      for (var i2 = 0; i2 < symbolSize; i2++) {
        for (var j2 = 0; j2 < symbolSize; j2++) {
          var posDst = (i2 * symbolSize + j2) * 4;
          var pxColor = opts.color.light;
          if (i2 >= scaledMargin && j2 >= scaledMargin && i2 < symbolSize - scaledMargin && j2 < symbolSize - scaledMargin) {
            var iSrc = Math.floor((i2 - scaledMargin) / scale);
            var jSrc = Math.floor((j2 - scaledMargin) / scale);
            pxColor = palette[data[iSrc * size + jSrc] ? 1 : 0];
          }
          imgData[posDst++] = pxColor.r;
          imgData[posDst++] = pxColor.g;
          imgData[posDst++] = pxColor.b;
          imgData[posDst] = pxColor.a;
        }
      }
    };
  })(utils$1);
  (function (exports2) {
    var Utils2 = utils$1;
    function clearCanvas(ctx, canvas2, size) {
      ctx.clearRect(0, 0, canvas2.width, canvas2.height);
      if (!canvas2.style) canvas2.style = {};
      canvas2.height = size;
      canvas2.width = size;
      canvas2.style.height = size + "px";
      canvas2.style.width = size + "px";
    }
    function getCanvasElement() {
      try {
        return document.createElement("canvas");
      } catch (e2) {
        throw new Error("You need to specify a canvas element");
      }
    }
    exports2.render = function render(qrData, canvas2, options) {
      var opts = options;
      var canvasEl = canvas2;
      if (typeof opts === "undefined" && (!canvas2 || !canvas2.getContext)) {
        opts = canvas2;
        canvas2 = void 0;
      }
      if (!canvas2) {
        canvasEl = getCanvasElement();
      }
      opts = Utils2.getOptions(opts);
      var size = Utils2.getImageWidth(qrData.modules.size, opts);
      var ctx = canvasEl.getContext("2d");
      var image = ctx.createImageData(size, size);
      Utils2.qrToImageData(image.data, qrData, opts);
      clearCanvas(ctx, canvasEl, size);
      ctx.putImageData(image, 0, 0);
      return canvasEl;
    };
    exports2.renderToDataURL = function renderToDataURL(qrData, canvas2, options) {
      var opts = options;
      if (typeof opts === "undefined" && (!canvas2 || !canvas2.getContext)) {
        opts = canvas2;
        canvas2 = void 0;
      }
      if (!opts) opts = {};
      var canvasEl = exports2.render(qrData, canvas2, opts);
      var type2 = opts.type || "image/png";
      var rendererOpts = opts.rendererOpts || {};
      return canvasEl.toDataURL(type2, rendererOpts.quality);
    };
  })(canvas);
  var svgTag = {};
  var Utils = utils$1;
  function getColorAttrib(color, attrib) {
    var alpha = color.a / 255;
    var str = attrib + '="' + color.hex + '"';
    return alpha < 1 ? str + " " + attrib + '-opacity="' + alpha.toFixed(2).slice(1) + '"' : str;
  }
  function svgCmd(cmd, x2, y2) {
    var str = cmd + x2;
    if (typeof y2 !== "undefined") str += " " + y2;
    return str;
  }
  function qrToPath(data, size, margin) {
    var path = "";
    var moveBy = 0;
    var newRow = false;
    var lineLength = 0;
    for (var i2 = 0; i2 < data.length; i2++) {
      var col = Math.floor(i2 % size);
      var row = Math.floor(i2 / size);
      if (!col && !newRow) newRow = true;
      if (data[i2]) {
        lineLength++;
        if (!(i2 > 0 && col > 0 && data[i2 - 1])) {
          path += newRow ? svgCmd("M", col + margin, 0.5 + row + margin) : svgCmd("m", moveBy, 0);
          moveBy = 0;
          newRow = false;
        }
        if (!(col + 1 < size && data[i2 + 1])) {
          path += svgCmd("h", lineLength);
          lineLength = 0;
        }
      } else {
        moveBy++;
      }
    }
    return path;
  }
  svgTag.render = function render(qrData, options, cb) {
    var opts = Utils.getOptions(options);
    var size = qrData.modules.size;
    var data = qrData.modules.data;
    var qrcodesize = size + opts.margin * 2;
    var bg = !opts.color.light.a ? "" : "<path " + getColorAttrib(opts.color.light, "fill") + ' d="M0 0h' + qrcodesize + "v" + qrcodesize + 'H0z"/>';
    var path = "<path " + getColorAttrib(opts.color.dark, "stroke") + ' d="' + qrToPath(data, size, opts.margin) + '"/>';
    var viewBox = 'viewBox="0 0 ' + qrcodesize + " " + qrcodesize + '"';
    var width = !opts.width ? "" : 'width="' + opts.width + '" height="' + opts.width + '" ';
    var svgTag2 = '<svg xmlns="http://www.w3.org/2000/svg" ' + width + viewBox + ' shape-rendering="crispEdges">' + bg + path + "</svg>\n";
    if (typeof cb === "function") {
      cb(null, svgTag2);
    }
    return svgTag2;
  };
  var canPromise = canPromise$1;
  var QRCode = qrcode;
  var CanvasRenderer = canvas;
  var SvgRenderer = svgTag;
  function renderCanvas(renderFunc, canvas2, text, opts, cb) {
    var args = [].slice.call(arguments, 1);
    var argsNum = args.length;
    var isLastArgCb = typeof args[argsNum - 1] === "function";
    if (!isLastArgCb && !canPromise()) {
      throw new Error("Callback required as last argument");
    }
    if (isLastArgCb) {
      if (argsNum < 2) {
        throw new Error("Too few arguments provided");
      }
      if (argsNum === 2) {
        cb = text;
        text = canvas2;
        canvas2 = opts = void 0;
      } else if (argsNum === 3) {
        if (canvas2.getContext && typeof cb === "undefined") {
          cb = opts;
          opts = void 0;
        } else {
          cb = opts;
          opts = text;
          text = canvas2;
          canvas2 = void 0;
        }
      }
    } else {
      if (argsNum < 1) {
        throw new Error("Too few arguments provided");
      }
      if (argsNum === 1) {
        text = canvas2;
        canvas2 = opts = void 0;
      } else if (argsNum === 2 && !canvas2.getContext) {
        opts = text;
        text = canvas2;
        canvas2 = void 0;
      }
      return new Promise(function (resolve, reject) {
        try {
          var _data2 = QRCode.create(text, opts);
          resolve(renderFunc(_data2, canvas2, opts));
        } catch (e2) {
          reject(e2);
        }
      });
    }
    try {
      var _data3 = QRCode.create(text, opts);
      cb(null, renderFunc(_data3, canvas2, opts));
    } catch (e2) {
      cb(e2);
    }
  }
  browser.create = QRCode.create;
  browser.toCanvas = renderCanvas.bind(null, CanvasRenderer.render);
  browser.toDataURL = renderCanvas.bind(null, CanvasRenderer.renderToDataURL);
  browser.toString = renderCanvas.bind(null, function (data, _2, opts) {
    return SvgRenderer.render(data, opts);
  });
  var sharePc = "";
  var __assign$2 = globalThis && globalThis.__assign || function () {
    __assign$2 = Object.assign || function (t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return __assign$2.apply(this, arguments);
  };
  function openShareWindow(base, param, fn2) {
    var url2 = base + qs.stringify(param);
    window.open(url2, "", "width=760, height=640, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no");
    return typeof fn2 == "function" ? fn2() : false;
  }
  function popTips(str, $dom, $root) {
    var $father = $root.getElementsByClassName("bili-share-pc")[0];
    var div = document.createElement("div");
    div.className = "popTips";
    div.innerHTML = str;
    div.style.left = $dom.offsetLeft - 32 + "px";
    $father.appendChild(div);
    setTimeout(function () {
      var _a3;
      (_a3 = div.parentNode) === null || _a3 === void 0 ? void 0 : _a3.removeChild(div);
    }, 1500);
  }
  function setChannelKey(url2, type2, noBbid) {
    if (noBbid === void 0) {
      noBbid = false;
    }
    var hashSplit = url2.split("#");
    var hash = hashSplit[1] ? "#".concat(hashSplit[1]) : "";
    var searchSplit = (hashSplit[0] || "").split("?");
    var query2 = searchSplit[1] || "";
    var extraInfo = noBbid ? {} : {
      bbid: cookie.getCookie("buvid3") || "",
      ts: (/* @__PURE__ */new Date()).getTime()
    };
    var shareQuery = __assign$2(__assign$2(__assign$2({}, qs.parse(query2) || {}), {
      share_source: type2,
      share_medium: "web"
    }), extraInfo);
    var paramStr = generateQueryString(shareQuery);
    return "".concat(searchSplit[0], "?").concat(paramStr).concat(hash);
  }
  function protoShare(share) {
    share.link = protocolReg(share.link);
    share.pics = protocolReg(share.pics);
    return share;
  }
  function generateQueryString(obj) {
    return Object.keys(obj).map(function (key) {
      return "".concat(key, "=").concat(encodeURIComponent(obj[key] || ""));
    }).join("&");
  }
  function protocolReg(url2) {
    if (url2 === void 0) {
      url2 = "";
    }
    if (url2.indexOf("https") == -1) {
      url2 = url2.replace(/(\w+:)?\/\//, "https://");
    }
    return url2;
  }
  function getSpmid() {
    if (window.activity && window.activity.spmId) {
      return window.activity.spmId;
    }
    var metas = document.getElementsByTagName("meta");
    for (var i2 = 0; i2 < metas.length; i2++) {
      if (metas[i2].getAttribute("name") === "spm_prefix") {
        return metas[i2].getAttribute("content");
      }
    }
    return "888.1";
  }
  var isBiliHttps = location.href.indexOf("bilihttps") === 0;
  var isLoad = false;
  var loadQueue = [];
  function loadReportScript(_cb) {
    loadQueue.push(_cb);
    if (isLoad) {
      return;
    }
    window.reportMsgObj = {};
    window.reportConfig = {
      sample: 1,
      scrollTracker: false,
      msgObjects: "reportMsgObj",
      errorTracker: true
    };
    var reportScript = document.createElement("script");
    reportScript.src = "".concat(isBiliHttps ? "bilihttps:" : "", "//s1.hdslb.com/bfs/seed/log/report/log-reporter.js");
    isLoad = true;
    reportScript.onload = function () {
      isLoad = true;
      loadQueue.forEach(function (cb) {
        return cb && cb();
      });
      loadQueue = [];
    };
    reportScript.onerror = function () {
      isLoad = false;
    };
    document.getElementsByTagName("body")[0].appendChild(reportScript);
  }
  function parseParamToObj(obj) {
    if (!obj) return {};
    var str = obj.search;
    if (!str) {
      str = obj.hash;
    }
    var index2 = str.indexOf("?");
    str = str.substring(index2 + 1);
    var result2 = {};
    var paramArray = str.split("&");
    for (var i2 = 0, len = paramArray.length; i2 < len; i2++) {
      var pair = paramArray[i2].split("=");
      result2[pair[0]] = pair[1];
    }
    return result2;
  }
  var ua = window.navigator.userAgent;
  var buvidMatch = ua.match(/Buvid\/([a-zA-Z0-9]+)/);
  var appBuvid = buvidMatch && buvidMatch.length > 0 ? buvidMatch[1] : "";
  var searchObj = parseParamToObj(window.location);
  var spmid = getSpmid();
  function logger(type2, modulePath, msg) {
    var msgData = msg || {};
    if (Object.prototype.toString.call(msgData) !== "[object Object]") {
      msgData = {};
    }
    try {
      setTimeout(function () {
        var data = {
          spm_id: spmid + "." + modulePath + "." + type2,
          msg: JSON.stringify(_assign$2({
            appBuvid: appBuvid,
            form: searchObj.msource || searchObj.from_spmid || searchObj.spm_id_from || searchObj.topic_from || searchObj.from
          }, msgData))
        };
        if (!window.reportObserver || !window.reportObserver.reportCustomData) {
          loadReportScript(function () {
            return window.reportObserver.reportCustomData("click", data);
          });
        } else {
          window.reportObserver.reportCustomData("click", data);
        }
      }, 0);
    } catch (e2) {}
  }
  var lib = {
    exports: {}
  };
  (function (module2, exports2) {
    !function (e2, t2) {
      module2.exports = t2();
    }(commonjsGlobal, function () {
      return function (e2) {
        var t2 = {};
        function n2(o2) {
          if (t2[o2]) return t2[o2].exports;
          var i2 = t2[o2] = {
            i: o2,
            l: false,
            exports: {}
          };
          return e2[o2].call(i2.exports, i2, i2.exports, n2), i2.l = true, i2.exports;
        }
        return n2.m = e2, n2.c = t2, n2.d = function (e3, t3, o2) {
          n2.o(e3, t3) || Object.defineProperty(e3, t3, {
            enumerable: true,
            get: o2
          });
        }, n2.r = function (e3) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e3, Symbol.toStringTag, {
            value: "Module"
          }), Object.defineProperty(e3, "__esModule", {
            value: true
          });
        }, n2.t = function (e3, t3) {
          if (1 & t3 && (e3 = n2(e3)), 8 & t3) return e3;
          if (4 & t3 && "object" == _typeof4(e3) && e3 && e3.__esModule) return e3;
          var o2 = /* @__PURE__ */Object.create(null);
          if (n2.r(o2), Object.defineProperty(o2, "default", {
            enumerable: true,
            value: e3
          }), 2 & t3 && "string" != typeof e3) for (var i2 in e3) n2.d(o2, i2, function (t4) {
            return e3[t4];
          }.bind(null, i2));
          return o2;
        }, n2.n = function (e3) {
          var t3 = e3 && e3.__esModule ? function () {
            return e3["default"];
          } : function () {
            return e3;
          };
          return n2.d(t3, "a", t3), t3;
        }, n2.o = function (e3, t3) {
          return Object.prototype.hasOwnProperty.call(e3, t3);
        }, n2.p = "", n2(n2.s = 6);
      }([function (e2, t2) {
        function n2(e3, t3) {
          for (var n3 = 0; n3 < t3.length; n3++) {
            var o2 = t3[n3];
            o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(e3, o2.key, o2);
          }
        }
        e2.exports = function (e3, t3, o2) {
          return t3 && n2(e3.prototype, t3), o2 && n2(e3, o2), e3;
        };
      }, function (e2, t2, n2) {
        t2.decode = t2.parse = n2(4), t2.encode = t2.stringify = n2(5);
      }, function (e2, t2) {
        e2.exports = function (e3, t3) {
          if (!(e3 instanceof t3)) throw new TypeError("Cannot call a class as a function");
        };
      }, function (e2, t2) {
        function n2(t3) {
          return "function" == typeof Symbol && "symbol" == _typeof4(Symbol.iterator) ? e2.exports = n2 = function n2(e3) {
            return _typeof4(e3);
          } : e2.exports = n2 = function n2(e3) {
            return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : _typeof4(e3);
          }, n2(t3);
        }
        e2.exports = n2;
      }, function (e2, t2, n2) {
        function o2(e3, t3) {
          return Object.prototype.hasOwnProperty.call(e3, t3);
        }
        e2.exports = function (e3, t3, n3, r2) {
          t3 = t3 || "&", n3 = n3 || "=";
          var c2 = {};
          if ("string" != typeof e3 || 0 === e3.length) return c2;
          var a2 = /\+/g;
          e3 = e3.split(t3);
          var s2 = 1e3;
          r2 && "number" == typeof r2.maxKeys && (s2 = r2.maxKeys);
          var u2 = e3.length;
          s2 > 0 && u2 > s2 && (u2 = s2);
          for (var l2 = 0; l2 < u2; ++l2) {
            var f2,
              d2,
              p2,
              h2,
              g2 = e3[l2].replace(a2, "%20"),
              v2 = g2.indexOf(n3);
            v2 >= 0 ? (f2 = g2.substr(0, v2), d2 = g2.substr(v2 + 1)) : (f2 = g2, d2 = ""), p2 = decodeURIComponent(f2), h2 = decodeURIComponent(d2), o2(c2, p2) ? i2(c2[p2]) ? c2[p2].push(h2) : c2[p2] = [c2[p2], h2] : c2[p2] = h2;
          }
          return c2;
        };
        var i2 = Array.isArray || function (e3) {
          return "[object Array]" === Object.prototype.toString.call(e3);
        };
      }, function (e2, t2, n2) {
        var o2 = function o2(e3) {
          switch (_typeof4(e3)) {
            case "string":
              return e3;
            case "boolean":
              return e3 ? "true" : "false";
            case "number":
              return isFinite(e3) ? e3 : "";
            default:
              return "";
          }
        };
        e2.exports = function (e3, t3, n3, a2) {
          return t3 = t3 || "&", n3 = n3 || "=", null === e3 && (e3 = void 0), "object" == _typeof4(e3) ? r2(c2(e3), function (c3) {
            var a3 = encodeURIComponent(o2(c3)) + n3;
            return i2(e3[c3]) ? r2(e3[c3], function (e4) {
              return a3 + encodeURIComponent(o2(e4));
            }).join(t3) : a3 + encodeURIComponent(o2(e3[c3]));
          }).join(t3) : a2 ? encodeURIComponent(o2(a2)) + n3 + encodeURIComponent(o2(e3)) : "";
        };
        var i2 = Array.isArray || function (e3) {
          return "[object Array]" === Object.prototype.toString.call(e3);
        };
        function r2(e3, t3) {
          if (e3.map) return e3.map(t3);
          for (var n3 = [], o3 = 0; o3 < e3.length; o3++) n3.push(t3(e3[o3], o3));
          return n3;
        }
        var c2 = Object.keys || function (e3) {
          var t3 = [];
          for (var n3 in e3) Object.prototype.hasOwnProperty.call(e3, n3) && t3.push(n3);
          return t3;
        };
      }, function (e2, t2, n2) {
        n2.r(t2);
        var o2 = n2(2),
          i2 = n2.n(o2),
          r2 = n2(0),
          c2 = n2.n(r2),
          a2 = n2(3),
          s2 = n2.n(a2),
          u2 = n2(1),
          l2 = n2.n(u2),
          f2 = function f2(e3) {
            var t3 = e3.method,
              n3 = e3.url,
              o3 = e3.data,
              i3 = e3.headers,
              r3 = "POST" === (t3 = t3.toLocaleUpperCase()) ? l2.a.stringify(o3) : "",
              c3 = "GET" === t3 ? l2.a.stringify(o3) : "",
              a3 = c3 ? -1 !== n3.indexOf("?") ? "".concat(n3, "&").concat(c3) : "".concat(n3, "?").concat(c3) : n3;
            return new Promise(function (e4, n4) {
              var o4 = new XMLHttpRequest();
              if (o4.onreadystatechange = function () {
                if (o4.readyState === XMLHttpRequest.DONE) if (200 === o4.status) {
                  var t4 = null;
                  try {
                    t4 = JSON.parse(o4.responseText);
                  } catch (e5) {
                    t4 = o4.responseText;
                  }
                  e4(t4);
                } else n4(o4.status);
              }, o4.onerror = function (e5) {
                n4(e5);
              }, o4.withCredentials = true, o4.open(t3, a3, true), "POST" === t3 && i3 && "object" === s2()(i3)) for (var c4 in i3) o4.setRequestHeader(c4, i3[c4]);
              o4.send(r3);
            });
          },
          d2 = function d2(e3) {
            return new Promise(function (t3) {
              var n3 = document.createElement("script");
              n3.type = "text/javascript", n3.readyState ? n3.onreadystatechange = function () {
                "loaded" !== n3.readyState && "complete" !== n3.readyState || (n3.onreadystatechange = null, t3());
              } : n3.onload = function () {
                t3();
              }, n3.src = e3, document.body.appendChild(n3);
            });
          },
          p2 = function p2(e3) {
            if ("undefined" != typeof document) {
              for (var t3 = document.cookie ? document.cookie.split("; ") : [], n3 = "", o3 = 0; o3 < t3.length; o3++) {
                var i3 = t3[o3].split("=");
                i3[0] === e3 && (n3 = i3[1]);
              }
              return decodeURIComponent(n3);
            }
          },
          h2 = function h2(e3) {
            return e3 && "function" == typeof e3;
          },
          g2 = function g2() {
            return "undefined" == typeof window;
          },
          v2 = g2() || "www.biligame.com" !== location.host ? "//api.bilibili.com/x/web-interface/nav" : "//main-api.biligame.com/x/web-interface/nav",
          y2 = "//s1.hdslb.com/bfs/seed/jinkela/short/mini-login-v2/miniLogin.umd.min.js",
          m2 = function () {
            function e3() {
              i2()(this, e3), this.callbacks = window.__BiliUserWatch__ || [], this.once = [], this.locked = false, this.cache = null, this.isLogin = false, this.MiniLogin = null, this._onStorage(), this.callbacks.length > 0 && this._getNav();
            }
            return c2()(e3, null, [{
              key: "init",
              value: function value() {
                return e3.instace || (e3.instace = new e3()), e3.instace;
              }
            }]), c2()(e3, [{
              key: "_notice",
              value: function value(e4) {
                for (var t3 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n3 = 0, o3 = this.callbacks.length; n3 < o3; n3++) try {
                  var i3 = this.callbacks[n3];
                  i3.state = i3.state || 0, (0 === i3.state || t3) && (i3(e4), i3.state++);
                } catch (e5) {
                  console.error("[bili-user] callback error:", e5);
                }
                for (var r3 = 0, c3 = this.once.length; r3 < c3; r3++) try {
                  this.once[r3](e4);
                } catch (e5) {
                  console.error("[bili-user] get error:", e5);
                }
                this.once = [];
              }
            }, {
              key: "_setLocalWbi",
              value: function value(e4) {
                e4 && e4.wbi_img && (window.localStorage.setItem("wbi_img_url", e4.wbi_img.img_url), window.localStorage.setItem("wbi_sub_url", e4.wbi_img.sub_url));
              }
            }, {
              key: "_clean",
              value: function value() {
                this.locked = false, this.isLogin = false, this.cache = null;
              }
            }, {
              key: "_setBiliLoginState",
              value: function value() {
                var e4 = Number(window.localStorage.getItem("bili-login-state") || 1);
                window.localStorage.setItem("bili-login-state", ++e4);
              }
            }, {
              key: "_onStorage",
              value: function value() {
                var e4 = this;
                window.addEventListener("storage", function (t3) {
                  "bili-login-state" === t3.key && e4.refresh();
                });
              }
            }, {
              key: "_getNav",
              value: function value() {
                var e4 = this;
                this.cache ? this._notice(this.cache) : this.locked || (this.locked = true, f2({
                  method: "GET",
                  url: v2
                }).then(function (t3) {
                  e4.cache = t3, e4.isLogin = t3.data && t3.data.isLogin, e4._notice(t3, true), e4._setLocalWbi(t3.data);
                })["catch"](function (t3) {
                  console.error("[bili-user] request userinfo error:", t3), e4._notice({
                    code: 500,
                    message: "接口异常"
                  }, true);
                }));
              }
            }, {
              key: "_addOnce",
              value: function value(e4) {
                this.once.push(e4), this._getNav();
              }
            }, {
              key: "_addCallbacks",
              value: function value(e4) {
                var t3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                this.callbacks.push(e4), t3 && this._getNav();
              }
            }, {
              key: "get",
              value: function value(t3) {
                if (!h2(t3)) return new Promise(function (t4) {
                  e3.instace._addOnce(function (e4) {
                    t4(e4);
                  });
                });
                this._addOnce(t3);
              }
            }, {
              key: "watch",
              value: function value(e4) {
                var t3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                h2(e4) && this._addCallbacks(e4, t3);
              }
            }, {
              key: "unWatch",
              value: function value(e4) {
                if (h2(e4)) {
                  var t3 = this.callbacks.indexOf(e4);
                  -1 !== t3 && this.callbacks.splice(t3, 1);
                }
              }
            }, {
              key: "refresh",
              value: function value() {
                this._clean(), this._getNav();
              }
            }, {
              key: "quickLogin",
              value: function value(e4) {
                var t3 = this,
                  n3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                this.MiniLogin ? this._Login(e4, n3) : d2(y2).then(function () {
                  t3.MiniLogin = new window.MiniLogin(n3), t3._Login(e4);
                });
              }
            }, {
              key: "close",
              value: function value() {
                try {
                  this.MiniLogin && this.MiniLogin.closeComponent && this.MiniLogin.closeComponent();
                } catch (e4) {
                  console.error("[bili-user] closeComponent error:", e4);
                }
              }
            }, {
              key: "_Login",
              value: function value(e4, t3) {
                var n3 = this;
                this.MiniLogin.showComponent({
                  spm_id_from: t3 && t3.spm_id_from || ""
                }), this.MiniLogin.addEventListener("success", function () {
                  n3.refresh(), n3._setBiliLoginState(), e4 && e4({
                    code: 0,
                    message: "success"
                  }), n3.MiniLogin.removeEventListener("success"), n3.MiniLogin.removeEventListener("cancel");
                }), this.MiniLogin.addEventListener("cancel", function () {
                  e4 && e4({
                    code: -1,
                    message: "cancel"
                  }), n3.MiniLogin.removeEventListener("success"), n3.MiniLogin.removeEventListener("cancel");
                }), this.MiniLogin.addEventListener("show", function () {
                  e4 && e4({
                    code: 0,
                    message: "show"
                  });
                });
              }
            }, {
              key: "logout",
              value: function value(e4, t3) {
                var n3 = this,
                  o3 = "function" == typeof e4 && e4,
                  i3 = {
                    biliCSRF: p2("bili_jct")
                  };
                t3 && (i3.gourl = t3), f2({
                  method: "POST",
                  url: "//passport.bilibili.com/login/exit/v2",
                  headers: {
                    "Content-type": "application/x-www-form-urlencoded"
                  },
                  data: i3
                }).then(function (e5) {
                  e5.status && (n3.refresh(), n3._setBiliLoginState(), o3 && o3({
                    code: 0,
                    message: "log out success",
                    data: e5.data
                  }), t3 && (window.location = e5.data.redirectUrl));
                })["catch"](function (e5) {
                  o3 && o3({
                    code: -1,
                    message: "XMLHttpRequest status:" + e5
                  });
                });
              }
            }]), e3;
          }(),
          b2 = {};
        g2() || (b2 = window.__BiliUser__ || m2.init(), window.__BiliUser__ = b2);
        t2["default"] = b2;
      }]);
    });
  })(lib);
  var libExports = lib.exports;
  var BiliUser = /* @__PURE__ */getDefaultExportFromCjs(libExports);
  var __assign$1 = globalThis && globalThis.__assign || function () {
    __assign$1 = Object.assign || function (t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return __assign$1.apply(this, arguments);
  };
  var dynamicInstance;
  var appkey = {
    weibo: "2841902482",
    qqweibo: "84435a83a11c484881aba8548c6e7340"
  };
  function share2biliDynamic(config, postURL) {
    if (postURL === void 0) {
      postURL = "https://t.bilibili.com/share/card/index";
    }
    var formattedConfig = protoShare(config);
    console.log(formattedConfig);
    function getBiliUrl() {
      var biliShare2 = {
        type: 2048,
        repost_code: 2e4,
        default_input: encodeURIComponent(formattedConfig.defaultInput || "")
      };
      var sketch = {
        title: formattedConfig.title,
        desc_text: formattedConfig.desc,
        biz_type: formattedConfig.biz_type,
        cover_url: formattedConfig.pics,
        target_url: setChannelKey(formattedConfig.link, "biliDynamic"),
        "new": 1
      };
      var str = "";
      for (var i2 in biliShare2) {
        str = str + "".concat(i2, "=").concat(biliShare2[i2], "&");
      }
      str = "".concat(str, "sketch=").concat(encodeURIComponent(JSON.stringify(sketch)));
      console.log(JSON.stringify(sketch));
      return "".concat(postURL, "?").concat(str, "&new=1&topic_id=").concat(formattedConfig.topic_id, "&topic_name=").concat(formattedConfig.topic_name, "&from_topic_source=dyn.web.activity");
    }
    var _handleIFrameMessage = function handleIFrameMessage(event2) {
      var _a3;
      if (event2.data === "dynamicShareClose") {
        window.removeEventListener("message", _handleIFrameMessage, false);
        var iframeWrapper = document.querySelector(".bili-iframe-wrap");
        if (iframeWrapper) {
          unlock();
          (_a3 = iframeWrapper.parentNode) === null || _a3 === void 0 ? void 0 : _a3.removeChild(iframeWrapper);
        }
      } else if (event2.data === "dynamic-share-succeed") {
        logger$1("dynamic-share-succeed");
        if (typeof formattedConfig.onDynamicShareSucceed === "function") {
          formattedConfig.onDynamicShareSucceed();
        }
      }
    };
    var url2 = getBiliUrl();
    var div = document.createElement("div");
    div.className = "bili-wrap bili-iframe-wrap";
    var iframeDiv = "<iframe src=".concat(url2, ' frameborder="0" id="bili-modal"></iframe>');
    div.innerHTML = iframeDiv;
    document.body.appendChild(div);
    lock();
    window.addEventListener("message", _handleIFrameMessage, false);
  }
  function share2biliDynamicTypeImage(config) {
    if (!dynamicInstance) {
      dynamicInstance = Component$1({
        image: protocolReg(config.image),
        descPre: config.descPre
      }, void 0, config.callback);
    }
    dynamicInstance.show({
      image: protocolReg(config.image),
      descPre: config.descPre
    }, config.callback);
  }
  function share2weibo(config) {
    var formattedConfig = protoShare(config);
    var obj = {
      url: setChannelKey(formattedConfig.link, "weibo"),
      type: "3",
      count: "1",
      appkey: appkey.weibo,
      title: formattedConfig.desc,
      pic: formattedConfig.pics,
      searchPic: "false",
      ralateUid: "",
      language: "zh_cn",
      rnd: (/* @__PURE__ */new Date()).valueOf()
    };
    openShareWindow("https://service.weibo.com/share/share.php?", obj);
  }
  function share2qq(config) {
    var formattedConfig = protoShare(config);
    var obj = {
      url: setChannelKey(formattedConfig.link, "qq", true),
      title: formattedConfig.title,
      pics: formattedConfig.pics,
      flash: "",
      site: "",
      style: "201",
      width: 32,
      height: 32
    };
    openShareWindow("https://connect.qq.com/widget/shareqq/index.html?", obj);
  }
  function share2qzone(config) {
    var formattedConfig = protoShare(config);
    var obj = {
      url: setChannelKey(formattedConfig.link, "qzone"),
      showcount: 1,
      desc: formattedConfig.desc,
      summary: formattedConfig.desc,
      title: formattedConfig.title,
      site: "哔哩哔哩",
      pics: formattedConfig.pics,
      style: "203",
      width: 98,
      height: 22
    };
    openShareWindow("https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?", obj);
  }
  function share2tieba(config) {
    var formattedConfig = protoShare(config);
    var obj = {
      title: formattedConfig.title,
      url: setChannelKey(formattedConfig.link, "tieba"),
      uid: 726865,
      to: "tieba",
      type: "text",
      relateUid: "",
      pic: formattedConfig.pics.replace("https", "http"),
      key: "",
      sign: "on",
      desc: "",
      comment: formattedConfig.desc
    };
    openShareWindow("https://tieba.baidu.com/f/commit/share/openShareApi?", obj);
  }
  function ShareInit(config, $el, callback) {
    var _this = this;
    var toShare = {
      title: document.title || "哔哩哔哩弹幕视频网",
      pics: "https://static.hdslb.com/mobile/img/app_logo.png",
      desc: "哔哩哔哩弹幕视频网 - ( ゜- ゜)つロ  乾杯~ ",
      link: window.location.href,
      shortTitle: document.title,
      searchPic: "false",
      defaultInput: "",
      favId: 0,
      biz_type: 3,
      onDynamicShareSucceed: function onDynamicShareSucceed() {}
    };
    this.config = __assign$1(__assign$1({
      sharePage: true
    }, toShare), protoShare(config));
    this.$el = $el;
    this.callback = callback;
    this.isFav = false;
    this.isLogin = false;
    this.getLoginURL = "https://api.bilibili.com/x/web-interface/nav";
    this.postDynmaicURL = "https://t.bilibili.com/share/card/index";
    this.userFavURL = "https://api.bilibili.com/x/v2/fav/topic/favoured?allow_origin=true&cross_domain=true&tpid=";
    this.favData = {
      allow_origin: true,
      cross_domain: true,
      tpid: ""
    };
    _default.on("SHARE_PC_MODIFY_DYNAMIC_URLS", function (u2) {
      var fav = u2.fav,
        nav = u2.nav,
        postDynmaic = u2.postDynmaic;
      if (nav) {
        _this.getLoginURL = nav;
      }
      if (fav) {
        _this.userFavURL = fav;
      }
      if (postDynmaic) {
        _this.postDynmaicURL = postDynmaic;
      }
    });
  }
  ShareInit.prototype = {
    constructor: ShareInit,
    init: function init() {
      this.witchVersion();
    },
    witchVersion: function witchVersion() {
      if (this.config.show) {
        this.createSingelDom();
      } else {
        this.createShareDom();
      }
    },
    getQRcode: function getQRcode() {
      var _this = this;
      var initQRCode = function initQRCode() {
        var qrCodeDom = _this.$el.getElementsByClassName("qr-code")[0];
        if (qrCodeDom) {
          var text = setChannelKey(_this.config.link, "weixin");
          browser.toDataURL(text, {
            width: 120,
            margin: 0,
            errorCorrectionLevel: "M"
          }).then(function (url2) {
            var img = document.createElement("img");
            img.src = url2;
            qrCodeDom.appendChild(img);
          })["catch"](function (err) {
            console.error(err);
          });
        }
      };
      initQRCode();
      this.shareReport();
    },
    shareReport: function shareReport() {
      var _this = this;
      var hoverScript = document.createElement("script");
      var dom = null;
      setTimeout(function () {
        dom = _this.$el.getElementsByClassName("icon_wechat")[0];
      }, 0);
      hoverScript.text = "\n    var c = ".concat(dom, ";\n    if (c) {\n      c.onmouseenter = function(e) {\n        window.reportMsgObj &&\n          window.reportObserver &&\n          ((window.reportMsgObj['share_' + c.dataset ? c.dataset.way : 'default'] = 1),\n          window.reportObserver.forceCommit());\n      }\n      \n      c.onmouseleave = function(e) {\n        return false;\n      }\n    }\n  ");
      this.$el.appendChild(hoverScript);
    },
    bindClick: function bindClick() {
      var _this = this;
      var share = this.$el.getElementsByClassName("shareIcon")[0];
      var typeMap2 = {
        "wechat": "weixin",
        "weichat": "weixin",
        "sina": "weibo",
        "bili": "biliDynamic",
        "bilidynamic": "biliDynamic",
        "biliim": "biliIm",
        "baidu_tieba": "tieba"
      };
      share.addEventListener("click", function (e2) {
        var _a3, _b2, _c2;
        var className = (e2 || event).target.attributes["data-way"];
        if (className) {
          logger$1("share_".concat(className.value));
          if (className === null || className === void 0 ? void 0 : className.value) {
            var type2 = "";
            if (typeMap2[(_a3 = className === null || className === void 0 ? void 0 : className.value) === null || _a3 === void 0 ? void 0 : _a3.toLowerCase()]) {
              type2 = typeMap2[(_b2 = className === null || className === void 0 ? void 0 : className.value) === null || _b2 === void 0 ? void 0 : _b2.toLowerCase()];
            } else {
              type2 = (_c2 = className === null || className === void 0 ? void 0 : className.value) === null || _c2 === void 0 ? void 0 : _c2.toLowerCase();
            }
            logger("share", "0.0", {
              type: type2
            });
          }
          _this.linkToShare(className.value);
          if (_this.config.sharePage) {
            _default.emit("CLICK_SHARE_PC", className.value);
          }
          if (typeof _this.callback === "function") {
            _this.callback(className.value);
          }
        }
      });
    },
    clickFavorite: function clickFavorite() {
      var _this = this;
      var $fav = this.$el.getElementsByClassName("icon-fav")[0];
      if (!this.isLogin) {
        popTips("请先登陆～", $fav, this.$el);
        return;
      } else {
        var url2 = this.isFav ? "https://api.bilibili.com/x/v2/fav/topic/del" : "https://api.bilibili.com/x/v2/fav/topic/add";
        request({
          method: "post",
          url: url2,
          data: {
            allow_origin: true,
            cross_domain: true,
            tpid: this.config.favId,
            csrf: cookie.getCookie("bili_jct")
          },
          headers: {
            "Content-Type": "application/x-www-form-urlencoded"
          }
        }).then(function () {
          popTips(_this.isFav ? "取消成功!" : "收藏成功!", $fav, _this.$el);
          _this.isFav = !_this.isFav;
          _this.favStateChange();
        })["catch"](function (error) {
          error.code == -101 ? popTips("请登录后收藏～", $fav, _this.$el) : popTips("系统错误，请稍后重试!", $fav, _this.$el);
        });
      }
    },
    favStateChange: function favStateChange() {
      var title = this.$el.getElementsByClassName("fav")[0];
      var icons = this.$el.getElementsByClassName("icon-fav")[0];
      var arr2 = icons.className.split(" ").slice(1);
      title.innerHTML = this.isFav ? "已收藏" : "收藏";
      arr2.unshift(this.isFav ? "icon-liked" : "icon-like");
      icons.setAttribute("class", arr2.toString().replace(/,/g, " "));
    },
    linkToShare: function linkToShare(type2) {
      switch (type2) {
        case "bili":
          this.openMiniLogin();
          break;
        case "weibo":
          share2weibo(this.config);
          break;
        case "qq":
          share2qq(this.config);
          break;
        case "qzone":
          share2qzone(this.config);
          break;
        case "baidu_tieba":
          share2tieba(this.config);
          break;
      }
    },
    openMiniLogin: function openMiniLogin() {
      var _this = this;
      BiliUser.get(function (res) {
        if (+res.code === 0 && res.data.isLogin) {
          _this.config.dynamic ? share2biliDynamicTypeImage(_this.config.dynamic) : share2biliDynamic(_this.config, _this.postDynmaicURL);
        } else {
          BiliUser.quickLogin();
        }
      });
    },
    createShareDom: function createShareDom() {
      var html = '<div class="bili-share-pc bili-clearfix">\n                  <div class="share bili-clearfix fl">\n                    <div class="title fl">分享</div>\n                    <ul class="fl shareIcon">\n                      <li class="icon icon_bili" data-way="bili"></li>\n                      <li class="icon icon_weibo" data-way="weibo"></li>\n                      <li class="icon icon_wechat" data-way="wechat">\n                        <div class="weixin-hover">\n                          <div class="qr-before"></div>\n                          <div class="share-weixin-qr">\n                            <h4>微信扫一扫分享</h4>\n                            <div class="qr-code"></div>\n                          </div>\n                        </div>\n                      </li>\n                      <li class="icon icon_qzone" data-way="qzone"></li>\n                      <li class="icon icon_qq" data-way="qq"></li>\n                      <li class="icon icon_baidu" data-way="baidu_tieba"></li>\n                    </ul>\n                  </div>\n                  <div class="bili-favoried-icon"></div>\n                </div>';
      this.$el.innerHTML = html;
      this.getQRcode();
      this.haveFavorite();
      this.bindClick();
    },
    haveFavorite: function haveFavorite() {
      var _this = this;
      if (this.config.favId == 0) {
        return "";
      } else {
        BiliUser.get(function (res) {
          if (+res.code === 0 && res.data.isLogin) {
            _this.isLogin = true;
            _this.getFavStatus();
          } else {
            _this.isFav = false;
            _this.favDom();
          }
        });
      }
    },
    getFavStatus: function getFavStatus() {
      var _this = this;
      request({
        method: "get",
        url: this.userFavURL + this.config.favId
      }).then(function (res) {
        if (res.code == 0) {
          _this.isFav = res.data.favoured || false;
          _this.favDom();
        }
      })["catch"](function () {
        _this.isFav = false;
        _this.favDom();
      });
    },
    favDom: function favDom() {
      var _this = this;
      var favorite = '\n    <div class="bili-clearfix">\n      <span class="vertical-line fl"></span>\n      <div class="favourite bili-clearfix">\n        <div class="title fl fav">'.concat(this.isFav ? "已收藏" : "收藏", '</div>\n        <div class="').concat(this.isFav ? "icon-liked" : "icon-like", ' icon-fav fl"></div>\n      </div>\n    </div>\n    ');
      this.$el.querySelector(".bili-favoried-icon").innerHTML = favorite;
      var like = this.$el.getElementsByClassName("icon-fav")[0];
      like.addEventListener("click", function () {
        _this.clickFavorite();
      });
    },
    createSingelDom: function createSingelDom() {
      var html = '<div id="biliSharePc"><ul class="fl share shareIcon">'.concat(this.itemDom(), "</ul></div>");
      this.$el.innerHTML = html;
      this.getQRcode();
      this.bindClick();
    },
    itemDom: function itemDom() {
      var html = "";
      var wechatHTML = '\n    <li class="icon icon_wechat" data-way="wechat">\n      <div class="weixin-hover icon-hover">\n        <div class="share-weixin-qr">\n          <h4>微信扫一扫分享</h4>\n          <div class="qr-code"></div>\n        </div>\n      </div>\n    </li>';
      this.config.show.map(function (item) {
        return html = html + (item == "wechat" ? wechatHTML : '<li class="icon icon_'.concat(item, '" data-way="').concat(item, '"></li>'));
      });
      return html;
    }
  };
  var biliSharePC = {
    share: function share(config, $el, callback) {
      var shareInit = new ShareInit(config, $el, callback);
      shareInit.init();
      return shareInit;
    }
  };
  window && (window.biliSharePC = biliSharePC);
  function formatURL(url2) {
    if (url2 === void 0) {
      url2 = "";
    }
    if (url2.includes("https")) {
      url2 = url2.replace(/^(http:)?\/\//, "https://");
    }
    return url2;
  }
  function getVersion(rel) {
    var matchVersion = window.navigator.appVersion.match(rel);
    return matchVersion ? matchVersion[1] : 0;
  }
  var UA = window.navigator.userAgent;
  var isWechat = /MicroMessenger/i.test(UA);
  var isQQ = /QQ\/([\d.]+)/.test(UA);
  var isIos = /\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(UA);
  var isIphone = /(iPhone\sOS)\s([\d_]+)/i.test(UA);
  var isAndroid = /(Android);?[\s/]+([\d.]+)?/i.test(UA);
  var isUCBrowser = /ucweb|UCBrowser/i.test(UA);
  var isQQMBrowser = /MQQBrowser/i.test(UA) && !isWechat && !isQQ;
  var ucVersion = isUCBrowser ? getVersion(/UCBrowser\/(\d+\.\d*)/i) : 0;
  var isUC = isUCBrowser && (ucVersion > 10.2 && isIphone || ucVersion > 9.7 && isAndroid);
  var utils = {
    formatURL: formatURL,
    ua: {
      isWechat: isWechat,
      isQQ: isQQ,
      isUC: isUC,
      isIos: isIos,
      isUCBrowser: isUCBrowser,
      isQQMBrowser: isQQMBrowser,
      ucVersion: ucVersion,
      isIphone: isIphone,
      isAndroid: isAndroid,
      isIpod: /(iPod)(.*OS\s([\d_]+))?/i.test(UA),
      isIpad: /(iPad).*OS\s([\d_]+)/i.test(UA),
      isPad: /PAD|pad/i.test(UA),
      isQZone: /Qzone\//i.test(UA),
      isBaiduApp: /baiduboxapp/i.test(UA),
      isSafari: isIos && /Safari\//i.test(UA) && !isQQ && !isUCBrowser && !isQQMBrowser,
      qqVersion: isQQMBrowser ? getVersion(/MQQBrowser\/(\d+\.\d*)/i) : 0,
      isBiliApp: /BiliApp\/\d+/i.test(UA),
      biliVersion: UA.match(/BiliApp\/([^ ]*)/) ? UA.match(/BiliApp\/([^ ]*)/)[1] : 10
    }
  };
  var __assign = globalThis && globalThis.__assign || function () {
    __assign = Object.assign || function (t2) {
      for (var s2, i2 = 1, n2 = arguments.length; i2 < n2; i2++) {
        s2 = arguments[i2];
        for (var p2 in s2) if (Object.prototype.hasOwnProperty.call(s2, p2)) t2[p2] = s2[p2];
      }
      return t2;
    };
    return __assign.apply(this, arguments);
  };
  N$1();
  var targetKeyMap = {
    generic: "GENERIC",
    dynamic: "biliDynamic",
    weixin: "WEIXIN",
    weixin_monment: "WEIXIN_MONMENT",
    qq: "QQ",
    q_zone: "QZONE",
    sina: "SINA",
    copy: "COPY"
  };
  function getSupportChannels() {
    return new Promise(function (resolve, reject) {
      if (!f$2) {
        return reject({
          errCode: -1e3,
          errMsg: "not in biliApp"
        });
      }
      P$1("share.supportChannels").then(function (support) {
        if (support) {
          _$1.callNative({
            method: "share.supportChannels",
            callback: function callback(supportChannels) {
              resolve(supportChannels);
            }
          });
        } else {
          console.log("not support share.supportChannels");
          reject({
            errCode: -1001,
            errMsg: "not support share.supportChannels"
          });
        }
      });
    });
  }
  function share2target(targetChannel, data, _callback) {
    var _a3;
    if (!f$2) {
      return _callback({
        errCode: -1e3,
        errMsg: "not in biliApp"
      });
    }
    getSupportChannels().then(function (supportChannels) {
      var parsedTargetChannel = targetKeyMap[targetChannel];
      if (parsedTargetChannel !== "biliDynamic" && parsedTargetChannel !== "COPY") {
        if (!supportChannels.includes(parsedTargetChannel)) {
          _callback({
            errCode: -1,
            errMsg: "不支持该渠道"
          });
        }
      }
    });
    var formatDynamicData = function formatDynamicData(dynamicData) {
      var type2 = dynamicData.type,
        title = dynamicData.title,
        text = dynamicData.text,
        description = dynamicData.description,
        edit_content = dynamicData.edit_content,
        biz_type = dynamicData.biz_type,
        share_from_topic_name = dynamicData.share_from_topic_name,
        share_from_topic_id = dynamicData.share_from_topic_id;
      var imageUrl = utils.formatURL(dynamicData.imageUrl);
      var url2 = utils.formatURL(dynamicData.url);
      var pictureList = dynamicData.pictureList && dynamicData.pictureList.map(function (item) {
        return __assign(__assign({}, item), {
          img_src: utils.formatURL(item.img_src)
        });
      });
      var res = {
        title: title,
        content_id: 1,
        content_type: utils.ua.isIos ? 2048 : 12,
        cover_url: imageUrl,
        description: description || edit_content,
        author_id: 123,
        author_name: "",
        images: ["", "", ""],
        images_online: JSON.stringify({
          pictureList: pictureList
        }),
        publish: type2 === "image",
        edit_content: edit_content,
        repost_code: 123,
        sketch: {
          title: title,
          desc_text: text,
          biz_type: biz_type || 3,
          cover_url: imageUrl,
          target_url: url2
        },
        share_from_topic_name: share_from_topic_name,
        share_from_topic_id: share_from_topic_id
      };
      return res;
    };
    var formatData = function formatData(_data) {
      var urlKey = ["url", "imageUrl"];
      var formatedData = __assign({}, _data);
      Object.keys(formatedData).forEach(function (key) {
        if (key in urlKey) {
          formatedData[key] = utils.formatURL(formatedData[key]);
        }
      });
      return formatedData;
    };
    var jsbData = (_a3 = {
      target: targetKeyMap[targetChannel]
    }, _a3[targetChannel] = targetChannel === "dynamic" ? formatDynamicData(data) : formatData(data), _a3);
    var jsbOptions = {
      method: "share.shareToTarget",
      callback: function callback(info) {
        _callback({
          isCallupChannel: info === "ok" ? 1 : 0
        });
      },
      onShare: _callback,
      data: jsbData
    };
    console.log("call jsb with options: ", jsbOptions);
    P$1("share.shareToTarget").then(function (support) {
      if (support) {
        _$1.callNative(jsbOptions);
      } else {
        _callback({
          errCode: -2,
          errMsg: "不支持shareToTarget方法"
        });
        console.log("not support share.shareToTarget");
      }
    });
  }
  function sharePage() {
    var type2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "h5";
    var dynamic2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var config = arguments.length > 2 ? arguments[2] : undefined;
    if (type2 === "pc") {
      return share2biliDynamic({
        title: config.title,
        desc: config.desc,
        link: location.href,
        pics: config.pics,
        defaultInput: config.content,
        // 动态预设文案
        topic_id: +config.topicID,
        topic_name: config.topicName,
        // 卡片形式分享到动态的成功回调
        onDynamicShareSucceed: function onDynamicShareSucceed() {
          console.log("PC动态分享成功回调执行");
        }
      });
    }
    if (!dynamic2) {
      return biliShare.showWindow({
        title: config.title,
        desc: config.desc,
        link: location.href,
        pics: config.pics,
        edit_content: config.content,
        // 动态预设文案
        share_from_topic_id: +config.topicID,
        share_from_topic_name: config.topicName,
        success: function success(info) {
          console.log("H5分享成功回调执行", info);
        },
        cancel: function cancel(info) {
          console.log("H5分享失败回调执行", info);
        }
      });
    }
    if (!f$2) return openBiliApp(config.title);
    console.log(config, "sharePage");
    return share2target("dynamic", {
      type: "web",
      title: config.title,
      text: config.desc,
      url: location.href,
      imageUrl: "".concat(config.pics),
      description: config.content,
      // 动态预设文案
      edit_content: config.content,
      share_from_topic_id: +config.topicID,
      share_from_topic_name: config.topicName
    }, function (res) {
      console.log(res);
    });
  }
  function shareWatchWord(_x85, _x86) {
    return _shareWatchWord.apply(this, arguments);
  }
  function _shareWatchWord() {
    _shareWatchWord = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee78(info, data) {
      var url2, str;
      return _regeneratorRuntime().wrap(function _callee78$(_context79) {
        while (1) switch (_context79.prev = _context79.next) {
          case 0:
            try {
              url2 = location.href.split("?")[0];
              str = "2 ".concat(data.watchword).concat(info.shareKeyword || "", "\u3010 ").concat(url2, " \u3011");
              if (copy$1(str)) {
                toast$1.info("复制口令成功");
              } else {
                toast$1.info("复制口令失败");
              }
            } catch (_unused17) {
              toast$1.info("复制口令失败");
            }
          case 1:
          case "end":
            return _context79.stop();
        }
      }, _callee78);
    }));
    return _shareWatchWord.apply(this, arguments);
  }
  function finish(type2, sid, counter, config) {
    var status = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
    var template = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : "click";
    switch (template) {
      case "shareDynamic":
        sharePage(type2, true, config);
        break;
      case "sharePage":
        sharePage(type2, false, config);
        break;
      default:
        console.log("平台暂不支持的自定义行为类型，请找组件对应开发");
    }
    if (!status) return finishTask(sid, counter);
  }
  function justFinish(sid, counter) {
    var status = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    if (!status) return finishTask(sid, counter);
  }
  function biliAppFant() {
    return window.navigator.userAgent.toLowerCase().includes("mobi_app/android_i");
  }
  N$1();
  function isAppSupport(schemeName) {
    return new Promise(function (resolve, reject) {
      P$1(schemeName).then(function (support) {
        if (support) {
          resolve();
        } else {
          reject();
        }
      });
    });
  }
  function callNative(methodName, data) {
    return new Promise(function (resolve, reject) {
      isAppSupport(methodName).then(function () {
        _$1.callNative({
          method: methodName,
          data: data,
          callback: function callback(data2) {
            resolve(data2);
          }
        });
      }, reject);
    });
  }
  function isInstalled(pkgName, scheme) {
    if (f$2 && isAndroid$2) {
      return callNative("utils.isInstalled", {
        packageName: pkgName
      }).then(function (data) {
        return data == null ? void 0 : data.isInstalled;
      });
    } else if (f$2 && !isAndroid$2) {
      return callNative("ability.canOpenApplication", {
        url: scheme
      }).then(function (data) {
        if (data.code === 0) {
          return true;
        } else if (data.code === -3) {
          return false;
        }
        if (data.code === -2) {
          alert("该应用暂不支持调起或下载");
        }
        if (data.code === -1) {
          alert("当前环境不支持下载");
        }
        return Promise.reject();
      });
    }
    return Promise.reject();
  }
  function openAppSchema(scheme) {
    if (!f$2) {
      return Promise.reject();
    }
    return callNative(isAndroid$2 ? "ability.openScheme" : "ability.openApplication", {
      url: scheme
    }).then(function (data) {
      return data.code === 0 ? true : Promise.reject();
    });
  }
  function goAppStore(pkgName, appStoreUrl) {
    if (!f$2) {
      return Promise.reject();
    }
    if (isAndroid$2) {
      var isSamsang = /gt-|sm-|sch-/i.test(navigator.userAgent);
      var marketScheme = isSamsang ? "samsungapps://ProductDetail/".concat(pkgName) : "market://details?id=".concat(pkgName);
      return callNative("ability.openScheme", {
        url: marketScheme
      }).then(function (data) {
        return data.code === 0 ? true : Promise.reject();
      });
    } else {
      return callNative("biliapp.jumpToScheme", {
        url: appStoreUrl
      });
    }
  }
  function invokeOrDownload(url2, scheme_url, pkg_name, ios_appstore) {
    if (!isBiliApp$1) {
      location.href = scheme_url;
      setTimeout(function () {
        location.href = url2;
      }, 1e3);
      return;
    }
    isInstalled(pkg_name, scheme_url).then(function (isInstalled2) {
      if (isInstalled2) {
        openAppSchema(scheme_url)["catch"](function () {
          alert("您的App版本太低，无法打开APP，请升级最新版本");
        });
      } else {
        goAppStore(pkg_name, ios_appstore)["catch"](function () {
          alert("您的App版本太低，无法下载APP，请升级最新版本");
        });
      }
    }, function () {
      alert("您的App版本太低，无法判断安装APP，请升级最新版本");
    });
  }
  function openOtherScheme(url2, handler_FINISH_FINISH, taskIdStr) {
    _$1.callNative({
      method: "ability.canOpenApplication",
      data: {
        url: url2,
        ignoreQueriesSchemes: false
        // 6.7.0新增，仅iOS，忽略QueriesSchemes限制
      },
      callback: function callback(info) {
        if (info.code === 0) {
          logger$3("".concat(taskIdStr, ".success"));
          handler_FINISH_FINISH();
          _$1.callNative({
            method: "ability.openApplication",
            data: {
              url: url2,
              ignoreQueriesSchemes: false
              // 6.7.0新增，仅iOS，忽略QueriesSchemes限制
            }
          });
        } else {
          if (info.code !== -3) {
            handler_FINISH_FINISH();
          }
          var message = "跳转失败";
          if (info.code === -1) {
            message = "跳转失败";
            logger$3("".concat(taskIdStr, ".nonsupport"));
          } else if (info.code === -2) {
            message = "跳转失败";
            logger$3("".concat(taskIdStr, ".whitelisting"));
          } else if (info.code === -3) {
            message = "请先安装第三方APP";
            logger$3("".concat(taskIdStr, ".appnotfound"));
          }
          toast$1.info(message);
        }
      }
    });
  }
  function openScheme(scheme) {
    N$1();
    var httpage = /(http|https):\/\//.test(scheme);
    _$1.callNative({
      method: "ability.openScheme",
      data: {
        url: httpage ? "bilibili://forward?-Btarget=".concat(encodeURIComponent(scheme)) : scheme
      }
    });
  }
  function openUrl(type2, url2) {
    if (f$2) return openScheme(url2);
    if (type2 === "h5") return evoke4login();
    return window.open(url2, "_blank");
  }
  function openUniUrl(type2, url2) {
    var activityName2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
    if (!url2) return toast$1.error("跳转链接不存在");
    var bcut = /^bcut:\/\//.test(url2);
    if (bcut) {
      if (type2 === "pc") return window.open("https://bcut.drawyoo.com", "_blank");else return invokeOrDownload("http://member.bilibili.com/studio/annyroal/download_bcut?appScheme=bcut%3A%2F%2Fstudio%2Fauth%2F%3F&appName=com.bilibili.studio&appID=1299589486", url2, "com.bilibili.studio", "https://apps.apple.com/cn/app/%E5%BF%85%E5%89%AA/id1299589486");
    }
    var archive = /^bilibili:\/\/uper\/user_center\/add_archive/.test(url2);
    if (bcut && type2 === "pc") return window.open("https://bcut.drawyoo.com", "_blank");
    if (archive && type2 === "pc") return window.open("https://member.bilibili.com/platform/upload/video/frame", "_blank");
    if (archive && type2 === "h5") {
      if (biliAppFant()) return toast$1.info("请使用简体版APP投稿～");
      if (f$2) {
        _$1.callNative({
          method: "global.getContainerInfo",
          callback: function callback(info) {
            if (info.device === "pad") {
              if (info.mobi_app !== "iphone") {
                return toast$1.info("HD 版本暂时不支持投稿功能");
              }
              if (info.build <= 8290) {
                return toast$1.info("请更新最新版本！");
              }
              openScheme(url2);
            } else {
              if (isiOS && info.build < 6710) {
                return toast$1.info("请更新最新版本！");
              }
              if (isAndroid$2 && info.build < 5270) {
                return toast$1.info("请更新最新版本！");
              }
              openScheme(url2);
            }
          }
        });
      } else {
        openBiliApp(activityName2, url2);
        toast$1.info("请在客户端中打开页面");
      }
      return;
    }
    openUrl(type2, url2);
  }
  function reserveFinish(appId) {
    if (!appId) return;
    var appIdNumber = Number(appId);
    return finishReserve(appIdNumber).then(function (res) {
      toast$1.info("预约成功");
      _default.emit("REFRESH_RESERVE_STATUS");
      return res;
    });
  }
  var EventTypes = /* @__PURE__ */function (EventTypes2) {
    EventTypes2["REFRESH_TASK_STATUS"] = "REFRESH_TASK_STATUS";
    return EventTypes2;
  }(EventTypes || {});
  var ITypes = /* @__PURE__ */function (ITypes2) {
    ITypes2["FINISH"] = "FINISH";
    ITypes2["OPEN"] = "OPEN";
    ITypes2["SCROLL"] = "SCROLL";
    ITypes2["FINISH-FINISH"] = "FINISH-FINISH";
    ITypes2["OPEN-FINISH"] = "OPEN-FINISH";
    ITypes2["RESERVE"] = "RESERVE";
    return ITypes2;
  }(ITypes || {});
  var InteractType = {
    "FINISH": finish,
    "OPEN": openUniUrl,
    "SCROLL": go2position,
    "FINISH-FINISH": justFinish,
    "RESERVE": reserveFinish
  };
  var StepIcon = function StepIcon(props) {
    var status = props.status,
      _props$color = props.color,
      color = _props$color === void 0 ? "#E3E5E7" : _props$color,
      _props$br = props.br,
      br = _props$br === void 0 ? 4 : _props$br;
    return status === 2 ? /* @__PURE__ */jsxRuntime.jsxs("svg", {
      style: {
        cursor: "pointer",
        display: "inline-block"
      },
      width: "32",
      height: "18",
      viewBox: "0 0 32 18",
      fill: color,
      xmlns: "http://www.w3.org/2000/svg",
      children: [/* @__PURE__ */jsxRuntime.jsx("rect", {
        width: "32",
        height: "18",
        rx: br,
        fill: color
      }), /* @__PURE__ */jsxRuntime.jsx("path", {
        d: "M9.64 3.7V4.516H12.088C12.04 4.972 11.968 5.404 11.872 5.836H10.156V11.596H11.008V6.628H14.116V11.5H14.956V5.836H12.712C12.808 5.404 12.88 4.972 12.94 4.516H15.328V3.7H9.64ZM13.456 11.536L12.868 12.1C13.732 12.856 14.416 13.576 14.908 14.248L15.52 13.636C14.956 12.94 14.272 12.232 13.456 11.536ZM12.136 7.42V9.484C12.112 10.528 11.92 11.368 11.56 12.016C11.176 12.64 10.492 13.144 9.52 13.516L9.976 14.248C11.008 13.84 11.752 13.276 12.208 12.568C12.676 11.8 12.928 10.768 12.952 9.484V7.42H12.136ZM6.856 3.304C6.112 4.636 5.296 5.8 4.396 6.784L4.888 7.48C5.788 6.472 6.58 5.356 7.264 4.132C7.84 4.828 8.524 5.764 9.304 6.94L9.88 6.328C9.112 5.26 8.32 4.252 7.504 3.304H6.856ZM5.08 8.548V9.352H8.452C7.996 10.24 7.528 11.02 7.036 11.68C6.664 11.356 6.28 11.032 5.872 10.708L5.296 11.26C6.556 12.28 7.54 13.24 8.26 14.14L8.884 13.528C8.5 13.084 8.068 12.64 7.6 12.196C8.272 11.332 8.86 10.36 9.376 9.268V8.548H5.08ZM7.108 5.908L6.484 6.292C6.988 6.988 7.396 7.624 7.696 8.2L8.32 7.756C8.032 7.228 7.636 6.616 7.108 5.908ZM22.564 10.912C22.204 11.008 21.844 11.092 21.472 11.176V4.48H22.396V5.152H22.876C23.044 7.168 23.572 9.028 24.46 10.732C23.812 11.812 23.008 12.724 22.036 13.492L22.624 14.164C23.524 13.456 24.292 12.592 24.94 11.584C25.492 12.484 26.164 13.348 26.968 14.176L27.544 13.516C26.692 12.688 25.972 11.776 25.396 10.792C26.224 9.22 26.776 7.324 27.04 5.104V4.312H22.396V3.664H16.684V4.48H17.632V11.908C17.272 11.956 16.912 12.016 16.552 12.064L16.756 12.904C18.1 12.712 19.384 12.484 20.632 12.22V14.2H21.472V12.028C21.832 11.944 22.192 11.86 22.564 11.764V10.912ZM23.668 5.152H26.224C26.008 6.94 25.564 8.512 24.916 9.88C24.232 8.452 23.812 6.88 23.668 5.152ZM20.632 11.368C19.924 11.512 19.204 11.656 18.472 11.776V9.736H20.632V11.368ZM18.472 8.956V7.132H20.632V8.956H18.472ZM18.472 6.34V4.48H20.632V6.34H18.472Z",
        fill: "white"
      })]
    }) : /* @__PURE__ */jsxRuntime.jsxs("svg", {
      style: {
        display: "inline-block"
      },
      width: "14",
      height: "14",
      viewBox: "0 0 14 14",
      fill: "none",
      xmlns: "http://www.w3.org/2000/svg",
      children: [status === 1 && /* @__PURE__ */jsxRuntime.jsx("circle", {
        cx: "7",
        cy: "7",
        r: "7",
        fill: color
      }), status === 3 && /* @__PURE__ */jsxRuntime.jsx("circle", {
        cx: "7",
        cy: "7",
        r: "7",
        fill: color
      }), status === 3 && /* @__PURE__ */jsxRuntime.jsx("path", {
        d: "M3.5 7L6 9.5L10.5 5",
        stroke: "white",
        strokeWidth: "2",
        strokeLinecap: "round",
        strokeLinejoin: "round"
      })]
    });
  };
  var awardTypeMap = {
    3: "抽奖次数",
    5: "投票次数"
  };
  var awardTypeByNumList = [3, 5];
  var Step = function Step(props) {
    var _props$style = props.style,
      desTxtColor = _props$style.desTxtColor,
      themeColor = _props$style.themeColor,
      borderRadius = _props$style.borderRadius,
      processAwardColor = _props$style.processAwardColor,
      processActiveColor = _props$style.processActiveColor,
      processUnActiveColor = _props$style.processUnActiveColor,
      checkpoints = props.checkpoints,
      taskIcon = props.taskIcon;
    var getAward = function getAward(yes, zsid) {
      var isPreview = window.location.href.includes("preview");
      if (yes) openUrl("h5", "https://www.bilibili.com/blackboard".concat(isPreview ? "/preview" : "", "/new-award-exchange.html?task_id=").concat(zsid));
    };
    function getStopColor(status) {
      switch (status) {
        case 3:
          return processActiveColor;
        case 1:
          return "#E3E5E7";
        default:
          return themeColor;
      }
    }
    return checkpoints.length > 1 && /* @__PURE__ */jsxRuntime.jsxs("div", {
      className: "step-wrapper",
      children: [!!taskIcon && /* @__PURE__ */jsxRuntime.jsx("div", {
        className: "div-placement"
      }), /* @__PURE__ */jsxRuntime.jsx("div", {
        className: "task-step",
        style: {
          width: checkpoints.length === 2 ? "100%" : checkpoints.length * (taskIcon ? 101 : 121),
          marginLeft: 0
        },
        children: checkpoints.map(function (item, index2, arr2) {
          var _a3, _b2, _c2, _d2, _e3;
          return /* @__PURE__ */jsxRuntime.jsxs("div", {
            className: "task-step__item",
            style: {
              width: arr2.length > 3 && (index2 === 0 || index2 === arr2.length - 1) ? "1.22rem" : void 0
            },
            children: [/* @__PURE__ */jsxRuntime.jsxs("div", {
              className: "task-step__item__icon__wrapper",
              style: {
                width: taskIcon && index2 !== 0 && index2 !== arr2.length - 1 ? "2.16rem" : void 0
              },
              children: [/* @__PURE__ */jsxRuntime.jsx("div", {
                className: "task-step__item__barpre",
                style: {
                  backgroundColor: item.status !== 1 ? processActiveColor : processUnActiveColor
                }
              }), /* @__PURE__ */jsxRuntime.jsx("div", {
                className: "task-step__item__icon",
                onClick: function onClick() {
                  return getAward(item.status === 2, item.ztasksid);
                },
                children: /* @__PURE__ */jsxRuntime.jsx(StepIcon, {
                  status: item.status,
                  color: item.status !== 1 ? getStopColor(item.status) : processUnActiveColor,
                  br: borderRadius == null ? void 0 : borderRadius[0]
                })
              }), /* @__PURE__ */jsxRuntime.jsx("div", {
                className: "task-step__item__barsuf",
                style: {
                  backgroundColor: ((_a3 = arr2[index2 - 1]) == null ? void 0 : _a3.status) === void 0 && ((_b2 = arr2[index2 + 1]) == null ? void 0 : _b2.status) !== 1 || ((_c2 = arr2[index2 - 1]) == null ? void 0 : _c2.status) !== void 0 && ((_d2 = arr2[index2]) == null ? void 0 : _d2.status) !== 1 && ((_e3 = arr2[index2 + 1]) == null ? void 0 : _e3.status) !== 1 ? processActiveColor : processUnActiveColor
                }
              })]
            }), /* @__PURE__ */jsxRuntime.jsxs("div", {
              className: "task-step__item__info",
              children: [item.alias ? /* @__PURE__ */jsxRuntime.jsx("div", {
                className: "task-step__item__info__des",
                style: {
                  color: desTxtColor
                },
                children: item.alias
              }) : /* @__PURE__ */jsxRuntime.jsx("div", {
                className: "task-step__item__info__emptydes"
              }), /* @__PURE__ */jsxRuntime.jsx("div", {
                style: {
                  color: processAwardColor
                },
                className: "task-step__item__info__name",
                children: !awardTypeByNumList.includes(item.awardtype) ? "".concat(item.awardname).concat(item.awardtype === 2 ? "+" + item.count : "") : "".concat(awardTypeMap[item.awardtype], "+").concat(item.count)
              })]
            })]
          }, index2);
        })
      })]
    });
  };
  var index = "";
  var TaskH5 = function TaskH5(props) {
    var _a3, _b2, _c2, _d2, _e3, _f2, _g2, _h;
    var _props$no = props.no,
      no = _props$no === void 0 ? 0 : _props$no,
      _props$style2 = props.style,
      style = _props$style2 === void 0 ? {} : _props$style2,
      _props$task = props.task,
      taskType = _props$task.taskType,
      taskId = _props$task.taskId,
      taskStatus = _props$task.taskStatus,
      taskIcon = _props$task.taskIcon,
      taskName = _props$task.taskName,
      indicators = _props$task.indicators,
      taskDes = _props$task.taskDes,
      awardName = _props$task.awardName,
      taskAwardType = _props$task.taskAwardType,
      btnTxt = _props$task.btnTxt,
      btnBehavior = _props$task.btnBehavior,
      checkpoints = _props$task.checkpoints,
      jumpLink = _props$task.jumpLink,
      jumpPosition = _props$task.jumpPosition,
      counter = _props$task.counter,
      topicID = _props$task.topicID,
      topicName = _props$task.topicName,
      accumulativeCount = _props$task.accumulativeCount,
      statisticType = _props$task.statisticType,
      promptText = _props$task.promptText,
      reserveId = _props$task.reserveId,
      _props$task$showBtn = _props$task.showBtn,
      showBtn = _props$task$showBtn === void 0 ? true : _props$task$showBtn,
      btnBgImageGoto = _props$task.btnBgImageGoto,
      btnBgImageAlready = _props$task.btnBgImageAlready,
      btnBgImageToAward = _props$task.btnBgImageToAward,
      _props$isLocked = props.isLocked,
      isLocked = _props$isLocked === void 0 ? false : _props$isLocked;
    var single = indicators.length === 1;
    var multiple = checkpoints.length > 1;
    var limit2 = (_b2 = last$2((_a3 = last$2(checkpoints)) == null ? void 0 : _a3.list)) == null ? void 0 : _b2.limit;
    var _React$useState = React.useState(33.6),
      _React$useState2 = _slicedToArray(_React$useState, 2),
      justif = _React$useState2[0],
      setJustif = _React$useState2[1];
    var _React$useState3 = React.useState({}),
      _React$useState4 = _slicedToArray(_React$useState3, 2),
      watchoutRes = _React$useState4[0],
      setWatchwordRes = _React$useState4[1];
    React.useEffect(function () {
      var _a4;
      var des = document.getElementsByClassName("des");
      switch ((_a4 = des[no]) == null ? void 0 : _a4.clientHeight) {
        case 40:
          setJustif(33.6);
          break;
        case 20:
          setJustif(23.7);
          break;
        case 0:
          setJustif(13.79);
          break;
      }
    }, []);
    var goGetGift = function goGetGift() {
      var isPreview = window.location.href.includes("preview");
      if (taskType === 1 && statisticType !== 2) {
        return openUrl(h5Type, "https://www.bilibili.com/blackboard".concat(isPreview ? "/preview" : "", "/new-award-exchange.html?task_id=").concat(["demo1", "demo2"].includes(taskId) ? "6ERAmwloghvbo600" : taskId));
      } else if (checkpoints.length === 1) {
        return openUrl(h5Type, "https://www.bilibili.com/blackboard".concat(isPreview ? "/preview" : "", "/new-award-exchange.html?task_id=").concat(checkpoints[0].ztasksid));
      }
    };
    var handleAwardBtnClick = function handleAwardBtnClick() {
      if (taskAwardType !== 1) return;
      goGetGift();
    };
    var fetchWatchword = /*#__PURE__*/function () {
      var _ref69 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee70(info) {
        var res;
        return _regeneratorRuntime().wrap(function _callee70$(_context71) {
          while (1) switch (_context71.prev = _context71.next) {
            case 0:
              _context71.next = 2;
              return getWatchwordCombine({
                activity_uid: info.inviteActName
              });
            case 2:
              res = _context71.sent;
              setWatchwordRes(res);
            case 4:
            case "end":
              return _context71.stop();
          }
        }, _callee70);
      }));
      return function fetchWatchword(_x87) {
        return _ref69.apply(this, arguments);
      };
    }();
    React.useEffect(function () {
      if (props.task && props.task.inviteActName && props.task.btnBehavior && props.task.btnBehavior[1] === "shareWatchword") {
        fetchWatchword(props.task);
      }
    }, [props.task]);
    var handleTaskBtnClick = /*#__PURE__*/function () {
      var _ref70 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee71() {
        var handler_FINISH_FINISH, handler_OPEN, handler_RESERVE, url2, httpage, biliSchema;
        return _regeneratorRuntime().wrap(function _callee71$(_context72) {
          while (1) switch (_context72.prev = _context72.next) {
            case 0:
              handler_RESERVE = function _handler_RESERVE() {
                InteractType.RESERVE(reserveId);
                setTimeout(function () {
                  _default.emit(EventTypes.REFRESH_TASK_STATUS, false);
                }, 1e3);
              };
              handler_OPEN = function _handler_OPEN() {
                InteractType.OPEN(h5Type, jumpLink, taskName);
              };
              handler_FINISH_FINISH = function _handler_FINISH_FINIS() {
                InteractType["FINISH-FINISH"](taskId, counter, taskStatus !== 1);
                if ((indicators == null ? void 0 : indicators[0].cur_value) < (indicators == null ? void 0 : indicators[0].limit)) {
                  setTimeout(function () {
                    _default.emit(EventTypes.REFRESH_TASK_STATUS, false);
                  }, 1e3);
                }
              };
              if (!isLocked) {
                _context72.next = 5;
                break;
              }
              return _context72.abrupt("return");
            case 5:
              _context72.next = 7;
              return evoke4login();
            case 7:
              if (_context72.sent) {
                _context72.next = 9;
                break;
              }
              return _context72.abrupt("return");
            case 9:
              if (!(taskStatus === 3)) {
                _context72.next = 11;
                break;
              }
              return _context72.abrupt("return");
            case 11:
              if (!(taskStatus === 2)) {
                _context72.next = 13;
                break;
              }
              return _context72.abrupt("return", goGetGift());
            case 13:
              logger$3("".concat(taskName, ".click"));
              _context72.t0 = btnBehavior[0];
              _context72.next = _context72.t0 === ITypes["OPEN-FINISH"] ? 17 : _context72.t0 === ITypes["FINISH-FINISH"] ? 22 : _context72.t0 === ITypes.FINISH ? 24 : _context72.t0 === ITypes.OPEN ? 34 : _context72.t0 === ITypes.SCROLL ? 36 : _context72.t0 === ITypes.RESERVE ? 38 : 40;
              break;
            case 17:
              url2 = jumpLink || "";
              httpage = /(http|https):\/\//.test(url2);
              biliSchema = /bilibili:/.test(url2);
              if (!httpage && !biliSchema) {
                openOtherScheme(url2, handler_FINISH_FINISH, taskId);
              } else {
                handler_FINISH_FINISH();
                handler_OPEN();
              }
              return _context72.abrupt("break", 40);
            case 22:
              handler_FINISH_FINISH();
              return _context72.abrupt("break", 40);
            case 24:
              if (!(btnBehavior[1] === "shareWatchword")) {
                _context72.next = 31;
                break;
              }
              if (!(watchoutRes.code !== 0)) {
                _context72.next = 29;
                break;
              }
              fetchWatchword(props.task);
              toast$1.info("复制口令失败, 请重试");
              return _context72.abrupt("return");
            case 29:
              shareWatchWord(props.task, watchoutRes.data);
              return _context72.abrupt("break", 40);
            case 31:
              InteractType.FINISH(h5Type, taskId, counter, {
                title: window.__initialState.BaseInfo.title,
                desc: window.__initialState.BaseInfo.shareText,
                pics: window.__initialState.BaseInfo.sharePicture,
                content: window.__initialState.BaseInfo.shareText,
                topicID: topicID,
                topicName: topicName
              }, taskStatus !== 1, btnBehavior[1]);
              if ((indicators == null ? void 0 : indicators[0].cur_value) < (indicators == null ? void 0 : indicators[0].limit)) {
                setTimeout(function () {
                  _default.emit(EventTypes.REFRESH_TASK_STATUS, false);
                }, 1e3);
              }
              return _context72.abrupt("break", 40);
            case 34:
              handler_OPEN();
              return _context72.abrupt("break", 40);
            case 36:
              InteractType.SCROLL(h5Type, jumpPosition);
              return _context72.abrupt("break", 40);
            case 38:
              handler_RESERVE();
              return _context72.abrupt("break", 40);
            case 40:
            case "end":
              return _context72.stop();
          }
        }, _callee71);
      }));
      return function handleTaskBtnClick() {
        return _ref70.apply(this, arguments);
      };
    }();
    var btnText = isLocked ? "未解锁" : multiple && taskStatus !== 3 || taskStatus === 1 ? btnTxt || "去完成" : taskStatus === 2 ? "去领奖" : taskAwardType === 1 ? "已领奖" : "已完成";
    function getBtnBgImage(text, btnTxt2) {
      switch (text) {
        case btnTxt2:
          return btnBgImageGoto || "";
        case "去完成":
          return btnBgImageGoto || "";
        case "已完成":
          return btnBgImageAlready || "";
        case "去领奖":
          return btnBgImageToAward || "";
        default:
          return "";
      }
    }
    var btnImage = getBtnBgImage(btnText, btnTxt);
    return /* @__PURE__ */jsxRuntime.jsxs("div", {
      className: "task-item",
      children: [/* @__PURE__ */jsxRuntime.jsxs("div", {
        className: "task-info",
        children: [taskIcon && /* @__PURE__ */jsxRuntime.jsx("div", {
          className: "icon",
          style: {
            backgroundImage: "url(".concat(taskIcon, ")")
          }
        }), /* @__PURE__ */jsxRuntime.jsxs("div", {
          className: "info-wrapper",
          children: [/* @__PURE__ */jsxRuntime.jsxs("div", {
            className: "title",
            style: {
              color: style.mainTxtColor
            },
            children: [taskName, single && !multiple && "(".concat((_c2 = indicators[indicators.length - 1]) == null ? void 0 : _c2.cur_value, "/").concat((_d2 = indicators[indicators.length - 1]) == null ? void 0 : _d2.limit, ")")]
          }), !multiple && !single && indicators.length > 1 && indicators.map(function (idc, index2) {
            return /* @__PURE__ */jsxRuntime.jsxs("div", {
              className: "zbName",
              style: {
                color: style.mainTxtColor
              },
              children: [idc.name || "指标名称", "（", idc.cur_value, "/", idc.limit, "）"]
            }, idc.name);
          }), /* @__PURE__ */jsxRuntime.jsx("div", {
            className: "des",
            style: {
              color: style.desTxtColor
            },
            children: taskDes
          }), !multiple && /* @__PURE__ */jsxRuntime.jsxs("span", {
            className: "award",
            onClick: throttle(handleAwardBtnClick, 1e3, {
              leading: true,
              trailing: false
            }),
            style: {
              backgroundColor: style.awardBgColor,
              color: style.awardTxtColor,
              cursor: taskAwardType === 1 ? "pointer" : "default"
            },
            children: ["奖励：", awardTypeByNumList.includes(taskAwardType) ? awardTypeMap[taskAwardType] : awardName, taskAwardType === 1 ? /* @__PURE__ */jsxRuntime.jsx("svg", {
              className: "award-go-icon",
              xmlns: "http://www.w3.org/2000/svg",
              viewBox: "0 0 24 24",
              width: "12",
              height: "12",
              children: /* @__PURE__ */jsxRuntime.jsx("path", {
                d: "M8.71967 3.21967C8.42678 3.51257 8.42678 3.98744 8.71967 4.28033L16.0858 11.64645C16.28105 11.84175 16.28105 12.15825 16.0858 12.35355L8.71967 19.71965C8.42678 20.01255 8.42678 20.48745 8.71967 20.78035C9.01257 21.0732 9.48745 21.0732 9.78034 20.78035L17.14645 13.4142C17.9275 12.63315 17.9275 11.36685 17.14645 10.5858L9.78034 3.21967C9.48745 2.92678 9.01257 2.92678 8.71967 3.21967z",
                fill: style.awardTxtColor
              })
            }) : "+".concat(checkpoints[0].count)]
          })]
        }), /* @__PURE__ */jsxRuntime.jsxs("div", {
          className: "btn-wrapper",
          style: !multiple ? {
            alignSelf: "flex-start",
            marginTop: statisticType === 2 ? 8 : taskIcon ? 18 : justif
          } : {},
          children: [showBtn && /* @__PURE__ */jsxRuntime.jsx("div", {
            className: "btn",
            style: {
              backgroundColor: btnImage ? "" : taskStatus === 2 ? "transparent" : style.themeColor,
              color: taskStatus === 2 ? style.themeColor : style.btnTxtColor,
              borderTopLeftRadius: (_e3 = style.borderRadius) == null ? void 0 : _e3[0],
              borderTopRightRadius: (_f2 = style.borderRadius) == null ? void 0 : _f2[1],
              borderBottomRightRadius: (_g2 = style.borderRadius) == null ? void 0 : _g2[2],
              borderBottomLeftRadius: (_h = style.borderRadius) == null ? void 0 : _h[3],
              opacity: taskStatus === 3 ? "0.4" : "1",
              border: taskStatus === 2 ? "1px solid ".concat(style.themeColor) : "none",
              backgroundImage: btnImage ? "url(".concat(btnImage, ")") : "",
              backgroundSize: "cover"
            },
            onClick: handleTaskBtnClick,
            children: btnText
          }), promptText !== "" ? /* @__PURE__ */jsxRuntime.jsx("div", {
            style: {
              color: style.mainTxtColor,
              marginTop: 6,
              fontSize: "11px"
            },
            className: "accumulative",
            children: promptText
          }) : null, statisticType === 2 && /* @__PURE__ */jsxRuntime.jsxs("div", {
            style: {
              color: style.mainTxtColor,
              marginTop: 6
            },
            className: "accumulative",
            children: ["累计", accumulativeCount, "/", limit2, "天"]
          })]
        })]
      }), multiple && checkpoints.length > 1 && /* @__PURE__ */jsxRuntime.jsx(Step, {
        taskIcon: taskIcon,
        style: style,
        checkpoints: checkpoints
      })]
    });
  };
  var defaultTaskData = {
    "style": {
      "width": 350,
      "height": "auto",
      "borderRadius": 4,
      "paddingTop": 10,
      "paddingRight": 10,
      "paddingBottom": 10,
      "paddingLeft": 10,
      "themeColor": "rgba(35, 211, 250, 1)",
      "bgColor": "rgba(0, 20, 60, 1)",
      "mainTxtColor": "rgba(255, 255, 255, 1)",
      "desTxtColor": "rgba(148, 153, 160, 1)",
      "btnTxtColor": "rgba(255, 255, 255, 1)",
      "awardTxtColor": "rgba(255, 255, 255, 0.8)",
      "awardBgColor": "rgba(255, 255, 255, 0.2)",
      change: ""
    },
    tasklist: [{
      "taskId": "demo1",
      "taskName": "每日开播10分钟",
      "counter": "6ERAskkosi",
      "taskType": 1,
      "statisticType": 1,
      "periodType": 1,
      "taskAwardType": 1,
      "awardName": "小电视",
      "taskStatus": 3,
      "indicators": [{
        "name": "",
        "cur_value": 10,
        "limit": 10
      }],
      "checkpoints": [{
        "alias": "每日开播10分钟",
        "awardtype": 1,
        "count": 1,
        "awardname": "小电视",
        "awardsid": "5ERAmwloghvxri00",
        "ztasksid": "6ERAmwloghvz1u00",
        "status": 1,
        "list": [{
          "cur_value": 0,
          "limit": 600
        }]
      }],
      "accumulativeCount": 0,
      taskDes: "完成每日开播，获得一个小电视",
      taskIcon: "https://i0.hdslb.com/bfs/activity-plat/static/20230308/6a806a6a097a741ff3b5beac907646e3/2jFFxKsAwW.png"
    }, {
      "taskId": "demo2",
      "taskName": "投稿里程碑",
      "counter": "6ERAkfocyw",
      "taskType": 1,
      "statisticType": 2,
      "periodType": 1,
      "taskAwardType": 2,
      "awardName": "幸运币",
      "taskStatus": 2,
      "indicators": [{
        "name": "每日投稿1个",
        "cur_value": 1,
        "limit": 1
      }, {
        "name": "每日观看视频10分钟",
        "cur_value": 10,
        "limit": 10
      }],
      "checkpoints": [{
        "alias": "投稿里程碑",
        "awardtype": 1,
        "count": 1,
        "awardname": "幸运币",
        "awardsid": "5ERAmwloghvxri00",
        "ztasksid": "6ERAmwloghvz1t00",
        "status": 1,
        "list": [{
          "cur_value": 0,
          "limit": 7
        }]
      }],
      "accumulativeCount": 7,
      taskDes: "累计完成7天可获得一个幸运币",
      taskIcon: "https://i0.hdslb.com/bfs/activity-plat/static/20230308/6a806a6a097a741ff3b5beac907646e3/93GetjEm0P.png"
    }, {
      "taskId": "demo3",
      "taskName": "每日观看直播",
      "counter": "6ERAmbubll",
      "taskType": 2,
      "statisticType": 1,
      "periodType": 1,
      "taskAwardType": 3,
      "awardName": "抽奖次数",
      "taskStatus": 1,
      "indicators": [{
        "name": "",
        "cur_value": 0,
        "limit": 1
      }],
      "checkpoints": [{
        "alias": "观看10分钟",
        "awardtype": 3,
        "count": 1,
        "awardname": "抽奖次数",
        "awardsid": "",
        "ztasksid": "10ERAmwloghvch100",
        "status": 3,
        "list": [{
          "cur_value": 0,
          "limit": 1
        }]
      }, {
        "alias": "观看20分钟",
        "awardtype": 3,
        "count": 1,
        "awardname": "抽奖次数",
        "awardsid": "",
        "ztasksid": "6ERAmwloghvbo600",
        "status": 2,
        "list": [{
          "cur_value": 0,
          "limit": 1
        }]
      }, {
        "alias": "观看30分钟",
        "awardtype": 3,
        "count": 1,
        "awardname": "抽奖次数",
        "awardsid": "",
        "ztasksid": "10ERAmwloghvchn00",
        "status": 1,
        "list": [{
          "cur_value": 0,
          "limit": 1
        }]
      }],
      "accumulativeCount": 0,
      taskDes: "每观看10分钟可获得1次抽奖",
      taskIcon: "https://i0.hdslb.com/bfs/activity-plat/static/20230308/6a806a6a097a741ff3b5beac907646e3/SRHcq7yR5l.png"
    }]
  };
  if (window.__DEBUG__) {
    defaultTaskData.tasklist = [{
      "accumulativeCount": 0,
      "awardName": "抽奖次数",
      "btnBehavior": ["OPEN-FINISH"],
      "can_edit": 0,
      "checkpoints": [{
        "alias": "签到报名任务",
        "awardname": "抽奖次数",
        "awardsid": "",
        "awardtype": 3,
        "count": 1,
        "list": [{
          "cur_value": 0,
          "limit": 1
        }],
        "status": 1,
        "ztasksid": "6ERAmwloghv3wy00"
      }],
      "counter": "6ERAonqdqa",
      "indicators": [{
        "cur_value": 0,
        "limit": 1,
        "name": "签到报名任务"
      }],
      "jumpLink": "https://qq.com",
      "periodType": 1,
      "statisticType": 1,
      "taskAwardType": 3,
      "taskId": "6ERAmwloghv3wy00",
      "taskName": "签到报名任务",
      "taskStatus": 1,
      "taskType": 1
    }];
  }
  var token = "%[a-f0-9]{2}";
  var singleMatcher = new RegExp("(" + token + ")|([^%]+?)", "gi");
  var multiMatcher = new RegExp("(" + token + ")+", "gi");
  function decodeComponents(components, split2) {
    try {
      return [decodeURIComponent(components.join(""))];
    } catch (_unused13) {}
    if (components.length === 1) {
      return components;
    }
    split2 = split2 || 1;
    var left = components.slice(0, split2);
    var right = components.slice(split2);
    return Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));
  }
  function decode$1(input) {
    try {
      return decodeURIComponent(input);
    } catch (_unused14) {
      var tokens = input.match(singleMatcher) || [];
      for (var i2 = 1; i2 < tokens.length; i2++) {
        input = decodeComponents(tokens, i2).join("");
        tokens = input.match(singleMatcher) || [];
      }
      return input;
    }
  }
  function customDecodeURIComponent(input) {
    var replaceMap = {
      "%FE%FF": "��",
      "%FF%FE": "��"
    };
    var match = multiMatcher.exec(input);
    while (match) {
      try {
        replaceMap[match[0]] = decodeURIComponent(match[0]);
      } catch (_unused15) {
        var result2 = decode$1(match[0]);
        if (result2 !== match[0]) {
          replaceMap[match[0]] = result2;
        }
      }
      match = multiMatcher.exec(input);
    }
    replaceMap["%C2"] = "�";
    var entries = Object.keys(replaceMap);
    for (var _i4 = 0, _entries = entries; _i4 < _entries.length; _i4++) {
      var _key17 = _entries[_i4];
      input = input.replace(new RegExp(_key17, "g"), replaceMap[_key17]);
    }
    return input;
  }
  function decodeUriComponent(encodedURI) {
    if (typeof encodedURI !== "string") {
      throw new TypeError("Expected `encodedURI` to be of type `string`, got `" + _typeof4(encodedURI) + "`");
    }
    try {
      return decodeURIComponent(encodedURI);
    } catch (_unused16) {
      return customDecodeURIComponent(encodedURI);
    }
  }
  function splitOnFirst(string, separator) {
    if (!(typeof string === "string" && typeof separator === "string")) {
      throw new TypeError("Expected the arguments to be of type `string`");
    }
    if (string === "" || separator === "") {
      return [];
    }
    var separatorIndex = string.indexOf(separator);
    if (separatorIndex === -1) {
      return [];
    }
    return [string.slice(0, separatorIndex), string.slice(separatorIndex + separator.length)];
  }
  function includeKeys(object, predicate) {
    var result2 = {};
    if (Array.isArray(predicate)) {
      var _iterator8 = _createForOfIteratorHelper2(predicate),
        _step8;
      try {
        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
          var _key18 = _step8.value;
          var descriptor = Object.getOwnPropertyDescriptor(object, _key18);
          if (descriptor == null ? void 0 : descriptor.enumerable) {
            Object.defineProperty(result2, _key18, descriptor);
          }
        }
      } catch (err) {
        _iterator8.e(err);
      } finally {
        _iterator8.f();
      }
    } else {
      var _iterator9 = _createForOfIteratorHelper2(Reflect.ownKeys(object)),
        _step9;
      try {
        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
          var _key19 = _step9.value;
          var _descriptor = Object.getOwnPropertyDescriptor(object, _key19);
          if (_descriptor.enumerable) {
            var value = object[_key19];
            if (predicate(_key19, value, object)) {
              Object.defineProperty(result2, _key19, _descriptor);
            }
          }
        }
      } catch (err) {
        _iterator9.e(err);
      } finally {
        _iterator9.f();
      }
    }
    return result2;
  }
  var isNullOrUndefined = function isNullOrUndefined(value) {
    return value === null || value === void 0;
  };
  var strictUriEncode = function strictUriEncode(string) {
    return encodeURIComponent(string).replaceAll(/[!'()*]/g, function (x2) {
      return "%".concat(x2.charCodeAt(0).toString(16).toUpperCase());
    });
  };
  var encodeFragmentIdentifier = Symbol("encodeFragmentIdentifier");
  function encoderForArrayFormat(options) {
    switch (options.arrayFormat) {
      case "index":
        {
          return function (key) {
            return function (result2, value) {
              var index2 = result2.length;
              if (value === void 0 || options.skipNull && value === null || options.skipEmptyString && value === "") {
                return result2;
              }
              if (value === null) {
                return [].concat(_toConsumableArray2(result2), [[encode(key, options), "[", index2, "]"].join("")]);
              }
              return [].concat(_toConsumableArray2(result2), [[encode(key, options), "[", encode(index2, options), "]=", encode(value, options)].join("")]);
            };
          };
        }
      case "bracket":
        {
          return function (key) {
            return function (result2, value) {
              if (value === void 0 || options.skipNull && value === null || options.skipEmptyString && value === "") {
                return result2;
              }
              if (value === null) {
                return [].concat(_toConsumableArray2(result2), [[encode(key, options), "[]"].join("")]);
              }
              return [].concat(_toConsumableArray2(result2), [[encode(key, options), "[]=", encode(value, options)].join("")]);
            };
          };
        }
      case "colon-list-separator":
        {
          return function (key) {
            return function (result2, value) {
              if (value === void 0 || options.skipNull && value === null || options.skipEmptyString && value === "") {
                return result2;
              }
              if (value === null) {
                return [].concat(_toConsumableArray2(result2), [[encode(key, options), ":list="].join("")]);
              }
              return [].concat(_toConsumableArray2(result2), [[encode(key, options), ":list=", encode(value, options)].join("")]);
            };
          };
        }
      case "comma":
      case "separator":
      case "bracket-separator":
        {
          var keyValueSeparator = options.arrayFormat === "bracket-separator" ? "[]=" : "=";
          return function (key) {
            return function (result2, value) {
              if (value === void 0 || options.skipNull && value === null || options.skipEmptyString && value === "") {
                return result2;
              }
              value = value === null ? "" : value;
              if (result2.length === 0) {
                return [[encode(key, options), keyValueSeparator, encode(value, options)].join("")];
              }
              return [[result2, encode(value, options)].join(options.arrayFormatSeparator)];
            };
          };
        }
      default:
        {
          return function (key) {
            return function (result2, value) {
              if (value === void 0 || options.skipNull && value === null || options.skipEmptyString && value === "") {
                return result2;
              }
              if (value === null) {
                return [].concat(_toConsumableArray2(result2), [encode(key, options)]);
              }
              return [].concat(_toConsumableArray2(result2), [[encode(key, options), "=", encode(value, options)].join("")]);
            };
          };
        }
    }
  }
  function parserForArrayFormat(options) {
    var result2;
    switch (options.arrayFormat) {
      case "index":
        {
          return function (key, value, accumulator) {
            result2 = /\[(\d*)]$/.exec(key);
            key = key.replace(/\[\d*]$/, "");
            if (!result2) {
              accumulator[key] = value;
              return;
            }
            if (accumulator[key] === void 0) {
              accumulator[key] = {};
            }
            accumulator[key][result2[1]] = value;
          };
        }
      case "bracket":
        {
          return function (key, value, accumulator) {
            result2 = /(\[])$/.exec(key);
            key = key.replace(/\[]$/, "");
            if (!result2) {
              accumulator[key] = value;
              return;
            }
            if (accumulator[key] === void 0) {
              accumulator[key] = [value];
              return;
            }
            accumulator[key] = [].concat(_toConsumableArray2(accumulator[key]), [value]);
          };
        }
      case "colon-list-separator":
        {
          return function (key, value, accumulator) {
            result2 = /(:list)$/.exec(key);
            key = key.replace(/:list$/, "");
            if (!result2) {
              accumulator[key] = value;
              return;
            }
            if (accumulator[key] === void 0) {
              accumulator[key] = [value];
              return;
            }
            accumulator[key] = [].concat(_toConsumableArray2(accumulator[key]), [value]);
          };
        }
      case "comma":
      case "separator":
        {
          return function (key, value, accumulator) {
            var isArray2 = typeof value === "string" && value.includes(options.arrayFormatSeparator);
            var isEncodedArray = typeof value === "string" && !isArray2 && decode(value, options).includes(options.arrayFormatSeparator);
            value = isEncodedArray ? decode(value, options) : value;
            var newValue = isArray2 || isEncodedArray ? value.split(options.arrayFormatSeparator).map(function (item) {
              return decode(item, options);
            }) : value === null ? value : decode(value, options);
            accumulator[key] = newValue;
          };
        }
      case "bracket-separator":
        {
          return function (key, value, accumulator) {
            var isArray2 = /(\[])$/.test(key);
            key = key.replace(/\[]$/, "");
            if (!isArray2) {
              accumulator[key] = value ? decode(value, options) : value;
              return;
            }
            var arrayValue = value === null ? [] : value.split(options.arrayFormatSeparator).map(function (item) {
              return decode(item, options);
            });
            if (accumulator[key] === void 0) {
              accumulator[key] = arrayValue;
              return;
            }
            accumulator[key] = [].concat(_toConsumableArray2(accumulator[key]), _toConsumableArray2(arrayValue));
          };
        }
      default:
        {
          return function (key, value, accumulator) {
            if (accumulator[key] === void 0) {
              accumulator[key] = value;
              return;
            }
            accumulator[key] = [].concat(_toConsumableArray2([accumulator[key]].flat()), [value]);
          };
        }
    }
  }
  function validateArrayFormatSeparator(value) {
    if (typeof value !== "string" || value.length !== 1) {
      throw new TypeError("arrayFormatSeparator must be single character string");
    }
  }
  function encode(value, options) {
    if (options.encode) {
      return options.strict ? strictUriEncode(value) : encodeURIComponent(value);
    }
    return value;
  }
  function decode(value, options) {
    if (options.decode) {
      return decodeUriComponent(value);
    }
    return value;
  }
  function keysSorter(input) {
    if (Array.isArray(input)) {
      return input.sort();
    }
    if (_typeof4(input) === "object") {
      return keysSorter(Object.keys(input)).sort(function (a2, b2) {
        return Number(a2) - Number(b2);
      }).map(function (key) {
        return input[key];
      });
    }
    return input;
  }
  function removeHash(input) {
    var hashStart = input.indexOf("#");
    if (hashStart !== -1) {
      input = input.slice(0, hashStart);
    }
    return input;
  }
  function getHash(url2) {
    var hash = "";
    var hashStart = url2.indexOf("#");
    if (hashStart !== -1) {
      hash = url2.slice(hashStart);
    }
    return hash;
  }
  function parseValue(value, options) {
    if (options.parseNumbers && !Number.isNaN(Number(value)) && typeof value === "string" && value.trim() !== "") {
      value = Number(value);
    } else if (options.parseBooleans && value !== null && (value.toLowerCase() === "true" || value.toLowerCase() === "false")) {
      value = value.toLowerCase() === "true";
    }
    return value;
  }
  function extract(input) {
    input = removeHash(input);
    var queryStart = input.indexOf("?");
    if (queryStart === -1) {
      return "";
    }
    return input.slice(queryStart + 1);
  }
  function parse(query2, options) {
    options = _objectSpread({
      decode: true,
      sort: true,
      arrayFormat: "none",
      arrayFormatSeparator: ",",
      parseNumbers: false,
      parseBooleans: false
    }, options);
    validateArrayFormatSeparator(options.arrayFormatSeparator);
    var formatter = parserForArrayFormat(options);
    var returnValue = /* @__PURE__ */Object.create(null);
    if (typeof query2 !== "string") {
      return returnValue;
    }
    query2 = query2.trim().replace(/^[?#&]/, "");
    if (!query2) {
      return returnValue;
    }
    var _iterator10 = _createForOfIteratorHelper2(query2.split("&")),
      _step10;
    try {
      for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
        var parameter = _step10.value;
        if (parameter === "") {
          continue;
        }
        var parameter_ = options.decode ? parameter.replaceAll("+", " ") : parameter;
        var _splitOnFirst = splitOnFirst(parameter_, "="),
          _splitOnFirst2 = _slicedToArray(_splitOnFirst, 2),
          _key21 = _splitOnFirst2[0],
          _value = _splitOnFirst2[1];
        if (_key21 === void 0) {
          _key21 = parameter_;
        }
        _value = _value === void 0 ? null : ["comma", "separator", "bracket-separator"].includes(options.arrayFormat) ? _value : decode(_value, options);
        formatter(decode(_key21, options), _value, returnValue);
      }
    } catch (err) {
      _iterator10.e(err);
    } finally {
      _iterator10.f();
    }
    for (var _i5 = 0, _Object$entries = Object.entries(returnValue); _i5 < _Object$entries.length; _i5++) {
      var _Object$entries$_i = _slicedToArray(_Object$entries[_i5], 2),
        _key20 = _Object$entries$_i[0],
        value = _Object$entries$_i[1];
      if (_typeof4(value) === "object" && value !== null) {
        for (var _i6 = 0, _Object$entries2 = Object.entries(value); _i6 < _Object$entries2.length; _i6++) {
          var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i6], 2),
            key2 = _Object$entries2$_i[0],
            value2 = _Object$entries2$_i[1];
          value[key2] = parseValue(value2, options);
        }
      } else {
        returnValue[_key20] = parseValue(value, options);
      }
    }
    if (options.sort === false) {
      return returnValue;
    }
    return (options.sort === true ? Object.keys(returnValue).sort() : Object.keys(returnValue).sort(options.sort)).reduce(function (result2, key) {
      var value = returnValue[key];
      result2[key] = Boolean(value) && _typeof4(value) === "object" && !Array.isArray(value) ? keysSorter(value) : value;
      return result2;
    }, /* @__PURE__ */Object.create(null));
  }
  function stringify(object, options) {
    if (!object) {
      return "";
    }
    options = _objectSpread({
      encode: true,
      strict: true,
      arrayFormat: "none",
      arrayFormatSeparator: ","
    }, options);
    validateArrayFormatSeparator(options.arrayFormatSeparator);
    var shouldFilter = function shouldFilter(key) {
      return options.skipNull && isNullOrUndefined(object[key]) || options.skipEmptyString && object[key] === "";
    };
    var formatter = encoderForArrayFormat(options);
    var objectCopy = {};
    for (var _i7 = 0, _Object$entries3 = Object.entries(object); _i7 < _Object$entries3.length; _i7++) {
      var _Object$entries3$_i = _slicedToArray(_Object$entries3[_i7], 2),
        _key22 = _Object$entries3$_i[0],
        value = _Object$entries3$_i[1];
      if (!shouldFilter(_key22)) {
        objectCopy[_key22] = value;
      }
    }
    var keys2 = Object.keys(objectCopy);
    if (options.sort !== false) {
      keys2.sort(options.sort);
    }
    return keys2.map(function (key) {
      var value = object[key];
      if (value === void 0) {
        return "";
      }
      if (value === null) {
        return encode(key, options);
      }
      if (Array.isArray(value)) {
        if (value.length === 0 && options.arrayFormat === "bracket-separator") {
          return encode(key, options) + "[]";
        }
        return value.reduce(formatter(key), []).join("&");
      }
      return encode(key, options) + "=" + encode(value, options);
    }).filter(function (x2) {
      return x2.length > 0;
    }).join("&");
  }
  function parseUrl(url2, options) {
    var _ref71;
    var _a3;
    options = _objectSpread({
      decode: true
    }, options);
    var _splitOnFirst3 = splitOnFirst(url2, "#"),
      _splitOnFirst4 = _slicedToArray(_splitOnFirst3, 2),
      url_ = _splitOnFirst4[0],
      hash = _splitOnFirst4[1];
    if (url_ === void 0) {
      url_ = url2;
    }
    return _objectSpread({
      url: (_ref71 = (_a3 = url_ == null ? void 0 : url_.split("?")) == null ? void 0 : _a3[0]) !== null && _ref71 !== void 0 ? _ref71 : "",
      query: parse(extract(url2), options)
    }, options && options.parseFragmentIdentifier && hash ? {
      fragmentIdentifier: decode(hash, options)
    } : {});
  }
  function stringifyUrl(object, options) {
    options = _objectSpread(_defineProperty2({
      encode: true,
      strict: true
    }, encodeFragmentIdentifier, true), options);
    var url2 = removeHash(object.url).split("?")[0] || "";
    var queryFromUrl = extract(object.url);
    var query2 = _objectSpread(_objectSpread({}, parse(queryFromUrl, {
      sort: false
    })), object.query);
    var queryString2 = stringify(query2, options);
    queryString2 && (queryString2 = "?".concat(queryString2));
    var hash = getHash(object.url);
    if (typeof object.fragmentIdentifier === "string") {
      var urlObjectForFragmentEncode = new URL(url2);
      urlObjectForFragmentEncode.hash = object.fragmentIdentifier;
      hash = options[encodeFragmentIdentifier] ? urlObjectForFragmentEncode.hash : "#".concat(object.fragmentIdentifier);
    }
    return "".concat(url2).concat(queryString2).concat(hash);
  }
  function pick(input, filter, options) {
    options = _objectSpread(_defineProperty2({
      parseFragmentIdentifier: true
    }, encodeFragmentIdentifier, false), options);
    var _parseUrl = parseUrl(input, options),
      url2 = _parseUrl.url,
      query2 = _parseUrl.query,
      fragmentIdentifier = _parseUrl.fragmentIdentifier;
    return stringifyUrl({
      url: url2,
      query: includeKeys(query2, filter),
      fragmentIdentifier: fragmentIdentifier
    }, options);
  }
  function exclude(input, filter, options) {
    var exclusionFilter = Array.isArray(filter) ? function (key) {
      return !filter.includes(key);
    } : function (key, value) {
      return !filter(key, value);
    };
    return pick(input, exclusionFilter, options);
  }
  var queryString = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({
    __proto__: null,
    exclude: exclude,
    extract: extract,
    parse: parse,
    parseUrl: parseUrl,
    pick: pick,
    stringify: stringify,
    stringifyUrl: stringifyUrl
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  var Component = function Component(props) {
    var _a3, _b2, _c2, _d2, _e3, _f2, _g2, _h, _i2, _j, _k, _l, _m, _n2, _o2, _p, _q, _r;
    var _props$style3 = props.style,
      style = _props$style3 === void 0 ? defaultTaskData.style : _props$style3;
    var tasklist = props.tasklist;
    tasklist = (tasklist == null ? void 0 : tasklist.length) > 0 ? tasklist : defaultTaskData.tasklist;
    var _React$useState5 = React.useState(true),
      _React$useState6 = _slicedToArray(_React$useState5, 2),
      singleTask = _React$useState6[0],
      setSingleTask = _React$useState6[1];
    var _React$useState7 = React.useState(false),
      _React$useState8 = _slicedToArray(_React$useState7, 2),
      refresh = _React$useState8[0],
      setRefresh = _React$useState8[1];
    var _React$useState9 = React.useState([]),
      _React$useState10 = _slicedToArray(_React$useState9, 2),
      tsks = _React$useState10[0],
      setTsks = _React$useState10[1];
    var _React$useState11 = React.useState(false),
      _React$useState12 = _slicedToArray(_React$useState11, 2),
      isLocked = _React$useState12[0],
      setIsLocked = _React$useState12[1];
    var requestRef = React.useRef({
      num: 1,
      isRequest: false
    });
    var adapterNumber = function adapterNumber(value) {
      var _ref72 = window.$eva || {},
        _ref72$remBase = _ref72.remBase,
        remBase = _ref72$remBase === void 0 ? 50 : _ref72$remBase;
      return "".concat(value / remBase, "rem");
    };
    var _fetchProgressData = /*#__PURE__*/function () {
      var _ref73 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee72() {
        var forceCycle,
          task_ids,
          _args73 = arguments;
        return _regeneratorRuntime().wrap(function _callee72$(_context73) {
          while (1) switch (_context73.prev = _context73.next) {
            case 0:
              forceCycle = _args73.length > 0 && _args73[0] !== undefined ? _args73[0] : true;
              if (!requestRef.current.isRequest) {
                _context73.next = 3;
                break;
              }
              return _context73.abrupt("return");
            case 3:
              requestRef.current.isRequest = true;
              task_ids = tasklist.map(function (item) {
                return item.taskId;
              }).filter(function (item) {
                return !!item;
              }).join();
              if (task_ids !== "demo1,demo2,demo3") {
                getListTotalFromTaskCombinService(task_ids).then(function (res) {
                  if ((res == null ? void 0 : res.list) && (res == null ? void 0 : res.task_refresh_conf)) {
                    requestRef.current.num++;
                    var taskRefreshList = res == null ? void 0 : res.task_refresh_conf;
                    var rst = tasklist.map(function (tsk, index2) {
                      var _a4, _b3;
                      var t2 = res == null ? void 0 : res.list[index2];
                      if (!t2) return tsk;
                      var checkpoints = t2.statistic_type === 2 && ((_a4 = t2.accumulative_check_points) == null ? void 0 : _a4.length) >= 1 ? t2.accumulative_check_points.map(function (cp) {
                        return {
                          alias: "累计" + (cp.list[0].limit || 0) + "天",
                          status: cp.status,
                          awardtype: cp.award_type,
                          awardname: cp.award_name,
                          awardsid: cp.award_sid,
                          ztasksid: cp.sid,
                          list: cp.list,
                          count: cp.count
                        };
                      }) : t2.check_points.map(function (cp) {
                        return {
                          alias: cp.alias,
                          awardtype: cp.award_type,
                          count: cp.count,
                          awardname: cp.award_name,
                          awardsid: cp.award_sid,
                          ztasksid: cp.sid,
                          status: cp.status,
                          // 每关是否完成
                          list: cp.list
                        };
                      });
                      return _objectSpread(_objectSpread({}, tsk), {}, {
                        // des、icon等手输项
                        taskId: t2.task_id,
                        promptText: t2.prompt_text,
                        taskName: t2.task_name,
                        counter: t2.counter[0],
                        // 用作签到用
                        taskType: t2.task_type,
                        statisticType: t2.statistic_type,
                        periodType: t2.period_type,
                        taskAwardType: t2.award_type,
                        // 1:奖品 2:积分 3:抽奖次数 5 投票次数
                        awardName: (_b3 = checkpoints[0]) == null ? void 0 : _b3.awardname,
                        // 无关卡或单个关卡的时候才会用到
                        taskStatus: t2.task_status,
                        accumulativeCount: t2.accumulative_count,
                        indicators: t2.indicators,
                        // 指标
                        checkpoints: checkpoints
                      });
                    });
                    setTsks(rst);
                    if (forceCycle && taskRefreshList.is_switch_on) {
                      if (requestRef.current.num <= taskRefreshList.query_times) {
                        setTimeout(function () {
                          requestRef.current.isRequest = false;
                          _fetchProgressData();
                        }, taskRefreshList.query_speed_ms);
                      } else {
                        requestRef.current.num = 1;
                        requestRef.current.isRequest = false;
                      }
                    } else {
                      setTimeout(function () {
                        requestRef.current.isRequest = false;
                      }, 500);
                    }
                  }
                  _default.emit("REFRESH_POINT_STATUS_EVA");
                });
              } else {
                setTsks(tasklist);
              }
            case 6:
            case "end":
              return _context73.stop();
          }
        }, _callee72);
      }));
      return function fetchProgressData() {
        return _ref73.apply(this, arguments);
      };
    }();
    var handleRefresh = /*#__PURE__*/function () {
      var _ref74 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee73() {
        return _regeneratorRuntime().wrap(function _callee73$(_context74) {
          while (1) switch (_context74.prev = _context74.next) {
            case 0:
              if (!refresh) {
                _context74.next = 2;
                break;
              }
              return _context74.abrupt("return");
            case 2:
              requestRef.current.num = 1;
              requestRef.current.isRequest = false;
              _context74.next = 6;
              return _fetchProgressData();
            case 6:
              setRefresh(true);
              setTimeout(function () {
                setRefresh(false);
              }, 2e3);
            case 8:
            case "end":
              return _context74.stop();
          }
        }, _callee73);
      }));
      return function handleRefresh() {
        return _ref74.apply(this, arguments);
      };
    }();
    React.useEffect(function () {
      if (tasklist.length > 0) {
        setSingleTask(tasklist.length > 0 && tasklist.length === 1);
        _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee74() {
          return _regeneratorRuntime().wrap(function _callee74$(_context75) {
            while (1) switch (_context75.prev = _context75.next) {
              case 0:
                _context75.next = 2;
                return _fetchProgressData(true);
              case 2:
                setSingleTask(tasklist.length > 0 && tasklist.length === 1);
              case 3:
              case "end":
                return _context75.stop();
            }
          }, _callee74);
        }))();
      } else {
        setSingleTask(true);
        setTsks([]);
      }
    }, [tasklist.length, style.change]);
    React.useEffect(function () {
      setTsks(_toConsumableArray2(tasklist));
    }, [tasklist]);
    React.useEffect(function () {
      if (!isAdmin) _default.on(EventTypes.REFRESH_TASK_STATUS, /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee75() {
        var loop,
          _args76 = arguments;
        return _regeneratorRuntime().wrap(function _callee75$(_context76) {
          while (1) switch (_context76.prev = _context76.next) {
            case 0:
              loop = _args76.length > 0 && _args76[0] !== undefined ? _args76[0] : true;
              _context76.next = 3;
              return _fetchProgressData();
            case 3:
              return _context76.abrupt("return", _context76.sent);
            case 4:
            case "end":
              return _context76.stop();
          }
        }, _callee75);
      })));
      var query2 = queryString.parse(location.search);
      if (query2.watchword && query2.activity_uid) {
        bindWatchwordCombine({
          watchword: query2.watchword,
          activity_uid: query2.activity_uid
        });
      }
      document.onvisibilitychange = function () {
        if (document.visibilityState === "visible") {
          setTimeout(function () {
            _default.emit(EventTypes.REFRESH_TASK_STATUS);
          }, 1e3);
        }
      };
      return function () {
        _default.off(EventTypes.REFRESH_TASK_STATUS);
      };
    }, []);
    function watchSignUp() {
      var signedUp = window.__SignedUp;
      if (signedUp === false) {
        setIsLocked(true);
      } else if (signedUp === true) {
        setIsLocked(false);
      }
    }
    React.useEffect(function () {
      watchSignUp();
      var interval = setInterval(watchSignUp, 300);
      return function () {
        clearInterval(interval);
      };
    }, []);
    return /* @__PURE__ */jsxRuntime.jsx("div", {
      children: singleTask ? /* @__PURE__ */jsxRuntime.jsxs("div", {
        className: "singletask-wrapper",
        style: {
          backgroundColor: style.bgColor,
          borderTopLeftRadius: (_a3 = style.borderRadius) == null ? void 0 : _a3[0],
          borderTopRightRadius: (_b2 = style.borderRadius) == null ? void 0 : _b2[1],
          borderBottomRightRadius: (_c2 = style.borderRadius) == null ? void 0 : _c2[2],
          borderBottomLeftRadius: (_d2 = style.borderRadius) == null ? void 0 : _d2[3],
          width: adapterNumber(Number(style.width)),
          height: adapterNumber(Number(style.height)),
          paddingTop: (_e3 = style.padding) == null ? void 0 : _e3[0],
          paddingRight: (_f2 = style.padding) == null ? void 0 : _f2[1],
          paddingBottom: (_g2 = style.padding) == null ? void 0 : _g2[2],
          paddingLeft: (_h = style.padding) == null ? void 0 : _h[3]
        },
        children: [/* @__PURE__ */jsxRuntime.jsxs("div", {
          className: "multitask-header",
          children: [/* @__PURE__ */jsxRuntime.jsx("div", {
            className: "multitask-header__title"
          }), /* @__PURE__ */jsxRuntime.jsxs("div", {
            className: "multitask-header__refresh",
            style: {
              cursor: "pointer"
            },
            onClick: handleRefresh,
            children: [/* @__PURE__ */jsxRuntime.jsx("span", {
              style: {
                lineHeight: 0.5,
                animation: ""
              },
              className: refresh ? "refresh-animation" : "",
              children: /* @__PURE__ */jsxRuntime.jsx("svg", {
                width: "16",
                height: "17",
                viewBox: "0 0 16 17",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: /* @__PURE__ */jsxRuntime.jsx("path", {
                  fillRule: "evenodd",
                  clipRule: "evenodd",
                  d: "M8.49919 14.1663C8.49919 14.4425 8.27533 14.6663 7.99919 14.6663C4.59343 14.6663 1.83252 11.9054 1.83252 8.49967C1.83252 6.93173 2.41799 5.5005 3.38127 4.41276H2.00586C1.72972 4.41276 1.50586 4.1889 1.50586 3.91276C1.50586 3.63662 1.72972 3.41276 2.00586 3.41276H4.67253C4.94867 3.41276 5.17253 3.63662 5.17253 3.91276V6.57943C5.17253 6.85557 4.94867 7.07943 4.67253 7.07943C4.39638 7.07943 4.17253 6.85557 4.17253 6.57943V5.02807C3.33946 5.94569 2.83252 7.16346 2.83252 8.49967C2.83252 11.3531 5.14571 13.6663 7.99919 13.6663C8.27533 13.6663 8.49919 13.8902 8.49919 14.1663ZM11.8325 11.9639L11.8325 10.41C11.8325 10.1339 11.6087 9.91 11.3325 9.91C11.0564 9.91 10.8325 10.1339 10.8325 10.41V13.0767C10.8325 13.0768 10.8325 13.077 10.8325 13.0771C10.8313 13.1812 10.8624 13.2866 10.9284 13.3772C11.0428 13.5341 11.2314 13.605 11.4109 13.5767L13.9992 13.5767C14.2753 13.5767 14.4992 13.3528 14.4992 13.0767C14.4992 12.8005 14.2753 12.5767 13.9992 12.5767L12.6259 12.5767C13.5839 11.4902 14.1659 10.0629 14.1659 8.49967C14.1659 5.09392 11.4049 2.33301 7.99919 2.33301C7.72304 2.33301 7.49919 2.55687 7.49919 2.83301C7.49919 3.10915 7.72304 3.33301 7.99919 3.33301C10.8527 3.33301 13.1659 5.6462 13.1659 8.49967C13.1659 9.83231 12.6616 11.0472 11.8325 11.9639Z",
                  fill: style.desTxtColor,
                  fillOpacity: "0.6"
                })
              })
            }), /* @__PURE__ */jsxRuntime.jsx("span", {
              style: {
                marginLeft: 5.5,
                color: style.desTxtColor
              },
              children: "刷新"
            })]
          })]
        }), ((_i2 = tsks[0]) == null ? void 0 : _i2.taskId) && ((_j = tsks[0]) == null ? void 0 : _j.indicators) && /* @__PURE__ */jsxRuntime.jsx(TaskH5, {
          style: style,
          task: tsks[0],
          isLocked: isLocked
        })]
      }) : /* @__PURE__ */jsxRuntime.jsxs("div", {
        className: "multitask-wrapper",
        style: {
          backgroundColor: style.bgColor,
          borderTopLeftRadius: (_k = style.borderRadius) == null ? void 0 : _k[0],
          borderTopRightRadius: (_l = style.borderRadius) == null ? void 0 : _l[1],
          borderBottomRightRadius: (_m = style.borderRadius) == null ? void 0 : _m[2],
          borderBottomLeftRadius: (_n2 = style.borderRadius) == null ? void 0 : _n2[3],
          width: adapterNumber(Number(style.width)),
          height: adapterNumber(Number(style.height)),
          paddingTop: (_o2 = style.padding) == null ? void 0 : _o2[0],
          paddingRight: (_p = style.padding) == null ? void 0 : _p[1],
          paddingBottom: (_q = style.padding) == null ? void 0 : _q[2],
          paddingLeft: (_r = style.padding) == null ? void 0 : _r[3]
        },
        children: [/* @__PURE__ */jsxRuntime.jsxs("div", {
          className: "multitask-header",
          children: [/* @__PURE__ */jsxRuntime.jsx("div", {
            className: "multitask-header__title"
          }), /* @__PURE__ */jsxRuntime.jsxs("div", {
            className: "multitask-header__refresh",
            style: {
              cursor: "pointer"
            },
            onClick: handleRefresh,
            children: [/* @__PURE__ */jsxRuntime.jsx("span", {
              style: {
                lineHeight: 0.5,
                animation: ""
              },
              className: refresh ? "refresh-animation" : "",
              children: /* @__PURE__ */jsxRuntime.jsx("svg", {
                width: "16",
                height: "17",
                viewBox: "0 0 16 17",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: /* @__PURE__ */jsxRuntime.jsx("path", {
                  fillRule: "evenodd",
                  clipRule: "evenodd",
                  d: "M8.49919 14.1663C8.49919 14.4425 8.27533 14.6663 7.99919 14.6663C4.59343 14.6663 1.83252 11.9054 1.83252 8.49967C1.83252 6.93173 2.41799 5.5005 3.38127 4.41276H2.00586C1.72972 4.41276 1.50586 4.1889 1.50586 3.91276C1.50586 3.63662 1.72972 3.41276 2.00586 3.41276H4.67253C4.94867 3.41276 5.17253 3.63662 5.17253 3.91276V6.57943C5.17253 6.85557 4.94867 7.07943 4.67253 7.07943C4.39638 7.07943 4.17253 6.85557 4.17253 6.57943V5.02807C3.33946 5.94569 2.83252 7.16346 2.83252 8.49967C2.83252 11.3531 5.14571 13.6663 7.99919 13.6663C8.27533 13.6663 8.49919 13.8902 8.49919 14.1663ZM11.8325 11.9639L11.8325 10.41C11.8325 10.1339 11.6087 9.91 11.3325 9.91C11.0564 9.91 10.8325 10.1339 10.8325 10.41V13.0767C10.8325 13.0768 10.8325 13.077 10.8325 13.0771C10.8313 13.1812 10.8624 13.2866 10.9284 13.3772C11.0428 13.5341 11.2314 13.605 11.4109 13.5767L13.9992 13.5767C14.2753 13.5767 14.4992 13.3528 14.4992 13.0767C14.4992 12.8005 14.2753 12.5767 13.9992 12.5767L12.6259 12.5767C13.5839 11.4902 14.1659 10.0629 14.1659 8.49967C14.1659 5.09392 11.4049 2.33301 7.99919 2.33301C7.72304 2.33301 7.49919 2.55687 7.49919 2.83301C7.49919 3.10915 7.72304 3.33301 7.99919 3.33301C10.8527 3.33301 13.1659 5.6462 13.1659 8.49967C13.1659 9.83231 12.6616 11.0472 11.8325 11.9639Z",
                  fill: style.desTxtColor,
                  fillOpacity: "0.6"
                })
              })
            }), /* @__PURE__ */jsxRuntime.jsx("span", {
              style: {
                marginLeft: 5.5,
                color: style.desTxtColor
              },
              children: "刷新"
            })]
          })]
        }), /* @__PURE__ */jsxRuntime.jsx("div", {
          className: "multitask-body",
          children: tsks.map(function (item, index2) {
            return item.taskId && item.indicators && /* @__PURE__ */jsxRuntime.jsx(TaskH5, {
              no: index2,
              style: style,
              task: item,
              isLocked: isLocked
            }, index2);
          })
        })]
      })
    });
  };
  var o$1 = i$1(function (i2, o2) {
      !function (e2, a2) {
        var r2 = "function",
          n2 = "undefined",
          t2 = "object",
          s2 = "string",
          b2 = "major",
          w2 = "model",
          d2 = "name",
          l2 = "type",
          c2 = "vendor",
          u2 = "version",
          p2 = "architecture",
          m2 = "console",
          h2 = "mobile",
          f2 = "tablet",
          v2 = "smarttv",
          g2 = "wearable",
          x2 = "embedded",
          k2 = "Amazon",
          y2 = "Apple",
          _2 = "ASUS",
          T2 = "BlackBerry",
          S2 = "Browser",
          q2 = "Chrome",
          z2 = "Firefox",
          N2 = "Google",
          A2 = "Huawei",
          E2 = "LG",
          O2 = "Microsoft",
          U2 = "Motorola",
          C2 = "Opera",
          P2 = "Samsung",
          j2 = "Sharp",
          B2 = "Sony",
          M2 = "Xiaomi",
          R2 = "Zebra",
          D2 = "Facebook",
          V2 = "Chromium OS",
          I2 = "Mac OS",
          G2 = " Browser",
          L2 = function L2(i3) {
            for (var e3 = {}, o3 = 0; o3 < i3.length; o3++) e3[i3[o3].toUpperCase()] = i3[o3];
            return e3;
          },
          F2 = function F2(i3, e3) {
            return _typeof4(i3) === s2 && -1 !== H2(e3).indexOf(H2(i3));
          },
          H2 = function H2(i3) {
            return i3.toLowerCase();
          },
          Z2 = function Z2(i3, e3) {
            if (_typeof4(i3) === s2) return i3 = i3.replace(/^\s\s*/, ""), _typeof4(e3) === n2 ? i3 : i3.substring(0, 500);
          },
          $2 = function $2(i3, e3) {
            for (var o3, n3, s3, b3, w3, d3, l3 = 0; l3 < e3.length && !w3;) {
              var c3 = e3[l3],
                u3 = e3[l3 + 1];
              for (o3 = n3 = 0; o3 < c3.length && !w3 && c3[o3];) if (w3 = c3[o3++].exec(i3)) for (s3 = 0; s3 < u3.length; s3++) d3 = w3[++n3], _typeof4(b3 = u3[s3]) === t2 && b3.length > 0 ? 2 === b3.length ? this[b3[0]] = _typeof4(b3[1]) == r2 ? b3[1].call(this, d3) : b3[1] : 3 === b3.length ? this[b3[0]] = _typeof4(b3[1]) !== r2 || b3[1].exec && b3[1].test ? d3 ? d3.replace(b3[1], b3[2]) : a2 : d3 ? b3[1].call(this, d3, b3[2]) : a2 : 4 === b3.length && (this[b3[0]] = d3 ? b3[3].call(this, d3.replace(b3[1], b3[2])) : a2) : this[b3] = d3 || a2;
              l3 += 2;
            }
          },
          W2 = function W2(i3, e3) {
            for (var o3 in e3) if (_typeof4(e3[o3]) === t2 && e3[o3].length > 0) {
              for (var r3 = 0; r3 < e3[o3].length; r3++) if (F2(e3[o3][r3], i3)) return "?" === o3 ? a2 : o3;
            } else if (F2(e3[o3], i3)) return "?" === o3 ? a2 : o3;
            return e3.hasOwnProperty("*") ? e3["*"] : i3;
          },
          X2 = {
            ME: "4.90",
            "NT 3.11": "NT3.51",
            "NT 4.0": "NT4.0",
            2e3: "NT 5.0",
            XP: ["NT 5.1", "NT 5.2"],
            Vista: "NT 6.0",
            7: "NT 6.1",
            8: "NT 6.2",
            8.1: "NT 6.3",
            10: ["NT 6.4", "NT 10.0"],
            RT: "ARM"
          },
          K2 = {
            browser: [[/\b(?:crmo|crios)\/([\w\.]+)/i], [u2, [d2, "Chrome"]], [/edg(?:e|ios|a)?\/([\w\.]+)/i], [u2, [d2, "Edge"]], [/(opera mini)\/([-\w\.]+)/i, /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i, /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i], [d2, u2], [/opios[\/ ]+([\w\.]+)/i], [u2, [d2, C2 + " Mini"]], [/\bop(?:rg)?x\/([\w\.]+)/i], [u2, [d2, C2 + " GX"]], [/\bopr\/([\w\.]+)/i], [u2, [d2, C2]], [/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i], [u2, [d2, "Baidu"]], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i, /(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i, /(?:ms|\()(ie) ([\w\.]+)/i, /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i, /(heytap|ovi)browser\/([\d\.]+)/i, /(weibo)__([\d\.]+)/i], [d2, u2], [/quark(?:pc)?\/([-\w\.]+)/i], [u2, [d2, "Quark"]], [/\bddg\/([\w\.]+)/i], [u2, [d2, "DuckDuckGo"]], [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i], [u2, [d2, "UC" + S2]], [/microm.+\bqbcore\/([\w\.]+)/i, /\bqbcore\/([\w\.]+).+microm/i, /micromessenger\/([\w\.]+)/i], [u2, [d2, "WeChat"]], [/konqueror\/([\w\.]+)/i], [u2, [d2, "Konqueror"]], [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i], [u2, [d2, "IE"]], [/ya(?:search)?browser\/([\w\.]+)/i], [u2, [d2, "Yandex"]], [/slbrowser\/([\w\.]+)/i], [u2, [d2, "Smart Lenovo " + S2]], [/(avast|avg)\/([\w\.]+)/i], [[d2, /(.+)/, "$1 Secure " + S2], u2], [/\bfocus\/([\w\.]+)/i], [u2, [d2, z2 + " Focus"]], [/\bopt\/([\w\.]+)/i], [u2, [d2, C2 + " Touch"]], [/coc_coc\w+\/([\w\.]+)/i], [u2, [d2, "Coc Coc"]], [/dolfin\/([\w\.]+)/i], [u2, [d2, "Dolphin"]], [/coast\/([\w\.]+)/i], [u2, [d2, C2 + " Coast"]], [/miuibrowser\/([\w\.]+)/i], [u2, [d2, "MIUI " + S2]], [/fxios\/([-\w\.]+)/i], [u2, [d2, z2]], [/\bqihu|(qi?ho?o?|360)browser/i], [[d2, "360" + G2]], [/\b(qq)\/([\w\.]+)/i], [[d2, /(.+)/, "$1Browser"], u2], [/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i], [[d2, /(.+)/, "$1" + G2], u2], [/samsungbrowser\/([\w\.]+)/i], [u2, [d2, P2 + " Internet"]], [/(comodo_dragon)\/([\w\.]+)/i], [[d2, /_/g, " "], u2], [/metasr[\/ ]?([\d\.]+)/i], [u2, [d2, "Sogou Explorer"]], [/(sogou)mo\w+\/([\d\.]+)/i], [[d2, "Sogou Mobile"], u2], [/(electron)\/([\w\.]+) safari/i, /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i, /m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i], [d2, u2], [/(lbbrowser|rekonq)/i, /\[(linkedin)app\]/i], [d2], [/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i], [[d2, D2], u2], [/(Klarna)\/([\w\.]+)/i, /(kakao(?:talk|story))[\/ ]([\w\.]+)/i, /(naver)\(.*?(\d+\.[\w\.]+).*\)/i, /safari (line)\/([\w\.]+)/i, /\b(line)\/([\w\.]+)\/iab/i, /(alipay)client\/([\w\.]+)/i, /(twitter)(?:and| f.+e\/([\w\.]+))/i, /(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i], [d2, u2], [/\bgsa\/([\w\.]+) .*safari\//i], [u2, [d2, "GSA"]], [/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i], [u2, [d2, "TikTok"]], [/headlesschrome(?:\/([\w\.]+)| )/i], [u2, [d2, q2 + " Headless"]], [/ wv\).+(chrome)\/([\w\.]+)/i], [[d2, q2 + " WebView"], u2], [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i], [u2, [d2, "Android " + S2]], [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i], [d2, u2], [/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i], [u2, [d2, "Mobile Safari"]], [/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i], [u2, d2], [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i], [d2, [u2, W2, {
              "1.0": "/8",
              1.2: "/1",
              1.3: "/3",
              "2.0": "/412",
              "2.0.2": "/416",
              "2.0.3": "/417",
              "2.0.4": "/419",
              "?": "/"
            }]], [/(webkit|khtml)\/([\w\.]+)/i], [d2, u2], [/(navigator|netscape\d?)\/([-\w\.]+)/i], [[d2, "Netscape"], u2], [/(wolvic)\/([\w\.]+)/i], [d2, u2], [/mobile vr; rv:([\w\.]+)\).+firefox/i], [u2, [d2, z2 + " Reality"]], [/ekiohf.+(flow)\/([\w\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i, /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i, /(firefox)\/([\w\.]+)/i, /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i, /(links) \(([\w\.]+)/i], [d2, [u2, /_/g, "."]], [/(cobalt)\/([\w\.]+)/i], [d2, [u2, /master.|lts./, ""]]],
            cpu: [[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i], [[p2, "amd64"]], [/(ia32(?=;))/i], [[p2, H2]], [/((?:i[346]|x)86)[;\)]/i], [[p2, "ia32"]], [/\b(aarch64|arm(v?8e?l?|_?64))\b/i], [[p2, "arm64"]], [/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i], [[p2, "armhf"]], [/windows (ce|mobile); ppc;/i], [[p2, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i], [[p2, /ower/, "", H2]], [/(sun4\w)[;\)]/i], [[p2, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i], [[p2, H2]]],
            device: [[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i], [w2, [c2, P2], [l2, f2]], [/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i, /samsung[- ]((?!sm-[lr])[-\w]+)/i, /sec-(sgh\w+)/i], [w2, [c2, P2], [l2, h2]], [/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i], [w2, [c2, y2], [l2, h2]], [/\((ipad);[-\w\),; ]+apple/i, /applecoremedia\/[\w\.]+ \((ipad)/i, /\b(ipad)\d\d?,\d\d?[;\]].+ios/i], [w2, [c2, y2], [l2, f2]], [/(macintosh);/i], [w2, [c2, y2]], [/\b(sh-?[altvz]?\d\d[a-ekm]?)/i], [w2, [c2, j2], [l2, h2]], [/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i], [w2, [c2, A2], [l2, f2]], [/(?:huawei|honor)([-\w ]+)[;\)]/i, /\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i], [w2, [c2, A2], [l2, h2]], [/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i, /\b; (\w+) build\/hm\1/i, /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i, /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i, /oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i, /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i], [[w2, /_/g, " "], [c2, M2], [l2, h2]], [/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i, /\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i], [[w2, /_/g, " "], [c2, M2], [l2, f2]], [/; (\w+) bui.+ oppo/i, /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i], [w2, [c2, "OPPO"], [l2, h2]], [/\b(opd2\d{3}a?) bui/i], [w2, [c2, "OPPO"], [l2, f2]], [/vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i], [w2, [c2, "Vivo"], [l2, h2]], [/\b(rmx[1-3]\d{3})(?: bui|;|\))/i], [w2, [c2, "Realme"], [l2, h2]], [/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i, /\bmot(?:orola)?[- ](\w*)/i, /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i], [w2, [c2, U2], [l2, h2]], [/\b(mz60\d|xoom[2 ]{0,2}) build\//i], [w2, [c2, U2], [l2, f2]], [/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i], [w2, [c2, E2], [l2, f2]], [/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i, /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i, /\blg-?([\d\w]+) bui/i], [w2, [c2, E2], [l2, h2]], [/(ideatab[-\w ]+)/i, /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i], [w2, [c2, "Lenovo"], [l2, f2]], [/(?:maemo|nokia).*(n900|lumia \d+)/i, /nokia[-_ ]?([-\w\.]*)/i], [[w2, /_/g, " "], [c2, "Nokia"], [l2, h2]], [/(pixel c)\b/i], [w2, [c2, N2], [l2, f2]], [/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i], [w2, [c2, N2], [l2, h2]], [/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [w2, [c2, B2], [l2, h2]], [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i], [[w2, "Xperia Tablet"], [c2, B2], [l2, f2]], [/ (kb2005|in20[12]5|be20[12][59])\b/i, /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i], [w2, [c2, "OnePlus"], [l2, h2]], [/(alexa)webm/i, /(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i, /(kf[a-z]+)( bui|\)).+silk\//i], [w2, [c2, k2], [l2, f2]], [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i], [[w2, /(.+)/g, "Fire Phone $1"], [c2, k2], [l2, h2]], [/(playbook);[-\w\),; ]+(rim)/i], [w2, c2, [l2, f2]], [/\b((?:bb[a-f]|st[hv])100-\d)/i, /\(bb10; (\w+)/i], [w2, [c2, T2], [l2, h2]], [/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i], [w2, [c2, _2], [l2, f2]], [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i], [w2, [c2, _2], [l2, h2]], [/(nexus 9)/i], [w2, [c2, "HTC"], [l2, f2]], [/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i, /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i, /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i], [c2, [w2, /_/g, " "], [l2, h2]], [/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i], [w2, [c2, "TCL"], [l2, f2]], [/(itel) ((\w+))/i], [[c2, H2], w2, [l2, W2, {
              tablet: ["p10001l", "w7001"],
              "*": "mobile"
            }]], [/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i], [w2, [c2, "Acer"], [l2, f2]], [/droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i], [w2, [c2, "Meizu"], [l2, h2]], [/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i], [w2, [c2, "Ulefone"], [l2, h2]], [/droid.+; (a(?:015|06[35]|142p?))/i], [w2, [c2, "Nothing"], [l2, h2]], [/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i, /(hp) ([\w ]+\w)/i, /(asus)-?(\w+)/i, /(microsoft); (lumia[\w ]+)/i, /(lenovo)[-_ ]?([-\w]+)/i, /(jolla)/i, /(oppo) ?([\w ]+) bui/i], [c2, w2, [l2, h2]], [/(kobo)\s(ereader|touch)/i, /(archos) (gamepad2?)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\/([\w\.]+)/i, /(nook)[\w ]+build\/(\w+)/i, /(dell) (strea[kpr\d ]*[\dko])/i, /(le[- ]+pan)[- ]+(\w{1,9}) bui/i, /(trinity)[- ]*(t\d{3}) bui/i, /(gigaset)[- ]+(q\w{1,9}) bui/i, /(vodafone) ([\w ]+)(?:\)| bui)/i], [c2, w2, [l2, f2]], [/(surface duo)/i], [w2, [c2, O2], [l2, f2]], [/droid [\d\.]+; (fp\du?)(?: b|\))/i], [w2, [c2, "Fairphone"], [l2, h2]], [/(u304aa)/i], [w2, [c2, "AT&T"], [l2, h2]], [/\bsie-(\w*)/i], [w2, [c2, "Siemens"], [l2, h2]], [/\b(rct\w+) b/i], [w2, [c2, "RCA"], [l2, f2]], [/\b(venue[\d ]{2,7}) b/i], [w2, [c2, "Dell"], [l2, f2]], [/\b(q(?:mv|ta)\w+) b/i], [w2, [c2, "Verizon"], [l2, f2]], [/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i], [w2, [c2, "Barnes & Noble"], [l2, f2]], [/\b(tm\d{3}\w+) b/i], [w2, [c2, "NuVision"], [l2, f2]], [/\b(k88) b/i], [w2, [c2, "ZTE"], [l2, f2]], [/\b(nx\d{3}j) b/i], [w2, [c2, "ZTE"], [l2, h2]], [/\b(gen\d{3}) b.+49h/i], [w2, [c2, "Swiss"], [l2, h2]], [/\b(zur\d{3}) b/i], [w2, [c2, "Swiss"], [l2, f2]], [/\b((zeki)?tb.*\b) b/i], [w2, [c2, "Zeki"], [l2, f2]], [/\b([yr]\d{2}) b/i, /\b(dragon[- ]+touch |dt)(\w{5}) b/i], [[c2, "Dragon Touch"], w2, [l2, f2]], [/\b(ns-?\w{0,9}) b/i], [w2, [c2, "Insignia"], [l2, f2]], [/\b((nxa|next)-?\w{0,9}) b/i], [w2, [c2, "NextBook"], [l2, f2]], [/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i], [[c2, "Voice"], w2, [l2, h2]], [/\b(lvtel\-)?(v1[12]) b/i], [[c2, "LvTel"], w2, [l2, h2]], [/\b(ph-1) /i], [w2, [c2, "Essential"], [l2, h2]], [/\b(v(100md|700na|7011|917g).*\b) b/i], [w2, [c2, "Envizen"], [l2, f2]], [/\b(trio[-\w\. ]+) b/i], [w2, [c2, "MachSpeed"], [l2, f2]], [/\btu_(1491) b/i], [w2, [c2, "Rotor"], [l2, f2]], [/(shield[\w ]+) b/i], [w2, [c2, "Nvidia"], [l2, f2]], [/(sprint) (\w+)/i], [c2, w2, [l2, h2]], [/(kin\.[onetw]{3})/i], [[w2, /\./g, " "], [c2, O2], [l2, h2]], [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i], [w2, [c2, R2], [l2, f2]], [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i], [w2, [c2, R2], [l2, h2]], [/smart-tv.+(samsung)/i], [c2, [l2, v2]], [/hbbtv.+maple;(\d+)/i], [[w2, /^/, "SmartTV"], [c2, P2], [l2, v2]], [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i], [[c2, E2], [l2, v2]], [/(apple) ?tv/i], [c2, [w2, y2 + " TV"], [l2, v2]], [/crkey/i], [[w2, q2 + "cast"], [c2, N2], [l2, v2]], [/droid.+aft(\w+)( bui|\))/i], [w2, [c2, k2], [l2, v2]], [/\(dtv[\);].+(aquos)/i, /(aquos-tv[\w ]+)\)/i], [w2, [c2, j2], [l2, v2]], [/(bravia[\w ]+)( bui|\))/i], [w2, [c2, B2], [l2, v2]], [/(mitv-\w{5}) bui/i], [w2, [c2, M2], [l2, v2]], [/Hbbtv.*(technisat) (.*);/i], [c2, w2, [l2, v2]], [/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i, /hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i], [[c2, Z2], [w2, Z2], [l2, v2]], [/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i], [[l2, v2]], [/(ouya)/i, /(nintendo) ([wids3utch]+)/i], [c2, w2, [l2, m2]], [/droid.+; (shield) bui/i], [w2, [c2, "Nvidia"], [l2, m2]], [/(playstation [345portablevi]+)/i], [w2, [c2, B2], [l2, m2]], [/\b(xbox(?: one)?(?!; xbox))[\); ]/i], [w2, [c2, O2], [l2, m2]], [/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i], [w2, [c2, P2], [l2, g2]], [/((pebble))app/i], [c2, w2, [l2, g2]], [/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i], [w2, [c2, y2], [l2, g2]], [/droid.+; (glass) \d/i], [w2, [c2, N2], [l2, g2]], [/droid.+; (wt63?0{2,3})\)/i], [w2, [c2, R2], [l2, g2]], [/(quest( \d| pro)?)/i], [w2, [c2, D2], [l2, g2]], [/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i], [c2, [l2, x2]], [/(aeobc)\b/i], [w2, [c2, k2], [l2, x2]], [/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i], [w2, [l2, h2]], [/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i], [w2, [l2, f2]], [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i], [[l2, f2]], [/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i], [[l2, h2]], [/(android[-\w\. ]{0,9});.+buil/i], [w2, [c2, "Generic"]]],
            engine: [[/windows.+ edge\/([\w\.]+)/i], [u2, [d2, "EdgeHTML"]], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i], [u2, [d2, "Blink"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /ekioh(flow)\/([\w\.]+)/i, /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i, /(icab)[\/ ]([23]\.[\d\.]+)/i, /\b(libweb)/i], [d2, u2], [/rv\:([\w\.]{1,9})\b.+(gecko)/i], [u2, d2]],
            os: [[/microsoft (windows) (vista|xp)/i], [d2, u2], [/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i], [d2, [u2, W2, X2]], [/windows nt 6\.2; (arm)/i, /windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i, /(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i], [[u2, W2, X2], [d2, "Windows"]], [/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i, /(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i, /cfnetwork\/.+darwin/i], [[u2, /_/g, "."], [d2, "iOS"]], [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+haiku)/i], [[d2, I2], [u2, /_/g, "."]], [/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i], [u2, d2], [/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i, /(blackberry)\w*\/([\w\.]*)/i, /(tizen|kaios)[\/ ]([\w\.]+)/i, /\((series40);/i], [d2, u2], [/\(bb(10);/i], [u2, [d2, T2]], [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i], [u2, [d2, "Symbian"]], [/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i], [u2, [d2, z2 + " OS"]], [/web0s;.+rt(tv)/i, /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i], [u2, [d2, "webOS"]], [/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i], [u2, [d2, "watchOS"]], [/crkey\/([\d\.]+)/i], [u2, [d2, q2 + "cast"]], [/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i], [[d2, V2], u2], [/panasonic;(viera)/i, /(netrange)mmh/i, /(nettv)\/(\d+\.[\w\.]+)/i, /(nintendo|playstation) ([wids345portablevuch]+)/i, /(xbox); +xbox ([^\);]+)/i, /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i, /(mint)[\/\(\) ]?(\w*)/i, /(mageia|vectorlinux)[; ]/i, /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i, /(hurd|linux) ?([\w\.]*)/i, /(gnu) ?([\w\.]*)/i, /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i, /(haiku) (\w+)/i], [d2, u2], [/(sunos) ?([\w\.\d]*)/i], [[d2, "Solaris"], u2], [/((?:open)?solaris)[-\/ ]?([\w\.]*)/i, /(aix) ((\d)(?=\.|\)| )[\w\.])*/i, /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, /(unix) ?([\w\.]*)/i], [d2, u2]]
          },
          _Q = function Q2(i3, o3) {
            if (_typeof4(i3) === t2 && (o3 = i3, i3 = a2), !(this instanceof _Q)) return new _Q(i3, o3).getResult();
            var m3 = _typeof4(e2) !== n2 && e2.navigator ? e2.navigator : a2,
              v3 = i3 || (m3 && m3.userAgent ? m3.userAgent : ""),
              g3 = m3 && m3.userAgentData ? m3.userAgentData : a2,
              x3 = o3 ? function (i4, e3) {
                var o4 = {};
                for (var a3 in i4) o4[a3] = e3[a3] && e3[a3].length % 2 == 0 ? e3[a3].concat(i4[a3]) : i4[a3];
                return o4;
              }(K2, o3) : K2,
              k3 = m3 && m3.userAgent == v3;
            return this.getBrowser = function () {
              var i4,
                e3 = {};
              return e3[d2] = a2, e3[u2] = a2, $2.call(e3, v3, x3.browser), e3[b2] = _typeof4(i4 = e3[u2]) === s2 ? i4.replace(/[^\d\.]/g, "").split(".")[0] : a2, k3 && m3 && m3.brave && _typeof4(m3.brave.isBrave) == r2 && (e3[d2] = "Brave"), e3;
            }, this.getCPU = function () {
              var i4 = {};
              return i4[p2] = a2, $2.call(i4, v3, x3.cpu), i4;
            }, this.getDevice = function () {
              var i4 = {};
              return i4[c2] = a2, i4[w2] = a2, i4[l2] = a2, $2.call(i4, v3, x3.device), k3 && !i4[l2] && g3 && g3.mobile && (i4[l2] = h2), k3 && "Macintosh" == i4[w2] && m3 && _typeof4(m3.standalone) !== n2 && m3.maxTouchPoints && m3.maxTouchPoints > 2 && (i4[w2] = "iPad", i4[l2] = f2), i4;
            }, this.getEngine = function () {
              var i4 = {};
              return i4[d2] = a2, i4[u2] = a2, $2.call(i4, v3, x3.engine), i4;
            }, this.getOS = function () {
              var i4 = {};
              return i4[d2] = a2, i4[u2] = a2, $2.call(i4, v3, x3.os), k3 && !i4[d2] && g3 && g3.platform && "Unknown" != g3.platform && (i4[d2] = g3.platform.replace(/chrome os/i, V2).replace(/macos/i, I2)), i4;
            }, this.getResult = function () {
              return {
                ua: this.getUA(),
                browser: this.getBrowser(),
                engine: this.getEngine(),
                os: this.getOS(),
                device: this.getDevice(),
                cpu: this.getCPU()
              };
            }, this.getUA = function () {
              return v3;
            }, this.setUA = function (i4) {
              return v3 = _typeof4(i4) === s2 && i4.length > 500 ? Z2(i4, 500) : i4, this;
            }, this.setUA(v3), this;
          };
        _Q.VERSION = "0.7.39", _Q.BROWSER = L2([d2, u2, b2]), _Q.CPU = L2([p2]), _Q.DEVICE = L2([w2, c2, l2, m2, h2, v2, f2, g2, x2]), _Q.ENGINE = _Q.OS = L2([d2, u2]), i2.exports && (o2 = i2.exports = _Q), o2.UAParser = _Q;
        var Y2 = _typeof4(e2) !== n2 && (e2.jQuery || e2.Zepto);
        if (Y2 && !Y2.ua) {
          var J2 = new _Q();
          Y2.ua = J2.getResult(), Y2.ua.get = function () {
            return J2.getUA();
          }, Y2.ua.set = function (i3) {
            J2.setUA(i3);
            var e3 = J2.getResult();
            for (var o3 in e3) Y2.ua[o3] = e3[o3];
          };
        }
      }("object" == (typeof window === "undefined" ? "undefined" : _typeof4(window)) ? window : r$1);
    }),
    a$1 = o$1.UAParser;
  var uaParser9a55bc2f = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({
    __proto__: null,
    UAParser: a$1,
    __moduleExports: o$1,
    "default": o$1
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  var e = self && self.__spreadArray || function (e2, i2, r2) {
      if (r2 || 2 === arguments.length) for (var n2, t2 = 0, o2 = i2.length; t2 < o2; t2++) !n2 && t2 in i2 || (n2 || (n2 = Array.prototype.slice.call(i2, 0, t2)), n2[t2] = i2[t2]);
      return e2.concat(n2 || Array.prototype.slice.call(i2));
    },
    i = void 0;
  function r() {
    if (void 0 === i) {
      if ("object" != (typeof window === "undefined" ? "undefined" : _typeof4(window))) return false;
      var e2 = window;
      if (!e2.biliBridgePc && window !== window.parent && window.top) try {
        e2.biliBridgePc = e2.top.biliBridgePc;
      } catch (e3) {}
      i = "object" == _typeof4(e2.biliBridgePc);
    }
    return i;
  }
  function n() {
    return r() && /biliBrowser/i.test(navigator.userAgent);
  }
  function t(e2) {
    for (var i2, n2 = [], t2 = 1; t2 < arguments.length; t2++) n2[t2 - 1] = arguments[t2];
    return r() ? (i2 = window.biliBridgePc)[e2].apply(i2, n2) : Promise.reject(new Error("Not in biliPc!"));
  }
  function o(i2, r2) {
    for (var n2 = [], o2 = 2; o2 < arguments.length; o2++) n2[o2 - 2] = arguments[o2];
    return t.apply(void 0, e(["callNative", i2, r2], n2, false));
  }
  function l(i2, r2) {
    for (var n2 = [], o2 = 2; o2 < arguments.length; o2++) n2[o2 - 2] = arguments[o2];
    return t.apply(void 0, e(["callNativeSync", i2, r2], n2, false));
  }
  function c(e2, i2) {
    return t("once", e2, i2);
  }
  function a(e2, i2) {
    return t("addListener", e2, i2);
  }
  function p(e2) {
    return t("removeAllListeners", e2);
  }
  function s(e2) {
    e2 && e2.style && (e2.style.webkitAppRegion = "drag");
  }
  function f(e2) {
    e2 && e2.style && (e2.style.webkitAppRegion = "no-drag");
  }
  var d = {
    isInBiliPc: r,
    isInBiliPcBrowser: n,
    callNative: o,
    callNativeSync: l,
    once: c,
    addListener: a,
    removeAllListeners: p,
    setAppRegionDrag: s,
    setAppRegionNoDrag: f
  };
  var biliBridge_min04ad1937 = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({
    __proto__: null,
    addListener: a,
    callNative: o,
    callNativeSync: l,
    "default": d,
    isInBiliPc: r,
    isInBiliPcBrowser: n,
    once: c,
    removeAllListeners: p,
    setAppRegionDrag: s,
    setAppRegionNoDrag: f
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  return Component;
});
